typedef unsigned char   undefined;

typedef unsigned char    byte;
typedef unsigned char    dwfenc;
typedef unsigned int    dword;
typedef unsigned long    qword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned long    undefined8;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef struct eh_frame_hdr eh_frame_hdr, *Peh_frame_hdr;

struct eh_frame_hdr {
    byte eh_frame_hdr_version; // Exception Handler Frame Header Version
    dwfenc eh_frame_pointer_encoding; // Exception Handler Frame Pointer Encoding
    dwfenc eh_frame_desc_entry_count_encoding; // Encoding of # of Exception Handler FDEs
    dwfenc eh_frame_table_encoding; // Exception Handler Table Encoding
};

typedef struct NoteGnuPropertyElement_4 NoteGnuPropertyElement_4, *PNoteGnuPropertyElement_4;

struct NoteGnuPropertyElement_4 {
    dword prType;
    dword prDatasz;
    byte data[4];
};

typedef struct fde_table_entry fde_table_entry, *Pfde_table_entry;

struct fde_table_entry {
    dword initial_loc; // Initial Location
    dword data_loc; // Data location
};

typedef ushort sa_family_t;

typedef void _IO_lock_t;

typedef struct _IO_marker _IO_marker, *P_IO_marker;

typedef struct _IO_FILE _IO_FILE, *P_IO_FILE;

typedef long __off_t;

typedef long __off64_t;

typedef ulong size_t;

struct _IO_FILE {
    int _flags;
    char *_IO_read_ptr;
    char *_IO_read_end;
    char *_IO_read_base;
    char *_IO_write_base;
    char *_IO_write_ptr;
    char *_IO_write_end;
    char *_IO_buf_base;
    char *_IO_buf_end;
    char *_IO_save_base;
    char *_IO_backup_base;
    char *_IO_save_end;
    struct _IO_marker *_markers;
    struct _IO_FILE *_chain;
    int _fileno;
    int _flags2;
    __off_t _old_offset;
    ushort _cur_column;
    char _vtable_offset;
    char _shortbuf[1];
    _IO_lock_t *_lock;
    __off64_t _offset;
    void *__pad1;
    void *__pad2;
    void *__pad3;
    void *__pad4;
    size_t __pad5;
    int _mode;
    char _unused2[20];
};

struct _IO_marker {
    struct _IO_marker *_next;
    struct _IO_FILE *_sbuf;
    int _pos;
};

typedef struct stat stat, *Pstat;

typedef ulong __dev_t;

typedef ulong __ino_t;

typedef ulong __nlink_t;

typedef uint __mode_t;

typedef uint __uid_t;

typedef uint __gid_t;

typedef long __blksize_t;

typedef long __blkcnt_t;

typedef struct timespec timespec, *Ptimespec;

typedef long __time_t;

struct timespec {
    __time_t tv_sec;
    long tv_nsec;
};

struct stat {
    __dev_t st_dev;
    __ino_t st_ino;
    __nlink_t st_nlink;
    __mode_t st_mode;
    __uid_t st_uid;
    __gid_t st_gid;
    int __pad0;
    __dev_t st_rdev;
    __off_t st_size;
    __blksize_t st_blksize;
    __blkcnt_t st_blocks;
    struct timespec st_atim;
    struct timespec st_mtim;
    struct timespec st_ctim;
    long __unused[3];
};

typedef struct utsname utsname, *Putsname;

struct utsname {
    char sysname[65];
    char nodename[65];
    char release[65];
    char version[65];
    char machine[65];
    char domainname[65];
};

typedef struct timeval timeval, *Ptimeval;

typedef long __suseconds_t;

struct timeval {
    __time_t tv_sec;
    __suseconds_t tv_usec;
};

typedef struct addrinfo addrinfo, *Paddrinfo;

typedef uint __socklen_t;

typedef __socklen_t socklen_t;

typedef struct sockaddr sockaddr, *Psockaddr;

struct addrinfo {
    int ai_flags;
    int ai_family;
    int ai_socktype;
    int ai_protocol;
    socklen_t ai_addrlen;
    struct sockaddr *ai_addr;
    char *ai_canonname;
    struct addrinfo *ai_next;
};

struct sockaddr {
    sa_family_t sa_family;
    char sa_data[14];
};

typedef struct _IO_FILE FILE;

typedef long __fd_mask;

typedef struct fd_set fd_set, *Pfd_set;

struct fd_set {
    __fd_mask fds_bits[16];
};

typedef long __ssize_t;

typedef __ssize_t ssize_t;

typedef struct __dirstream __dirstream, *P__dirstream;

struct __dirstream {
};

typedef struct __dirstream DIR;

typedef struct dirent dirent, *Pdirent;

struct dirent {
    __ino_t d_ino;
    __off_t d_off;
    ushort d_reclen;
    uchar d_type;
    char d_name[256];
};

typedef struct iovec iovec, *Piovec;

struct iovec {
    void *iov_base;
    size_t iov_len;
};

typedef int (*__compar_fn_t)(void *, void *);

typedef enum Elf_ProgramHeaderType {
    PT_NULL=0,
    PT_LOAD=1,
    PT_DYNAMIC=2,
    PT_INTERP=3,
    PT_NOTE=4,
    PT_SHLIB=5,
    PT_PHDR=6,
    PT_TLS=7,
    PT_GNU_EH_FRAME=1685382480,
    PT_GNU_STACK=1685382481,
    PT_GNU_RELRO=1685382482
} Elf_ProgramHeaderType;

typedef struct Elf64_Shdr Elf64_Shdr, *PElf64_Shdr;

typedef enum Elf_SectionHeaderType {
    SHT_NULL=0,
    SHT_PROGBITS=1,
    SHT_SYMTAB=2,
    SHT_STRTAB=3,
    SHT_RELA=4,
    SHT_HASH=5,
    SHT_DYNAMIC=6,
    SHT_NOTE=7,
    SHT_NOBITS=8,
    SHT_REL=9,
    SHT_SHLIB=10,
    SHT_DYNSYM=11,
    SHT_INIT_ARRAY=14,
    SHT_FINI_ARRAY=15,
    SHT_PREINIT_ARRAY=16,
    SHT_GROUP=17,
    SHT_SYMTAB_SHNDX=18,
    SHT_ANDROID_REL=1610612737,
    SHT_ANDROID_RELA=1610612738,
    SHT_GNU_ATTRIBUTES=1879048181,
    SHT_GNU_HASH=1879048182,
    SHT_GNU_LIBLIST=1879048183,
    SHT_CHECKSUM=1879048184,
    SHT_SUNW_move=1879048186,
    SHT_SUNW_COMDAT=1879048187,
    SHT_SUNW_syminfo=1879048188,
    SHT_GNU_verdef=1879048189,
    SHT_GNU_verneed=1879048190,
    SHT_GNU_versym=1879048191
} Elf_SectionHeaderType;

struct Elf64_Shdr {
    dword sh_name;
    enum Elf_SectionHeaderType sh_type;
    qword sh_flags;
    qword sh_addr;
    qword sh_offset;
    qword sh_size;
    dword sh_link;
    dword sh_info;
    qword sh_addralign;
    qword sh_entsize;
};

typedef struct Elf64_Dyn Elf64_Dyn, *PElf64_Dyn;

typedef enum Elf64_DynTag {
    DT_NULL=0,
    DT_NEEDED=1,
    DT_PLTRELSZ=2,
    DT_PLTGOT=3,
    DT_HASH=4,
    DT_STRTAB=5,
    DT_SYMTAB=6,
    DT_RELA=7,
    DT_RELASZ=8,
    DT_RELAENT=9,
    DT_STRSZ=10,
    DT_SYMENT=11,
    DT_INIT=12,
    DT_FINI=13,
    DT_SONAME=14,
    DT_RPATH=15,
    DT_SYMBOLIC=16,
    DT_REL=17,
    DT_RELSZ=18,
    DT_RELENT=19,
    DT_PLTREL=20,
    DT_DEBUG=21,
    DT_TEXTREL=22,
    DT_JMPREL=23,
    DT_BIND_NOW=24,
    DT_INIT_ARRAY=25,
    DT_FINI_ARRAY=26,
    DT_INIT_ARRAYSZ=27,
    DT_FINI_ARRAYSZ=28,
    DT_RUNPATH=29,
    DT_FLAGS=30,
    DT_PREINIT_ARRAY=32,
    DT_PREINIT_ARRAYSZ=33,
    DT_RELRSZ=35,
    DT_RELR=36,
    DT_RELRENT=37,
    DT_ANDROID_REL=1610612751,
    DT_ANDROID_RELSZ=1610612752,
    DT_ANDROID_RELA=1610612753,
    DT_ANDROID_RELASZ=1610612754,
    DT_ANDROID_RELR=1879040000,
    DT_ANDROID_RELRSZ=1879040001,
    DT_ANDROID_RELRENT=1879040003,
    DT_GNU_PRELINKED=1879047669,
    DT_GNU_CONFLICTSZ=1879047670,
    DT_GNU_LIBLISTSZ=1879047671,
    DT_CHECKSUM=1879047672,
    DT_PLTPADSZ=1879047673,
    DT_MOVEENT=1879047674,
    DT_MOVESZ=1879047675,
    DT_FEATURE_1=1879047676,
    DT_POSFLAG_1=1879047677,
    DT_SYMINSZ=1879047678,
    DT_SYMINENT=1879047679,
    DT_GNU_XHASH=1879047924,
    DT_GNU_HASH=1879047925,
    DT_TLSDESC_PLT=1879047926,
    DT_TLSDESC_GOT=1879047927,
    DT_GNU_CONFLICT=1879047928,
    DT_GNU_LIBLIST=1879047929,
    DT_CONFIG=1879047930,
    DT_DEPAUDIT=1879047931,
    DT_AUDIT=1879047932,
    DT_PLTPAD=1879047933,
    DT_MOVETAB=1879047934,
    DT_SYMINFO=1879047935,
    DT_VERSYM=1879048176,
    DT_RELACOUNT=1879048185,
    DT_RELCOUNT=1879048186,
    DT_FLAGS_1=1879048187,
    DT_VERDEF=1879048188,
    DT_VERDEFNUM=1879048189,
    DT_VERNEED=1879048190,
    DT_VERNEEDNUM=1879048191,
    DT_AUXILIARY=2147483645,
    DT_FILTER=2147483647
} Elf64_DynTag;

struct Elf64_Dyn {
    enum Elf64_DynTag d_tag;
    qword d_val;
};

typedef struct Elf64_Sym Elf64_Sym, *PElf64_Sym;

struct Elf64_Sym {
    dword st_name;
    byte st_info;
    byte st_other;
    word st_shndx;
    qword st_value;
    qword st_size;
};

typedef struct GnuBuildId GnuBuildId, *PGnuBuildId;

struct GnuBuildId {
    dword namesz; // Length of name field
    dword descsz; // Length of description field
    dword type; // Vendor specific type
    char name[4]; // Vendor name
    byte hash[20];
};

typedef struct NoteGnuProperty_4 NoteGnuProperty_4, *PNoteGnuProperty_4;

struct NoteGnuProperty_4 {
    dword namesz; // Length of name field
    dword descsz; // Length of description field
    dword type; // Vendor specific type
    char name[4]; // Vendor name
};

typedef struct Elf64_Ehdr Elf64_Ehdr, *PElf64_Ehdr;

struct Elf64_Ehdr {
    byte e_ident_magic_num;
    char e_ident_magic_str[3];
    byte e_ident_class;
    byte e_ident_data;
    byte e_ident_version;
    byte e_ident_osabi;
    byte e_ident_abiversion;
    byte e_ident_pad[7];
    word e_type;
    word e_machine;
    dword e_version;
    qword e_entry;
    qword e_phoff;
    qword e_shoff;
    dword e_flags;
    word e_ehsize;
    word e_phentsize;
    word e_phnum;
    word e_shentsize;
    word e_shnum;
    word e_shstrndx;
};

typedef struct Elf64_Rela Elf64_Rela, *PElf64_Rela;

struct Elf64_Rela {
    qword r_offset; // location to apply the relocation action
    qword r_info; // the symbol table index and the type of relocation
    qword r_addend; // a constant addend used to compute the relocatable field value
};

typedef struct Elf64_Phdr Elf64_Phdr, *PElf64_Phdr;

struct Elf64_Phdr {
    enum Elf_ProgramHeaderType p_type;
    dword p_flags;
    qword p_offset;
    qword p_vaddr;
    qword p_paddr;
    qword p_filesz;
    qword p_memsz;
    qword p_align;
};

typedef struct lconv lconv, *Plconv;

struct lconv {
    char *decimal_point;
    char *thousands_sep;
    char *grouping;
    char *int_curr_symbol;
    char *currency_symbol;
    char *mon_decimal_point;
    char *mon_thousands_sep;
    char *mon_grouping;
    char *positive_sign;
    char *negative_sign;
    char int_frac_digits;
    char frac_digits;
    char p_cs_precedes;
    char p_sep_by_space;
    char n_cs_precedes;
    char n_sep_by_space;
    char p_sign_posn;
    char n_sign_posn;
    char int_p_cs_precedes;
    char int_p_sep_by_space;
    char int_n_cs_precedes;
    char int_n_sep_by_space;
    char int_p_sign_posn;
    char int_n_sign_posn;
};




void _DT_INIT(void)

{
  if (true) {
    __gmon_start__();
  }
  return;
}



void FUN_00108020(void)

{
  (*(code *)(undefined *)0x0)();
  return;
}



int FontFileInitFPE(long param_1)

{
  int iVar1;
  int iVar2;
  long in_FS_OFFSET;
  long lStack_28;
  long lStack_20;
  
  lStack_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FontFileReadDirectory(*(undefined8 *)(param_1 + 8),&lStack_28);
  if (iVar1 == 0x55) {
    if (*(int *)(lStack_28 + 0x30) < 1) {
      *(long *)(param_1 + 0x18) = lStack_28;
    }
    else {
      iVar2 = FontFileRegisterBitmapSource(param_1);
      if (iVar2 == 0) {
        iVar1 = 0x50;
        FontFileFreeFPE(param_1);
      }
      else {
        *(long *)(param_1 + 0x18) = lStack_28;
      }
    }
  }
  if (lStack_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar1;
}



undefined8 FontFileFreeFPE(long param_1)

{
  FontFileUnregisterBitmapSource();
  FontFileFreeDir(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



undefined8
FontFileListNextFontOrAlias
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,int *param_4,
          undefined8 *param_5,undefined4 *param_6,long *param_7)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  long lVar4;
  undefined8 uVar5;
  
  piVar3 = (int *)*param_7;
  iVar1 = *(int *)(param_7 + 1);
  if (iVar1 == *piVar3) {
    FreeFontNames();
    free(param_7);
    return 0x53;
  }
  iVar2 = *(int *)(*(long *)(piVar3 + 2) + (long)iVar1 * 4);
  *param_3 = *(undefined8 *)(*(long *)(piVar3 + 4) + (long)iVar1 * 8);
  if (iVar2 < 0) {
    *param_4 = -iVar2;
    lVar4 = *(long *)(*param_7 + 0x10);
    iVar1 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar1 + 1;
    *param_5 = *(undefined8 *)(lVar4 + (long)(iVar1 + 1) * 8);
    *param_6 = *(undefined4 *)(*(long *)(*param_7 + 8) + (long)*(int *)(param_7 + 1) * 4);
    uVar5 = 0x52;
  }
  else {
    *param_4 = iVar2;
    uVar5 = 0x55;
  }
  *(int *)(param_7 + 1) = *(int *)(param_7 + 1) + 1;
  return uVar5;
}



int FontFileListNextFontWithInfo
              (undefined8 param_1,undefined8 param_2,undefined8 *param_3,undefined4 *param_4,
              undefined8 param_5,int *param_6,undefined8 *param_7)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  long in_FS_OFFSET;
  undefined4 uStack_3c;
  undefined8 uStack_38;
  long lStack_30;
  
  lStack_30 = *(long *)(in_FS_OFFSET + 0x28);
  piVar2 = (int *)*param_7;
  iVar3 = *(int *)(param_7 + 1);
  if (iVar3 == *piVar2) {
    FreeFontNames(piVar2);
    free(param_7);
    iVar3 = 0x53;
  }
  else {
    uStack_38 = *(undefined8 *)(*(long *)(piVar2 + 4) + (long)iVar3 * 8);
    uStack_3c = *(undefined4 *)(*(long *)(piVar2 + 2) + (long)iVar3 * 4);
    iVar3 = FUN_0010eba0(param_2,&uStack_38,&uStack_3c,param_5);
    if (iVar3 == 0x53) {
      iVar3 = 0x50;
    }
    *param_3 = uStack_38;
    *param_4 = uStack_3c;
    iVar1 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar1 + 1;
    *param_6 = *(int *)*param_7 - (iVar1 + 1);
  }
  if (lStack_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar3;
}



void FontFileCloseFont(undefined8 param_1,long param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(param_2 + 0xa0);
  if (lVar1 != 0) {
    if (*(int *)(lVar1 + 0x10) == 0) {
      FontFileRemoveScaledInstance();
    }
    else if (*(int *)(lVar1 + 0x10) == 2) {
      *(undefined8 *)(lVar1 + 0x28) = 0;
    }
    *(undefined8 *)(param_2 + 0xa0) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0010d643. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_2 + 0x78))(param_2);
  return;
}



void bitmapGetGlyphs(void)

{
  bitmapGetGlyphs();
  return;
}



undefined8
FontFileOpenFont(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                int param_5,undefined4 param_6,undefined4 param_7,undefined8 param_8,
                undefined8 param_9,undefined8 param_10)

{
  undefined8 uVar1;
  
  if (0x3ff < param_5) {
    return 0x50;
  }
  param_8 = param_10;
  uVar1 = FUN_0010e050(param_2,param_3,param_4,param_5,param_6,param_7);
  return uVar1;
}



void FontFileListFonts(undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
                      undefined4 param_5,undefined8 param_6)

{
  FUN_0010e7f0(param_2 + 0x18,param_3,param_4,param_5,param_6,0);
  return;
}



void __cxa_finalize(void)

{
  __cxa_finalize();
  return;
}



void FT_Get_Sfnt_Name_Count(void)

{
  FT_Get_Sfnt_Name_Count();
  return;
}



void __strcat_chk(void)

{
  __strcat_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * inet_ntop(int __af,void *__cp,char *__buf,socklen_t __len)

{
  char *pcVar1;
  
  pcVar1 = inet_ntop(__af,__cp,__buf,__len);
  return pcVar1;
}



void add_range(void)

{
  add_range();
  return;
}



void bitmapAddInkMetrics(void)

{
  bitmapAddInkMetrics();
  return;
}



void __snprintf_chk(void)

{
  __snprintf_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void free(void *__ptr)

{
  free(__ptr);
  return;
}



void StoreFontClientFont(void)

{
  StoreFontClientFont();
  return;
}



void FontCharInkMetrics(void)

{
  FontCharInkMetrics();
  return;
}



undefined4 BufFileClose(void *param_1)

{
  undefined4 uVar1;
  
  uVar1 = (**(code **)((long)param_1 + 0x2028))();
  free(param_1);
  return uVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int strcasecmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcasecmp(__s1,__s2);
  return iVar1;
}



void __vfprintf_chk(void)

{
  __vfprintf_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int * __errno_location(void)

{
  int *piVar1;
  
  piVar1 = __errno_location();
  return piVar1;
}



void AddFontNamesName(void)

{
  AddFontNamesName();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int unlink(char *__name)

{
  int iVar1;
  
  iVar1 = unlink(__name);
  return iVar1;
}



void FT_Get_Name_Index(void)

{
  FT_Get_Name_Index();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strncpy(char *__dest,char *__src,size_t __n)

{
  char *pcVar1;
  
  pcVar1 = strncpy(__dest,__src,__n);
  return pcVar1;
}



void FT_Load_Glyph(void)

{
  FT_Load_Glyph();
  return;
}



void _fs_connection_died(void)

{
  _fs_connection_died();
  return;
}



undefined8 FontFileInitTable(undefined4 *param_1,uint param_2)

{
  void *pvVar1;
  
  if (0xd79435 < param_2) {
    return 0;
  }
  if (param_2 == 0) {
    *(undefined8 *)(param_1 + 2) = 0;
  }
  else {
    pvVar1 = malloc((long)(int)param_2 * 0x98);
    *(void **)(param_1 + 2) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      return 0;
    }
  }
  *param_1 = 0;
  param_1[1] = param_2;
  param_1[4] = 0;
  return 1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int strncmp(char *__s1,char *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = strncmp(__s1,__s2,__n);
  return iVar1;
}



void _fs_init_fontinfo(void)

{
  _fs_init_fontinfo();
  return;
}



void _FontTransWrite(void)

{
  _FontTransWrite();
  return;
}



void BufFileCreate(long param_1,long param_2,long param_3,long param_4,long param_5)

{
  long *plVar1;
  
  plVar1 = (long *)malloc(0x2038);
  if (plVar1 != (long *)0x0) {
    plVar1[0x406] = param_1;
    *plVar1 = (long)(plVar1 + 2);
    plVar1[0x402] = param_2;
    plVar1[0x403] = param_3;
    plVar1[0x404] = param_4;
    plVar1[1] = 0;
    plVar1[0x405] = param_5;
  }
  return;
}



void CreateFontRec(void)

{
  CreateFontRec();
  return;
}



void FT_Get_X11_Font_Format(void)

{
  FT_Get_X11_Font_Format();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strcpy(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = strcpy(__dest,__src);
  return pcVar1;
}



void FontCharReshape(void)

{
  FontCharReshape();
  return;
}



void FT_Load_Sfnt_Table(void)

{
  FT_Load_Sfnt_Table();
  return;
}



void FT_Get_Postscript_Name(void)

{
  FT_Get_Postscript_Name();
  return;
}



void __isoc99_fscanf(void)

{
  __isoc99_fscanf();
  return;
}



void FontFileRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FontFileNameCheck,FontFileInitFPE,FontFileFreeFPE,FontFileResetFPE,FontFileOpenFont,
             FontFileCloseFont,FontFileListFonts,FontFileStartListFontsWithInfo,
             FontFileListNextFontWithInfo,0,0,0,FontFileStartListFontsAndAliases,
             FontFileListNextFontOrAlias,FontFileEmptyBitmapSource);
  return;
}



void bdfError(void)

{
  bdfError();
  return;
}



void inflate(void)

{
  inflate();
  return;
}



void FT_Set_Pixel_Sizes(void)

{
  FT_Set_Pixel_Sizes();
  return;
}



void FT_New_Size(void)

{
  FT_New_Size();
  return;
}



void FT_Done_Size(void)

{
  FT_Done_Size();
  return;
}



undefined8 FontFileRegisterBitmapSource(long param_1)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  
  if (0 < DAT_0013fd68._4_4_) {
    plVar1 = FontFileBitmapSources;
    do {
      if (*plVar1 == param_1) {
        return 1;
      }
      plVar1 = plVar1 + 1;
    } while (plVar1 != FontFileBitmapSources + (ulong)(DAT_0013fd68._4_4_ - 1) + 1);
  }
  plVar1 = FontFileBitmapSources;
  iVar2 = (int)DAT_0013fd68;
  if ((int)DAT_0013fd68 == DAT_0013fd68._4_4_) {
    iVar2 = DAT_0013fd68._4_4_ + 4;
    plVar1 = (long *)realloc(FontFileBitmapSources,(long)iVar2 << 3);
    if (plVar1 == (long *)0x0) {
      return 0;
    }
  }
  DAT_0013fd68._0_4_ = iVar2;
  FontFileBitmapSources = plVar1;
  lVar3 = (long)DAT_0013fd68._4_4_;
  DAT_0013fd68._4_4_ = DAT_0013fd68._4_4_ + 1;
  FontFileBitmapSources[lVar3] = param_1;
  return 1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ssize_t writev(int __fd,iovec *__iovec,int __count)

{
  ssize_t sVar1;
  
  sVar1 = writev(__fd,__iovec,__count);
  return sVar1;
}



undefined8 FontFileReadDirectory(char *param_1,long *param_2)

{
  int iVar1;
  int iVar2;
  size_t sVar3;
  char *pcVar4;
  long lVar5;
  FILE *pFVar6;
  undefined8 uVar7;
  uint *puVar8;
  uint *puVar9;
  long lVar10;
  long lVar11;
  int *piVar12;
  char cVar13;
  uint uVar14;
  uint uVar15;
  byte *pbVar16;
  long in_FS_OFFSET;
  bool bVar17;
  bool bVar18;
  byte bVar19;
  undefined4 uStack_2184;
  char *pcStack_2180;
  undefined *puStack_2178;
  undefined2 uStack_2170;
  undefined2 uStack_216e;
  stat sStack_2168;
  stat sStack_20d8;
  undefined auStack_2048 [1024];
  undefined auStack_1c48 [1023];
  char acStack_1849 [1024];
  char cStack_1449;
  uint auStack_1448 [256];
  uint auStack_1048 [256];
  undefined auStack_c48 [1024];
  undefined auStack_848 [1024];
  undefined auStack_448 [1032];
  long lStack_40;
  
  bVar19 = 0;
  lStack_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar3 = strlen(param_1);
  if (sVar3 + 0xb < 0x401) {
    pcVar4 = strchr(param_1,0x3a);
    if (pcVar4 == (char *)0x0) {
      __memcpy_chk(auStack_1448,param_1,sVar3 + 1,0x400);
    }
    else {
      __strncpy_chk(auStack_1448,param_1,(long)pcVar4 - (long)param_1,0x400);
      *(undefined *)((long)auStack_1448 + ((long)pcVar4 - (long)param_1)) = 0;
    }
    pcVar4 = acStack_1849 + 1;
    lVar5 = __stpcpy_chk(pcVar4,auStack_1448,0x400);
    if (acStack_1849[lVar5 - (long)pcVar4] != '/') {
      __memcpy_chk(lVar5,&DAT_0013209c,2,(long)auStack_1448 - lVar5);
    }
    __strcat_chk(pcVar4,"fonts.dir",0x400);
    pFVar6 = fopen(pcVar4,"rt");
    if (pFVar6 == (FILE *)0x0) {
      piVar12 = __errno_location();
      if (*piVar12 == 2) {
        uVar7 = __strcpy_chk(auStack_848,auStack_1448,0x400);
        puVar9 = auStack_1448;
        do {
          puVar8 = puVar9;
          uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
          uVar15 = uVar14 & 0x80808080;
          puVar9 = puVar8 + 1;
        } while (uVar15 == 0);
        bVar17 = (uVar14 & 0x8080) == 0;
        if (bVar17) {
          uVar15 = uVar15 >> 0x10;
        }
        if (bVar17) {
          puVar9 = (uint *)((long)puVar8 + 6);
        }
        lVar10 = (long)puVar9 +
                 ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) - (long)auStack_1448);
        lVar5 = 0;
        if (lVar10 + 0xdU < 0x401) goto LAB_0010b5cf;
      }
    }
    else {
      iVar1 = fileno(pFVar6);
      iVar1 = __fxstat(1,iVar1,&sStack_2168);
      if (((iVar1 == -1) || (iVar1 = __isoc99_fscanf(pFVar6,&DAT_001320ab,&uStack_2184), iVar1 != 1)
          ) || (lVar5 = FontFileMakeDir(param_1,uStack_2184), lVar5 == 0)) {
        fclose(pFVar6);
      }
      else {
        *(__time_t *)(lVar5 + 8) = sStack_2168.st_mtim.tv_sec;
        if (DAT_0013f720 == '\0') {
          __sprintf_chk(&DAT_0013f720,1,0x18,"%%%ds %%%d[^\n]\n",0x3ff,0x3ff);
        }
        while (iVar1 = __isoc99_fscanf(pFVar6,&DAT_0013f720,auStack_2048,auStack_1c48), iVar1 != -1)
        {
          if (iVar1 != 2) {
            uVar7 = 0x56;
            FontFileFreeDir(lVar5);
            fclose(pFVar6);
            goto LAB_0010b506;
          }
          FontFileAddFontFile(lVar5,auStack_1c48,auStack_2048);
        }
        fclose(pFVar6);
        uVar7 = __strcpy_chk(auStack_848,auStack_1448,0x400);
        puVar9 = auStack_1448;
        do {
          puVar8 = puVar9;
          uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
          uVar15 = uVar14 & 0x80808080;
          puVar9 = puVar8 + 1;
        } while (uVar15 == 0);
        bVar17 = (uVar14 & 0x8080) == 0;
        if (bVar17) {
          uVar15 = uVar15 >> 0x10;
        }
        if (bVar17) {
          puVar9 = (uint *)((long)puVar8 + 6);
        }
        lVar10 = (long)puVar9 +
                 ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) - (long)auStack_1448);
        if (0x400 < lVar10 + 0xdU) {
LAB_0010b4e7:
          uVar7 = 0x56;
          goto LAB_0010b80e;
        }
LAB_0010b5cf:
        if (*(char *)((long)auStack_1448 + lVar10 + -1) != '/') {
          uVar7 = __strcat_chk(uVar7,&DAT_0013209c,0x400);
        }
        pcVar4 = (char *)__strcat_chk(uVar7,"fonts.alias",0x400);
        pFVar6 = fopen(pcVar4,"rt");
        if (pFVar6 != (FILE *)0x0) {
          if ((lVar5 == 0) && (lVar5 = FontFileMakeDir(auStack_1448,10), lVar5 == 0)) {
            uVar7 = 0x50;
            fclose(pFVar6);
            goto LAB_0010b506;
          }
          iVar1 = fileno(pFVar6);
          iVar1 = __fxstat(1,iVar1,&sStack_20d8);
          if (iVar1 != -1) {
            *(__time_t *)(lVar5 + 0x10) = sStack_20d8.st_mtim.tv_sec;
LAB_0010b65d:
            do {
              iVar1 = FUN_0010b070(pFVar6,&pcStack_2180);
              pcVar4 = pcStack_2180;
              if (iVar1 == 2) {
                fclose(pFVar6);
                goto LAB_0010b8c8;
              }
              if (iVar1 == 3) {
LAB_0010b800:
                uVar7 = 0x50;
LAB_0010b806:
                fclose(pFVar6);
                goto LAB_0010b80e;
              }
            } while (iVar1 != 0);
            sVar3 = strlen(pcStack_2180);
            if (sVar3 < 0x400) {
              __memcpy_chk(auStack_1048,pcVar4,sVar3 + 1,0x400);
              iVar1 = FUN_0010b070(pFVar6,&pcStack_2180);
              if (iVar1 == 2) goto LAB_0010b954;
              if (2 < iVar1) {
                if (iVar1 == 3) goto code_r0x0010b8eb;
                goto LAB_0010b65d;
              }
              if (iVar1 == 0) {
                sVar3 = strlen(pcStack_2180);
                puVar9 = auStack_1048;
                if (0x3ff < sVar3) goto LAB_0010b954;
                do {
                  puVar8 = puVar9;
                  uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
                  uVar15 = uVar14 & 0x80808080;
                  puVar9 = puVar8 + 1;
                } while (uVar15 == 0);
                bVar17 = (uVar14 & 0x8080) == 0;
                if (bVar17) {
                  uVar15 = uVar15 >> 0x10;
                }
                if (bVar17) {
                  puVar9 = (uint *)((long)puVar8 + 6);
                }
                FUN_0010d700(auStack_1048,auStack_1048,
                             (byte *)((long)puVar9 +
                                     ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) -
                                     (long)auStack_1048)),uVar15 & 0xffffff00);
                pcVar4 = pcStack_2180;
                sVar3 = strlen(pcStack_2180);
                FUN_0010d700(auStack_c48,pcVar4,sVar3);
                iVar1 = FontFileAddFontAlias(lVar5,auStack_1048,auStack_c48);
                if (iVar1 == 0) goto LAB_0010b800;
                goto LAB_0010b65d;
              }
              bVar17 = iVar1 == 0;
              bVar18 = iVar1 == 1;
              if (!bVar18) goto LAB_0010b65d;
              lVar10 = 0x13;
              puVar9 = auStack_1048;
              pbVar16 = (byte *)"FILE_NAMES_ALIASES";
              do {
                if (lVar10 == 0) break;
                lVar10 = lVar10 + -1;
                bVar17 = *(byte *)puVar9 < *pbVar16;
                bVar18 = *(byte *)puVar9 == *pbVar16;
                puVar9 = (uint *)((long)puVar9 + (ulong)bVar19 * -2 + 1);
                pbVar16 = pbVar16 + (ulong)bVar19 * -2 + 1;
              } while (bVar18);
              cVar13 = (!bVar17 && !bVar18) - bVar17;
              iVar1 = (int)cVar13;
              if (cVar13 == '\0') {
                if (0 < *(int *)(lVar5 + 0x30)) {
                  lVar10 = 0;
                  do {
                    lVar11 = *(long *)(lVar5 + 0x38) + lVar10;
                    if (*(int *)(lVar11 + 0x10) == 2) {
                      pcVar4 = *(char **)(lVar11 + 0x20);
                      lVar11 = FontFileMatchRenderer(pcVar4);
                      if (lVar11 != 0) {
                        sVar3 = strlen(pcVar4);
                        uVar15 = (int)sVar3 - *(int *)(lVar11 + 8);
                        if (uVar15 < 0x400) {
                          FUN_0010d700(auStack_448,pcVar4,uVar15);
                          auStack_448[(int)uVar15] = 0;
                          uStack_2170 = (undefined2)uVar15;
                          puStack_2178 = auStack_448;
                          uStack_216e = FontFileCountDashes(auStack_448,uVar15);
                          lVar11 = FontFileFindNameInDir(lVar5 + 0x30,&puStack_2178);
                          if ((lVar11 == 0) &&
                             (iVar2 = FontFileAddFontAlias
                                                (lVar5,auStack_448,
                                                 *(undefined8 *)(*(long *)(lVar5 + 0x38) + lVar10)),
                             iVar2 == 0)) goto LAB_0010b800;
                        }
                      }
                    }
                    iVar1 = iVar1 + 1;
                    lVar10 = lVar10 + 0x98;
                  } while (iVar1 < *(int *)(lVar5 + 0x30));
                }
                goto LAB_0010b65d;
              }
            }
LAB_0010b954:
            uVar7 = 0x56;
            goto LAB_0010b806;
          }
          uVar7 = 0x56;
          fclose(pFVar6);
          goto LAB_0010b80e;
        }
        piVar12 = __errno_location();
        if (*piVar12 == 2) {
          if (lVar5 != 0) {
LAB_0010b8c8:
            uVar7 = 0x55;
            FontFileSortDir(lVar5);
            *param_2 = lVar5;
            goto LAB_0010b506;
          }
        }
        else if (lVar5 != 0) goto LAB_0010b4e7;
      }
    }
  }
  uVar7 = 0x56;
  goto LAB_0010b506;
code_r0x0010b8eb:
  uVar7 = 0x50;
  fclose(pFVar6);
LAB_0010b80e:
  FontFileFreeDir(lVar5);
LAB_0010b506:
  if (lStack_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar7;
}



void BufFileOpenWrite(int param_1)

{
  long *plVar1;
  
  plVar1 = (long *)BufFileCreate((long)param_1,0,FUN_0010a6a0,0,FUN_0010a700);
  *(undefined4 *)(plVar1 + 1) = 0x2000;
  *plVar1 = (long)(plVar1 + 2);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void qsort(void *__base,size_t __nmemb,size_t __size,__compar_fn_t __compar)

{
  qsort(__base,__nmemb,__size,__compar);
  return;
}



int FontFileStartListFonts
              (undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
              undefined4 param_5,undefined8 *param_6,undefined4 param_7)

{
  int iVar1;
  long *__ptr;
  long lVar2;
  
  __ptr = (long *)malloc(0x10);
  if (__ptr == (long *)0x0) {
    iVar1 = 0x50;
  }
  else {
    lVar2 = MakeFontNamesRecord(0);
    *__ptr = lVar2;
    if (lVar2 == 0) {
      iVar1 = 0x50;
      free(__ptr);
    }
    else {
      iVar1 = FUN_0010e7f0(param_2 + 0x18,param_3,param_4,param_5,lVar2,param_7);
      if (iVar1 == 0x55) {
        *(undefined4 *)(__ptr + 1) = 0;
        *param_6 = __ptr;
      }
      else {
        FreeFontNames(*__ptr);
        free(__ptr);
      }
    }
  }
  return iVar1;
}



void _fs_wait_for_readable(void)

{
  _fs_wait_for_readable();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

double strtod(char *__nptr,char **__endptr)

{
  double dVar1;
  
  dVar1 = strtod(__nptr,__endptr);
  return dVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int setsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t __optlen)

{
  int iVar1;
  
  iVar1 = setsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

lconv * localeconv(void)

{
  lconv *plVar1;
  
  plVar1 = localeconv();
  return plVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ssize_t readlink(char *__path,char *__buf,size_t __len)

{
  ssize_t sVar1;
  
  sVar1 = readlink(__path,__buf,__len);
  return sVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int fcntl(int __fd,int __cmd,...)

{
  int iVar1;
  
  iVar1 = fcntl(__fd,__cmd);
  return iVar1;
}



void bdfForceMakeAtom(void)

{
  bdfForceMakeAtom();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ssize_t write(int __fd,void *__buf,size_t __n)

{
  ssize_t sVar1;
  
  sVar1 = write(__fd,__buf,__n);
  return sVar1;
}



void FTGetEnglishName(void)

{
  FTGetEnglishName();
  return;
}



void fs_load_all_glyphs(void)

{
  fs_load_all_glyphs();
  return;
}



undefined8 FontFileAddFontAlias(long param_1,char *param_2,char *param_3)

{
  int iVar1;
  size_t sVar2;
  long lVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  char *pcStack_b8;
  short sStack_b0;
  undefined2 uStack_ae;
  undefined4 uStack_a8;
  char *pcStack_a0;
  long lStack_20;
  
  lStack_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = strcmp(param_2,param_3);
  if (iVar1 != 0) {
    sVar2 = strlen(param_2);
    sStack_b0 = (short)sVar2;
    FUN_0010d700(param_2,param_2,(int)sStack_b0);
    pcStack_b8 = param_2;
    uStack_ae = FontFileCountDashes(param_2,(int)sStack_b0);
    uStack_a8 = 3;
    pcStack_a0 = strdup(param_3);
    if (pcStack_a0 != (char *)0x0) {
      lVar3 = FontFileAddEntry(param_1 + 0x30,&pcStack_b8);
      uVar4 = 1;
      if (lVar3 != 0) goto LAB_0010d17c;
      free(pcStack_a0);
    }
  }
  uVar4 = 0;
LAB_0010d17c:
  if (lStack_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



void _fs_connect(void)

{
  _fs_connect();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int getpeername(int __fd,sockaddr *__addr,socklen_t *__len)

{
  int iVar1;
  
  iVar1 = getpeername(__fd,__addr,__len);
  return iVar1;
}



long * FontFileAddEntry(int *param_1,long *param_2)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  void *pvVar4;
  
  if (param_1[4] == 0) {
    iVar2 = *param_1;
    pvVar4 = *(void **)(param_1 + 2);
    if (iVar2 == param_1[1]) {
      pvVar4 = realloc(pvVar4,(long)(iVar2 + 100) * 0x98);
      if (pvVar4 == (void *)0x0) {
        return (long *)0x0;
      }
      param_1[1] = iVar2 + 100;
      iVar2 = *param_1;
      *(void **)(param_1 + 2) = pvVar4;
    }
    lVar3 = param_2[1];
    plVar1 = (long *)((long)pvVar4 + (long)iVar2 * 0x98);
    *plVar1 = *param_2;
    plVar1[1] = lVar3;
    lVar3 = param_2[3];
    plVar1[2] = param_2[2];
    plVar1[3] = lVar3;
    lVar3 = param_2[5];
    plVar1[4] = param_2[4];
    plVar1[5] = lVar3;
    lVar3 = param_2[7];
    plVar1[6] = param_2[6];
    plVar1[7] = lVar3;
    lVar3 = param_2[9];
    plVar1[8] = param_2[8];
    plVar1[9] = lVar3;
    lVar3 = param_2[0xb];
    plVar1[10] = param_2[10];
    plVar1[0xb] = lVar3;
    lVar3 = param_2[0xd];
    plVar1[0xc] = param_2[0xc];
    plVar1[0xd] = lVar3;
    lVar3 = param_2[0xf];
    plVar1[0xe] = param_2[0xe];
    plVar1[0xf] = lVar3;
    lVar3 = param_2[0x11];
    plVar1[0x10] = param_2[0x10];
    plVar1[0x11] = lVar3;
    plVar1[0x12] = param_2[0x12];
    pvVar4 = malloc((long)(*(short *)(param_2 + 1) + 1));
    *plVar1 = (long)pvVar4;
    if (pvVar4 != (void *)0x0) {
      memcpy(pvVar4,(void *)*param_2,(long)*(short *)(param_2 + 1));
      *(undefined *)(*plVar1 + (long)*(short *)(plVar1 + 1)) = 0;
      *param_1 = *param_1 + 1;
      return plVar1;
    }
  }
  return (long *)0x0;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int fclose(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fclose(__stream);
  return iVar1;
}



void FontFileSortDir(long param_1)

{
  FontFileSortTable(param_1 + 0x18);
  FontFileSortTable(param_1 + 0x30);
  FontFileSwitchStringsToBitmapPointers(param_1);
  return;
}



void _FontTransClose(void)

{
  _FontTransClose();
  return;
}



void _fs_done_read(void)

{
  _fs_done_read();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

DIR * opendir(char *__name)

{
  DIR *pDVar1;
  
  pDVar1 = opendir(__name);
  return pDVar1;
}



void _fs_io_fini(void)

{
  _fs_io_fini();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int shutdown(int __fd,int __how)

{
  int iVar1;
  
  iVar1 = shutdown(__fd,__how);
  return iVar1;
}



void FT_Done_Face(void)

{
  FT_Done_Face();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * stpcpy(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = stpcpy(__dest,__src);
  return pcVar1;
}



void DeleteFontClientID(void)

{
  DeleteFontClientID();
  return;
}



void _fs_poll_connect(void)

{
  _fs_poll_connect();
  return;
}



void QueryGlyphExtents(void)

{
  QueryGlyphExtents();
  return;
}



undefined8 FontFileCompleteXLFD(uint *param_1,uint *param_2)

{
  ushort uVar1;
  uint uVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  long in_FS_OFFSET;
  undefined8 uVar6;
  double dVar7;
  double dVar8;
  double dVar9;
  double dVar10;
  double dVar11;
  double dVar12;
  double dVar13;
  int iStack_24;
  long lStack_20;
  
  lStack_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar3 = (ushort *)GetClientResolutions(&iStack_24);
  uVar4 = *param_1;
  if (((uVar4 & 3) == 0) || ((uVar4 & 0xc) == 0)) {
    uVar2 = param_1[0x14];
    uVar5 = param_1[0x15];
    if (iStack_24 == 0) {
LAB_0010f8d1:
      if ((int)uVar2 < 1) {
        uVar2 = param_2[0x14];
        param_1[0x14] = uVar2;
        if ((int)uVar5 < 1) goto LAB_0010f8df;
        if ((int)uVar2 < 1) goto LAB_0010f8f0;
      }
      else if ((int)uVar5 < 1) {
LAB_0010f8df:
        param_1[0x15] = param_2[0x15];
        goto LAB_0010f8e5;
      }
    }
    else {
      if ((int)uVar2 < 1) {
        uVar2 = (uint)*puVar3;
        param_1[0x14] = (uint)*puVar3;
        if ((int)uVar5 < 1) goto LAB_0010f8ca;
        goto LAB_0010f8d1;
      }
      if ((int)uVar5 < 1) {
LAB_0010f8ca:
        uVar5 = (uint)puVar3[1];
        param_1[0x15] = uVar5;
        goto LAB_0010f8d1;
      }
    }
LAB_0010f734:
    if ((uVar4 & 0xf) == 0) {
      if (iStack_24 == 0) {
        if ((*(byte *)param_2 & 0xc) == 0) goto LAB_0010f8f0;
        *(undefined8 *)(param_1 + 10) = *(undefined8 *)(param_2 + 10);
        *(undefined8 *)(param_1 + 0xc) = *(undefined8 *)(param_2 + 0xc);
        *(undefined8 *)(param_1 + 0xe) = *(undefined8 *)(param_2 + 0xe);
        *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_2 + 0x10);
        uVar4 = uVar4 & 0xfffffff3 | *param_2 & 0xc;
        *param_1 = uVar4;
      }
      else {
        uVar1 = puVar3[2];
        param_1[0xe] = 0;
        param_1[0xf] = 0;
        uVar4 = uVar4 & 0xfffffff3 | 4;
        param_1[0xc] = 0;
        param_1[0xd] = 0;
        *param_1 = uVar4;
        *(double *)(param_1 + 0x10) = (double)uVar1 / 10.0;
        *(double *)(param_1 + 10) = (double)uVar1 / 10.0;
      }
    }
    dVar13 = 1.0;
    if ((uVar4 & 3) == 1) {
      uVar4 = uVar4 | 3;
      dVar13 = (double)(int)uVar2 / (double)(int)uVar5;
      *param_1 = uVar4;
      *(double *)(param_1 + 2) = *(double *)(param_1 + 2) * dVar13;
    }
    dVar8 = (double)(int)uVar2 / 72.27;
    dVar9 = (double)(int)uVar5 / 72.27;
    if ((uVar4 & 0xc) == 0) goto LAB_0010f950;
    dVar7 = *(double *)(param_1 + 10);
    dVar11 = *(double *)(param_1 + 0xc);
    dVar12 = *(double *)(param_1 + 0xe);
    dVar10 = *(double *)(param_1 + 0x10);
    while( true ) {
      if (((uVar4 & 3) != 0) &&
         ((((dVar13 < ABS(*(double *)(param_1 + 2) - dVar7 * dVar8) ||
            (1.0 < ABS(*(double *)(param_1 + 4) - dVar11 * dVar9))) ||
           (1.0 < ABS(*(double *)(param_1 + 6) - dVar12 * dVar8))) ||
          (1.0 < ABS(*(double *)(param_1 + 8) - dVar10 * dVar9))))) goto LAB_0010f8f0;
      if ((uVar4 & 0xf) != 6) break;
LAB_0010f950:
      if ((ABS(dVar8) < 1e-20) || (ABS(dVar9) < 1e-20)) goto LAB_0010f8f0;
      dVar11 = *(double *)(param_1 + 4) / dVar9;
      uVar2 = (uint)((*param_1 & 3) == 2) * 4 + 4;
      uVar4 = *param_1 & 0xfffffff3 | uVar2;
      *param_1 = uVar4;
      *(double *)(param_1 + 0xc) = dVar11;
      dVar12 = *(double *)(param_1 + 6) / dVar8;
      *(double *)(param_1 + 10) = *(double *)(param_1 + 2) / dVar8;
      *(double *)(param_1 + 0xe) = dVar12;
      *(double *)(param_1 + 0x10) = *(double *)(param_1 + 8) / dVar9;
      if (uVar2 != 4) goto LAB_0010f9e4;
      dVar7 = (double)(int)((*(double *)(param_1 + 2) / dVar8) * 10.0 + 0.5) / 10.0;
      dVar10 = (double)(int)((*(double *)(param_1 + 8) / dVar9) * 10.0 + 0.5) / 10.0;
      *(double *)(param_1 + 10) = dVar7;
      *(double *)(param_1 + 0x10) = dVar10;
    }
    *(double *)(param_1 + 2) = dVar7 * dVar8;
    *(double *)(param_1 + 4) = dVar11 * dVar9;
    *(double *)(param_1 + 6) = dVar12 * dVar8;
    *(double *)(param_1 + 8) = dVar10 * dVar9;
    *param_1 = uVar4 & 0xfffffffc | ((uVar4 & 0xc) != 8) + 2;
LAB_0010f9e4:
    uVar6 = xlfd_round_double();
    *(undefined8 *)(param_1 + 2) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 4));
    *(undefined8 *)(param_1 + 4) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 6));
    *(undefined8 *)(param_1 + 6) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 8));
    *(undefined8 *)(param_1 + 8) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 10));
    *(undefined8 *)(param_1 + 10) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 0xc));
    *(undefined8 *)(param_1 + 0xc) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 0xe));
    *(undefined8 *)(param_1 + 0xe) = uVar6;
    dVar13 = (double)xlfd_round_double(*(undefined8 *)(param_1 + 0x10));
    *(double *)(param_1 + 0x10) = dVar13;
    param_1[0x13] = (int)(dVar13 * 10.0);
    param_1[0x12] = (int)*(double *)(param_1 + 8);
    uVar6 = 1;
  }
  else {
    if ((int)param_1[0x15] < 1) {
      dVar13 = hypot(*(double *)(param_1 + 4),*(double *)(param_1 + 8));
      dVar8 = hypot(*(double *)(param_1 + 0xc),*(double *)(param_1 + 0x10));
      if (1e-20 <= dVar8) {
        uVar2 = param_1[0x14];
        param_1[0x15] = (int)((dVar13 * 72.27) / dVar8 + 0.5);
        if ((int)uVar2 < 1) {
          uVar4 = *param_1;
          goto LAB_0010fb30;
        }
LAB_0010f8e9:
        uVar5 = param_1[0x15];
        if (0 < (int)uVar5) goto LAB_0010f943;
      }
    }
    else {
      uVar2 = param_1[0x14];
      if (0 < (int)uVar2) {
        uVar5 = param_1[0x15];
LAB_0010f943:
        uVar4 = *param_1;
        goto LAB_0010f734;
      }
LAB_0010fb30:
      if ((uVar4 & 2) == 0) {
        uVar2 = param_1[0x15];
        param_1[0x14] = uVar2;
      }
      else {
        dVar13 = hypot(*(double *)(param_1 + 2),*(double *)(param_1 + 6));
        dVar8 = hypot(*(double *)(param_1 + 10),*(double *)(param_1 + 0xe));
        if (dVar8 < 1e-20) goto LAB_0010f8f0;
        uVar2 = (uint)((dVar13 * 72.27) / dVar8 + 0.5);
        param_1[0x14] = uVar2;
      }
LAB_0010f8e5:
      if (0 < (int)uVar2) goto LAB_0010f8e9;
    }
LAB_0010f8f0:
    uVar6 = 0;
  }
  if (lStack_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void RegisterFPEFunctions(void)

{
  RegisterFPEFunctions();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

size_t strlen(char *__s)

{
  size_t sVar1;
  
  sVar1 = strlen(__s);
  return sVar1;
}



void _fs_convert_lfwi_reply(void)

{
  _fs_convert_lfwi_reply();
  return;
}



undefined8 BufFilePushCompressed(long *param_1)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  undefined8 *puVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar3;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (uint)*pbVar2;
  }
  if (uVar3 == 0x1f) {
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      uVar3 = (uint)*pbVar2;
    }
    if (uVar3 == 0x9d) {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) {
          return 0;
        }
      }
      else {
        pbVar2 = (byte *)*param_1;
        *param_1 = (long)(pbVar2 + 1);
        uVar3 = (uint)*pbVar2;
      }
      uVar8 = uVar3 & 0x1f;
      if (uVar8 - 10 < 7) {
        lVar7 = (long)(1 << (sbyte)uVar8);
        puVar4 = (undefined8 *)malloc((ulong)(uint)(3 << (sbyte)uVar8) + 0xff88);
        if (puVar4 != (undefined8 *)0x0) {
          *puVar4 = param_1;
          lVar6 = 0xff;
          *(uint *)(puVar4 + 4) = uVar8;
          *(uint *)((long)puVar4 + 0x1c) = uVar3 & 0x80;
          puVar4[6] = lVar7;
          puVar4[0x1fef] = puVar4 + 0x1ff1;
          lVar7 = (long)(puVar4 + 0x1ff1) + lVar7;
          puVar4[0x1ff0] = lVar7;
          *(undefined4 *)((long)puVar4 + 0x44) = 9;
          puVar4[5] = 0x1ff;
          while( true ) {
            *(undefined2 *)(lVar7 + lVar6 * 2) = 0;
            *(char *)(puVar4[0x1fef] + lVar6) = (char)lVar6;
            lVar6 = lVar6 + -1;
            if (lVar6 == -1) break;
            lVar7 = puVar4[0x1ff0];
          }
          *(undefined4 *)(puVar4 + 8) = 0;
          puVar4[2] = 0xffffffffffffffff;
          puVar4[9] = 0;
          *(undefined (*) [16])(puVar4 + 10) = (undefined  [16])0x0;
          puVar4[7] = (ulong)(*(int *)((long)puVar4 + 0x1c) != 0) + 0x100;
          puVar4[1] = puVar4 + 0xc;
          uVar5 = BufFileCreate(puVar4,FUN_0010a950,0,FUN_0010adc0,FUN_0010ae20);
          return uVar5;
        }
      }
    }
  }
  return 0;
}



void _fs_start_read(void)

{
  _fs_start_read();
  return;
}



void __stack_chk_fail(void)

{
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void BufFileOpenRead(int param_1)

{
  BufFileCreate((long)param_1,FUN_0010a590,0,FUN_0010a5e0,FUN_0010a560);
  return;
}



void DestroyFontRec(void)

{
  DestroyFontRec();
  return;
}



void FontFileFreeEntry(undefined8 *param_1)

{
  void *__ptr;
  void *__ptr_00;
  int iVar1;
  long lVar2;
  void *__ptr_01;
  
  if ((void *)*param_1 != (void *)0x0) {
    free((void *)*param_1);
  }
  iVar1 = *(int *)(param_1 + 2);
  *param_1 = 0;
  if (iVar1 == 2) {
    free((void *)param_1[4]);
    param_1[4] = 0;
    return;
  }
  if (iVar1 == 3) {
    free((void *)param_1[3]);
    param_1[3] = 0;
    return;
  }
  if (iVar1 == 0) {
    free((void *)param_1[4]);
    __ptr = (void *)param_1[5];
    __ptr_01 = *(void **)((long)__ptr + 0x80);
    if (0 < *(int *)((long)__ptr + 0x78)) {
      lVar2 = 0;
      iVar1 = 0;
      do {
        __ptr_00 = *(void **)((long)__ptr_01 + lVar2 + 0x70);
        if (__ptr_00 != (void *)0x0) {
          free(__ptr_00);
          __ptr_01 = *(void **)((long)__ptr + 0x80);
        }
        iVar1 = iVar1 + 1;
        lVar2 = lVar2 + 0x88;
      } while (iVar1 < *(int *)((long)__ptr + 0x78));
    }
    free(__ptr_01);
    free(__ptr);
    return;
  }
  return;
}



void FontEncIdentify(void)

{
  FontEncIdentify();
  return;
}



bool FontFileMatchName(undefined8 param_1,undefined2 param_2,undefined8 param_3)

{
  long lVar1;
  long in_FS_OFFSET;
  undefined8 uStack_c8;
  undefined8 *puStack_c0;
  undefined4 uStack_b8;
  undefined8 uStack_a8;
  undefined2 uStack_a0;
  undefined2 uStack_9e;
  long lStack_10;
  
  lStack_10 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_c8 = 0x100000001;
  puStack_c0 = &uStack_a8;
  uStack_b8 = 1;
  uStack_a8 = param_1;
  uStack_a0 = param_2;
  uStack_9e = FontFileCountDashes();
  lVar1 = FontFileFindNameInDir(&uStack_c8,param_3);
  if (lStack_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return lVar1 != 0;
}



void _FontTransFreeConnInfo(void)

{
  _FontTransFreeConnInfo();
  return;
}



void FT_Activate_Size(void)

{
  FT_Activate_Size();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strchr(char *__s,int __c)

{
  char *pcVar1;
  
  pcVar1 = strchr(__s,__c);
  return pcVar1;
}



void _FontTransConnect(void)

{
  _FontTransConnect();
  return;
}



void __fdelt_chk(void)

{
  __fdelt_chk();
  return;
}



void FTtoXReturnCode(void)

{
  FTtoXReturnCode();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * gai_strerror(int __ecode)

{
  char *pcVar1;
  
  pcVar1 = gai_strerror(__ecode);
  return pcVar1;
}



undefined8 * FontFileMakeDir(char *param_1,undefined4 param_2)

{
  int iVar1;
  char *pcVar2;
  size_t sVar3;
  undefined8 *__ptr;
  long lVar4;
  char *pcVar5;
  size_t sVar6;
  size_t sVar7;
  undefined8 *puVar8;
  bool bVar9;
  int iStack_40;
  
  pcVar2 = strchr(param_1,0x3a);
  if (pcVar2 == (char *)0x0) {
    sVar6 = strlen(param_1);
    sVar6 = (size_t)(int)sVar6;
    if (param_1[sVar6 - 1] == '/') {
      iStack_40 = 0;
      bVar9 = false;
      sVar3 = sVar6;
      sVar7 = sVar6;
    }
    else {
      iStack_40 = 0;
      bVar9 = true;
      sVar3 = sVar6 + 1;
      sVar7 = sVar6 + 1;
    }
  }
  else {
    sVar3 = strlen(pcVar2);
    sVar6 = (size_t)((int)pcVar2 - (int)param_1);
    iStack_40 = (int)sVar3;
    bVar9 = param_1[sVar6 - 1] != '/';
    sVar7 = bVar9 + sVar6;
    sVar3 = sVar7;
    if (iStack_40 != 0) {
      sVar3 = (long)(iStack_40 + 1) + sVar7;
    }
  }
  __ptr = (undefined8 *)malloc(sVar3 + 0x51);
  puVar8 = __ptr;
  if (__ptr != (undefined8 *)0x0) {
    iVar1 = FontFileInitTable(__ptr + 3,0);
    if (iVar1 != 0) {
      iVar1 = FontFileInitTable(__ptr + 6,param_2);
      if (iVar1 != 0) {
        __ptr[1] = 0;
        lVar4 = (long)__ptr + sVar7 + 0x51;
        *__ptr = __ptr + 10;
        __ptr[2] = 0;
        if (iStack_40 == 0) {
          lVar4 = 0;
        }
        __ptr[9] = lVar4;
        pcVar5 = strncpy((char *)(__ptr + 10),param_1,sVar6);
        pcVar5[sVar6] = '\0';
        if ((char *)__ptr[9] != (char *)0x0) {
          strcpy((char *)__ptr[9],pcVar2);
        }
        if (!bVar9) {
          return __ptr;
        }
        pcVar2 = (char *)*__ptr;
        sVar6 = strlen(pcVar2);
        pcVar2 = pcVar2 + sVar6;
        pcVar2[0] = '/';
        pcVar2[1] = '\0';
        return __ptr;
      }
      FontFileFreeTable(__ptr + 3);
    }
    puVar8 = (undefined8 *)0x0;
    free(__ptr);
  }
  return puVar8;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strrchr(char *__s,int __c)

{
  char *pcVar1;
  
  pcVar1 = strrchr(__s,__c);
  return pcVar1;
}



void FT_New_Face(void)

{
  FT_New_Face();
  return;
}



void BuiltinRegisterFontFileFunctions(void)

{
  BuiltinRegisterFontFileFunctions();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int uname(utsname *__name)

{
  int iVar1;
  
  iVar1 = uname(__name);
  return iVar1;
}



void _fs_pad_length(void)

{
  _fs_pad_length();
  return;
}



void BuiltinReadDirectory(void)

{
  BuiltinReadDirectory();
  return;
}



void FT_Init_FreeType(void)

{
  FT_Init_FreeType();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

__off_t lseek(int __fd,__off_t __offset,int __whence)

{
  __off_t _Var1;
  
  _Var1 = lseek(__fd,__offset,__whence);
  return _Var1;
}



void GetDefaultPointSize(void)

{
  GetDefaultPointSize();
  return;
}



void FontEncName(void)

{
  FontEncName();
  return;
}



void bdfHexByte(void)

{
  bdfHexByte();
  return;
}



void FontFileOpenBitmap(void)

{
  FUN_0010d3e0();
  return;
}



void FontComputeInfoAccelerators(void)

{
  FontComputeInfoAccelerators();
  return;
}



void FontDefaultFormat(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3,
                      undefined4 *param_4)

{
  *param_1 = 1;
  *param_2 = 1;
  *param_3 = 4;
  *param_4 = 1;
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * memset(void *__s,int __c,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memset(__s,__c,__n);
  return pvVar1;
}



void SPropRecValList_new(void)

{
  SPropRecValList_new();
  return;
}



void FontEncRecode(void)

{
  FontEncRecode();
  return;
}



void BuiltinFileOpen(void)

{
  BuiltinFileOpen();
  return;
}



int FontFileFindNamesInScalableDir
              (long param_1,undefined8 *param_2,int param_3,int *param_4,uint *param_5,uint param_6,
              int *param_7)

{
  int *piVar1;
  char *__s;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  ulong uVar6;
  size_t sVar7;
  undefined8 uVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  uint uStack_c4;
  int iStack_c0;
  int iStack_bc;
  byte abStack_b8 [120];
  long lStack_40;
  
  iVar3 = 0x55;
  lStack_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (0 < param_3) {
    uVar2 = FUN_0010bd80(param_1,*param_2,*(undefined2 *)((long)param_2 + 10),&uStack_c4,&iStack_c0,
                         &iStack_bc);
    uVar6 = (ulong)uVar2;
    if ((int)uVar2 < 0) {
      uVar6 = (ulong)(int)uStack_c4;
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + uVar6 * 0x98);
    }
    else {
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + (long)(int)uVar2 * 0x98);
      if ((param_6 == 0) || (*(int *)(puVar9 + 2) != 3)) {
        if (param_7 != (int *)0x0) {
          *param_7 = param_3 + -1;
        }
        iVar3 = AddFontNamesName(param_4,*puVar9,(int)*(short *)(puVar9 + 1));
        goto LAB_0010c86b;
      }
      iStack_c0 = uVar2 + 1;
      uStack_c4 = uVar2;
    }
    if ((int)uVar6 < iStack_c0) {
      do {
        if (iStack_bc <= *(short *)((long)puVar9 + 10)) {
          uVar8 = *puVar9;
          iVar3 = FUN_0010bf30(*param_2,iStack_bc,uVar8);
          if (0 < iVar3) {
            if (param_5 != (uint *)0x0) {
              uVar2 = *param_5;
              if (*(int *)(puVar9 + 2) == 0) {
                uVar5 = *(uint *)(puVar9[3] + 0x34);
                if ((uVar2 & 3) != 2) goto LAB_0010c8ed;
LAB_0010c9aa:
                if ((uVar5 & 1) == 0) goto LAB_0010c94a;
              }
              else {
                uVar5 = -(uint)(*(int *)(puVar9 + 2) == 3);
                if ((uVar2 & 3) == 2) goto LAB_0010c9aa;
LAB_0010c8ed:
                if ((uVar2 & 0xc) == 8) goto LAB_0010c9aa;
              }
              if (((uVar2 & 0x40) != 0) && ((uVar5 & 2) == 0)) goto LAB_0010c94a;
            }
            if (((param_6 & 2) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              iVar3 = FontParseXLFDName(uVar8,abStack_b8,0);
              if ((iVar3 != 0) && ((abStack_b8[0] & 0xf) == 0)) goto LAB_0010c94a;
              uVar8 = *puVar9;
            }
            iVar4 = AddFontNamesName(param_4,uVar8,(int)*(short *)(puVar9 + 1));
            iVar3 = iVar4;
            if (iVar4 != 0x55) goto LAB_0010c9be;
            if (((param_6 & 1) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              piVar1 = (int *)(*(long *)(param_4 + 2) + -4 + (long)*param_4 * 4);
              *piVar1 = -*piVar1;
              __s = (char *)puVar9[3];
              sVar7 = strlen(__s);
              iVar3 = AddFontNamesName(param_4,__s,sVar7);
              if (iVar3 != 0x55) goto LAB_0010c9be;
            }
            param_3 = param_3 + -1;
            iVar3 = iVar4;
            if (param_3 == 0) goto LAB_0010c9be;
          }
        }
LAB_0010c94a:
        uVar2 = (int)uVar6 + 1;
        uVar6 = (ulong)uVar2;
        puVar9 = puVar9 + 0x13;
      } while ((int)uVar2 < iStack_c0);
    }
    iVar3 = 0x55;
LAB_0010c9be:
    if (param_7 != (int *)0x0) {
      *param_7 = param_3;
    }
  }
LAB_0010c86b:
  if (lStack_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar3;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int ioctl(int __fd,ulong __request,...)

{
  int iVar1;
  
  iVar1 = ioctl(__fd,__request);
  return iVar1;
}



undefined8
FontFileMatchBitmapSource
          (long param_1,long *param_2,undefined4 param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined4 param_7,undefined4 param_8,undefined4 param_9)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  
  if (0 < DAT_0013fd68._4_4_) {
    lVar4 = 0;
    do {
      lVar1 = lVar4 * 8;
      lVar2 = *(long *)(FontFileBitmapSources + lVar4 * 8);
      if (((lVar2 != param_1) &&
          (lVar2 = FontFileFindNameInDir(*(long *)(lVar2 + 0x18) + 0x18,param_5), lVar2 != 0)) &&
         (lVar2 = FontFileFindScaledInstance(lVar2,param_6,param_9), lVar2 != 0)) {
        lVar4 = *(long *)(lVar2 + 0x80);
        if (lVar4 != 0) {
          *param_2 = lVar4;
          *(undefined8 *)(lVar4 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
          return 0x55;
        }
        lVar4 = *(long *)(lVar2 + 0x78);
        if (lVar4 == 0) {
          return 0x53;
        }
        lVar2 = *(long *)(lVar4 + 0x28);
        if (lVar2 != 0) {
          *param_2 = lVar2;
          *(undefined8 *)(lVar2 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
          return 0x55;
        }
        uVar3 = FontFileOpenBitmap(*(undefined8 *)(FontFileBitmapSources + lVar1),param_2,param_3,
                                   lVar4,param_7,param_8);
        if ((int)uVar3 == 0x55) {
          if (*param_2 != 0) {
            *(undefined8 *)(*param_2 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
            return uVar3;
          }
          return uVar3;
        }
        return uVar3;
      }
      lVar4 = lVar4 + 1;
    } while ((int)lVar4 < DAT_0013fd68._4_4_);
  }
  return 0x53;
}



void xlfd_round_double(void)

{
  xlfd_round_double();
  return;
}



void FontFileRegisterRenderer(undefined8 param_1)

{
  FontFilePriorityRegisterRenderer(param_1,0);
  return;
}



void FT_Get_PS_Font_Info(void)

{
  FT_Get_PS_Font_Info();
  return;
}



void FT_Set_Charmap(void)

{
  FT_Set_Charmap();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int close(int __fd)

{
  int iVar1;
  
  iVar1 = close(__fd);
  return iVar1;
}



void fs_create_font(void)

{
  fs_create_font();
  return;
}



void _fs_io_init(void)

{
  _fs_io_init();
  return;
}



void bitmapComputeWeight(void)

{
  bitmapComputeWeight();
  return;
}



void FontEncFromXLFD(void)

{
  FontEncFromXLFD();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int closedir(DIR *__dirp)

{
  int iVar1;
  
  iVar1 = closedir(__dirp);
  return iVar1;
}



void _fs_write_pad(void)

{
  _fs_write_pad();
  return;
}



void FT_Outline_Get_BBox(void)

{
  FT_Outline_Get_BBox();
  return;
}



void FontEncFind(void)

{
  FontEncFind();
  return;
}



void fs_register_fpe_functions(void)

{
  fs_register_fpe_functions();
  return;
}



void FontFileSortTable(int *param_1)

{
  if (param_1[4] == 0) {
    qsort(*(void **)(param_1 + 2),(long)*param_1,0x98,FUN_0010bd70);
    param_1[4] = 1;
    return;
  }
  return;
}



void FT_Select_Charmap(void)

{
  FT_Select_Charmap();
  return;
}



void FT_Get_Sfnt_Table(void)

{
  FT_Get_Sfnt_Table();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ssize_t read(int __fd,void *__buf,size_t __nbytes)

{
  ssize_t sVar1;
  
  sVar1 = read(__fd,__buf,__nbytes);
  return sVar1;
}



void FontFileFreeTable(int *param_1)

{
  long lVar1;
  long lVar2;
  
  if (0 < *param_1) {
    lVar1 = 0;
    do {
      lVar2 = lVar1 + 1;
      FontFileFreeEntry(*(long *)(param_1 + 2) + lVar1 * 0x98);
      lVar1 = lVar2;
    } while ((int)lVar2 < *param_1);
  }
  free(*(void **)(param_1 + 2));
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int memcmp(void *__s1,void *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = memcmp(__s1,__s2,__n);
  return iVar1;
}



void _fs_unmark_block(void)

{
  _fs_unmark_block();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int getsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t *__optlen)

{
  int iVar1;
  
  iVar1 = getsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



long FontFileOpen(char *param_1)

{
  char *pcVar1;
  int __fd;
  uint uVar2;
  long lVar3;
  size_t sVar4;
  long lVar5;
  byte *pbVar6;
  byte *pbVar7;
  bool bVar8;
  bool bVar9;
  byte bVar10;
  
  bVar10 = 0;
  __fd = open(param_1,0);
  lVar5 = 0;
  if (-1 < __fd) {
    lVar3 = BufFileOpenRead(__fd);
    lVar5 = lVar3;
    if (lVar3 == 0) {
      close(__fd);
    }
    else {
      sVar4 = strlen(param_1);
      uVar2 = (uint)sVar4;
      if (2 < (int)uVar2) {
        pcVar1 = param_1 + (long)(int)uVar2 + -2;
        if (((*pcVar1 == '.') && (pcVar1[1] == 'Z')) && (pcVar1[2] == '\0')) {
          lVar5 = BufFilePushCompressed(lVar3);
        }
        else {
          bVar8 = uVar2 < 3;
          bVar9 = uVar2 == 3;
          if (bVar9) {
            return lVar3;
          }
          lVar5 = 4;
          pbVar6 = (byte *)(param_1 + (long)(int)uVar2 + -3);
          pbVar7 = &DAT_00133211;
          do {
            if (lVar5 == 0) break;
            lVar5 = lVar5 + -1;
            bVar8 = *pbVar6 < *pbVar7;
            bVar9 = *pbVar6 == *pbVar7;
            pbVar6 = pbVar6 + (ulong)bVar10 * -2 + 1;
            pbVar7 = pbVar7 + (ulong)bVar10 * -2 + 1;
          } while (bVar9);
          if ((!bVar8 && !bVar9) != bVar8) {
            return lVar3;
          }
          lVar5 = BufFilePushZIP(lVar3);
        }
        if (lVar5 == 0) {
          BufFileClose(lVar3,1);
          lVar5 = 0;
        }
      }
    }
  }
  return lVar5;
}



void _fs_write(void)

{
  _fs_write();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * calloc(size_t __nmemb,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = calloc(__nmemb,__size);
  return pvVar1;
}



void NameForAtom(void)

{
  NameForAtom();
  return;
}



void pcfReadFont(void)

{
  pcfReadFont();
  return;
}



void GetNewFontClientID(void)

{
  GetNewFontClientID();
  return;
}



uint * FontFileFindScaledInstance(long param_1,uint *param_2,int param_3)

{
  char *pcVar1;
  int iVar2;
  uint uVar3;
  long lVar4;
  uint *puVar5;
  int iVar6;
  char *pcVar7;
  double *pdVar8;
  char *pcVar9;
  int iVar10;
  uint *puVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  double dVar15;
  double dVar16;
  
  lVar4 = *(long *)(param_1 + 0x28);
  iVar2 = *(int *)(lVar4 + 0x78);
  if (param_3 != 0) {
    puVar11 = (uint *)0x0;
    if (iVar2 != 0) {
      puVar11 = *(uint **)(lVar4 + 0x80);
      dVar16 = *(double *)(puVar11 + 10) - *(double *)(param_2 + 10);
      dVar12 = *(double *)(puVar11 + 0xc) - *(double *)(param_2 + 0xc);
      dVar14 = *(double *)(puVar11 + 0x10) - *(double *)(param_2 + 0x10);
      dVar13 = *(double *)(puVar11 + 0xe) - *(double *)(param_2 + 0xe);
      dVar12 = dVar13 * dVar13 + dVar16 * dVar16 + dVar12 * dVar12 + dVar14 * dVar14;
      if (1 < iVar2) {
        pdVar8 = (double *)(puVar11 + 0x2c);
        iVar10 = 0;
        iVar6 = 1;
        do {
          if (((pdVar8[0xb] == 0.0) || ((*(byte *)((long)pdVar8[0xb] + 0x13) & 2) != 0)) &&
             (dVar13 = *pdVar8 - *(double *)(param_2 + 10),
             dVar15 = pdVar8[3] - *(double *)(param_2 + 0x10),
             dVar14 = pdVar8[1] - *(double *)(param_2 + 0xc),
             dVar16 = pdVar8[2] - *(double *)(param_2 + 0xe),
             dVar13 = (double)(int)(dVar16 * dVar16 + dVar13 * dVar13 + dVar14 * dVar14 +
                                   dVar15 * dVar15), dVar13 < dVar12)) {
            dVar12 = dVar13;
            iVar10 = iVar6;
          }
          iVar6 = iVar6 + 1;
          pdVar8 = pdVar8 + 0x11;
        } while (iVar6 != iVar2);
        puVar11 = puVar11 + (long)iVar10 * 0x22;
      }
      if ((*(long *)(puVar11 + 0x20) != 0) &&
         ((*(byte *)(*(long *)(puVar11 + 0x20) + 0x13) & 2) == 0)) {
        puVar11 = (uint *)0x0;
      }
    }
    return puVar11;
  }
  if (0 < iVar2) {
    puVar5 = *(uint **)(lVar4 + 0x80);
    puVar11 = puVar5 + (ulong)(iVar2 - 1) * 0x22 + 0x22;
    do {
      if (((((*(long *)(puVar5 + 0x20) == 0) ||
            ((*(byte *)(*(long *)(puVar5 + 0x20) + 0x13) & 2) != 0)) &&
           ((*(long *)(puVar5 + 0x14) == *(long *)(param_2 + 0x14) &&
            ((puVar5[0x16] == param_2[0x16] || puVar5[0x16] == 0 || (param_2[0x16] + 1 < 2)))))) &&
          ((uVar3 = *param_2, (uVar3 & 3) == 0 ||
           (((((((*puVar5 ^ uVar3) & 3) == 0 && (true)) &&
              (*(double *)(puVar5 + 2) == *(double *)(param_2 + 2))) &&
             ((true && (*(double *)(puVar5 + 4) == *(double *)(param_2 + 4))))) &&
            (((true && ((*(double *)(puVar5 + 6) == *(double *)(param_2 + 6) && (true)))) &&
             (*(double *)(puVar5 + 8) == *(double *)(param_2 + 8))))))))) &&
         (((uVar3 & 0xc) == 0 ||
          ((((((((uVar3 ^ *puVar5) & 0xc) == 0 && (true)) &&
              (*(double *)(puVar5 + 10) == *(double *)(param_2 + 10))) &&
             ((true && (*(double *)(puVar5 + 0xc) == *(double *)(param_2 + 0xc))))) &&
            ((true && ((*(double *)(puVar5 + 0xe) == *(double *)(param_2 + 0xe) && (true)))))) &&
           (*(double *)(puVar5 + 0x10) == *(double *)(param_2 + 0x10))))))) {
        uVar3 = puVar5[0x1a];
        if (uVar3 == 0) {
          return puVar5;
        }
        if (uVar3 == param_2[0x1a]) {
          if ((int)uVar3 < 1) {
            return puVar5;
          }
          pcVar9 = *(char **)(puVar5 + 0x1c);
          pcVar7 = *(char **)(param_2 + 0x1c);
          pcVar1 = pcVar9 + (ulong)(uVar3 - 1) * 4 + 4;
          while ((((pcVar9[1] == pcVar7[1] && (*pcVar9 == *pcVar7)) && (pcVar9[3] == pcVar7[3])) &&
                 (pcVar9[2] == pcVar7[2]))) {
            pcVar9 = pcVar9 + 4;
            pcVar7 = pcVar7 + 4;
            if (pcVar1 == pcVar9) {
              return puVar5;
            }
          }
        }
      }
      puVar5 = puVar5 + 0x22;
    } while (puVar5 != puVar11);
  }
  return (uint *)0x0;
}



void _fs_flush(void)

{
  _fs_flush();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int strcmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcmp(__s1,__s2);
  return iVar1;
}



void GetClientResolutions(void)

{
  GetClientResolutions();
  return;
}



void FT_MulFix(void)

{
  FT_MulFix();
  return;
}



void __memcpy_chk(void)

{
  __memcpy_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

long strtol(char *__nptr,char **__endptr,int __base)

{
  long lVar1;
  
  lVar1 = strtol(__nptr,__endptr,__base);
  return lVar1;
}



void EmptyFontPatternCache(void)

{
  EmptyFontPatternCache();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * memcpy(void *__dest,void *__src,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memcpy(__dest,__src,__n);
  return pvVar1;
}



void bdfGetLine(void)

{
  bdfGetLine();
  return;
}



void inflateEnd(void)

{
  inflateEnd();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int inet_pton(int __af,char *__cp,void *__buf)

{
  int iVar1;
  
  iVar1 = inet_pton(__af,__cp,__buf);
  return iVar1;
}



void TwoByteSwap(void)

{
  TwoByteSwap();
  return;
}



bool FontFileDirectoryChanged(undefined8 *param_1)

{
  char *pcVar1;
  int iVar2;
  size_t sVar3;
  int *piVar4;
  long in_FS_OFFSET;
  bool bVar5;
  stat sStack_4d8;
  char acStack_448 [1032];
  long lStack_40;
  
  pcVar1 = (char *)*param_1;
  lStack_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar3 = strlen(pcVar1);
  if (sVar3 + 10 < 0x401) {
    __memcpy_chk(acStack_448,pcVar1,sVar3,0x400);
    __memcpy_chk(acStack_448 + sVar3,"fonts.dir",10,0x400 - sVar3);
    iVar2 = __xstat(1,acStack_448,&sStack_4d8);
    if (iVar2 == -1) {
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        bVar5 = param_1[1] != 0;
        goto LAB_0010ba57;
      }
    }
    else if (param_1[1] == sStack_4d8.st_mtim.tv_sec) {
      pcVar1 = (char *)*param_1;
      sVar3 = strlen(pcVar1);
      if (0x400 < sVar3 + 0xc) goto LAB_0010ba55;
      __memcpy_chk(acStack_448,pcVar1,sVar3,0x400);
      __memcpy_chk(acStack_448 + sVar3,"fonts.alias",0xc,0x400 - sVar3);
      iVar2 = __xstat(1,acStack_448,&sStack_4d8);
      if (iVar2 != -1) {
        bVar5 = param_1[2] != sStack_4d8.st_mtim.tv_sec;
        goto LAB_0010ba57;
      }
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        bVar5 = param_1[2] != 0;
        goto LAB_0010ba57;
      }
    }
    bVar5 = true;
  }
  else {
LAB_0010ba55:
    bVar5 = false;
  }
LAB_0010ba57:
  if (lStack_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return bVar5;
}



void _FontTransGetHostname(void)

{
  _FontTransGetHostname();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int fileno(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fileno(__stream);
  return iVar1;
}



void __stpcpy_chk(void)

{
  __stpcpy_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int select(int __nfds,fd_set *__readfds,fd_set *__writefds,fd_set *__exceptfds,timeval *__timeout)

{
  int iVar1;
  
  iVar1 = select(__nfds,__readfds,__writefds,__exceptfds,__timeout);
  return iVar1;
}



void FT_Get_BDF_Charset_ID(void)

{
  FT_Get_BDF_Charset_ID();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int __xstat(int __ver,char *__filename,stat *__stat_buf)

{
  int iVar1;
  
  iVar1 = __xstat(__ver,__filename,__stat_buf);
  return iVar1;
}



void FreeFontNames(void)

{
  FreeFontNames();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

dirent * readdir(DIR *__dirp)

{
  dirent *pdVar1;
  
  pdVar1 = readdir(__dirp);
  return pdVar1;
}



void fs_build_range(void)

{
  fs_build_range();
  return;
}



void bitmapComputeFontBounds(void)

{
  bitmapComputeFontBounds();
  return;
}



void _fs_convert_char_info(void)

{
  _fs_convert_char_info();
  return;
}



void FontCouldBeTerminal(void)

{
  FontCouldBeTerminal();
  return;
}



void bdfReadFont(void)

{
  bdfReadFont();
  return;
}



undefined8 * FontFileFindNameInScalableDir(long param_1,undefined8 *param_2,uint *param_3)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  uint uVar4;
  undefined8 *puVar5;
  ulong uVar6;
  undefined8 *puVar7;
  undefined8 uVar8;
  long in_FS_OFFSET;
  int iStack_2c;
  int iStack_28;
  uint uStack_24;
  long lStack_20;
  
  lStack_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_1 + 8) != 0) {
    iVar3 = FUN_0010bd80(param_1,*param_2,*(undefined2 *)((long)param_2 + 10),&iStack_2c,&iStack_28,
                         &uStack_24);
    if (-1 < iVar3) {
      puVar7 = (undefined8 *)(*(long *)(param_1 + 8) + (long)iVar3 * 0x98);
      goto LAB_0010c727;
    }
    if (iStack_2c < iStack_28) {
      lVar2 = *(long *)(param_1 + 8);
      uVar6 = (ulong)uStack_24;
      uVar8 = *param_2;
      puVar5 = (undefined8 *)(lVar2 + (long)iStack_2c * 0x98);
      do {
        if (((int)uVar6 <= (int)*(short *)((long)puVar5 + 10)) &&
           (puVar7 = puVar5, iVar3 = FUN_0010bf30(uVar8,uVar6 & 0xffffffff,*puVar5), 0 < iVar3)) {
          if (param_3 == (uint *)0x0) goto LAB_0010c727;
          uVar1 = *param_3;
          if (*(int *)(puVar5 + 2) == 0) {
            uVar4 = *(uint *)(puVar5[3] + 0x34);
          }
          else {
            uVar4 = -(uint)(*(int *)(puVar5 + 2) == 3);
          }
          if (((((uVar1 & 3) != 2) && ((uVar1 & 0xc) != 8)) || ((uVar4 & 1) != 0)) &&
             (((uVar1 & 0x40) == 0 || ((uVar4 & 2) != 0)))) goto LAB_0010c727;
        }
        puVar5 = puVar5 + 0x13;
      } while (puVar5 != (undefined8 *)
                         (lVar2 + 0x98 +
                         ((long)iStack_2c + (ulong)(uint)((iStack_28 + -1) - iStack_2c)) * 0x98));
    }
  }
  puVar7 = (undefined8 *)0x0;
LAB_0010c727:
  if (lStack_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar7;
}



void pcfError(void)

{
  pcfError();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * malloc(size_t __size)

{
  void *pvVar1;
  
  pvVar1 = malloc(__size);
  return pvVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int fflush(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fflush(__stream);
  return iVar1;
}



undefined8 FTRemap(undefined8 param_1,int *param_2,uint param_3)

{
  int iVar1;
  long lVar2;
  undefined8 uVar3;
  
  if (*(long *)(param_2 + 6) == 0) {
    if (param_3 < 0x100) goto LAB_0011176a;
  }
  else {
    if (*param_2 == 0) {
      iVar1 = FontEncRecode(param_3);
      param_3 = iVar1 + param_2[4];
LAB_0011176a:
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
      uVar3 = FT_Get_Char_Index(param_1,param_3);
      return uVar3;
    }
    lVar2 = FontEncName();
    if (lVar2 != 0) {
      uVar3 = FT_Get_Name_Index(param_1,lVar2);
      return uVar3;
    }
  }
  return 0;
}



int BufFileWrite(long *param_1,undefined *param_2,int param_3)

{
  undefined uVar1;
  undefined *puVar2;
  int iVar3;
  undefined *puVar4;
  undefined *puVar5;
  
  if (param_3 != 0) {
    puVar4 = param_2;
    do {
      iVar3 = *(int *)(param_1 + 1);
      puVar5 = puVar4 + 1;
      *(int *)(param_1 + 1) = iVar3 + -1;
      if (iVar3 + -1 == 0) {
        iVar3 = (*(code *)param_1[0x403])(*puVar4,param_1);
        if (iVar3 == -1) {
          return -1;
        }
      }
      else {
        puVar2 = (undefined *)*param_1;
        uVar1 = *puVar4;
        *param_1 = (long)(puVar2 + 1);
        *puVar2 = uVar1;
      }
      puVar4 = puVar5;
    } while (puVar5 != param_2 + (ulong)(param_3 - 1) + 1);
  }
  return param_3;
}



undefined8
FTPickMapping(long param_1,undefined8 param_2,undefined8 param_3,long param_4,undefined4 *param_5)

{
  char *pcVar1;
  int *piVar2;
  long *plVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  char *pcVar7;
  size_t sVar8;
  size_t sVar9;
  undefined8 uVar10;
  int *piVar11;
  long lVar12;
  long *plVar13;
  int *piVar14;
  byte bVar15;
  char *pcVar16;
  long in_FS_OFFSET;
  uint uStack_7c;
  char *pcStack_68;
  char *pcStack_60;
  char acStack_58 [24];
  long lStack_40;
  
  lStack_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_1 == 0) || (pcVar7 = (char *)FontEncFromXLFD(), pcVar7 == (char *)0x0)) {
    iVar5 = strcasecmp("iso8859-1","microsoft-symbol");
    pcVar7 = "iso8859-1";
    if (iVar5 != 0) {
      cVar4 = 'i';
      pcVar16 = pcVar7;
      goto LAB_001114a0;
    }
LAB_00111540:
    iVar5 = FT_Get_BDF_Charset_ID(param_4,&pcStack_68,&pcStack_60);
    if (iVar5 != 0) {
LAB_0011155a:
      iVar5 = FT_Select_Charmap(param_4,0x41444243);
      if (iVar5 == 0) {
LAB_00111410:
        *param_5 = 0;
        uVar10 = *(undefined8 *)(param_4 + 0xa8);
        param_5[4] = 0;
        *(undefined8 *)(param_5 + 6) = 0;
        *(undefined8 *)(param_5 + 2) = uVar10;
        uVar10 = 0x55;
        goto LAB_0011143b;
      }
      uStack_7c = 1;
      bVar15 = 1;
LAB_0011157d:
      lVar12 = FontEncFind(pcVar7,param_3);
      if (lVar12 == 0) {
        pcVar16 = pcVar7;
        if (bVar15 != 0) {
          lVar12 = FontEncFind("microsoft-symbol",param_3);
        }
        goto joined_r0x001114db;
      }
      goto LAB_001114e1;
    }
    uStack_7c = 1;
LAB_00111347:
    sVar8 = strlen(pcStack_68);
    sVar9 = strlen(pcStack_60);
    if (0x12 < sVar9 + sVar8) goto LAB_00111410;
    __memcpy_chk(acStack_58,pcStack_68,sVar8,0x14);
    __memcpy_chk(acStack_58 + sVar8,&DAT_001321d3,1,0x14 - sVar8);
    __strcpy_chk(acStack_58 + sVar8 + 1,pcStack_60,0x13 - sVar8);
    ErrorF("%s %s\n",acStack_58,pcVar7);
    iVar5 = strcasecmp(acStack_58,"iso10646-1");
    if (iVar5 == 0) {
      bVar15 = (byte)uStack_7c & 1;
      goto LAB_0011157d;
    }
    iVar5 = strcasecmp(acStack_58,pcVar7);
    if (iVar5 == 0) goto LAB_00111410;
  }
  else {
    iVar5 = strcasecmp(pcVar7,"microsoft-symbol");
    if (iVar5 == 0) goto LAB_00111540;
    cVar4 = *pcVar7;
    pcVar16 = pcVar7;
    while (cVar4 != '-') {
LAB_001114a0:
      if (cVar4 == '\0') {
        uStack_7c = FT_Get_BDF_Charset_ID(param_4,&pcStack_68,&pcStack_60);
        pcVar7 = pcVar16;
        if (uStack_7c == 0) goto LAB_00111347;
        goto LAB_001114c2;
      }
      pcVar1 = pcVar7 + 1;
      pcVar7 = pcVar7 + 1;
      cVar4 = *pcVar1;
    }
    iVar5 = strcasecmp(pcVar7 + 1,"fontspecific");
    iVar6 = FT_Get_BDF_Charset_ID(param_4,&pcStack_68,&pcStack_60);
    pcVar7 = pcVar16;
    if (iVar6 == 0) {
      uStack_7c = (uint)(iVar5 == 0);
      goto LAB_00111347;
    }
    if (iVar5 == 0) goto LAB_0011155a;
LAB_001114c2:
    lVar12 = FontEncFind(pcVar16,param_3);
    uStack_7c = 0;
joined_r0x001114db:
    if (lVar12 == 0) {
      ErrorF("FreeType: couldn\'t find encoding \'%s\' for \'%s\'\n",pcVar16,param_3);
      uVar10 = 0x53;
      goto LAB_0011143b;
    }
LAB_001114e1:
    iVar5 = FT_Has_PS_Glyph_Names(param_4);
    piVar14 = *(int **)(lVar12 + 0x18);
    if (iVar5 == 0) {
      if (piVar14 != (int *)0x0) goto LAB_001115e9;
    }
    else {
      piVar11 = piVar14;
      if (piVar14 != (int *)0x0) {
        do {
          if (*piVar11 == 3) {
            *(int **)(param_5 + 6) = piVar11;
            uVar10 = 0x55;
            *param_5 = 1;
            param_5[4] = 0;
            goto LAB_0011143b;
          }
          piVar2 = piVar11 + 10;
          piVar11 = *(int **)piVar2;
        } while (*(int **)piVar2 != (int *)0x0);
LAB_001115e9:
        iVar5 = *(int *)(param_4 + 0x48);
        do {
          if (*piVar14 == 1) {
            if (0 < iVar5) {
              plVar13 = *(long **)(param_4 + 0x50);
              plVar3 = plVar13 + (ulong)(iVar5 - 1) + 1;
              do {
                lVar12 = *plVar13;
                if (*(int *)(lVar12 + 0xc) == 0x10003) goto LAB_0011163d;
                plVar13 = plVar13 + 1;
              } while (plVar3 != plVar13);
            }
          }
          else if ((*piVar14 == 2) && (0 < iVar5)) {
            plVar13 = *(long **)(param_4 + 0x50);
            plVar3 = plVar13 + (ulong)(iVar5 - 1) + 1;
            do {
              lVar12 = *plVar13;
              if ((piVar14[1] == (uint)*(ushort *)(lVar12 + 0xc)) &&
                 (piVar14[2] == (uint)*(ushort *)(lVar12 + 0xe))) goto LAB_0011163d;
              plVar13 = plVar13 + 1;
            } while (plVar3 != plVar13);
          }
          piVar14 = *(int **)(piVar14 + 10);
        } while (piVar14 != (int *)0x0);
      }
    }
  }
  uVar10 = 0x58;
LAB_0011143b:
  if (lStack_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar10;
LAB_0011163d:
  *(long *)(param_5 + 2) = lVar12;
  *param_5 = 0;
  if ((uStack_7c == 0) || (lVar12 = FT_Get_Sfnt_Table(param_4,2), lVar12 == 0)) {
    param_5[4] = 0;
  }
  else {
    param_5[4] = *(ushort *)(lVar12 + 0x56) - 0x20;
  }
  *(int **)(param_5 + 6) = piVar14;
  uVar10 = 0x55;
  goto LAB_0011143b;
}



void __isoc99_sscanf(void)

{
  __isoc99_sscanf();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int ungetc(int __c,FILE *__stream)

{
  int iVar1;
  
  iVar1 = ungetc(__c,__stream);
  return iVar1;
}



void BitmapOpenScalable(void)

{
  BitmapOpenScalable();
  return;
}



void SPropRecValList_add_by_font_cap(void)

{
  SPropRecValList_add_by_font_cap();
  return;
}



void BuiltinFileClose(void)

{
  BuiltinFileClose();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int __fxstat(int __ver,int __fildes,stat *__stat_buf)

{
  int iVar1;
  
  iVar1 = __fxstat(__ver,__fildes,__stat_buf);
  return iVar1;
}



void MakeAtom(void)

{
  MakeAtom();
  return;
}



void _fs_io_reinit(void)

{
  _fs_io_reinit();
  return;
}



void GetTimeInMillis(void)

{
  GetTimeInMillis();
  return;
}



void bitmapComputeFontInkBounds(void)

{
  bitmapComputeFontInkBounds();
  return;
}



undefined8 FontFilePriorityRegisterRenderer(undefined8 *param_1,int param_2)

{
  char *__s2;
  long lVar1;
  int iVar2;
  undefined8 *puVar3;
  int iVar4;
  undefined8 *puVar5;
  size_t __size;
  undefined8 uVar6;
  int iVar7;
  
  puVar3 = DAT_0013fb58;
  iVar4 = DAT_0013fb50;
  lVar1 = DAT_0013fb40;
  if (DAT_0013fb40 == serverGeneration) {
    if (DAT_0013fb50 < 1) {
      __size = 0x10;
      iVar2 = 1;
      iVar4 = 0;
    }
    else {
      iVar7 = 0;
      __s2 = (char *)*param_1;
      puVar5 = DAT_0013fb58;
      do {
        iVar2 = strcasecmp(*(char **)*puVar5,__s2);
        if (iVar2 == 0) {
          if (param_2 <= *(int *)(puVar5 + 1)) {
            if (*(int *)(puVar5 + 1) != param_2) {
              return 1;
            }
            if (lVar1 != 1) {
              return 1;
            }
            ErrorF("Warning: font renderer for \"%s\" already registered at priority %d\n",__s2,
                   param_2);
            return 1;
          }
          if (iVar7 < iVar4) goto LAB_00110793;
          iVar2 = iVar7 + 1;
          __size = (long)iVar2 << 4;
          iVar4 = iVar7;
          goto LAB_00110706;
        }
        iVar7 = iVar7 + 1;
        puVar5 = puVar5 + 2;
      } while (iVar4 != iVar7);
      iVar2 = iVar4 + 1;
      __size = (long)iVar2 << 4;
    }
  }
  else {
    DAT_0013fb40 = serverGeneration;
    DAT_0013fb50 = 0;
    if (DAT_0013fb58 != (undefined8 *)0x0) {
      free(DAT_0013fb58);
    }
    puVar3 = (undefined8 *)0x0;
    __size = 0x10;
    iVar2 = 1;
    DAT_0013fb58 = (undefined8 *)0x0;
    iVar4 = 0;
  }
LAB_00110706:
  puVar3 = (undefined8 *)realloc(puVar3,__size);
  if (puVar3 == (undefined8 *)0x0) {
    uVar6 = 0;
  }
  else {
    puVar5 = puVar3 + (long)iVar4 * 2;
    iVar7 = iVar4;
    DAT_0013fb50 = iVar2;
    DAT_0013fb58 = puVar3;
LAB_00110793:
    uVar6 = 1;
    *(int *)(param_1 + 6) = iVar7;
    *puVar5 = param_1;
    *(int *)(puVar5 + 1) = param_2;
  }
  return uVar6;
}



undefined8
FontFileAddScaledInstance(long param_1,undefined8 *param_2,long param_3,undefined8 param_4)

{
  undefined8 *puVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  void *__ptr;
  
  lVar3 = *(long *)(param_1 + 0x28);
  iVar2 = *(int *)(lVar3 + 0x78);
  __ptr = *(void **)(lVar3 + 0x80);
  if (iVar2 == *(int *)(lVar3 + 0x7c)) {
    __ptr = realloc(__ptr,(long)(iVar2 + 4) * 0x88);
    if (__ptr == (void *)0x0) {
      return 0;
    }
    *(int *)(lVar3 + 0x7c) = iVar2 + 4;
    iVar2 = *(int *)(lVar3 + 0x78);
    *(void **)(lVar3 + 0x80) = __ptr;
  }
  *(int *)(lVar3 + 0x78) = iVar2 + 1;
  uVar4 = param_2[1];
  puVar1 = (undefined8 *)((long)__ptr + (long)iVar2 * 0x88);
  *puVar1 = *param_2;
  puVar1[1] = uVar4;
  uVar4 = param_2[3];
  puVar1[2] = param_2[2];
  puVar1[3] = uVar4;
  uVar4 = param_2[5];
  puVar1[4] = param_2[4];
  puVar1[5] = uVar4;
  uVar4 = param_2[7];
  puVar1[6] = param_2[6];
  puVar1[7] = uVar4;
  uVar4 = param_2[9];
  puVar1[8] = param_2[8];
  puVar1[9] = uVar4;
  uVar4 = param_2[0xb];
  puVar1[10] = param_2[10];
  puVar1[0xb] = uVar4;
  uVar4 = param_2[0xd];
  puVar1[0xc] = param_2[0xc];
  puVar1[0xd] = uVar4;
  uVar4 = param_2[0xe];
  puVar1[0x10] = param_3;
  puVar1[0xe] = uVar4;
  puVar1[0xf] = param_4;
  if (param_3 != 0) {
    *(long *)(param_3 + 0xa0) = param_1;
  }
  return 1;
}



void FontFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



void __strncpy_chk(void)

{
  __strncpy_chk();
  return;
}



void _fs_clean_aborted_loadglyphs(void)

{
  _fs_clean_aborted_loadglyphs();
  return;
}



void bdfGetPropertyValue(void)

{
  bdfGetPropertyValue();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * realloc(void *__ptr,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = realloc(__ptr,__size);
  return pvVar1;
}



void __strcpy_chk(void)

{
  __strcpy_chk();
  return;
}



void _fs_mark_block(void)

{
  _fs_mark_block();
  return;
}



void FontFileFreeDir(void *param_1)

{
  FontFileFreeTable((long)param_1 + 0x18);
  FontFileFreeTable((long)param_1 + 0x30);
  free(param_1);
  return;
}



void __printf_chk(void)

{
  __printf_chk();
  return;
}



undefined8 BufFilePushZIP(undefined8 param_1)

{
  long *plVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  undefined8 *__ptr;
  undefined8 uVar8;
  
  __ptr = (undefined8 *)malloc(0x4080);
  if (__ptr == (undefined8 *)0x0) {
    return 0;
  }
  __ptr[8] = 0;
  __ptr[9] = 0;
  __ptr[10] = 0;
  __ptr[0x80f] = param_1;
  *__ptr = 0;
  __ptr[3] = 0;
  *(undefined4 *)(__ptr + 4) = 0;
  *(undefined4 *)(__ptr + 1) = 0;
  iVar3 = inflateInit2_(__ptr,0xfffffff1,"1.2.11",0x70);
  *(int *)(__ptr + 0xe) = iVar3;
  if (iVar3 == 0) {
    plVar1 = (long *)__ptr[0x80f];
    *(undefined4 *)(__ptr + 4) = 0x2000;
    __ptr[3] = (long)__ptr + 0x2074;
    *(undefined4 *)(__ptr + 1) = 0;
    iVar3 = *(int *)(plVar1 + 1);
    *(int *)(plVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      uVar4 = (*(code *)plVar1[0x402])(plVar1);
      *(uint *)((long)plVar1 + 0xc) = uVar4;
      if (uVar4 == 0xffffffff) goto LAB_001103d0;
    }
    else {
      pbVar2 = (byte *)*plVar1;
      *plVar1 = (long)(pbVar2 + 1);
      uVar4 = (uint)*pbVar2;
    }
    if (uVar4 == 0x1f) {
      iVar3 = *(int *)(plVar1 + 1);
      *(int *)(plVar1 + 1) = iVar3 + -1;
      if (iVar3 == 0) {
        uVar4 = (*(code *)plVar1[0x402])(plVar1);
        *(uint *)((long)plVar1 + 0xc) = uVar4;
        if (uVar4 == 0xffffffff) goto LAB_001103d0;
      }
      else {
        pbVar2 = (byte *)*plVar1;
        *plVar1 = (long)(pbVar2 + 1);
        uVar4 = (uint)*pbVar2;
      }
      if (uVar4 == 0x8b) {
        iVar3 = *(int *)(plVar1 + 1);
        *(int *)(plVar1 + 1) = iVar3 + -1;
        if (iVar3 == 0) {
          uVar4 = (*(code *)plVar1[0x402])(plVar1);
          *(uint *)((long)plVar1 + 0xc) = uVar4;
          if (uVar4 == 0xffffffff) goto LAB_001103d0;
        }
        else {
          pbVar2 = (byte *)*plVar1;
          *plVar1 = (long)(pbVar2 + 1);
          uVar4 = (uint)*pbVar2;
        }
        if (uVar4 == 8) {
          iVar3 = *(int *)(plVar1 + 1);
          *(int *)(plVar1 + 1) = iVar3 + -1;
          if (iVar3 == 0) {
            uVar4 = (*(code *)plVar1[0x402])(plVar1);
            *(uint *)((long)plVar1 + 0xc) = uVar4;
            if (uVar4 == 0xffffffff) goto LAB_001103d0;
          }
          else {
            pbVar2 = (byte *)*plVar1;
            *plVar1 = (long)(pbVar2 + 1);
            uVar4 = (uint)*pbVar2;
          }
          if ((uVar4 & 0xe0) == 0) {
            iVar3 = *(int *)(plVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar3 = iVar5 + -1;
            *(int *)(plVar1 + 1) = iVar3;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar3 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar3 = iVar5 + -1;
            *(int *)(plVar1 + 1) = iVar3;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar3 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            *(int *)(plVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            if ((uVar4 & 4) != 0) {
              iVar5 = *(int *)(plVar1 + 1);
              iVar3 = iVar5 + -1;
              *(int *)(plVar1 + 1) = iVar3;
              if (iVar5 == 0) {
                uVar6 = (*(code *)plVar1[0x402])(plVar1);
                *(uint *)((long)plVar1 + 0xc) = uVar6;
                if (uVar6 == 0xffffffff) goto LAB_001103d0;
                iVar3 = *(int *)(plVar1 + 1);
              }
              else {
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar6 = (uint)*pbVar2;
              }
              *(int *)(plVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar7 = (*(code *)plVar1[0x402])(plVar1);
                *(uint *)((long)plVar1 + 0xc) = uVar7;
                if (uVar7 == 0xffffffff) goto LAB_001103d0;
              }
              else {
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar7 = (uint)*pbVar2;
              }
              iVar5 = uVar7 * 0x100 + uVar6;
              iVar3 = iVar5 + -1;
              if (-1 < iVar5) {
                do {
                  iVar5 = *(int *)(plVar1 + 1);
                  *(int *)(plVar1 + 1) = iVar5 + -1;
                  if (iVar5 == 0) {
                    iVar5 = (*(code *)plVar1[0x402])(plVar1);
                    *(int *)((long)plVar1 + 0xc) = iVar5;
                    if (iVar5 == -1) goto LAB_001103d0;
                  }
                  else {
                    *plVar1 = *plVar1 + 1;
                  }
                  iVar3 = iVar3 + -1;
                } while (iVar3 != -2);
              }
            }
            uVar6 = uVar4 & 8;
            do {
              while( true ) {
                if (uVar6 == 0) {
                  uVar6 = uVar4 & 0x10;
                  goto joined_r0x00110442;
                }
                iVar3 = *(int *)(plVar1 + 1);
                *(int *)(plVar1 + 1) = iVar3 + -1;
                if (iVar3 == 0) break;
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar6 = (uint)*pbVar2;
              }
              uVar6 = (*(code *)plVar1[0x402])(plVar1);
              *(uint *)((long)plVar1 + 0xc) = uVar6;
            } while (uVar6 != 0xffffffff);
          }
        }
      }
    }
  }
  goto LAB_001103d0;
  while( true ) {
    uVar6 = (*(code *)plVar1[0x402])(plVar1);
    *(uint *)((long)plVar1 + 0xc) = uVar6;
    if (uVar6 == 0xffffffff) break;
joined_r0x00110442:
    if (uVar6 == 0) {
      if ((uVar4 & 2) != 0) {
        iVar3 = *(int *)(plVar1 + 1);
        iVar5 = iVar3 + -1;
        *(int *)(plVar1 + 1) = iVar5;
        if (iVar3 == 0) {
          iVar3 = (*(code *)plVar1[0x402])(plVar1);
          *(int *)((long)plVar1 + 0xc) = iVar3;
          if (iVar3 == -1) break;
          iVar5 = *(int *)(plVar1 + 1);
        }
        else {
          *plVar1 = *plVar1 + 1;
        }
        *(int *)(plVar1 + 1) = iVar5 + -1;
        if (iVar5 == 0) {
          iVar3 = (*(code *)plVar1[0x402])(plVar1);
          *(int *)((long)plVar1 + 0xc) = iVar3;
          if (iVar3 == -1) break;
        }
        else {
          *plVar1 = *plVar1 + 1;
        }
      }
      uVar8 = BufFileCreate(__ptr,FUN_0010ffe0,0,FUN_0010ff30,FUN_0010ff90);
      return uVar8;
    }
    iVar3 = *(int *)(plVar1 + 1);
    *(int *)(plVar1 + 1) = iVar3 + -1;
    if (iVar3 != 0) {
      pbVar2 = (byte *)*plVar1;
      *plVar1 = (long)(pbVar2 + 1);
      uVar6 = (uint)*pbVar2;
      goto joined_r0x00110442;
    }
  }
LAB_001103d0:
  free(__ptr);
  return 0;
}



void FT_Get_Char_Index(void)

{
  FT_Get_Char_Index();
  return;
}



void CatalogueRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FUN_00110b20,FUN_00111050,FUN_001111d0,FUN_001108b0,FUN_00111120,FontFileCloseFont,
             FUN_001110a0,FUN_00111030,FUN_00110a50,0,0,0,FUN_00111010,FUN_001108c0,
             FontFileEmptyBitmapSource);
  return;
}



void FontFileUnregisterBitmapSource(long param_1)

{
  long lVar1;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  bool bVar5;
  
  if (0 < (int)DAT_0013fd68._4_4_) {
    uVar3 = DAT_0013fd68._4_4_ - 1;
    uVar2 = 0;
    do {
      uVar4 = uVar2 & 0xffffffff;
      if (*(long *)((long)FontFileBitmapSources + uVar2 * 8) == param_1) {
        DAT_0013fd68._4_4_ = uVar3;
        if (uVar3 == 0) {
          DAT_0013fd68._0_4_ = 0;
          free(FontFileBitmapSources);
          FontFileBitmapSources = (void *)0x0;
          return;
        }
        if ((int)uVar3 <= (int)uVar2) {
          return;
        }
        lVar1 = (long)(int)uVar2 * 8;
        do {
          uVar3 = (int)uVar4 + 1;
          uVar4 = (ulong)uVar3;
          *(undefined8 *)((long)FontFileBitmapSources + lVar1) =
               *(undefined8 *)((long)FontFileBitmapSources + lVar1 + 8);
          lVar1 = lVar1 + 8;
        } while ((int)uVar3 < (int)DAT_0013fd68._4_4_);
        return;
      }
      bVar5 = uVar2 != uVar3;
      uVar2 = uVar2 + 1;
    } while (bVar5);
  }
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ssize_t readv(int __fd,iovec *__iovec,int __count)

{
  ssize_t sVar1;
  
  sVar1 = readv(__fd,__iovec,__count);
  return sVar1;
}



void RepadBitmap(void)

{
  RepadBitmap();
  return;
}



void SPropRecValList_search_record(void)

{
  SPropRecValList_search_record();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void * memmove(void *__dest,void *__src,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memmove(__dest,__src,__n);
  return pvVar1;
}



void FontParseXLFDName(void)

{
  FontParseXLFDName();
  return;
}



void client_auth_generation(void)

{
  client_auth_generation();
  return;
}



void _FontTransRead(void)

{
  _FontTransRead();
  return;
}



void _FontTransOpenCOTSClient(void)

{
  _FontTransOpenCOTSClient();
  return;
}



void FT_Render_Glyph(void)

{
  FT_Render_Glyph();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int open(char *__file,int __oflag,...)

{
  int iVar1;
  
  iVar1 = open(__file,__oflag);
  return iVar1;
}



void bdfIsInteger(void)

{
  bdfIsInteger();
  return;
}



void _FontTransSetOption(void)

{
  _FontTransSetOption();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

FILE * fopen(char *__filename,char *__modes)

{
  FILE *pFVar1;
  
  pFVar1 = fopen(__filename,__modes);
  return pFVar1;
}



void inflateInit2_(void)

{
  inflateInit2_();
  return;
}



void BuiltinRegisterFpeFunctions(void)

{
  BuiltinRegisterFpeFunctions();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

long sysconf(int __name)

{
  long lVar1;
  
  lVar1 = sysconf(__name);
  return lVar1;
}



void FT_Set_Transform(void)

{
  FT_Set_Transform();
  return;
}



void FT_Vector_Transform(void)

{
  FT_Vector_Transform();
  return;
}



void MakeFontNamesRecord(void)

{
  MakeFontNamesRecord();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int getsockname(int __fd,sockaddr *__addr,socklen_t *__len)

{
  int iVar1;
  
  iVar1 = getsockname(__fd,__addr,__len);
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

double sin(double __x)

{
  double dVar1;
  
  dVar1 = sin(__x);
  return dVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

double floor(double __x)

{
  double dVar1;
  
  dVar1 = floor(__x);
  return dVar1;
}



void init_fs_handlers(void)

{
  init_fs_handlers();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strcat(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = strcat(__dest,__src);
  return pcVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int creat(char *__file,__mode_t __mode)

{
  int iVar1;
  
  iVar1 = creat(__file,__mode);
  return iVar1;
}



void ClientSignal(void)

{
  ClientSignal();
  return;
}



void remove_fs_handlers(void)

{
  remove_fs_handlers();
  return;
}



int BufFileRead(long *param_1,undefined *param_2,int param_3)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  int iVar4;
  bool bVar5;
  
  iVar4 = param_3 + -1;
  if (param_3 != 0) {
    do {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) goto LAB_0010a877;
      }
      else {
        pbVar2 = (byte *)*param_1;
        *param_1 = (long)(pbVar2 + 1);
        uVar3 = (uint)*pbVar2;
      }
      *param_2 = (char)uVar3;
      bVar5 = iVar4 != 0;
      param_2 = param_2 + 1;
      iVar4 = iVar4 + -1;
    } while (bVar5);
  }
  iVar4 = -1;
LAB_0010a877:
  return (param_3 - iVar4) + -1;
}



int FontFileCountDashes(char *param_1,int param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  
  if (param_2 == 0) {
    return 0;
  }
  iVar1 = 0;
  pcVar3 = param_1;
  do {
    pcVar2 = pcVar3 + 1;
    iVar1 = iVar1 + (uint)(*pcVar3 == '-');
    pcVar3 = pcVar2;
  } while (param_1 + (ulong)(param_2 - 1) + 1 != pcVar2);
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int connect(int __fd,sockaddr *__addr,socklen_t __len)

{
  int iVar1;
  
  iVar1 = connect(__fd,__addr,__len);
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

size_t fwrite(void *__ptr,size_t __size,size_t __n,FILE *__s)

{
  size_t sVar1;
  
  sVar1 = fwrite(__ptr,__size,__n,__s);
  return sVar1;
}



void __fprintf_chk(void)

{
  __fprintf_chk();
  return;
}



void FontFileSwitchStringsToBitmapPointers(long param_1)

{
  long *plVar1;
  long lVar2;
  long *plVar3;
  long *plVar4;
  int iVar5;
  int iVar6;
  long *plVar7;
  int iVar8;
  
  plVar1 = *(long **)(param_1 + 0x38);
  if (*(int *)(param_1 + 0x18) < 1) {
    return;
  }
  plVar7 = (long *)(*(long *)(param_1 + 0x20) + 0x28);
  iVar8 = 0;
  do {
    lVar2 = *plVar7;
    if (0 < *(int *)(lVar2 + 0x78)) {
      plVar4 = (long *)(*(long *)(lVar2 + 0x80) + 0x78);
      iVar6 = 0;
      do {
        iVar5 = 0;
        plVar3 = plVar1;
        if (0 < *(int *)(param_1 + 0x30)) {
          do {
            while (*plVar3 != *plVar4) {
              iVar5 = iVar5 + 1;
              plVar3 = plVar3 + 0x13;
              if (*(int *)(param_1 + 0x30) <= iVar5) goto LAB_0010f577;
            }
            *plVar4 = (long)plVar3;
            iVar5 = iVar5 + 1;
            plVar3 = plVar3 + 0x13;
          } while (iVar5 < *(int *)(param_1 + 0x30));
        }
LAB_0010f577:
        iVar6 = iVar6 + 1;
        plVar4 = plVar4 + 0x11;
      } while (iVar6 < *(int *)(lVar2 + 0x78));
    }
    iVar8 = iVar8 + 1;
    plVar7 = plVar7 + 0x13;
    if (*(int *)(param_1 + 0x18) <= iVar8) {
      return;
    }
  } while( true );
}



int FontFileAddFontFile(long param_1,char *param_2,char *param_3)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  long lVar4;
  size_t sVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  ushort *puVar8;
  char *pcVar9;
  char *pcVar10;
  long lVar11;
  int iVar12;
  uint uVar13;
  undefined8 *puVar14;
  byte *pbVar15;
  byte *__s;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  double dVar19;
  int iStack_1dc;
  uint uStack_1d8;
  undefined4 uStack_1d4;
  undefined8 uStack_1d0;
  undefined8 uStack_1c8;
  undefined8 uStack_1c0;
  undefined8 uStack_1b8;
  undefined8 uStack_1b0;
  undefined8 uStack_1a8;
  undefined8 uStack_1a0;
  double dStack_198;
  undefined8 uStack_190;
  int iStack_188;
  int iStack_184;
  undefined8 uStack_180;
  undefined8 uStack_178;
  undefined8 uStack_170;
  undefined8 uStack_168;
  undefined4 auStack_158 [32];
  char *pcStack_d8;
  short sStack_d0;
  short sStack_ce;
  undefined4 uStack_c8;
  long lStack_c0;
  char *pcStack_b8;
  undefined8 *puStack_b0;
  long lStack_40;
  
  bVar18 = 0;
  lStack_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar4 = FontFileMatchRenderer(param_3);
  if (lVar4 != 0) {
    sVar5 = strlen(param_2);
    sStack_d0 = (short)sVar5;
    if (sStack_d0 < 0x401) {
      iVar12 = (int)sStack_d0;
    }
    else {
      iVar12 = 0x400;
      sStack_d0 = 0x400;
    }
    pcStack_d8 = param_2;
    FUN_0010d700(param_2,param_2,iVar12);
    sStack_ce = FontFileCountDashes(pcStack_d8,(int)sStack_d0);
    pcStack_d8[sStack_d0] = '\0';
    if ((((sStack_ce == 0xe) &&
         (iVar12 = FontParseXLFDName(pcStack_d8,&uStack_1d8,0), uVar2 = uStack_1d8, iVar12 != 0)) &&
        ((uStack_1d8 & 3) != 2)) && (((uStack_1d8 & 0xc) != 8 && ((uStack_1d8 & 0x40) == 0)))) {
      if ((((uStack_1d8 & 3) != 0) &&
          (((uStack_1d8 & 0xc) != 0 &&
           (pcVar10 = *(char **)(param_1 + 0x48), pcVar10 != (char *)0x0)))) && (*pcVar10 == ':')) {
        bVar1 = true;
        pcVar9 = pcVar10;
        while( true ) {
          __s = (byte *)(pcVar9 + 1);
          pcVar9 = strchr((char *)__s,0x3a);
          if (pcVar9 == (char *)0x0) break;
          uVar13 = (int)pcVar9 - (int)__s;
          bVar16 = uVar13 < 8;
          bVar17 = uVar13 == 8;
          if (bVar17) {
            lVar11 = 8;
            pbVar15 = (byte *)"unscaled";
            do {
              if (lVar11 == 0) break;
              lVar11 = lVar11 + -1;
              bVar16 = *__s < *pbVar15;
              bVar17 = *__s == *pbVar15;
              __s = __s + (ulong)bVar18 * -2 + 1;
              pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
            } while (bVar17);
            if ((!bVar16 && !bVar17) == bVar16) {
              bVar1 = false;
            }
          }
        }
        sVar5 = strlen(pcVar10);
        uVar13 = ((int)pcVar10 + (int)sVar5) - (int)__s;
        bVar16 = uVar13 < 8;
        bVar17 = uVar13 == 8;
        if (bVar17) {
          lVar11 = 8;
          pbVar15 = (byte *)"unscaled";
          do {
            if (lVar11 == 0) break;
            lVar11 = lVar11 + -1;
            bVar16 = *__s < *pbVar15;
            bVar17 = *__s == *pbVar15;
            __s = __s + (ulong)bVar18 * -2 + 1;
            pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
          } while (bVar17);
          if ((!bVar16 && !bVar17) == bVar16) goto LAB_0010cbd6;
        }
        if (!bVar1) goto LAB_0010cbd6;
      }
      if ((uVar2 & 0xf) != 0) {
        iVar12 = 1;
        goto LAB_0010cbd9;
      }
      puVar6 = (undefined8 *)0x0;
LAB_0010cd53:
      pcVar10 = strdup(param_3);
      pcStack_b8 = pcVar10;
      if (pcVar10 != (char *)0x0) {
        puVar7 = (undefined8 *)malloc(0x90);
        if (puVar7 == (undefined8 *)0x0) {
          iVar12 = 0;
          free(pcVar10);
          goto LAB_0010cc38;
        }
        puVar14 = puVar7;
        for (lVar11 = 0xf; lVar11 != 0; lVar11 = lVar11 + -1) {
          *puVar14 = 0;
          puVar14 = puVar14 + (ulong)bVar18 * -2 + 1;
        }
        if (((uStack_1d8 & 0xc) == 4) &&
           (dVar19 = dStack_198 * 10.0, iVar12 = GetDefaultPointSize(), (int)dVar19 == iVar12)) {
          *puVar7 = CONCAT44(uStack_1d4,uStack_1d8);
          puVar7[1] = uStack_1d0;
          puVar7[2] = uStack_1c8;
          puVar7[3] = uStack_1c0;
          puVar7[4] = uStack_1b8;
          puVar7[5] = uStack_1b0;
          puVar7[0xe] = uStack_168;
          puVar7[6] = uStack_1a8;
          puVar7[7] = uStack_1a0;
          puVar7[8] = dStack_198;
          puVar7[9] = uStack_190;
          puVar7[10] = CONCAT44(iStack_184,iStack_188);
          puVar7[0xb] = uStack_180;
          puVar7[0xc] = uStack_178;
          puVar7[0xd] = uStack_170;
        }
        else {
          iVar12 = GetDefaultPointSize();
          puVar7[7] = 0;
          puVar7[6] = 0;
          *(undefined4 *)puVar7 = 4;
          *(undefined4 *)(puVar7 + 0xb) = 0xffffffff;
          puVar7[8] = (double)iVar12 / 10.0;
          puVar7[5] = (double)iVar12 / 10.0;
          if ((iStack_188 < 1) || (iStack_184 < 1)) {
            puVar8 = (ushort *)GetClientResolutions(&iStack_1dc);
            if ((puVar8 == (ushort *)0x0) || (iStack_1dc < 1)) {
              puVar7[10] = 0x4b0000004b;
            }
            else {
              *(uint *)(puVar7 + 10) = (uint)*puVar8;
              *(uint *)((long)puVar7 + 0x54) = (uint)puVar8[1];
            }
          }
          else {
            *(int *)(puVar7 + 10) = iStack_188;
            *(int *)((long)puVar7 + 0x54) = iStack_184;
          }
          FontFileCompleteXLFD(puVar7,puVar7);
        }
        puVar7[0xf] = 0;
        puVar7[0x10] = 0;
        puVar7[0x11] = 0;
        uStack_c8 = 0;
        lStack_c0 = lVar4;
        puStack_b0 = puVar7;
        lVar4 = FontFileAddEntry(param_1 + 0x18,&pcStack_d8);
        if (lVar4 == 0) {
          free(puVar7);
          goto LAB_0010cc88;
        }
        if (((uStack_1d8 & 0xf) != 0) && (puVar6 != (undefined8 *)0x0)) {
          FontFileCompleteXLFD(&uStack_1d8,&uStack_1d8);
          FontFileAddScaledInstance(lVar4,&uStack_1d8,0,*puVar6);
        }
LAB_0010cc32:
        iVar12 = 1;
        goto LAB_0010cc38;
      }
    }
    else {
LAB_0010cbd6:
      iVar12 = 0;
LAB_0010cbd9:
      uStack_c8 = 2;
      puStack_b0 = (undefined8 *)0x0;
      lStack_c0 = lVar4;
      pcStack_b8 = strdup(param_3);
      if (pcStack_b8 != (char *)0x0) {
        puVar6 = (undefined8 *)FontFileAddEntry(param_1 + 0x30,&pcStack_d8);
        if (puVar6 != (undefined8 *)0x0) {
          if (iVar12 != 0) {
            if ((uStack_1d8 & 0xf) != 0) {
              puVar7 = (undefined8 *)auStack_158;
              for (lVar11 = 0xf; lVar11 != 0; lVar11 = lVar11 + -1) {
                *puVar7 = 0;
                puVar7 = puVar7 + (ulong)bVar18 * -2 + 1;
              }
              auStack_158[0] = 5;
              FontParseXLFDName(pcStack_d8,auStack_158,3);
              sVar5 = strlen(pcStack_d8);
              sStack_d0 = (short)sVar5;
              lVar11 = FontFileFindNameInDir(param_1 + 0x18,&pcStack_d8);
              if (lVar11 != 0) {
                if (((uStack_1d8 & 0xc) == 4) &&
                   (dVar19 = dStack_198 * 10.0, iVar3 = GetDefaultPointSize(), (int)dVar19 == iVar3)
                   ) {
                  puVar7 = *(undefined8 **)(lVar11 + 0x28);
                  *puVar7 = CONCAT44(uStack_1d4,uStack_1d8);
                  puVar7[1] = uStack_1d0;
                  puVar7[2] = uStack_1c8;
                  puVar7[3] = uStack_1c0;
                  puVar7[4] = uStack_1b8;
                  puVar7[5] = uStack_1b0;
                  puVar7[6] = uStack_1a8;
                  puVar7[7] = uStack_1a0;
                  puVar7[8] = dStack_198;
                  puVar7[9] = uStack_190;
                  puVar7[10] = CONCAT44(iStack_184,iStack_188);
                  puVar7[0xb] = uStack_180;
                  puVar7[0xc] = uStack_178;
                  puVar7[0xd] = uStack_170;
                  puVar7[0xe] = uStack_168;
                  free(*(void **)(lVar11 + 0x20));
                  pcVar10 = strdup(param_3);
                  *(char **)(lVar11 + 0x20) = pcVar10;
                  if (pcVar10 == (char *)0x0) goto LAB_0010cc95;
                }
                FontFileCompleteXLFD(&uStack_1d8,&uStack_1d8);
                FontFileAddScaledInstance(lVar11,&uStack_1d8,0,*puVar6);
                goto LAB_0010cc38;
              }
            }
            goto LAB_0010cd53;
          }
          goto LAB_0010cc32;
        }
LAB_0010cc88:
        free(pcStack_b8);
      }
    }
  }
LAB_0010cc95:
  iVar12 = 0;
LAB_0010cc38:
  if (lStack_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar12;
}



void FT_Has_PS_Glyph_Names(void)

{
  FT_Has_PS_Glyph_Names();
  return;
}



void FontParseRanges(void)

{
  FontParseRanges();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

double hypot(double __x,double __y)

{
  double dVar1;
  
  dVar1 = hypot(__x,__y);
  return dVar1;
}



void BitmapRegisterFontFileFunctions(void)

{
  BitmapRegisterFontFileFunctions();
  return;
}



void CheckFSFormat(void)

{
  CheckFSFormat();
  return;
}



void FT_Set_Char_Size(void)

{
  FT_Set_Char_Size();
  return;
}



void _FontTransGetConnectionNumber(void)

{
  _FontTransGetConnectionNumber();
  return;
}



void find_old_font(void)

{
  find_old_font();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int getaddrinfo(char *__name,char *__service,addrinfo *__req,addrinfo **__pai)

{
  int iVar1;
  
  iVar1 = getaddrinfo(__name,__service,__req,__pai);
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strdup(char *__s)

{
  char *pcVar1;
  
  pcVar1 = strdup(__s);
  return pcVar1;
}



undefined8 * FontFileMatchRenderer(char *param_1)

{
  long *plVar1;
  undefined8 *puVar2;
  int iVar3;
  size_t sVar4;
  long *plVar5;
  
  sVar4 = strlen(param_1);
  if (0 < DAT_0013fb50) {
    plVar1 = DAT_0013fb58 + (ulong)(DAT_0013fb50 - 1) * 2 + 2;
    plVar5 = DAT_0013fb58;
    do {
      puVar2 = (undefined8 *)*plVar5;
      if ((*(int *)(puVar2 + 1) <= (int)sVar4) &&
         (iVar3 = strcasecmp(param_1 + ((long)(int)sVar4 - (long)*(int *)(puVar2 + 1)),
                             (char *)*puVar2), iVar3 == 0)) {
        return puVar2;
      }
      plVar5 = plVar5 + 2;
    } while (plVar1 != plVar5);
  }
  return (undefined8 *)0x0;
}



void pcfReadFontInfo(void)

{
  pcfReadFontInfo();
  return;
}



void FontFileRemoveScaledInstance(long param_1,long param_2)

{
  undefined8 *puVar1;
  long lVar2;
  void *__ptr;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  long lVar18;
  long lVar19;
  int iVar20;
  int iVar21;
  
  lVar2 = *(long *)(param_1 + 0x28);
  if (0 < *(int *)(lVar2 + 0x78)) {
    iVar21 = 0;
    do {
      while( true ) {
        lVar19 = (long)iVar21 * 0x88;
        lVar18 = *(long *)(lVar2 + 0x80) + lVar19;
        if (*(long *)(lVar18 + 0x80) == param_2) break;
        iVar20 = *(int *)(lVar2 + 0x78);
LAB_0010f5d5:
        iVar21 = iVar21 + 1;
        if (iVar20 <= iVar21) {
          return;
        }
      }
      __ptr = *(void **)(lVar18 + 0x70);
      if (__ptr != (void *)0x0) {
        free(__ptr);
      }
      iVar20 = *(int *)(lVar2 + 0x78) + -1;
      *(int *)(lVar2 + 0x78) = iVar20;
      if (iVar20 <= iVar21) goto LAB_0010f5d5;
      do {
        iVar20 = iVar21;
        lVar19 = lVar19 + 0x88;
        lVar18 = *(long *)(lVar2 + 0x80);
        iVar21 = iVar20 + 1;
        uVar3 = ((undefined8 *)(lVar18 + lVar19))[1];
        puVar1 = (undefined8 *)(lVar18 + 0x10 + lVar19);
        uVar4 = *puVar1;
        uVar5 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x20 + lVar19);
        uVar6 = *puVar1;
        uVar7 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x30 + lVar19);
        uVar8 = *puVar1;
        uVar9 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x40 + lVar19);
        uVar10 = *puVar1;
        uVar11 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x50 + lVar19);
        uVar12 = *puVar1;
        uVar13 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + -0x88 + lVar19);
        *puVar1 = *(undefined8 *)(lVar18 + lVar19);
        puVar1[1] = uVar3;
        puVar1 = (undefined8 *)(lVar18 + 0x60 + lVar19);
        uVar14 = *puVar1;
        uVar15 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x70 + lVar19);
        uVar16 = *puVar1;
        uVar17 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + -0x78 + lVar19);
        *puVar1 = uVar4;
        puVar1[1] = uVar5;
        uVar3 = *(undefined8 *)(lVar18 + 0x80 + lVar19);
        puVar1 = (undefined8 *)(lVar18 + -0x68 + lVar19);
        *puVar1 = uVar6;
        puVar1[1] = uVar7;
        puVar1 = (undefined8 *)(lVar18 + -0x58 + lVar19);
        *puVar1 = uVar8;
        puVar1[1] = uVar9;
        *(undefined8 *)(lVar18 + -8 + lVar19) = uVar3;
        puVar1 = (undefined8 *)(lVar18 + -0x48 + lVar19);
        *puVar1 = uVar10;
        puVar1[1] = uVar11;
        puVar1 = (undefined8 *)(lVar18 + -0x38 + lVar19);
        *puVar1 = uVar12;
        puVar1[1] = uVar13;
        puVar1 = (undefined8 *)(lVar18 + -0x28 + lVar19);
        *puVar1 = uVar14;
        puVar1[1] = uVar15;
        puVar1 = (undefined8 *)(lVar18 + -0x18 + lVar19);
        *puVar1 = uVar16;
        puVar1[1] = uVar17;
      } while (iVar21 < *(int *)(lVar2 + 0x78));
      iVar21 = iVar20 + 2;
    } while (iVar21 < *(int *)(lVar2 + 0x78));
  }
  return;
}



void BitOrderInvert(void)

{
  BitOrderInvert();
  return;
}



void FreeTypeRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&PTR_DAT_0013e900);
  FontFileRegisterRenderer(&PTR_DAT_0013e938);
  FontFileRegisterRenderer(&PTR_DAT_0013e970);
  FontFileRegisterRenderer(&PTR_DAT_0013e9a8);
  FontFileRegisterRenderer(&PTR_DAT_0013e9e0);
  FontFileRegisterRenderer(&PTR_DAT_0013ea18);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0013e880,0xfffffff6);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0013e8b8,0xfffffff6);
  return;
}



void set_font_authorizations(void)

{
  set_font_authorizations();
  return;
}



void bdfSpecialProperty(void)

{
  bdfSpecialProperty();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int getc(FILE *__stream)

{
  int iVar1;
  
  iVar1 = getc(__stream);
  return iVar1;
}



void fs_alloc_glyphs(void)

{
  fs_alloc_glyphs();
  return;
}



void FontFileRegisterFpeFunctions(void)

{
  BitmapRegisterFontFileFunctions();
  FreeTypeRegisterFontFileFunctions();
  FontFileRegisterLocalFpeFunctions();
  CatalogueRegisterLocalFpeFunctions();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * strstr(char *__haystack,char *__needle)

{
  char *pcVar1;
  
  pcVar1 = strstr(__haystack,__needle);
  return pcVar1;
}



void bdfWarning(void)

{
  bdfWarning();
  return;
}



void _fs_convert_props(void)

{
  _fs_convert_props();
  return;
}



void FT_Get_Sfnt_Name(void)

{
  FT_Get_Sfnt_Name();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int rand(void)

{
  int iVar1;
  
  iVar1 = rand();
  return iVar1;
}



void FourByteSwap(void)

{
  FourByteSwap();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

ushort ** __ctype_b_loc(void)

{
  ushort **ppuVar1;
  
  ppuVar1 = __ctype_b_loc();
  return ppuVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void freeaddrinfo(addrinfo *__ai)

{
  freeaddrinfo(__ai);
  return;
}



void ErrorF(void)

{
  ErrorF();
  return;
}



void FontFileFindNameInDir(undefined8 param_1,undefined8 param_2)

{
  FontFileFindNameInScalableDir(param_1,param_2,0);
  return;
}



void __sprintf_chk(void)

{
  __sprintf_chk();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int socket(int __domain,int __type,int __protocol)

{
  int iVar1;
  
  iVar1 = socket(__domain,__type,__protocol);
  return iVar1;
}



void FUN_0010a1b0(void)

{
  _fs_free_props();
  return;
}



void processEntry entry(void)

{
  FUN_0011cb13();
  return;
}



void FUN_0010a1d0(void)

{
  if ((false) && (true)) {
    _ITM_deregisterTMCloneTable();
    return;
  }
  return;
}



void FUN_0010a200(void)

{
  if ((false) && (true)) {
    _ITM_registerTMCloneTable();
    return;
  }
  return;
}



void _FINI_0(void)

{
  if (DAT_0013f700 == '\0') {
    if (true) {
      __cxa_finalize(PTR_LOOP_0013e860);
    }
    FUN_0010a1d0();
    DAT_0013f700 = 1;
    return;
  }
  return;
}



void _INIT_0(void)

{
  FUN_0010a200();
  return;
}



undefined8 FontFileRegisterBitmapSource(long param_1)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  
  if (0 < DAT_0013fd68._4_4_) {
    plVar1 = FontFileBitmapSources;
    do {
      if (*plVar1 == param_1) {
        return 1;
      }
      plVar1 = plVar1 + 1;
    } while (plVar1 != FontFileBitmapSources + (ulong)(DAT_0013fd68._4_4_ - 1) + 1);
  }
  plVar1 = FontFileBitmapSources;
  iVar2 = (int)DAT_0013fd68;
  if ((int)DAT_0013fd68 == DAT_0013fd68._4_4_) {
    iVar2 = DAT_0013fd68._4_4_ + 4;
    plVar1 = (long *)realloc(FontFileBitmapSources,(long)iVar2 << 3);
    if (plVar1 == (long *)0x0) {
      return 0;
    }
  }
  DAT_0013fd68._0_4_ = iVar2;
  FontFileBitmapSources = plVar1;
  lVar3 = (long)DAT_0013fd68._4_4_;
  DAT_0013fd68._4_4_ = DAT_0013fd68._4_4_ + 1;
  FontFileBitmapSources[lVar3] = param_1;
  return 1;
}



void FontFileUnregisterBitmapSource(long param_1)

{
  long lVar1;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  bool bVar5;
  
  if (0 < (int)DAT_0013fd68._4_4_) {
    uVar3 = DAT_0013fd68._4_4_ - 1;
    uVar2 = 0;
    do {
      uVar4 = uVar2 & 0xffffffff;
      if (*(long *)((long)FontFileBitmapSources + uVar2 * 8) == param_1) {
        DAT_0013fd68._4_4_ = uVar3;
        if (uVar3 == 0) {
          DAT_0013fd68._0_4_ = 0;
          free(FontFileBitmapSources);
          FontFileBitmapSources = (void *)0x0;
          return;
        }
        if ((int)uVar3 <= (int)uVar2) {
          return;
        }
        lVar1 = (long)(int)uVar2 * 8;
        do {
          uVar3 = (int)uVar4 + 1;
          uVar4 = (ulong)uVar3;
          *(undefined8 *)((long)FontFileBitmapSources + lVar1) =
               *(undefined8 *)((long)FontFileBitmapSources + lVar1 + 8);
          lVar1 = lVar1 + 8;
        } while ((int)uVar3 < (int)DAT_0013fd68._4_4_);
        return;
      }
      bVar5 = uVar2 != uVar3;
      uVar2 = uVar2 + 1;
    } while (bVar5);
  }
  return;
}



void FontFileEmptyBitmapSource(void)

{
  if (DAT_0013fd68._4_4_ == 0) {
    return;
  }
  DAT_0013fd68 = 0;
  free(FontFileBitmapSources);
  FontFileBitmapSources = (void *)0x0;
  return;
}



undefined8
FontFileMatchBitmapSource
          (long param_1,long *param_2,undefined4 param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined4 param_7,undefined4 param_8,undefined4 param_9)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  
  if (0 < DAT_0013fd68._4_4_) {
    lVar4 = 0;
    do {
      lVar1 = lVar4 * 8;
      lVar2 = *(long *)(FontFileBitmapSources + lVar4 * 8);
      if (((lVar2 != param_1) &&
          (lVar2 = FontFileFindNameInDir(*(long *)(lVar2 + 0x18) + 0x18,param_5), lVar2 != 0)) &&
         (lVar2 = FontFileFindScaledInstance(lVar2,param_6,param_9), lVar2 != 0)) {
        lVar4 = *(long *)(lVar2 + 0x80);
        if (lVar4 != 0) {
          *param_2 = lVar4;
          *(undefined8 *)(lVar4 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
          return 0x55;
        }
        lVar4 = *(long *)(lVar2 + 0x78);
        if (lVar4 == 0) {
          return 0x53;
        }
        lVar2 = *(long *)(lVar4 + 0x28);
        if (lVar2 != 0) {
          *param_2 = lVar2;
          *(undefined8 *)(lVar2 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
          return 0x55;
        }
        uVar3 = FontFileOpenBitmap(*(undefined8 *)(FontFileBitmapSources + lVar1),param_2,param_3,
                                   lVar4,param_7,param_8);
        if ((int)uVar3 == 0x55) {
          if (*param_2 != 0) {
            *(undefined8 *)(*param_2 + 0x88) = *(undefined8 *)(FontFileBitmapSources + lVar1);
            return uVar3;
          }
          return uVar3;
        }
        return uVar3;
      }
      lVar4 = lVar4 + 1;
    } while ((int)lVar4 < DAT_0013fd68._4_4_);
  }
  return 0x53;
}



undefined8 FUN_0010a560(long param_1,int param_2)

{
  if (param_2 == 0) {
    return 1;
  }
  close((int)*(undefined8 *)(param_1 + 0x2030));
  return 1;
}



ulong FUN_0010a590(long *param_1)

{
  ssize_t sVar1;
  
  sVar1 = read(*(int *)(param_1 + 0x406),param_1 + 2,0x2000);
  if (0 < (int)sVar1) {
    *(int *)(param_1 + 1) = (int)sVar1 + -1;
    *param_1 = (long)param_1 + 0x11;
    return (ulong)*(byte *)(param_1 + 2);
  }
  *(undefined4 *)(param_1 + 1) = 0;
  return 0xffffffff;
}



int FUN_0010a5e0(long *param_1,int param_2)

{
  __off_t _Var1;
  int *piVar2;
  ssize_t sVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = *(int *)(param_1 + 1);
  if (param_2 <= iVar5) {
    *param_1 = *param_1 + (long)param_2;
    *(int *)(param_1 + 1) = iVar5 - param_2;
    return param_2;
  }
  iVar5 = param_2 - iVar5;
  _Var1 = lseek(*(int *)(param_1 + 0x406),(long)iVar5,1);
  if (_Var1 == -1) {
    piVar2 = __errno_location();
    if (*piVar2 != 0x1d) {
      return -1;
    }
    do {
      iVar4 = 0x2000;
      if (iVar5 < 0x2000) {
        iVar4 = iVar5;
      }
      sVar3 = read(*(int *)(param_1 + 0x406),param_1 + 2,(long)iVar4);
      if ((int)sVar3 < 1) {
        return -1;
      }
      iVar5 = iVar5 - (int)sVar3;
    } while (iVar5 != 0);
  }
  *(undefined4 *)(param_1 + 1) = 0;
  return param_2;
}



int FUN_0010a6a0(int param_1,long *param_2)

{
  long *__buf;
  undefined *puVar1;
  size_t sVar2;
  size_t __n;
  
  puVar1 = (undefined *)*param_2;
  if (param_1 != -1) {
    *param_2 = (long)(puVar1 + 1);
    *puVar1 = (char)param_1;
    puVar1 = (undefined *)*param_2;
  }
  __buf = param_2 + 2;
  *(undefined4 *)(param_2 + 1) = 0x2000;
  *param_2 = (long)__buf;
  __n = (size_t)((int)puVar1 - (int)__buf);
  sVar2 = write((int)param_2[0x406],__buf,__n);
  if (sVar2 != __n) {
    param_1 = -1;
  }
  return param_1;
}



undefined8 FUN_0010a700(long *param_1)

{
  undefined8 uVar1;
  
  if ((long *)*param_1 != param_1 + 2) {
                    // WARNING: Could not recover jumptable at 0x0010a71c. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*(code *)param_1[0x403])(0xffffffff,param_1);
    return uVar1;
  }
  return 0;
}



void BufFileCreate(long param_1,long param_2,long param_3,long param_4,long param_5)

{
  long *plVar1;
  
  plVar1 = (long *)malloc(0x2038);
  if (plVar1 != (long *)0x0) {
    plVar1[0x406] = param_1;
    *plVar1 = (long)(plVar1 + 2);
    plVar1[0x402] = param_2;
    plVar1[0x403] = param_3;
    plVar1[0x404] = param_4;
    plVar1[1] = 0;
    plVar1[0x405] = param_5;
  }
  return;
}



void BufFileOpenRead(int param_1)

{
  BufFileCreate((long)param_1,FUN_0010a590,0,FUN_0010a5e0,FUN_0010a560);
  return;
}



void BufFileOpenWrite(int param_1)

{
  long *plVar1;
  
  plVar1 = (long *)BufFileCreate((long)param_1,0,FUN_0010a6a0,0,FUN_0010a700);
  *(undefined4 *)(plVar1 + 1) = 0x2000;
  *plVar1 = (long)(plVar1 + 2);
  return;
}



int BufFileRead(long *param_1,undefined *param_2,int param_3)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  int iVar4;
  bool bVar5;
  
  iVar4 = param_3 + -1;
  if (param_3 != 0) {
    do {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) goto LAB_0010a877;
      }
      else {
        pbVar2 = (byte *)*param_1;
        *param_1 = (long)(pbVar2 + 1);
        uVar3 = (uint)*pbVar2;
      }
      *param_2 = (char)uVar3;
      bVar5 = iVar4 != 0;
      param_2 = param_2 + 1;
      iVar4 = iVar4 + -1;
    } while (bVar5);
  }
  iVar4 = -1;
LAB_0010a877:
  return (param_3 - iVar4) + -1;
}



int BufFileWrite(long *param_1,undefined *param_2,int param_3)

{
  undefined uVar1;
  undefined *puVar2;
  int iVar3;
  undefined *puVar4;
  undefined *puVar5;
  
  if (param_3 != 0) {
    puVar4 = param_2;
    do {
      iVar3 = *(int *)(param_1 + 1);
      puVar5 = puVar4 + 1;
      *(int *)(param_1 + 1) = iVar3 + -1;
      if (iVar3 + -1 == 0) {
        iVar3 = (*(code *)param_1[0x403])(*puVar4,param_1);
        if (iVar3 == -1) {
          return -1;
        }
      }
      else {
        puVar2 = (undefined *)*param_1;
        uVar1 = *puVar4;
        *param_1 = (long)(puVar2 + 1);
        *puVar2 = uVar1;
      }
      puVar4 = puVar5;
    } while (puVar5 != param_2 + (ulong)(param_3 - 1) + 1);
  }
  return param_3;
}



undefined4 BufFileClose(void *param_1)

{
  undefined4 uVar1;
  
  uVar1 = (**(code **)((long)param_1 + 0x2028))();
  free(param_1);
  return uVar1;
}



ulong FUN_0010a950(long *param_1)

{
  long *plVar1;
  undefined *puVar2;
  long *plVar3;
  undefined8 *puVar4;
  long lVar5;
  byte *pbVar6;
  byte bVar7;
  uint uVar8;
  long lVar9;
  ulong uVar10;
  byte bVar11;
  int iVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  int iVar15;
  uint uVar16;
  ulong uVar17;
  int iVar18;
  byte *pbVar19;
  long *plVar20;
  long *plVar21;
  byte *local_70;
  ulong local_68;
  undefined local_49;
  
  plVar1 = param_1 + 2;
  plVar3 = param_1 + 0x402;
  puVar4 = (undefined8 *)param_1[0x406];
  puVar14 = (undefined8 *)puVar4[1];
  local_49 = *(undefined *)(puVar4 + 3);
  local_68 = puVar4[2];
  puVar13 = puVar14;
  plVar21 = plVar1;
  if (plVar3 <= plVar1) goto LAB_0010a9d2;
  do {
    puVar13 = puVar14;
    plVar20 = plVar21;
    if (puVar4 + 0xc < puVar14) {
      do {
        puVar2 = (undefined *)((long)puVar13 + -1);
        puVar13 = (undefined8 *)((long)puVar13 + -1);
        plVar21 = (long *)((long)plVar20 + 1);
        *(undefined *)plVar20 = *puVar2;
        if (puVar13 <= puVar4 + 0xc) break;
        plVar20 = plVar21;
      } while (plVar21 < plVar3);
    }
LAB_0010a9d2:
    if (plVar3 == plVar21) {
      puVar4[1] = puVar13;
      puVar4[2] = local_68;
      *(undefined *)(puVar4 + 3) = local_49;
      goto LAB_0010abdd;
    }
    local_70 = (byte *)(puVar4 + 10);
    lVar9 = puVar4[7];
    lVar5 = puVar4[5];
    puVar14 = puVar13;
    pbVar19 = local_70;
    if (*(int *)(puVar4 + 8) < 1) {
      uVar8 = *(uint *)(puVar4 + 9);
      iVar18 = *(int *)((long)puVar4 + 0x44);
      if (*(int *)((long)puVar4 + 0x4c) <= (int)uVar8) {
        if (lVar5 < lVar9) {
          iVar18 = iVar18 + 1;
          *(int *)((long)puVar4 + 0x44) = iVar18;
          if (iVar18 == *(int *)(puVar4 + 4)) goto LAB_0010ad30;
          goto LAB_0010aa16;
        }
LAB_0010aa31:
        plVar20 = (long *)*puVar4;
        iVar12 = iVar18;
        if (0 < iVar18) goto LAB_0010aa74;
        break;
      }
      if (lVar5 < lVar9) goto LAB_0010aa04;
      iVar12 = uVar8 + iVar18;
      uVar16 = uVar8 & 7;
      iVar15 = 8 - uVar16;
      local_70 = local_70 + ((int)uVar8 >> 3);
    }
    else {
      if (lVar5 < lVar9) {
        iVar18 = *(int *)((long)puVar4 + 0x44);
LAB_0010aa04:
        iVar18 = iVar18 + 1;
        *(int *)((long)puVar4 + 0x44) = iVar18;
        if (iVar18 == *(int *)(puVar4 + 4)) {
LAB_0010ad30:
          lVar9 = puVar4[6];
        }
        else {
LAB_0010aa16:
          lVar9 = (long)((1 << ((byte)iVar18 & 0x1f)) + -1);
        }
        puVar4[5] = lVar9;
        if (*(int *)(puVar4 + 8) < 1) goto LAB_0010aa31;
      }
      plVar20 = (long *)*puVar4;
      puVar4[5] = 0x1ff;
      iVar12 = 9;
      puVar4[8] = 0x900000000;
LAB_0010aa74:
      do {
        iVar18 = *(int *)(plVar20 + 1);
        *(int *)(plVar20 + 1) = iVar18 + -1;
        if (iVar18 == 0) {
          uVar8 = (*(code *)plVar20[0x402])(plVar20);
          *(uint *)((long)plVar20 + 0xc) = uVar8;
          if (uVar8 == 0xffffffff) break;
        }
        else {
          pbVar6 = (byte *)*plVar20;
          *plVar20 = (long)(pbVar6 + 1);
          uVar8 = (uint)*pbVar6;
        }
        *pbVar19 = (byte)uVar8;
        iVar12 = iVar12 + -1;
        pbVar19 = pbVar19 + 1;
      } while (iVar12 != 0);
      iVar18 = *(int *)((long)puVar4 + 0x44);
      if (iVar18 == iVar12) break;
      *(undefined4 *)(puVar4 + 9) = 0;
      uVar16 = 0;
      iVar15 = 8;
      *(int *)((long)puVar4 + 0x4c) = iVar18 * 7 + iVar12 * -8 + 1;
      iVar12 = iVar18;
    }
    iVar18 = iVar18 - iVar15;
    bVar7 = local_70[1];
    uVar8 = (int)(uint)*local_70 >> (sbyte)uVar16;
    if (7 < iVar18) {
      iVar18 = iVar18 + -8;
      bVar11 = (byte)iVar15;
      iVar15 = 0x10 - uVar16;
      uVar8 = uVar8 | (uint)bVar7 << (bVar11 & 0x1f);
      bVar7 = local_70[2];
    }
    *(int *)(puVar4 + 9) = iVar12;
    uVar17 = (ulong)(int)(uVar8 | (uint)(bVar7 & (&DAT_00132000)[iVar18]) << ((byte)iVar15 & 0x1f));
    if (uVar17 == 0x100) {
      if (*(int *)((long)puVar4 + 0x1c) == 0) {
        lVar9 = puVar4[7];
        if (0x100 < lVar9) {
          uVar10 = 0x100;
          goto LAB_0010ab38;
        }
        goto LAB_0010ac70;
      }
      lVar9 = 0x1fe;
      do {
        *(undefined2 *)(puVar4[0x1ff0] + lVar9) = 0;
        lVar9 = lVar9 + -2;
      } while (lVar9 != -2);
      *(undefined4 *)(puVar4 + 8) = 1;
      puVar4[7] = 0x101;
      local_68 = 0xffffffffffffffff;
      uVar17 = local_68;
    }
    else {
      lVar9 = puVar4[7];
      uVar10 = uVar17;
      if (lVar9 <= (long)uVar17) {
LAB_0010ac70:
        if ((lVar9 < (long)uVar17) || (local_68 == 0xffffffffffffffff)) {
          return 0xffffffff;
        }
        *(undefined *)puVar13 = local_49;
        uVar10 = local_68;
        puVar13 = (undefined8 *)((long)puVar13 + 1);
      }
      for (; 0xff < (long)uVar10; uVar10 = (ulong)*(ushort *)(puVar4[0x1ff0] + uVar10 * 2)) {
LAB_0010ab38:
        *(undefined *)puVar13 = *(undefined *)(puVar4[0x1fef] + uVar10);
        puVar13 = (undefined8 *)((long)puVar13 + 1);
      }
      puVar14 = (undefined8 *)((long)puVar13 + 1);
      local_49 = *(undefined *)(puVar4[0x1fef] + uVar10);
      *(undefined *)puVar13 = local_49;
      lVar9 = puVar4[7];
      if ((lVar9 < (long)puVar4[6]) && (local_68 != 0xffffffffffffffff)) {
        *(short *)(puVar4[0x1ff0] + lVar9 * 2) = (short)local_68;
        *(undefined *)(puVar4[0x1fef] + lVar9) = local_49;
        puVar4[7] = lVar9 + 1;
      }
    }
    local_68 = uVar17;
  } while (plVar21 < plVar3);
  puVar4[1] = puVar14;
  puVar4[2] = local_68;
  *(undefined *)(puVar4 + 3) = local_49;
  if (plVar1 == plVar21) {
    *(undefined4 *)(param_1 + 1) = 0;
    uVar17 = 0xffffffff;
  }
  else {
LAB_0010abdd:
    *param_1 = (long)param_1 + 0x11;
    *(int *)(param_1 + 1) = ((int)plVar21 - (int)plVar1) + -1;
    uVar17 = (ulong)*(byte *)(param_1 + 2);
  }
  return uVar17;
}



undefined8 FUN_0010adc0(long *param_1,int param_2)

{
  int iVar1;
  undefined8 uVar2;
  
  if (param_2 == 0) {
    return 0;
  }
  do {
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) {
      uVar2 = (*(code *)param_1[0x402])(param_1);
      *(int *)((long)param_1 + 0xc) = (int)uVar2;
      if ((int)uVar2 == -1) {
        return uVar2;
      }
    }
    else {
      *param_1 = *param_1 + 1;
    }
    param_2 = param_2 + -1;
  } while (param_2 != 0);
  return 0;
}



undefined8 FUN_0010ae20(long param_1,undefined4 param_2)

{
  undefined8 uVar1;
  
  uVar1 = **(undefined8 **)(param_1 + 0x2030);
  free(*(undefined8 **)(param_1 + 0x2030));
  BufFileClose(uVar1,param_2);
  return 1;
}



undefined8 BufFilePushCompressed(long *param_1)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  undefined8 *puVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar3;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (uint)*pbVar2;
  }
  if (uVar3 == 0x1f) {
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      uVar3 = (uint)*pbVar2;
    }
    if (uVar3 == 0x9d) {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) {
          return 0;
        }
      }
      else {
        pbVar2 = (byte *)*param_1;
        *param_1 = (long)(pbVar2 + 1);
        uVar3 = (uint)*pbVar2;
      }
      uVar8 = uVar3 & 0x1f;
      if (uVar8 - 10 < 7) {
        lVar7 = (long)(1 << (sbyte)uVar8);
        puVar4 = (undefined8 *)malloc((ulong)(uint)(3 << (sbyte)uVar8) + 0xff88);
        if (puVar4 != (undefined8 *)0x0) {
          *puVar4 = param_1;
          lVar6 = 0xff;
          *(uint *)(puVar4 + 4) = uVar8;
          *(uint *)((long)puVar4 + 0x1c) = uVar3 & 0x80;
          puVar4[6] = lVar7;
          puVar4[0x1fef] = puVar4 + 0x1ff1;
          lVar7 = (long)(puVar4 + 0x1ff1) + lVar7;
          puVar4[0x1ff0] = lVar7;
          *(undefined4 *)((long)puVar4 + 0x44) = 9;
          puVar4[5] = 0x1ff;
          while( true ) {
            *(undefined2 *)(lVar7 + lVar6 * 2) = 0;
            *(char *)(puVar4[0x1fef] + lVar6) = (char)lVar6;
            lVar6 = lVar6 + -1;
            if (lVar6 == -1) break;
            lVar7 = puVar4[0x1ff0];
          }
          *(undefined4 *)(puVar4 + 8) = 0;
          puVar4[2] = 0xffffffffffffffff;
          puVar4[9] = 0;
          *(undefined (*) [16])(puVar4 + 10) = (undefined  [16])0x0;
          puVar4[7] = (ulong)(*(int *)((long)puVar4 + 0x1c) != 0) + 0x100;
          puVar4[1] = puVar4 + 0xc;
          uVar5 = BufFileCreate(puVar4,FUN_0010a950,0,FUN_0010adc0,FUN_0010ae20);
          return uVar5;
        }
      }
    }
  }
  return 0;
}



void FontDefaultFormat(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3,
                      undefined4 *param_4)

{
  *param_1 = 1;
  *param_2 = 1;
  *param_3 = 4;
  *param_4 = 1;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 FUN_0010b070(FILE *param_1,undefined8 *param_2)

{
  int iVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  size_t __size;
  byte bVar5;
  int iVar6;
  bool bVar7;
  
  iVar6 = 0;
  bVar5 = 0;
  iVar4 = 0;
  puVar3 = DAT_0013f718;
LAB_0010b097:
  while( true ) {
    if (DAT_0013f710 == iVar4) {
      if (iVar4 == 0) {
        __size = 0x40;
        iVar1 = 0x40;
      }
      else {
        iVar1 = iVar4 * 2;
        __size = (size_t)iVar1;
      }
      puVar2 = (undefined *)realloc(DAT_0013f718,__size);
      if (puVar2 == (undefined *)0x0) {
        return 3;
      }
      puVar3 = puVar2 + iVar4;
      DAT_0013f710 = iVar1;
      DAT_0013f718 = puVar2;
    }
    iVar1 = getc(param_1);
    puVar2 = DAT_0013f718;
    if (0x22 < iVar1) break;
    if ((iVar1 < -1) || (false)) goto switchD_0010b0f8_caseD_0;
    switch(iVar1) {
    default:
      goto switchD_0010b0f8_caseD_0;
    case 9:
    case 0x20:
      _DAT_0013f738 = 1;
      if (bVar5 == 1) {
        *puVar3 = 0;
        *param_2 = puVar2;
        return 0;
      }
      if ((bVar5 != 3) && (bVar5 != 0)) goto LAB_0010b12f;
      break;
    case 10:
    case 0xd:
      _DAT_0013f738 = 4;
      if ((bVar5 == 0) || (bVar5 == 3)) {
        *param_2 = 0;
        return 1;
      }
      goto LAB_0010b251;
    case 0x21:
      _DAT_0013f738 = 5;
      if (bVar5 == 0) {
        iVar6 = 3;
        bVar5 = 3;
      }
      else if (bVar5 != 3) {
        *puVar3 = 0x21;
        iVar4 = iVar4 + 1;
        puVar3 = puVar3 + 1;
      }
      break;
    case 0x22:
      _DAT_0013f738 = 0;
      if (bVar5 < 2) {
        iVar6 = 2;
        bVar5 = 2;
      }
      else {
        bVar7 = iVar6 != 2;
        bVar5 = bVar7 * '\x02' + 1;
        iVar6 = bVar7 + 1 + (uint)bVar7;
      }
      break;
    case -1:
      goto switchD_0010b0f8_caseD_ffffffff;
    }
  }
  if ((iVar1 == 0x5c) && (iVar1 = getc(param_1), iVar1 == -1)) {
switchD_0010b0f8_caseD_ffffffff:
    _DAT_0013f738 = 3;
    if ((bVar5 == 0) || (iVar1 = -1, bVar5 == 3)) {
      *param_2 = 0;
      return 2;
    }
LAB_0010b251:
    puVar2 = DAT_0013f718;
    *puVar3 = 0;
    *param_2 = puVar2;
    ungetc(iVar1,param_1);
    return 0;
  }
switchD_0010b0f8_caseD_0:
  _DAT_0013f738 = 2;
  if (bVar5 == 0) {
    iVar6 = 1;
    bVar5 = 1;
  }
  else if (bVar5 == 3) goto LAB_0010b097;
LAB_0010b12f:
  *puVar3 = (char)iVar1;
  iVar4 = iVar4 + 1;
  puVar3 = puVar3 + 1;
  goto LAB_0010b097;
}



undefined8 FontFileReadDirectory(char *param_1,long *param_2)

{
  int iVar1;
  int iVar2;
  size_t sVar3;
  char *pcVar4;
  long lVar5;
  FILE *pFVar6;
  undefined8 uVar7;
  uint *puVar8;
  uint *puVar9;
  long lVar10;
  long lVar11;
  int *piVar12;
  char cVar13;
  uint uVar14;
  uint uVar15;
  byte *pbVar16;
  long in_FS_OFFSET;
  bool bVar17;
  bool bVar18;
  byte bVar19;
  undefined4 local_2184;
  char *local_2180;
  undefined *local_2178;
  undefined2 local_2170;
  undefined2 local_216e;
  stat local_2168;
  stat local_20d8;
  undefined local_2048 [1024];
  undefined local_1c48 [1023];
  char acStack_1849 [1024];
  char cStack_1449;
  uint local_1448 [256];
  uint local_1048 [256];
  undefined local_c48 [1024];
  undefined local_848 [1024];
  undefined local_448 [1032];
  long local_40;
  
  bVar19 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar3 = strlen(param_1);
  if (sVar3 + 0xb < 0x401) {
    pcVar4 = strchr(param_1,0x3a);
    if (pcVar4 == (char *)0x0) {
      __memcpy_chk(local_1448,param_1,sVar3 + 1,0x400);
    }
    else {
      __strncpy_chk(local_1448,param_1,(long)pcVar4 - (long)param_1,0x400);
      *(undefined *)((long)local_1448 + ((long)pcVar4 - (long)param_1)) = 0;
    }
    pcVar4 = acStack_1849 + 1;
    lVar5 = __stpcpy_chk(pcVar4,local_1448,0x400);
    if (acStack_1849[lVar5 - (long)pcVar4] != '/') {
      __memcpy_chk(lVar5,&DAT_0013209c,2,(long)local_1448 - lVar5);
    }
    __strcat_chk(pcVar4,"fonts.dir",0x400);
    pFVar6 = fopen(pcVar4,"rt");
    if (pFVar6 == (FILE *)0x0) {
      piVar12 = __errno_location();
      if (*piVar12 == 2) {
        uVar7 = __strcpy_chk(local_848,local_1448,0x400);
        puVar9 = local_1448;
        do {
          puVar8 = puVar9;
          uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
          uVar15 = uVar14 & 0x80808080;
          puVar9 = puVar8 + 1;
        } while (uVar15 == 0);
        bVar17 = (uVar14 & 0x8080) == 0;
        if (bVar17) {
          uVar15 = uVar15 >> 0x10;
        }
        if (bVar17) {
          puVar9 = (uint *)((long)puVar8 + 6);
        }
        lVar10 = (long)puVar9 + ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) - (long)local_1448)
        ;
        lVar5 = 0;
        if (lVar10 + 0xdU < 0x401) goto LAB_0010b5cf;
      }
    }
    else {
      iVar1 = fileno(pFVar6);
      iVar1 = __fxstat(1,iVar1,&local_2168);
      if (((iVar1 == -1) || (iVar1 = __isoc99_fscanf(pFVar6,&DAT_001320ab,&local_2184), iVar1 != 1))
         || (lVar5 = FontFileMakeDir(param_1,local_2184), lVar5 == 0)) {
        fclose(pFVar6);
      }
      else {
        *(__time_t *)(lVar5 + 8) = local_2168.st_mtim.tv_sec;
        if (DAT_0013f720 == '\0') {
          __sprintf_chk(&DAT_0013f720,1,0x18,"%%%ds %%%d[^\n]\n",0x3ff,0x3ff);
        }
        while (iVar1 = __isoc99_fscanf(pFVar6,&DAT_0013f720,local_2048,local_1c48), iVar1 != -1) {
          if (iVar1 != 2) {
            uVar7 = 0x56;
            FontFileFreeDir(lVar5);
            fclose(pFVar6);
            goto LAB_0010b506;
          }
          FontFileAddFontFile(lVar5,local_1c48,local_2048);
        }
        fclose(pFVar6);
        uVar7 = __strcpy_chk(local_848,local_1448,0x400);
        puVar9 = local_1448;
        do {
          puVar8 = puVar9;
          uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
          uVar15 = uVar14 & 0x80808080;
          puVar9 = puVar8 + 1;
        } while (uVar15 == 0);
        bVar17 = (uVar14 & 0x8080) == 0;
        if (bVar17) {
          uVar15 = uVar15 >> 0x10;
        }
        if (bVar17) {
          puVar9 = (uint *)((long)puVar8 + 6);
        }
        lVar10 = (long)puVar9 + ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) - (long)local_1448)
        ;
        if (0x400 < lVar10 + 0xdU) {
LAB_0010b4e7:
          uVar7 = 0x56;
          goto LAB_0010b80e;
        }
LAB_0010b5cf:
        if (*(char *)((long)local_1448 + lVar10 + -1) != '/') {
          uVar7 = __strcat_chk(uVar7,&DAT_0013209c,0x400);
        }
        pcVar4 = (char *)__strcat_chk(uVar7,"fonts.alias",0x400);
        pFVar6 = fopen(pcVar4,"rt");
        if (pFVar6 != (FILE *)0x0) {
          if ((lVar5 == 0) && (lVar5 = FontFileMakeDir(local_1448,10), lVar5 == 0)) {
            uVar7 = 0x50;
            fclose(pFVar6);
            goto LAB_0010b506;
          }
          iVar1 = fileno(pFVar6);
          iVar1 = __fxstat(1,iVar1,&local_20d8);
          if (iVar1 != -1) {
            *(__time_t *)(lVar5 + 0x10) = local_20d8.st_mtim.tv_sec;
LAB_0010b65d:
            do {
              iVar1 = FUN_0010b070(pFVar6,&local_2180);
              pcVar4 = local_2180;
              if (iVar1 == 2) {
                fclose(pFVar6);
                goto LAB_0010b8c8;
              }
              if (iVar1 == 3) {
LAB_0010b800:
                uVar7 = 0x50;
LAB_0010b806:
                fclose(pFVar6);
                goto LAB_0010b80e;
              }
            } while (iVar1 != 0);
            sVar3 = strlen(local_2180);
            if (sVar3 < 0x400) {
              __memcpy_chk(local_1048,pcVar4,sVar3 + 1,0x400);
              iVar1 = FUN_0010b070(pFVar6,&local_2180);
              if (iVar1 == 2) goto LAB_0010b954;
              if (2 < iVar1) {
                if (iVar1 == 3) goto code_r0x0010b8eb;
                goto LAB_0010b65d;
              }
              if (iVar1 == 0) {
                sVar3 = strlen(local_2180);
                puVar9 = local_1048;
                if (0x3ff < sVar3) goto LAB_0010b954;
                do {
                  puVar8 = puVar9;
                  uVar14 = *puVar8 + 0xfefefeff & ~*puVar8;
                  uVar15 = uVar14 & 0x80808080;
                  puVar9 = puVar8 + 1;
                } while (uVar15 == 0);
                bVar17 = (uVar14 & 0x8080) == 0;
                if (bVar17) {
                  uVar15 = uVar15 >> 0x10;
                }
                if (bVar17) {
                  puVar9 = (uint *)((long)puVar8 + 6);
                }
                FUN_0010d700(local_1048,local_1048,
                             (byte *)((long)puVar9 +
                                     ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) -
                                     (long)local_1048)),uVar15 & 0xffffff00);
                pcVar4 = local_2180;
                sVar3 = strlen(local_2180);
                FUN_0010d700(local_c48,pcVar4,sVar3);
                iVar1 = FontFileAddFontAlias(lVar5,local_1048,local_c48);
                if (iVar1 == 0) goto LAB_0010b800;
                goto LAB_0010b65d;
              }
              bVar17 = iVar1 == 0;
              bVar18 = iVar1 == 1;
              if (!bVar18) goto LAB_0010b65d;
              lVar10 = 0x13;
              puVar9 = local_1048;
              pbVar16 = (byte *)"FILE_NAMES_ALIASES";
              do {
                if (lVar10 == 0) break;
                lVar10 = lVar10 + -1;
                bVar17 = *(byte *)puVar9 < *pbVar16;
                bVar18 = *(byte *)puVar9 == *pbVar16;
                puVar9 = (uint *)((long)puVar9 + (ulong)bVar19 * -2 + 1);
                pbVar16 = pbVar16 + (ulong)bVar19 * -2 + 1;
              } while (bVar18);
              cVar13 = (!bVar17 && !bVar18) - bVar17;
              iVar1 = (int)cVar13;
              if (cVar13 == '\0') {
                if (0 < *(int *)(lVar5 + 0x30)) {
                  lVar10 = 0;
                  do {
                    lVar11 = *(long *)(lVar5 + 0x38) + lVar10;
                    if (*(int *)(lVar11 + 0x10) == 2) {
                      pcVar4 = *(char **)(lVar11 + 0x20);
                      lVar11 = FontFileMatchRenderer(pcVar4);
                      if (lVar11 != 0) {
                        sVar3 = strlen(pcVar4);
                        uVar15 = (int)sVar3 - *(int *)(lVar11 + 8);
                        if (uVar15 < 0x400) {
                          FUN_0010d700(local_448,pcVar4,uVar15);
                          local_448[(int)uVar15] = 0;
                          local_2170 = (undefined2)uVar15;
                          local_2178 = local_448;
                          local_216e = FontFileCountDashes(local_448,uVar15);
                          lVar11 = FontFileFindNameInDir(lVar5 + 0x30,&local_2178);
                          if ((lVar11 == 0) &&
                             (iVar2 = FontFileAddFontAlias
                                                (lVar5,local_448,
                                                 *(undefined8 *)(*(long *)(lVar5 + 0x38) + lVar10)),
                             iVar2 == 0)) goto LAB_0010b800;
                        }
                      }
                    }
                    iVar1 = iVar1 + 1;
                    lVar10 = lVar10 + 0x98;
                  } while (iVar1 < *(int *)(lVar5 + 0x30));
                }
                goto LAB_0010b65d;
              }
            }
LAB_0010b954:
            uVar7 = 0x56;
            goto LAB_0010b806;
          }
          uVar7 = 0x56;
          fclose(pFVar6);
          goto LAB_0010b80e;
        }
        piVar12 = __errno_location();
        if (*piVar12 == 2) {
          if (lVar5 != 0) {
LAB_0010b8c8:
            uVar7 = 0x55;
            FontFileSortDir(lVar5);
            *param_2 = lVar5;
            goto LAB_0010b506;
          }
        }
        else if (lVar5 != 0) goto LAB_0010b4e7;
      }
    }
  }
  uVar7 = 0x56;
  goto LAB_0010b506;
code_r0x0010b8eb:
  uVar7 = 0x50;
  fclose(pFVar6);
LAB_0010b80e:
  FontFileFreeDir(lVar5);
LAB_0010b506:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar7;
}



bool FontFileDirectoryChanged(undefined8 *param_1)

{
  char *pcVar1;
  int iVar2;
  size_t sVar3;
  int *piVar4;
  long in_FS_OFFSET;
  bool bVar5;
  stat sStack_4d8;
  char local_448 [1032];
  long local_40;
  
  pcVar1 = (char *)*param_1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar3 = strlen(pcVar1);
  if (sVar3 + 10 < 0x401) {
    __memcpy_chk(local_448,pcVar1,sVar3,0x400);
    __memcpy_chk(local_448 + sVar3,"fonts.dir",10,0x400 - sVar3);
    iVar2 = __xstat(1,local_448,&sStack_4d8);
    if (iVar2 == -1) {
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        bVar5 = param_1[1] != 0;
        goto LAB_0010ba57;
      }
    }
    else if (param_1[1] == sStack_4d8.st_mtim.tv_sec) {
      pcVar1 = (char *)*param_1;
      sVar3 = strlen(pcVar1);
      if (0x400 < sVar3 + 0xc) goto LAB_0010ba55;
      __memcpy_chk(local_448,pcVar1,sVar3,0x400);
      __memcpy_chk(local_448 + sVar3,"fonts.alias",0xc,0x400 - sVar3);
      iVar2 = __xstat(1,local_448,&sStack_4d8);
      if (iVar2 != -1) {
        bVar5 = param_1[2] != sStack_4d8.st_mtim.tv_sec;
        goto LAB_0010ba57;
      }
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        bVar5 = param_1[2] != 0;
        goto LAB_0010ba57;
      }
    }
    bVar5 = true;
  }
  else {
LAB_0010ba55:
    bVar5 = false;
  }
LAB_0010ba57:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long FontFileOpen(char *param_1)

{
  char *pcVar1;
  int __fd;
  uint uVar2;
  long lVar3;
  size_t sVar4;
  long lVar5;
  byte *pbVar6;
  byte *pbVar7;
  bool bVar8;
  bool bVar9;
  byte bVar10;
  
  bVar10 = 0;
  __fd = open(param_1,0);
  lVar5 = 0;
  if (-1 < __fd) {
    lVar3 = BufFileOpenRead(__fd);
    lVar5 = lVar3;
    if (lVar3 == 0) {
      close(__fd);
    }
    else {
      sVar4 = strlen(param_1);
      uVar2 = (uint)sVar4;
      if (2 < (int)uVar2) {
        pcVar1 = param_1 + (long)(int)uVar2 + -2;
        if (((*pcVar1 == '.') && (pcVar1[1] == 'Z')) && (pcVar1[2] == '\0')) {
          lVar5 = BufFilePushCompressed(lVar3);
        }
        else {
          bVar8 = uVar2 < 3;
          bVar9 = uVar2 == 3;
          if (bVar9) {
            return lVar3;
          }
          lVar5 = 4;
          pbVar6 = (byte *)(param_1 + (long)(int)uVar2 + -3);
          pbVar7 = &DAT_00133211;
          do {
            if (lVar5 == 0) break;
            lVar5 = lVar5 + -1;
            bVar8 = *pbVar6 < *pbVar7;
            bVar9 = *pbVar6 == *pbVar7;
            pbVar6 = pbVar6 + (ulong)bVar10 * -2 + 1;
            pbVar7 = pbVar7 + (ulong)bVar10 * -2 + 1;
          } while (bVar9);
          if ((!bVar8 && !bVar9) != bVar8) {
            return lVar3;
          }
          lVar5 = BufFilePushZIP(lVar3);
        }
        if (lVar5 == 0) {
          BufFileClose(lVar3,1);
          lVar5 = 0;
        }
      }
    }
  }
  return lVar5;
}



void FontFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



undefined8 FontFileOpenWrite(char *param_1)

{
  int iVar1;
  undefined8 uVar2;
  
  iVar1 = creat(param_1,0x1b6);
  if (-1 < iVar1) {
    uVar2 = BufFileOpenWrite(iVar1);
    return uVar2;
  }
  return 0;
}



void FontFileOpenWriteFd(void)

{
  BufFileOpenWrite();
  return;
}



void FontFileOpenFd(void)

{
  BufFileOpenRead();
  return;
}



int FUN_0010bcd0(byte *param_1,byte *param_2)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  bool bVar4;
  long lVar5;
  
  bVar4 = false;
  while( true ) {
    bVar2 = *param_1;
    bVar3 = *param_2;
    if (bVar2 == 0) {
      return -(uint)(bVar3 != 0);
    }
    if (((byte)(bVar2 - 0x30) < 10) && ((byte)(bVar3 - 0x30) < 10)) {
      if (!bVar4) {
        lVar5 = 1;
        while (pbVar1 = param_2 + lVar5, (byte)(param_1[lVar5] - 0x30) < 10) {
          lVar5 = lVar5 + 1;
          if (9 < (byte)(*pbVar1 - 0x30)) {
            return 1;
          }
        }
        if ((byte)(*pbVar1 - 0x30) < 10) {
          return -1;
        }
        bVar4 = true;
      }
    }
    else {
      bVar4 = false;
    }
    if (bVar2 < bVar3) {
      return -1;
    }
    if (bVar3 < bVar2) break;
    param_1 = param_1 + 1;
    param_2 = param_2 + 1;
  }
  return 1;
}



void FUN_0010bd70(undefined8 *param_1,undefined8 *param_2)

{
  FUN_0010bcd0(*param_1,*param_2);
  return;
}



ulong FUN_0010bd80(int *param_1,char *param_2,short param_3,int *param_4,int *param_5,int *param_6)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  int iVar4;
  char *pcVar5;
  int iVar6;
  char *pcVar7;
  int iVar8;
  char *pcVar9;
  ulong uVar10;
  uint uVar11;
  ulong uVar12;
  char *pcVar13;
  int iVar14;
  
  cVar1 = *param_2;
  iVar6 = *param_1;
  if (cVar1 == '\0') {
LAB_0010be38:
    *param_6 = -1;
    if (param_1[4] != 0) {
      uVar10 = 0;
      while (iVar8 = iVar6, (int)uVar10 < iVar8) {
        uVar11 = iVar8 + (int)uVar10 >> 1;
        uVar12 = (ulong)uVar11;
        iVar3 = FUN_0010bcd0(param_2,*(undefined8 *)
                                      (*(long *)(param_1 + 2) + (long)(int)uVar11 * 0x98));
        if (iVar3 == 0) goto LAB_0010be1f;
        iVar6 = (int)uVar12;
        if (-1 < iVar3) {
          uVar10 = (ulong)((int)uVar12 + 1);
          iVar6 = iVar8;
        }
      }
      *param_4 = 1;
      uVar12 = 0xffffffff;
      *param_5 = 0;
      goto LAB_0010be1f;
    }
  }
  else {
    pcVar13 = (char *)0x0;
    pcVar9 = (char *)0x0;
    pcVar2 = param_2 + 1;
    pcVar7 = param_2;
    do {
      pcVar5 = pcVar2;
      if ((cVar1 == '*' || cVar1 == '?') && (pcVar9 == (char *)0x0)) {
        pcVar9 = pcVar7;
      }
      if (((byte)(cVar1 - 0x30U) < 10) && (pcVar13 == (char *)0x0)) {
        pcVar13 = pcVar7;
      }
      cVar1 = *pcVar5;
      pcVar2 = pcVar5 + 1;
      pcVar7 = pcVar5;
    } while (cVar1 != '\0');
    if (pcVar9 == (char *)0x0) goto LAB_0010be38;
    *param_6 = (int)param_3;
    if (param_1[4] != 0) {
      if ((pcVar13 == (char *)0x0) || (pcVar9 <= pcVar13)) {
        iVar8 = (int)pcVar9 - (int)param_2;
      }
      else {
        iVar8 = (int)pcVar13 - (int)param_2;
      }
      iVar3 = 0;
      while (iVar14 = iVar6, iVar3 < iVar14) {
        iVar6 = iVar14 + iVar3 >> 1;
        iVar4 = strncmp(param_2,*(char **)(*(long *)(param_1 + 2) + (long)iVar6 * 0x98),(long)iVar8)
        ;
        if (iVar4 == 0) break;
        if (-1 < iVar4) {
          iVar3 = iVar6 + 1;
          iVar6 = iVar14;
        }
      }
      *param_4 = iVar3;
      uVar12 = 0xffffffff;
      *param_5 = iVar14;
      goto LAB_0010be1f;
    }
  }
  *param_4 = 0;
  uVar12 = 0xffffffff;
  *param_5 = iVar6;
LAB_0010be1f:
  return uVar12 & 0xffffffff;
}



ulong FUN_0010bf30(char *param_1,int param_2,char *param_3,int param_4)

{
  char cVar1;
  char cVar2;
  int iVar3;
  ulong uVar4;
  char *pcVar5;
  bool bVar6;
  
  pcVar5 = param_1 + 1;
  cVar2 = *param_1;
  cVar1 = cVar2 + -0x2d;
  bVar6 = cVar2 == '-';
  if (bVar6) goto LAB_0010c01b;
  do {
    if (bVar6 || SBORROW1(cVar2,'-') != cVar1 < '\0') {
      if (cVar2 == '\0') {
        return (ulong)(*param_3 == '\0');
      }
      if (cVar2 == '*') {
        cVar2 = *pcVar5;
        if (cVar2 == '\0') {
          return 1;
        }
        if (cVar2 == '-') {
          while( true ) {
            do {
              while( true ) {
                iVar3 = param_4;
                cVar2 = *param_3;
                param_3 = param_3 + 1;
                if (cVar2 == '-') break;
                param_4 = iVar3;
                if (cVar2 == '\0') {
                  return 0;
                }
              }
              param_4 = iVar3 + -1;
            } while (iVar3 < param_2);
            uVar4 = FUN_0010bf30(param_1 + 2,param_2 + -1,param_3,param_4);
            if ((int)uVar4 != 0) break;
            if (iVar3 == param_2) {
              return uVar4;
            }
          }
        }
        else {
LAB_0010bf90:
          do {
            cVar1 = *param_3;
            while (param_3 = param_3 + 1, cVar2 != cVar1) {
              if (cVar1 == '\0') {
                return 0;
              }
              if (cVar1 != '-') goto LAB_0010bf90;
              if (param_4 < param_2) {
                return 0;
              }
              param_4 = param_4 + -1;
              cVar1 = *param_3;
            }
          } while ((param_4 < param_2) ||
                  (iVar3 = FUN_0010bf30(param_1 + 2,param_2,param_3,param_4), iVar3 == 0));
        }
        return 1;
      }
LAB_0010c0a0:
      if (cVar2 != *param_3) {
        return 0;
      }
      param_3 = param_3 + 1;
      param_1 = pcVar5;
    }
    else {
      if (cVar2 != '?') goto LAB_0010c0a0;
      cVar2 = *param_3;
      param_3 = param_3 + 1;
      param_4 = param_4 - (uint)(cVar2 == '-');
      param_1 = pcVar5;
    }
    while( true ) {
      cVar2 = *param_1;
      pcVar5 = param_1 + 1;
      cVar1 = cVar2 + -0x2d;
      bVar6 = cVar1 == '\0';
      if (!bVar6) break;
LAB_0010c01b:
      if (*param_3 != '-') {
        return 0;
      }
      param_2 = param_2 + -1;
      param_4 = param_4 + -1;
      param_3 = param_3 + 1;
      param_1 = pcVar5;
    }
  } while( true );
}



undefined8 FontFileInitTable(undefined4 *param_1,uint param_2)

{
  void *pvVar1;
  
  if (0xd79435 < param_2) {
    return 0;
  }
  if (param_2 == 0) {
    *(undefined8 *)(param_1 + 2) = 0;
  }
  else {
    pvVar1 = malloc((long)(int)param_2 * 0x98);
    *(void **)(param_1 + 2) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      return 0;
    }
  }
  *param_1 = 0;
  param_1[1] = param_2;
  param_1[4] = 0;
  return 1;
}



void FontFileFreeEntry(undefined8 *param_1)

{
  void *__ptr;
  void *__ptr_00;
  int iVar1;
  long lVar2;
  void *__ptr_01;
  
  if ((void *)*param_1 != (void *)0x0) {
    free((void *)*param_1);
  }
  iVar1 = *(int *)(param_1 + 2);
  *param_1 = 0;
  if (iVar1 == 2) {
    free((void *)param_1[4]);
    param_1[4] = 0;
    return;
  }
  if (iVar1 == 3) {
    free((void *)param_1[3]);
    param_1[3] = 0;
    return;
  }
  if (iVar1 != 0) {
    return;
  }
  free((void *)param_1[4]);
  __ptr = (void *)param_1[5];
  __ptr_01 = *(void **)((long)__ptr + 0x80);
  if (0 < *(int *)((long)__ptr + 0x78)) {
    lVar2 = 0;
    iVar1 = 0;
    do {
      __ptr_00 = *(void **)((long)__ptr_01 + lVar2 + 0x70);
      if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
        __ptr_01 = *(void **)((long)__ptr + 0x80);
      }
      iVar1 = iVar1 + 1;
      lVar2 = lVar2 + 0x88;
    } while (iVar1 < *(int *)((long)__ptr + 0x78));
  }
  free(__ptr_01);
  free(__ptr);
  return;
}



void FontFileFreeTable(int *param_1)

{
  long lVar1;
  long lVar2;
  
  if (0 < *param_1) {
    lVar1 = 0;
    do {
      lVar2 = lVar1 + 1;
      FontFileFreeEntry(*(long *)(param_1 + 2) + lVar1 * 0x98);
      lVar1 = lVar2;
    } while ((int)lVar2 < *param_1);
  }
  free(*(void **)(param_1 + 2));
  return;
}



undefined8 * FontFileMakeDir(char *param_1,undefined4 param_2)

{
  int iVar1;
  char *pcVar2;
  size_t sVar3;
  undefined8 *__ptr;
  long lVar4;
  char *pcVar5;
  size_t sVar6;
  size_t sVar7;
  undefined8 *puVar8;
  bool bVar9;
  int local_40;
  
  pcVar2 = strchr(param_1,0x3a);
  if (pcVar2 == (char *)0x0) {
    sVar6 = strlen(param_1);
    sVar6 = (size_t)(int)sVar6;
    if (param_1[sVar6 - 1] == '/') {
      local_40 = 0;
      bVar9 = false;
      sVar3 = sVar6;
      sVar7 = sVar6;
    }
    else {
      local_40 = 0;
      bVar9 = true;
      sVar3 = sVar6 + 1;
      sVar7 = sVar6 + 1;
    }
  }
  else {
    sVar3 = strlen(pcVar2);
    sVar6 = (size_t)((int)pcVar2 - (int)param_1);
    local_40 = (int)sVar3;
    bVar9 = param_1[sVar6 - 1] != '/';
    sVar7 = bVar9 + sVar6;
    sVar3 = sVar7;
    if (local_40 != 0) {
      sVar3 = (long)(local_40 + 1) + sVar7;
    }
  }
  __ptr = (undefined8 *)malloc(sVar3 + 0x51);
  puVar8 = __ptr;
  if (__ptr != (undefined8 *)0x0) {
    iVar1 = FontFileInitTable(__ptr + 3,0);
    if (iVar1 != 0) {
      iVar1 = FontFileInitTable(__ptr + 6,param_2);
      if (iVar1 != 0) {
        __ptr[1] = 0;
        lVar4 = (long)__ptr + sVar7 + 0x51;
        *__ptr = __ptr + 10;
        __ptr[2] = 0;
        if (local_40 == 0) {
          lVar4 = 0;
        }
        __ptr[9] = lVar4;
        pcVar5 = strncpy((char *)(__ptr + 10),param_1,sVar6);
        pcVar5[sVar6] = '\0';
        if ((char *)__ptr[9] != (char *)0x0) {
          strcpy((char *)__ptr[9],pcVar2);
        }
        if (!bVar9) {
          return __ptr;
        }
        pcVar2 = (char *)*__ptr;
        sVar6 = strlen(pcVar2);
        pcVar2 = pcVar2 + sVar6;
        pcVar2[0] = '/';
        pcVar2[1] = '\0';
        return __ptr;
      }
      FontFileFreeTable(__ptr + 3);
    }
    puVar8 = (undefined8 *)0x0;
    free(__ptr);
  }
  return puVar8;
}



void FontFileFreeDir(void *param_1)

{
  FontFileFreeTable((long)param_1 + 0x18);
  FontFileFreeTable((long)param_1 + 0x30);
  free(param_1);
  return;
}



long * FontFileAddEntry(int *param_1,long *param_2)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  void *pvVar4;
  
  if (param_1[4] == 0) {
    iVar2 = *param_1;
    pvVar4 = *(void **)(param_1 + 2);
    if (iVar2 == param_1[1]) {
      pvVar4 = realloc(pvVar4,(long)(iVar2 + 100) * 0x98);
      if (pvVar4 == (void *)0x0) {
        return (long *)0x0;
      }
      param_1[1] = iVar2 + 100;
      iVar2 = *param_1;
      *(void **)(param_1 + 2) = pvVar4;
    }
    lVar3 = param_2[1];
    plVar1 = (long *)((long)pvVar4 + (long)iVar2 * 0x98);
    *plVar1 = *param_2;
    plVar1[1] = lVar3;
    lVar3 = param_2[3];
    plVar1[2] = param_2[2];
    plVar1[3] = lVar3;
    lVar3 = param_2[5];
    plVar1[4] = param_2[4];
    plVar1[5] = lVar3;
    lVar3 = param_2[7];
    plVar1[6] = param_2[6];
    plVar1[7] = lVar3;
    lVar3 = param_2[9];
    plVar1[8] = param_2[8];
    plVar1[9] = lVar3;
    lVar3 = param_2[0xb];
    plVar1[10] = param_2[10];
    plVar1[0xb] = lVar3;
    lVar3 = param_2[0xd];
    plVar1[0xc] = param_2[0xc];
    plVar1[0xd] = lVar3;
    lVar3 = param_2[0xf];
    plVar1[0xe] = param_2[0xe];
    plVar1[0xf] = lVar3;
    lVar3 = param_2[0x11];
    plVar1[0x10] = param_2[0x10];
    plVar1[0x11] = lVar3;
    plVar1[0x12] = param_2[0x12];
    pvVar4 = malloc((long)(*(short *)(param_2 + 1) + 1));
    *plVar1 = (long)pvVar4;
    if (pvVar4 != (void *)0x0) {
      memcpy(pvVar4,(void *)*param_2,(long)*(short *)(param_2 + 1));
      *(undefined *)(*plVar1 + (long)*(short *)(plVar1 + 1)) = 0;
      *param_1 = *param_1 + 1;
      return plVar1;
    }
  }
  return (long *)0x0;
}



void FontFileSortTable(int *param_1)

{
  if (param_1[4] != 0) {
    return;
  }
  qsort(*(void **)(param_1 + 2),(long)*param_1,0x98,FUN_0010bd70);
  param_1[4] = 1;
  return;
}



void FontFileSortDir(long param_1)

{
  FontFileSortTable(param_1 + 0x18);
  FontFileSortTable(param_1 + 0x30);
  FontFileSwitchStringsToBitmapPointers(param_1);
  return;
}



int FontFileCountDashes(char *param_1,int param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  
  if (param_2 != 0) {
    iVar1 = 0;
    pcVar3 = param_1;
    do {
      pcVar2 = pcVar3 + 1;
      iVar1 = iVar1 + (uint)(*pcVar3 == '-');
      pcVar3 = pcVar2;
    } while (param_1 + (ulong)(param_2 - 1) + 1 != pcVar2);
    return iVar1;
  }
  return 0;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

char * FontFileSaveString(char *__s)

{
  char *pcVar1;
  
  pcVar1 = strdup(__s);
  return pcVar1;
}



undefined8 * FontFileFindNameInScalableDir(long param_1,undefined8 *param_2,uint *param_3)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  uint uVar4;
  undefined8 *puVar5;
  ulong uVar6;
  undefined8 *puVar7;
  undefined8 uVar8;
  long in_FS_OFFSET;
  int local_2c;
  int local_28;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_1 + 8) != 0) {
    iVar3 = FUN_0010bd80(param_1,*param_2,*(undefined2 *)((long)param_2 + 10),&local_2c,&local_28,
                         &local_24);
    if (-1 < iVar3) {
      puVar7 = (undefined8 *)(*(long *)(param_1 + 8) + (long)iVar3 * 0x98);
      goto LAB_0010c727;
    }
    if (local_2c < local_28) {
      lVar2 = *(long *)(param_1 + 8);
      uVar6 = (ulong)local_24;
      uVar8 = *param_2;
      puVar5 = (undefined8 *)(lVar2 + (long)local_2c * 0x98);
      do {
        if ((int)uVar6 <= (int)*(short *)((long)puVar5 + 10)) {
          puVar7 = puVar5;
          iVar3 = FUN_0010bf30(uVar8,uVar6 & 0xffffffff,*puVar5);
          if (0 < iVar3) {
            if (param_3 == (uint *)0x0) goto LAB_0010c727;
            uVar1 = *param_3;
            if (*(int *)(puVar5 + 2) == 0) {
              uVar4 = *(uint *)(puVar5[3] + 0x34);
            }
            else {
              uVar4 = -(uint)(*(int *)(puVar5 + 2) == 3);
            }
            if (((((uVar1 & 3) != 2) && ((uVar1 & 0xc) != 8)) || ((uVar4 & 1) != 0)) &&
               (((uVar1 & 0x40) == 0 || ((uVar4 & 2) != 0)))) goto LAB_0010c727;
          }
        }
        puVar5 = puVar5 + 0x13;
      } while (puVar5 != (undefined8 *)
                         (lVar2 + 0x98 +
                         ((long)local_2c + (ulong)(uint)((local_28 + -1) - local_2c)) * 0x98));
    }
  }
  puVar7 = (undefined8 *)0x0;
LAB_0010c727:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileFindNameInDir(undefined8 param_1,undefined8 param_2)

{
  FontFileFindNameInScalableDir(param_1,param_2,0);
  return;
}



int FontFileFindNamesInScalableDir
              (long param_1,undefined8 *param_2,int param_3,int *param_4,uint *param_5,uint param_6,
              int *param_7)

{
  int *piVar1;
  char *__s;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  ulong uVar6;
  size_t sVar7;
  undefined8 uVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  uint local_c4;
  int local_c0;
  int local_bc;
  byte local_b8 [120];
  long local_40;
  
  iVar3 = 0x55;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (0 < param_3) {
    uVar2 = FUN_0010bd80(param_1,*param_2,*(undefined2 *)((long)param_2 + 10),&local_c4,&local_c0,
                         &local_bc);
    uVar6 = (ulong)uVar2;
    if ((int)uVar2 < 0) {
      uVar6 = (ulong)(int)local_c4;
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + uVar6 * 0x98);
    }
    else {
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + (long)(int)uVar2 * 0x98);
      if ((param_6 == 0) || (*(int *)(puVar9 + 2) != 3)) {
        if (param_7 != (int *)0x0) {
          *param_7 = param_3 + -1;
        }
        iVar3 = AddFontNamesName(param_4,*puVar9,(int)*(short *)(puVar9 + 1));
        goto LAB_0010c86b;
      }
      local_c0 = uVar2 + 1;
      local_c4 = uVar2;
    }
    if ((int)uVar6 < local_c0) {
      do {
        if (local_bc <= *(short *)((long)puVar9 + 10)) {
          uVar8 = *puVar9;
          iVar3 = FUN_0010bf30(*param_2,local_bc,uVar8);
          if (0 < iVar3) {
            if (param_5 != (uint *)0x0) {
              uVar2 = *param_5;
              if (*(int *)(puVar9 + 2) == 0) {
                uVar5 = *(uint *)(puVar9[3] + 0x34);
                if ((uVar2 & 3) != 2) goto LAB_0010c8ed;
LAB_0010c9aa:
                if ((uVar5 & 1) == 0) goto LAB_0010c94a;
              }
              else {
                uVar5 = -(uint)(*(int *)(puVar9 + 2) == 3);
                if ((uVar2 & 3) == 2) goto LAB_0010c9aa;
LAB_0010c8ed:
                if ((uVar2 & 0xc) == 8) goto LAB_0010c9aa;
              }
              if (((uVar2 & 0x40) != 0) && ((uVar5 & 2) == 0)) goto LAB_0010c94a;
            }
            if (((param_6 & 2) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              iVar3 = FontParseXLFDName(uVar8,local_b8,0);
              if ((iVar3 != 0) && ((local_b8[0] & 0xf) == 0)) goto LAB_0010c94a;
              uVar8 = *puVar9;
            }
            iVar4 = AddFontNamesName(param_4,uVar8,(int)*(short *)(puVar9 + 1));
            iVar3 = iVar4;
            if (iVar4 != 0x55) goto LAB_0010c9be;
            if (((param_6 & 1) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              piVar1 = (int *)(*(long *)(param_4 + 2) + -4 + (long)*param_4 * 4);
              *piVar1 = -*piVar1;
              __s = (char *)puVar9[3];
              sVar7 = strlen(__s);
              iVar3 = AddFontNamesName(param_4,__s,sVar7);
              if (iVar3 != 0x55) goto LAB_0010c9be;
            }
            param_3 = param_3 + -1;
            iVar3 = iVar4;
            if (param_3 == 0) goto LAB_0010c9be;
          }
        }
LAB_0010c94a:
        uVar2 = (int)uVar6 + 1;
        uVar6 = (ulong)uVar2;
        puVar9 = puVar9 + 0x13;
      } while ((int)uVar2 < local_c0);
    }
    iVar3 = 0x55;
LAB_0010c9be:
    if (param_7 != (int *)0x0) {
      *param_7 = param_3;
    }
  }
LAB_0010c86b:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar3;
}



void FontFileFindNamesInDir(void)

{
  FontFileFindNamesInScalableDir();
  return;
}



bool FontFileMatchName(undefined8 param_1,undefined2 param_2,undefined8 param_3)

{
  long lVar1;
  long in_FS_OFFSET;
  undefined8 local_c8;
  undefined8 *local_c0;
  undefined4 local_b8;
  undefined8 local_a8;
  undefined2 local_a0;
  undefined2 local_9e;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_c8 = 0x100000001;
  local_c0 = &local_a8;
  local_b8 = 1;
  local_a8 = param_1;
  local_a0 = param_2;
  local_9e = FontFileCountDashes();
  lVar1 = FontFileFindNameInDir(&local_c8,param_3);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar1 != 0;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FontFileAddFontFile(long param_1,char *param_2,char *param_3)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  long lVar4;
  size_t sVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  ushort *puVar8;
  char *pcVar9;
  char *pcVar10;
  long lVar11;
  int iVar12;
  uint uVar13;
  undefined8 *puVar14;
  byte *pbVar15;
  byte *__s;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  double dVar19;
  int local_1dc;
  uint local_1d8;
  undefined4 uStack_1d4;
  undefined8 uStack_1d0;
  undefined8 local_1c8;
  undefined8 uStack_1c0;
  undefined8 local_1b8;
  undefined8 uStack_1b0;
  undefined8 local_1a8;
  undefined8 uStack_1a0;
  double local_198;
  undefined8 uStack_190;
  int local_188;
  int iStack_184;
  undefined8 uStack_180;
  undefined8 local_178;
  undefined8 uStack_170;
  undefined8 local_168;
  undefined4 local_158 [32];
  char *local_d8;
  short local_d0;
  short local_ce;
  undefined4 local_c8;
  long local_c0;
  char *local_b8;
  undefined8 *local_b0;
  long local_40;
  
  bVar18 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar4 = FontFileMatchRenderer(param_3);
  if (lVar4 != 0) {
    sVar5 = strlen(param_2);
    local_d0 = (short)sVar5;
    if (local_d0 < 0x401) {
      iVar12 = (int)local_d0;
    }
    else {
      iVar12 = 0x400;
      local_d0 = 0x400;
    }
    local_d8 = param_2;
    FUN_0010d700(param_2,param_2,iVar12);
    local_ce = FontFileCountDashes(local_d8,(int)local_d0);
    local_d8[local_d0] = '\0';
    if ((((local_ce == 0xe) &&
         (iVar12 = FontParseXLFDName(local_d8,&local_1d8,0), uVar2 = local_1d8, iVar12 != 0)) &&
        ((local_1d8 & 3) != 2)) && (((local_1d8 & 0xc) != 8 && ((local_1d8 & 0x40) == 0)))) {
      if ((((local_1d8 & 3) != 0) &&
          (((local_1d8 & 0xc) != 0 && (pcVar10 = *(char **)(param_1 + 0x48), pcVar10 != (char *)0x0)
           ))) && (*pcVar10 == ':')) {
        bVar1 = true;
        pcVar9 = pcVar10;
        while( true ) {
          __s = (byte *)(pcVar9 + 1);
          pcVar9 = strchr((char *)__s,0x3a);
          if (pcVar9 == (char *)0x0) break;
          uVar13 = (int)pcVar9 - (int)__s;
          bVar16 = uVar13 < 8;
          bVar17 = uVar13 == 8;
          if (bVar17) {
            lVar11 = 8;
            pbVar15 = (byte *)"unscaled";
            do {
              if (lVar11 == 0) break;
              lVar11 = lVar11 + -1;
              bVar16 = *__s < *pbVar15;
              bVar17 = *__s == *pbVar15;
              __s = __s + (ulong)bVar18 * -2 + 1;
              pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
            } while (bVar17);
            if ((!bVar16 && !bVar17) == bVar16) {
              bVar1 = false;
            }
          }
        }
        sVar5 = strlen(pcVar10);
        uVar13 = ((int)pcVar10 + (int)sVar5) - (int)__s;
        bVar16 = uVar13 < 8;
        bVar17 = uVar13 == 8;
        if (bVar17) {
          lVar11 = 8;
          pbVar15 = (byte *)"unscaled";
          do {
            if (lVar11 == 0) break;
            lVar11 = lVar11 + -1;
            bVar16 = *__s < *pbVar15;
            bVar17 = *__s == *pbVar15;
            __s = __s + (ulong)bVar18 * -2 + 1;
            pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
          } while (bVar17);
          if ((!bVar16 && !bVar17) == bVar16) goto LAB_0010cbd6;
        }
        if (!bVar1) goto LAB_0010cbd6;
      }
      if ((uVar2 & 0xf) != 0) {
        iVar12 = 1;
        goto LAB_0010cbd9;
      }
      puVar6 = (undefined8 *)0x0;
LAB_0010cd53:
      pcVar10 = strdup(param_3);
      local_b8 = pcVar10;
      if (pcVar10 != (char *)0x0) {
        puVar7 = (undefined8 *)malloc(0x90);
        if (puVar7 == (undefined8 *)0x0) {
          iVar12 = 0;
          free(pcVar10);
          goto LAB_0010cc38;
        }
        puVar14 = puVar7;
        for (lVar11 = 0xf; lVar11 != 0; lVar11 = lVar11 + -1) {
          *puVar14 = 0;
          puVar14 = puVar14 + (ulong)bVar18 * -2 + 1;
        }
        if (((local_1d8 & 0xc) == 4) &&
           (dVar19 = local_198 * 10.0, iVar12 = GetDefaultPointSize(), (int)dVar19 == iVar12)) {
          *puVar7 = CONCAT44(uStack_1d4,local_1d8);
          puVar7[1] = uStack_1d0;
          puVar7[2] = local_1c8;
          puVar7[3] = uStack_1c0;
          puVar7[4] = local_1b8;
          puVar7[5] = uStack_1b0;
          puVar7[0xe] = local_168;
          puVar7[6] = local_1a8;
          puVar7[7] = uStack_1a0;
          puVar7[8] = local_198;
          puVar7[9] = uStack_190;
          puVar7[10] = CONCAT44(iStack_184,local_188);
          puVar7[0xb] = uStack_180;
          puVar7[0xc] = local_178;
          puVar7[0xd] = uStack_170;
        }
        else {
          iVar12 = GetDefaultPointSize();
          puVar7[7] = 0;
          puVar7[6] = 0;
          *(undefined4 *)puVar7 = 4;
          *(undefined4 *)(puVar7 + 0xb) = 0xffffffff;
          puVar7[8] = (double)iVar12 / 10.0;
          puVar7[5] = (double)iVar12 / 10.0;
          if ((local_188 < 1) || (iStack_184 < 1)) {
            puVar8 = (ushort *)GetClientResolutions(&local_1dc);
            if ((puVar8 == (ushort *)0x0) || (local_1dc < 1)) {
              puVar7[10] = 0x4b0000004b;
            }
            else {
              *(uint *)(puVar7 + 10) = (uint)*puVar8;
              *(uint *)((long)puVar7 + 0x54) = (uint)puVar8[1];
            }
          }
          else {
            *(int *)(puVar7 + 10) = local_188;
            *(int *)((long)puVar7 + 0x54) = iStack_184;
          }
          FontFileCompleteXLFD(puVar7,puVar7);
        }
        puVar7[0xf] = 0;
        puVar7[0x10] = 0;
        puVar7[0x11] = 0;
        local_c8 = 0;
        local_c0 = lVar4;
        local_b0 = puVar7;
        lVar4 = FontFileAddEntry(param_1 + 0x18,&local_d8);
        if (lVar4 == 0) {
          free(puVar7);
          goto LAB_0010cc88;
        }
        if (((local_1d8 & 0xf) != 0) && (puVar6 != (undefined8 *)0x0)) {
          FontFileCompleteXLFD(&local_1d8,&local_1d8);
          FontFileAddScaledInstance(lVar4,&local_1d8,0,*puVar6);
        }
LAB_0010cc32:
        iVar12 = 1;
        goto LAB_0010cc38;
      }
    }
    else {
LAB_0010cbd6:
      iVar12 = 0;
LAB_0010cbd9:
      local_c8 = 2;
      local_b0 = (undefined8 *)0x0;
      local_c0 = lVar4;
      local_b8 = strdup(param_3);
      if (local_b8 != (char *)0x0) {
        puVar6 = (undefined8 *)FontFileAddEntry(param_1 + 0x30,&local_d8);
        if (puVar6 != (undefined8 *)0x0) {
          if (iVar12 != 0) {
            if ((local_1d8 & 0xf) != 0) {
              puVar7 = (undefined8 *)local_158;
              for (lVar11 = 0xf; lVar11 != 0; lVar11 = lVar11 + -1) {
                *puVar7 = 0;
                puVar7 = puVar7 + (ulong)bVar18 * -2 + 1;
              }
              local_158[0] = 5;
              FontParseXLFDName(local_d8,local_158,3);
              sVar5 = strlen(local_d8);
              local_d0 = (short)sVar5;
              lVar11 = FontFileFindNameInDir(param_1 + 0x18,&local_d8);
              if (lVar11 != 0) {
                if (((local_1d8 & 0xc) == 4) &&
                   (dVar19 = local_198 * 10.0, iVar3 = GetDefaultPointSize(), (int)dVar19 == iVar3))
                {
                  puVar7 = *(undefined8 **)(lVar11 + 0x28);
                  *puVar7 = CONCAT44(uStack_1d4,local_1d8);
                  puVar7[1] = uStack_1d0;
                  puVar7[2] = local_1c8;
                  puVar7[3] = uStack_1c0;
                  puVar7[4] = local_1b8;
                  puVar7[5] = uStack_1b0;
                  puVar7[6] = local_1a8;
                  puVar7[7] = uStack_1a0;
                  puVar7[8] = local_198;
                  puVar7[9] = uStack_190;
                  puVar7[10] = CONCAT44(iStack_184,local_188);
                  puVar7[0xb] = uStack_180;
                  puVar7[0xc] = local_178;
                  puVar7[0xd] = uStack_170;
                  puVar7[0xe] = local_168;
                  free(*(void **)(lVar11 + 0x20));
                  pcVar10 = strdup(param_3);
                  *(char **)(lVar11 + 0x20) = pcVar10;
                  if (pcVar10 == (char *)0x0) goto LAB_0010cc95;
                }
                FontFileCompleteXLFD(&local_1d8,&local_1d8);
                FontFileAddScaledInstance(lVar11,&local_1d8,0,*puVar6);
                goto LAB_0010cc38;
              }
            }
            goto LAB_0010cd53;
          }
          goto LAB_0010cc32;
        }
LAB_0010cc88:
        free(local_b8);
      }
    }
  }
LAB_0010cc95:
  iVar12 = 0;
LAB_0010cc38:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar12;
}



undefined8 FontFileAddFontAlias(long param_1,char *param_2,char *param_3)

{
  int iVar1;
  size_t sVar2;
  long lVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  char *local_b8;
  short local_b0;
  undefined2 local_ae;
  undefined4 local_a8;
  char *local_a0;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = strcmp(param_2,param_3);
  if (iVar1 != 0) {
    sVar2 = strlen(param_2);
    local_b0 = (short)sVar2;
    FUN_0010d700(param_2,param_2,(int)local_b0);
    local_b8 = param_2;
    local_ae = FontFileCountDashes(param_2,(int)local_b0);
    local_a8 = 3;
    local_a0 = strdup(param_3);
    if (local_a0 != (char *)0x0) {
      lVar3 = FontFileAddEntry(param_1 + 0x30,&local_b8);
      uVar4 = 1;
      if (lVar3 != 0) goto LAB_0010d17c;
      free(local_a0);
    }
  }
  uVar4 = 0;
LAB_0010d17c:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void font_encoding_from_xlfd(void)

{
  FontEncFromXLFD();
  return;
}



void font_encoding_find(void)

{
  FontEncFind();
  return;
}



undefined8 font_encoding_recode(undefined8 param_1,long param_2,long param_3)

{
  undefined8 uVar1;
  
  if (*(long *)(param_3 + 0x30) != param_2) {
    ErrorF("Inconsistent mapping/encoding\n");
    return 0;
  }
  uVar1 = FontEncRecode(param_1,param_3);
  return uVar1;
}



undefined8 font_encoding_name(undefined8 param_1,long param_2,long param_3)

{
  undefined8 uVar1;
  
  if (*(long *)(param_3 + 0x30) == param_2) {
    uVar1 = FontEncName(param_1,param_3);
    return uVar1;
  }
  ErrorF("Inconsistent mapping/encoding\n");
  return 0;
}



void identifyEncodingFile(void)

{
  FontEncIdentify();
  return;
}



bool FontFileNameCheck(char *param_1)

{
  return *param_1 == '/';
}



undefined8 FontFileResetFPE(long param_1)

{
  long lVar1;
  int iVar2;
  
  lVar1 = *(long *)(param_1 + 0x18);
  iVar2 = FontFileDirectoryChanged(lVar1);
  if (iVar2 != 0) {
    return 0x59;
  }
  if ((0 < *(int *)(lVar1 + 0x30)) && (iVar2 = FontFileRegisterBitmapSource(param_1), iVar2 == 0)) {
    return 0x59;
  }
  return 0x55;
}



undefined8 FontFileFreeFPE(long param_1)

{
  FontFileUnregisterBitmapSource();
  FontFileFreeDir(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



int FontFileInitFPE(long param_1)

{
  int iVar1;
  int iVar2;
  long in_FS_OFFSET;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FontFileReadDirectory(*(undefined8 *)(param_1 + 8),&local_28);
  if (iVar1 == 0x55) {
    if (*(int *)(local_28 + 0x30) < 1) {
      *(long *)(param_1 + 0x18) = local_28;
    }
    else {
      iVar2 = FontFileRegisterBitmapSource(param_1);
      if (iVar2 == 0) {
        iVar1 = 0x50;
        FontFileFreeFPE(param_1);
      }
      else {
        *(long *)(param_1 + 0x18) = local_28;
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
FUN_0010d3e0(long param_1,long *param_2,undefined4 param_3,long param_4,undefined4 param_5,
            undefined4 param_6,undefined8 param_7)

{
  long lVar1;
  char *__s;
  char *__s_00;
  size_t sVar2;
  size_t sVar3;
  undefined8 uVar4;
  long lVar5;
  long in_FS_OFFSET;
  undefined local_848 [2056];
  long local_40;
  
  lVar1 = *(long *)(param_4 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(lVar1 + 0x10) == 0) {
    uVar4 = 0x53;
  }
  else {
    __s = (char *)**(undefined8 **)(param_1 + 0x18);
    sVar2 = strlen(__s);
    __s_00 = *(char **)(param_4 + 0x20);
    sVar3 = strlen(__s_00);
    uVar4 = 0x53;
    if (sVar2 + sVar3 < 0x801) {
      lVar5 = __memcpy_chk(local_848,__s,sVar2,0x801);
      __strcpy_chk(lVar5 + sVar2,__s_00,0x801 - sVar2);
      uVar4 = (**(code **)(lVar1 + 0x10))
                        (param_1,param_2,param_3,param_4,lVar5,param_5,param_6,param_7);
      if ((int)uVar4 == 0x55) {
        lVar1 = *param_2;
        *(long *)(param_4 + 0x28) = lVar1;
        *(long *)(lVar1 + 0xa0) = param_4;
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0010d520(long param_1,undefined8 param_2,long param_3)

{
  long lVar1;
  char *__s;
  char *__s_00;
  size_t sVar2;
  size_t sVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined local_848 [2056];
  long local_40;
  
  lVar1 = *(long *)(param_3 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(lVar1 + 0x20) == 0) {
    uVar4 = 0x53;
  }
  else {
    __s = (char *)**(undefined8 **)(param_1 + 0x18);
    sVar2 = strlen(__s);
    __s_00 = *(char **)(param_3 + 0x20);
    sVar3 = strlen(__s_00);
    uVar4 = 0x53;
    if (sVar2 + sVar3 < 0x801) {
      __memcpy_chk(local_848,__s,sVar2,0x801);
      __strcpy_chk(local_848 + sVar2,__s_00,0x801 - sVar2);
      uVar4 = (**(code **)(lVar1 + 0x20))(param_1,param_2,param_3,local_848);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileCloseFont(undefined8 param_1,long param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(param_2 + 0xa0);
  if (lVar1 != 0) {
    if (*(int *)(lVar1 + 0x10) == 0) {
      FontFileRemoveScaledInstance();
    }
    else if (*(int *)(lVar1 + 0x10) == 2) {
      *(undefined8 *)(lVar1 + 0x28) = 0;
    }
    *(undefined8 *)(param_2 + 0xa0) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0010d643. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_2 + 0x78))(param_2);
  return;
}



undefined8
FontFileListNextFontOrAlias
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,int *param_4,
          undefined8 *param_5,undefined4 *param_6,long *param_7)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  long lVar4;
  undefined8 uVar5;
  
  piVar3 = (int *)*param_7;
  iVar1 = *(int *)(param_7 + 1);
  if (iVar1 != *piVar3) {
    iVar2 = *(int *)(*(long *)(piVar3 + 2) + (long)iVar1 * 4);
    *param_3 = *(undefined8 *)(*(long *)(piVar3 + 4) + (long)iVar1 * 8);
    if (iVar2 < 0) {
      *param_4 = -iVar2;
      lVar4 = *(long *)(*param_7 + 0x10);
      iVar1 = *(int *)(param_7 + 1);
      *(int *)(param_7 + 1) = iVar1 + 1;
      *param_5 = *(undefined8 *)(lVar4 + (long)(iVar1 + 1) * 8);
      *param_6 = *(undefined4 *)(*(long *)(*param_7 + 8) + (long)*(int *)(param_7 + 1) * 4);
      uVar5 = 0x52;
    }
    else {
      *param_4 = iVar2;
      uVar5 = 0x55;
    }
    *(int *)(param_7 + 1) = *(int *)(param_7 + 1) + 1;
    return uVar5;
  }
  FreeFontNames();
  free(param_7);
  return 0x53;
}



void FUN_0010d700(undefined *param_1,long param_2,int param_3)

{
  char cVar1;
  ulong uVar2;
  
  if (0 < param_3) {
    uVar2 = 0;
    while( true ) {
      cVar1 = *(char *)(param_2 + uVar2);
      if (((byte)(cVar1 + 0xbfU) < 0x1a) || ((byte)(cVar1 + 0x40U) < 0x17)) {
        param_1[uVar2] = cVar1 + ' ';
      }
      else {
        if ((byte)(cVar1 + 0x28U) < 7) {
          cVar1 = cVar1 + ' ';
        }
        param_1[uVar2] = cVar1;
      }
      if (uVar2 == param_3 - 1) break;
      uVar2 = uVar2 + 1;
    }
    param_1 = param_1 + (ulong)(param_3 - 1) + 1;
  }
  *param_1 = 0;
  return;
}



undefined4
FUN_0010d760(undefined8 param_1,int param_2,char *param_3,undefined8 *param_4,ulong *param_5)

{
  double dVar1;
  double dVar2;
  double dVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  size_t sVar7;
  double *pdVar8;
  undefined *puVar9;
  long in_FS_OFFSET;
  double dVar10;
  double dVar11;
  uint local_548 [2];
  double local_540 [4];
  double local_520 [11];
  ulong local_4c8;
  double dStack_4c0;
  double local_4b8;
  double dStack_4b0;
  double local_4a8;
  double dStack_4a0;
  double local_498;
  double dStack_490;
  double local_488;
  ulong uStack_480;
  ulong local_478;
  ulong uStack_470;
  ulong local_468;
  ulong uStack_460;
  ulong local_458;
  undefined local_448 [1032];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  *param_4 = param_3;
  sVar7 = strlen(param_3);
  if (((int)sVar7 < 0x401) && (param_2 < 0x400)) {
    iVar5 = FontFileCountDashes(param_3,sVar7 & 0xffffffff);
    if (iVar5 == 0xe) {
      puVar9 = local_448;
      local_4c8 = *param_5;
      dStack_4c0 = (double)param_5[1];
      local_458 = param_5[0xe];
      local_4b8 = (double)param_5[2];
      dStack_4b0 = (double)param_5[3];
      local_4a8 = (double)param_5[4];
      dStack_4a0 = (double)param_5[5];
      local_498 = (double)param_5[6];
      dStack_490 = (double)param_5[7];
      local_488 = (double)param_5[8];
      uStack_480 = param_5[9];
      local_478 = param_5[10];
      uStack_470 = param_5[0xb];
      local_468 = param_5[0xc];
      uStack_460 = param_5[0xd];
      FUN_0010d700(puVar9,param_1,param_2);
      local_448[param_2] = 0;
      iVar5 = FontParseXLFDName(puVar9,local_548,0);
      if ((iVar5 != 0) && (local_548[0] == 0)) {
        iVar5 = FontParseXLFDName(*param_4,local_548,0);
        if (iVar5 != 0) {
          iVar5 = (int)sVar7 + 1;
          if ((local_548[0] & 0xf) == 2) {
            pdVar8 = local_540;
LAB_0010d91f:
            iVar6 = FontFileCompleteXLFD(&local_4c8,&local_4c8);
            if (iVar6 == 0) {
              FUN_0010d700(&DAT_0013f740,*param_4,iVar5);
              uVar4 = 0;
              goto LAB_0010d7b3;
            }
            dVar1 = *pdVar8;
            dVar11 = pdVar8[1];
            dVar2 = pdVar8[2];
            dVar3 = pdVar8[3];
            dVar10 = dStack_4a0 * dVar2;
            local_4c8 = local_4c8 & 0xfffffffffffffff0 | 10;
            dStack_4a0 = dVar1 * dStack_4a0 + dVar11 * dStack_490;
            dStack_490 = dVar10 + dStack_490 * dVar3;
            dVar10 = local_498 * dVar2;
            local_498 = dVar1 * local_498 + dVar11 * local_488;
            local_488 = dVar10 + local_488 * dVar3;
            dVar10 = dVar11 * local_4a8;
            dVar11 = dVar11 * dStack_4b0;
            dStack_4b0 = dStack_4c0 * dVar2 + dStack_4b0 * dVar3;
            local_4a8 = dVar2 * local_4b8 + dVar3 * local_4a8;
            dStack_4c0 = dVar1 * dStack_4c0 + dVar11;
            local_4b8 = dVar1 * local_4b8 + dVar10;
            FUN_0010d700(&DAT_0013f740,*param_4,iVar5);
          }
          else {
            if ((local_548[0] & 0xf) == 8) {
              pdVar8 = local_520;
              goto LAB_0010d91f;
            }
            FUN_0010d700(&DAT_0013f740,*param_4,iVar5);
          }
          iVar5 = FontParseXLFDName(&DAT_0013f740,&local_4c8,3);
          if (iVar5 != 0) {
            *param_4 = &DAT_0013f740;
          }
        }
      }
    }
  }
  uVar4 = 1;
LAB_0010d7b3:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0010dad0(int *param_1,int *param_2,undefined8 param_3,uint *param_4,uint *param_5,
                 undefined8 param_6,uint param_7,int *param_8)

{
  int *piVar1;
  char *pcVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  uint *__s1;
  size_t sVar8;
  uint *puVar9;
  uint *puVar10;
  long lVar11;
  long in_FS_OFFSET;
  bool bVar12;
  char *local_550;
  undefined local_548 [128];
  undefined8 local_4c8;
  undefined8 uStack_4c0;
  undefined8 local_4b8;
  undefined8 uStack_4b0;
  undefined8 local_4a8;
  undefined8 uStack_4a0;
  undefined8 local_498;
  undefined8 uStack_490;
  undefined8 local_488;
  undefined8 uStack_480;
  ulong local_478;
  ulong uStack_470;
  undefined8 local_468;
  undefined8 uStack_460;
  undefined8 local_458;
  undefined local_448 [1032];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (0 < *param_2) {
    iVar6 = 0;
    do {
      while( true ) {
        if (*param_8 == 0) goto LAB_0010dec0;
        lVar11 = (long)iVar6;
        FontParseXLFDName(*(undefined8 *)(*(long *)(param_2 + 4) + lVar11 * 8),local_548,0);
        local_4c8 = *(undefined8 *)param_5;
        uStack_4c0 = *(undefined8 *)(param_5 + 2);
        local_458 = *(undefined8 *)(param_5 + 0x1c);
        local_4b8 = *(undefined8 *)(param_5 + 4);
        uStack_4b0 = *(undefined8 *)(param_5 + 6);
        local_4a8 = *(undefined8 *)(param_5 + 8);
        uStack_4a0 = *(undefined8 *)(param_5 + 10);
        local_498 = *(undefined8 *)(param_5 + 0xc);
        uStack_490 = *(undefined8 *)(param_5 + 0xe);
        local_488 = *(undefined8 *)(param_5 + 0x10);
        uStack_480 = *(undefined8 *)(param_5 + 0x12);
        local_478 = *(ulong *)(param_5 + 0x14);
        uStack_470 = *(ulong *)(param_5 + 0x16);
        local_468 = *(undefined8 *)(param_5 + 0x18);
        uStack_460 = *(undefined8 *)(param_5 + 0x1a);
        iVar3 = FontFileCompleteXLFD(&local_4c8,local_548);
        iVar7 = iVar6 + 1;
        if (iVar3 != 0) break;
LAB_0010db34:
        iVar6 = iVar7;
        if (*param_2 <= iVar7) goto LAB_0010dec0;
      }
      *param_8 = *param_8 + -1;
      __s1 = (uint *)__strcpy_chk(local_448,*(undefined8 *)(*(long *)(param_2 + 4) + lVar11 * 8),
                                  0x400);
      uVar5 = param_5[0x15];
      uVar4 = *param_5;
      if (((uVar4 & 0x13) == 0x10) && (uVar5 != 0)) {
        if ((uVar4 & 0x2c) != 0x20) {
LAB_0010dc9c:
          uStack_4a0 = *(undefined8 *)(param_5 + 10);
          local_498 = *(undefined8 *)(param_5 + 0xc);
          uStack_490 = *(undefined8 *)(param_5 + 0xe);
          local_4c8 = CONCAT44(local_4c8._4_4_,uVar4 & 0xc | (uint)local_4c8 & 0xfffffff3);
          local_488 = *(undefined8 *)(param_5 + 0x10);
        }
      }
      else {
        uStack_4c0 = *(undefined8 *)(param_5 + 2);
        local_4b8 = *(undefined8 *)(param_5 + 4);
        uStack_4b0 = *(undefined8 *)(param_5 + 6);
        local_4c8 = CONCAT44(local_4c8._4_4_,(uint)local_4c8 & 0xfffffffc | uVar4 & 3);
        local_4a8 = *(undefined8 *)(param_5 + 8);
        if (((uVar4 & 0x2c) != 0x20) || (uVar5 == 0)) goto LAB_0010dc9c;
      }
      if ((int)param_5[0x16] < 1) {
        uStack_470 = uStack_470 & 0xffffffff00000000;
      }
      if (param_5[0x14] == 0) {
        local_478 = local_478 & 0xffffffff00000000;
      }
      if (uVar5 == 0) {
        local_478 = local_478 & 0xffffffff;
      }
      uStack_460 = CONCAT44(uStack_460._4_4_,param_7);
      local_458 = param_6;
      FontParseXLFDName(__s1,&local_4c8,3);
      puVar10 = __s1;
      if (-1 < *(int *)(*(long *)(param_2 + 2) + lVar11 * 4)) {
        do {
          puVar9 = puVar10;
          uVar4 = *puVar9 + 0xfefefeff & ~*puVar9;
          uVar5 = uVar4 & 0x80808080;
          puVar10 = puVar9 + 1;
        } while (uVar5 == 0);
        bVar12 = (uVar4 & 0x8080) == 0;
        if (bVar12) {
          uVar5 = uVar5 >> 0x10;
        }
        if (bVar12) {
          puVar10 = (uint *)((long)puVar9 + 6);
        }
        AddFontNamesName(param_1,__s1,
                         (long)puVar10 +
                         ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)__s1),
                         uVar5 & 0xffffff00);
        pcVar2 = *(char **)(*(long *)(param_2 + 4) + lVar11 * 8);
        iVar6 = strcmp((char *)__s1,pcVar2);
        if (((iVar6 != 0) &&
            (iVar6 = FontFileMatchName(pcVar2,*(undefined4 *)(*(long *)(param_2 + 2) + lVar11 * 4),
                                       param_3), iVar6 != 0)) && (*param_8 != 0)) {
          *param_8 = *param_8 + -1;
          AddFontNamesName(param_1,*(undefined8 *)(*(long *)(param_2 + 4) + lVar11 * 8),
                           *(undefined4 *)(*(long *)(param_2 + 2) + lVar11 * 4));
        }
        goto LAB_0010db34;
      }
      *(undefined8 *)(param_5 + 0x1c) = param_6;
      param_5[0x1a] = param_7;
      puVar10 = param_4;
      do {
        puVar9 = puVar10;
        uVar4 = *puVar9 + 0xfefefeff & ~*puVar9;
        uVar5 = uVar4 & 0x80808080;
        puVar10 = puVar9 + 1;
      } while (uVar5 == 0);
      bVar12 = (uVar4 & 0x8080) == 0;
      if (bVar12) {
        uVar5 = uVar5 >> 0x10;
      }
      if (bVar12) {
        puVar10 = (uint *)((long)puVar9 + 6);
      }
      iVar7 = FUN_0010d760(param_4,(long)puVar10 +
                                   ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)param_4),
                           *(undefined8 *)(*(long *)(param_2 + 4) + 8 + lVar11 * 8),&local_550,
                           param_5);
      puVar10 = __s1;
      if (iVar7 != 0) {
        do {
          puVar9 = puVar10;
          uVar4 = *puVar9 + 0xfefefeff & ~*puVar9;
          uVar5 = uVar4 & 0x80808080;
          puVar10 = puVar9 + 1;
        } while (uVar5 == 0);
        bVar12 = (uVar4 & 0x8080) == 0;
        if (bVar12) {
          uVar5 = uVar5 >> 0x10;
        }
        if (bVar12) {
          puVar10 = (uint *)((long)puVar9 + 6);
        }
        AddFontNamesName(param_1,__s1,
                         (long)puVar10 +
                         ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)__s1));
        pcVar2 = local_550;
        piVar1 = (int *)(*(long *)(param_1 + 2) + -4 + (long)*param_1 * 4);
        *piVar1 = -*piVar1;
        sVar8 = strlen(local_550);
        AddFontNamesName(param_1,pcVar2,sVar8);
        pcVar2 = *(char **)(*(long *)(param_2 + 4) + lVar11 * 8);
        iVar7 = strcmp((char *)__s1,pcVar2);
        if (((iVar7 != 0) &&
            (iVar7 = FontFileMatchName(pcVar2,-*(int *)(*(long *)(param_2 + 2) + lVar11 * 4),param_3
                                      ), iVar7 != 0)) && (*param_8 != 0)) {
          *param_8 = *param_8 + -1;
          AddFontNamesName(param_1,*(undefined8 *)(*(long *)(param_2 + 4) + lVar11 * 8),
                           -*(int *)(*(long *)(param_2 + 2) + lVar11 * 4));
          pcVar2 = local_550;
          piVar1 = (int *)(*(long *)(param_1 + 2) + -4 + (long)*param_1 * 4);
          *piVar1 = -*piVar1;
          sVar8 = strlen(local_550);
          AddFontNamesName(param_1,pcVar2,sVar8);
        }
      }
      iVar6 = iVar6 + 2;
    } while (iVar6 < *param_2);
  }
LAB_0010dec0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



int FUN_0010e050(long param_1,undefined4 param_2,undefined8 param_3,int param_4,undefined4 param_5,
                undefined4 param_6,long *param_7,undefined8 param_8,undefined8 param_9)

{
  undefined8 *puVar1;
  char *__s;
  code *pcVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  long lVar7;
  void *__ptr;
  undefined8 *puVar8;
  size_t sVar9;
  size_t sVar10;
  long lVar11;
  uint *puVar12;
  uint *puVar13;
  long lVar14;
  undefined *puVar15;
  short sVar16;
  long in_FS_OFFSET;
  bool bVar17;
  byte bVar18;
  undefined4 local_10dc;
  uint *local_10d8;
  short local_10d0;
  short local_10ce;
  uint local_10c8 [24];
  undefined *local_1068;
  undefined4 local_1060;
  void *local_1058;
  uint local_1048 [256];
  undefined local_c48 [1024];
  undefined local_848 [2056];
  long local_40;
  
  bVar18 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar1 = *(undefined8 **)(param_1 + 0x18);
  FUN_0010d700(local_1048,param_3,param_4);
  lVar7 = (long)param_4;
  *(undefined *)((long)local_1048 + lVar7) = 0;
  __ptr = (void *)FontParseRanges(local_1048,&local_10dc);
  sVar16 = (short)param_4;
  local_10d8 = local_1048;
  local_10d0 = sVar16;
  local_10ce = FontFileCountDashes(local_1048,param_4);
  iVar3 = FontParseXLFDName(local_1048,local_10c8,0);
  if (iVar3 == 0) {
    puVar13 = local_10c8;
    for (lVar14 = 0xf; lVar14 != 0; lVar14 = lVar14 + -1) {
      puVar13[0] = 0;
      puVar13[1] = 0;
      puVar13 = puVar13 + ((ulong)bVar18 * -2 + 1) * 2;
    }
  }
  puVar8 = (undefined8 *)FontFileFindNameInDir(puVar1 + 6,&local_10d8);
  if (puVar8 != (undefined8 *)0x0) {
LAB_0010e15b:
    if (*(int *)(puVar8 + 2) != 2) {
      if (*(int *)(puVar8 + 2) == 3) {
        local_1060 = local_10dc;
        local_1058 = __ptr;
        FUN_0010d760(*puVar8,(int)*(short *)(puVar8 + 1),puVar8[3],param_8,local_10c8);
        iVar3 = 0x52;
        goto LAB_0010e23c;
      }
      goto LAB_0010e170;
    }
    lVar14 = puVar8[5];
    if (lVar14 == 0) {
      iVar3 = FUN_0010d3e0(param_1,param_7,param_2,puVar8,param_5,param_6,param_9);
      if (iVar3 != 0x55) {
        if (iVar3 == 0x53) goto LAB_0010e170;
        goto LAB_0010e23c;
      }
      lVar7 = *param_7;
      if (lVar7 == 0) goto LAB_0010e23c;
LAB_0010e639:
      *(long *)(lVar7 + 0x88) = param_1;
      goto LAB_0010e23c;
    }
LAB_0010e5b9:
    iVar3 = 0x55;
    *param_7 = lVar14;
    *(long *)(lVar14 + 0x88) = param_1;
    goto LAB_0010e23c;
  }
  if ((local_10ce == 0xe) &&
     (iVar3 = FontParseXLFDName(local_1048,local_10c8,2), puVar13 = local_1048, iVar3 != 0)) {
    do {
      puVar12 = puVar13;
      uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
      uVar5 = uVar4 & 0x80808080;
      puVar13 = puVar12 + 1;
    } while (uVar5 == 0);
    bVar17 = (uVar4 & 0x8080) == 0;
    if (bVar17) {
      uVar5 = uVar5 >> 0x10;
    }
    if (bVar17) {
      puVar13 = (uint *)((long)puVar12 + 6);
    }
    lVar14 = (long)puVar13 + ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)local_1048);
    local_10d0 = (short)lVar14;
    puVar8 = (undefined8 *)FontFileFindNameInDir(puVar1 + 6,&local_10d8,lVar14,uVar5 & 0xffffff00);
    if (puVar8 != (undefined8 *)0x0) goto LAB_0010e15b;
  }
LAB_0010e170:
  FUN_0010d700(local_1048,param_3,param_4);
  *(undefined *)((long)local_1048 + lVar7) = 0;
  local_10d8 = local_1048;
  local_10d0 = sVar16;
  local_10ce = FontFileCountDashes(local_1048,param_4);
  iVar3 = FontParseXLFDName(local_1048,local_10c8,2);
  puVar13 = local_1048;
  if (iVar3 == 0) {
LAB_0010e2d0:
    FUN_0010d700(local_1048,param_3,param_4);
    *(undefined *)((long)local_1048 + lVar7) = 0;
    local_10d8 = local_1048;
    local_10d0 = sVar16;
    local_10ce = FontFileCountDashes(local_1048,param_4);
    puVar8 = (undefined8 *)FontFileFindNameInScalableDir(puVar1 + 3,&local_10d8,local_10c8);
    if (puVar8 != (undefined8 *)0x0) {
      __strcpy_chk(local_1048,*puVar8,0x400);
      local_10d0 = *(short *)(puVar8 + 1);
      local_10ce = *(short *)((long)puVar8 + 10);
      iVar3 = *(int *)(puVar8 + 2);
      local_10d8 = local_1048;
      goto joined_r0x0010e360;
    }
LAB_0010e236:
    iVar3 = 0x53;
  }
  else {
    do {
      puVar12 = puVar13;
      uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
      uVar5 = uVar4 & 0x80808080;
      puVar13 = puVar12 + 1;
    } while (uVar5 == 0);
    bVar17 = (uVar4 & 0x8080) == 0;
    if (bVar17) {
      uVar5 = uVar5 >> 0x10;
    }
    if (bVar17) {
      puVar13 = (uint *)((long)puVar12 + 6);
    }
    local_10d0 = (((short)puVar13 + -3) - (ushort)CARRY1((byte)uVar5,(byte)uVar5)) -
                 (short)local_1048;
    puVar8 = (undefined8 *)
             FontFileFindNameInScalableDir(puVar1 + 3,&local_10d8,local_10c8,uVar5 & 0xffffff00);
    if (puVar8 == (undefined8 *)0x0) goto LAB_0010e2d0;
    iVar3 = *(int *)(puVar8 + 2);
joined_r0x0010e360:
    if ((iVar3 != 0) || (iVar3 = FontFileCompleteXLFD(local_10c8,puVar8[5]), iVar3 == 0))
    goto LAB_0010e236;
    if (((local_10c8[0] & 3) == 2) ||
       ((((local_10c8[0] & 0xc) == 8 || ((local_10c8[0] & 0xffffffb0) != 0)) ||
        (puVar13 = local_10c8, lVar11 = FontFileFindScaledInstance(puVar8,local_10c8,0), lVar11 == 0
        )))) {
      iVar3 = FontFileMatchBitmapSource
                        (param_1,param_7,param_2,puVar8,&local_10d8,local_10c8,param_5,param_6,0);
      if (iVar3 == 0x55) {
LAB_0010e690:
        iVar3 = 0x55;
      }
      else {
        puVar15 = local_c48;
        FUN_0010d700(puVar15,param_3,param_4);
        local_c48[lVar7] = 0;
        local_1060 = local_10dc;
        __s = (char *)*puVar1;
        local_1068 = puVar15;
        local_1058 = __ptr;
        sVar9 = strlen(__s);
        sVar10 = strlen((char *)puVar8[4]);
        if (0x800 < sVar10 + sVar9) goto LAB_0010e236;
        __memcpy_chk(local_848,__s,sVar9 + 1,0x801);
        __strcpy_chk(local_848 + sVar9,puVar8[4],0x801 - sVar9);
        pcVar2 = *(code **)(puVar8[3] + 0x18);
        if (pcVar2 == (code *)0x0) {
          pcVar2 = *(code **)(puVar8[3] + 0x10);
          if (pcVar2 == (code *)0x0) goto LAB_0010e23c;
          iVar3 = (*pcVar2)(param_1,param_7,param_2,puVar8,local_848,param_5,param_6,param_9);
        }
        else {
          iVar3 = (*pcVar2)(param_1,param_7,param_2,puVar8,local_848,local_10c8,param_5,param_6,
                            param_9);
        }
        if (iVar3 == 0x55) {
          lVar7 = *param_7;
          if ((*(ushort *)(lVar7 + 8) <= *(ushort *)(lVar7 + 10)) &&
             (*(ushort *)(lVar7 + 0xc) <= *(ushort *)(lVar7 + 0xe))) {
            iVar6 = FontFileAddScaledInstance(puVar8,local_10c8,lVar7,0);
            if (iVar6 != 0) {
              *(long *)(*param_7 + 0x88) = param_1;
              goto LAB_0010e253;
            }
            *(undefined8 *)(*param_7 + 0xa0) = 0;
            lVar7 = *param_7;
            goto LAB_0010e639;
          }
          (**(code **)(lVar7 + 0x78))(lVar7);
          iVar3 = 0x53;
        }
      }
    }
    else {
      lVar14 = *(long *)(lVar11 + 0x80);
      if (lVar14 != 0) goto LAB_0010e5b9;
      lVar7 = *(long *)(lVar11 + 0x78);
      if (lVar7 == 0) goto LAB_0010e236;
      lVar14 = *(long *)(lVar7 + 0x28);
      if (lVar14 == 0) {
        iVar3 = FUN_0010d3e0(param_1,param_7,param_2,lVar7,param_5,param_6,param_9,puVar13);
        if (iVar3 == 0x55) {
          lVar7 = *param_7;
          if (lVar7 != 0) goto LAB_0010e639;
          goto LAB_0010e690;
        }
      }
      else {
        iVar3 = 0x55;
        *param_7 = lVar14;
        *(long *)(lVar14 + 0x88) = param_1;
      }
    }
  }
LAB_0010e23c:
  if (__ptr != (void *)0x0) {
    free(__ptr);
  }
LAB_0010e253:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
FontFileOpenFont(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                int param_5,undefined4 param_6,undefined4 param_7,undefined8 param_8,
                undefined8 param_9,undefined8 param_10)

{
  undefined8 uVar1;
  
  if (param_5 < 0x400) {
    param_8 = param_10;
    uVar1 = FUN_0010e050(param_2,param_3,param_4,param_5,param_6,param_7);
    return uVar1;
  }
  return 0x50;
}



int FUN_0010e7f0(long *param_1,undefined8 param_2,int param_3,undefined4 param_4,undefined8 param_5,
                int param_6)

{
  long lVar1;
  short sVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  void *__ptr;
  uint *puVar6;
  uint *puVar7;
  long lVar8;
  long in_FS_OFFSET;
  bool bVar9;
  undefined4 local_8fc [4];
  undefined4 local_8ec;
  undefined *local_8e8;
  undefined2 local_8e0;
  short local_8de;
  uint *local_8d8;
  undefined2 local_8d0;
  short local_8ce;
  undefined local_8c8 [128];
  undefined local_848 [1024];
  uint local_448 [258];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_8fc[0] = param_4;
  if (param_3 < 0x400) {
    lVar1 = *param_1;
    FUN_0010d700(local_848);
    local_8e0 = (undefined2)param_3;
    local_848[param_3] = 0;
    local_8e8 = local_848;
    sVar2 = FontFileCountDashes(local_848,param_3);
    local_8de = sVar2;
    __strcpy_chk(local_448,local_848,0x400);
    if (sVar2 == 0xe) {
      iVar3 = FontParseXLFDName(local_448,local_8c8,2);
      if (iVar3 != 0) {
        __ptr = (void *)FontParseRanges(local_848,&local_8ec);
        iVar3 = FontFileFindNamesInScalableDir
                          (lVar1 + 0x30,&local_8e8,local_8fc[0],param_5,0,(param_6 != 0) + '\x02',
                           local_8fc);
        puVar7 = local_448;
        do {
          puVar6 = puVar7;
          uVar4 = *puVar6 + 0xfefefeff & ~*puVar6;
          uVar5 = uVar4 & 0x80808080;
          puVar7 = puVar6 + 1;
        } while (uVar5 == 0);
        bVar9 = (uVar4 & 0x8080) == 0;
        if (bVar9) {
          uVar5 = uVar5 >> 0x10;
        }
        if (bVar9) {
          puVar7 = (uint *)((long)puVar6 + 6);
        }
        lVar8 = (long)puVar7 + ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)local_448);
        local_8ce = local_8de;
        local_8d0 = (undefined2)lVar8;
        local_8d8 = local_448;
        lVar8 = MakeFontNamesRecord(0,lVar1,lVar8,uVar5 & 0xffffff00);
        if (lVar8 != 0) {
          FontFileFindNamesInScalableDir
                    (lVar1 + 0x18,&local_8d8,local_8fc[0],lVar8,local_8c8,param_6 != 0,0);
          FUN_0010dad0(param_5,lVar8,&local_8e8,local_448,local_8c8,__ptr,local_8ec,local_8fc);
          FreeFontNames(lVar8);
          lVar8 = MakeFontNamesRecord(0);
          if (lVar8 != 0) {
            FontFileFindNamesInScalableDir
                      (lVar1 + 0x30,&local_8d8,local_8fc[0],lVar8,local_8c8,param_6 != 0,0);
            FUN_0010dad0(param_5,lVar8,&local_8e8,local_448,local_8c8,__ptr,local_8ec,local_8fc);
            FreeFontNames(lVar8);
            if (__ptr != (void *)0x0) {
              free(__ptr);
            }
            goto LAB_0010e8df;
          }
        }
        if (__ptr != (void *)0x0) {
          free(__ptr);
        }
        goto LAB_0010eb38;
      }
    }
    iVar3 = FontFileFindNamesInScalableDir
                      (lVar1 + 0x30,&local_8e8,local_8fc[0],param_5,0,param_6 != 0,local_8fc);
    if (iVar3 == 0x55) {
      iVar3 = FontFileFindNamesInScalableDir
                        (lVar1 + 0x18,&local_8e8,local_8fc[0],param_5,0,param_6 != 0,0);
    }
  }
  else {
LAB_0010eb38:
    iVar3 = 0x50;
  }
LAB_0010e8df:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileListFonts(undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
                      undefined4 param_5,undefined8 param_6)

{
  FUN_0010e7f0(param_2 + 0x18,param_3,param_4,param_5,param_6,0);
  return;
}



int FUN_0010eba0(long param_1,undefined8 *param_2,int *param_3,long *param_4)

{
  int iVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  char *__s;
  code *pcVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  long lVar9;
  undefined8 *puVar10;
  long lVar11;
  size_t sVar12;
  size_t sVar13;
  uint *puVar14;
  uint *puVar15;
  undefined *puVar16;
  short sVar17;
  long in_FS_OFFSET;
  bool bVar18;
  byte bVar19;
  void *local_1118;
  undefined4 local_10dc;
  uint *local_10d8;
  short local_10d0;
  short local_10ce;
  undefined8 local_10c8 [12];
  undefined *local_1068;
  undefined4 local_1060;
  void *local_1058;
  uint local_1048 [256];
  undefined local_c48 [1024];
  undefined local_848 [2056];
  long local_40;
  
  bVar19 = 0;
  iVar5 = 0x50;
  iVar1 = *param_3;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x3ff < iVar1) goto LAB_0010edbf;
  uVar2 = *param_2;
  puVar3 = *(undefined8 **)(param_1 + 0x18);
  FUN_0010d700(local_1048,uVar2,iVar1);
  lVar9 = (long)iVar1;
  *(undefined *)((long)local_1048 + lVar9) = 0;
  local_1118 = (void *)FontParseRanges(local_1048,&local_10dc);
  sVar17 = (short)iVar1;
  local_10d8 = local_1048;
  local_10d0 = sVar17;
  local_10ce = FontFileCountDashes(local_1048,iVar1);
  iVar5 = FontParseXLFDName(local_1048,local_10c8,0);
  if (iVar5 == 0) {
    puVar10 = local_10c8;
    for (lVar11 = 0xf; lVar11 != 0; lVar11 = lVar11 + -1) {
      *puVar10 = 0;
      puVar10 = puVar10 + (ulong)bVar19 * -2 + 1;
    }
  }
  puVar10 = (undefined8 *)FontFileFindNameInDir(puVar3 + 6,&local_10d8);
  if (puVar10 == (undefined8 *)0x0) {
    if ((local_10ce == 0xe) &&
       (iVar5 = FontParseXLFDName(local_1048,local_10c8,2), puVar15 = local_1048, iVar5 != 0)) {
      do {
        puVar14 = puVar15;
        uVar6 = *puVar14 + 0xfefefeff & ~*puVar14;
        uVar7 = uVar6 & 0x80808080;
        puVar15 = puVar14 + 1;
      } while (uVar7 == 0);
      bVar18 = (uVar6 & 0x8080) == 0;
      if (bVar18) {
        uVar7 = uVar7 >> 0x10;
      }
      if (bVar18) {
        puVar15 = (uint *)((long)puVar14 + 6);
      }
      lVar11 = (long)puVar15 + ((-3 - (ulong)CARRY1((byte)uVar7,(byte)uVar7)) - (long)local_1048);
      local_10d0 = (short)lVar11;
      puVar10 = (undefined8 *)
                FontFileFindNameInDir(puVar3 + 6,&local_10d8,lVar11,uVar7 & 0xffffff00);
      if (puVar10 != (undefined8 *)0x0) goto LAB_0010ec98;
    }
LAB_0010ecad:
    FUN_0010d700(local_1048,uVar2,iVar1);
    *(undefined *)((long)local_1048 + lVar9) = 0;
    local_10d8 = local_1048;
    local_10d0 = sVar17;
    local_10ce = FontFileCountDashes(local_1048,iVar1);
    iVar5 = FontParseXLFDName(local_1048,local_10c8,2);
    puVar15 = local_1048;
    if (iVar5 == 0) {
LAB_0010ee08:
      FUN_0010d700(local_1048,uVar2,iVar1);
      *(undefined *)((long)local_1048 + lVar9) = 0;
      local_10d8 = local_1048;
      local_10d0 = sVar17;
      local_10ce = FontFileCountDashes(local_1048,iVar1);
      puVar10 = (undefined8 *)FontFileFindNameInScalableDir(puVar3 + 3,&local_10d8,local_10c8);
      iVar5 = 0x53;
      if (puVar10 == (undefined8 *)0x0) goto LAB_0010eda6;
      __strcpy_chk(local_1048,*puVar10,0x400);
      local_10d0 = *(short *)(puVar10 + 1);
      local_10ce = *(short *)((long)puVar10 + 10);
      local_10d8 = local_1048;
    }
    else {
      do {
        puVar14 = puVar15;
        uVar6 = *puVar14 + 0xfefefeff & ~*puVar14;
        uVar7 = uVar6 & 0x80808080;
        puVar15 = puVar14 + 1;
      } while (uVar7 == 0);
      bVar18 = (uVar6 & 0x8080) == 0;
      if (bVar18) {
        uVar7 = uVar7 >> 0x10;
      }
      if (bVar18) {
        puVar15 = (uint *)((long)puVar14 + 6);
      }
      local_10d0 = (((short)puVar15 + -3) - (ushort)CARRY1((byte)uVar7,(byte)uVar7)) -
                   (short)local_1048;
      puVar10 = (undefined8 *)FontFileFindNameInScalableDir(puVar3 + 3,&local_10d8,local_10c8);
      if (puVar10 == (undefined8 *)0x0) goto LAB_0010ee08;
    }
    iVar5 = 0x53;
    if (*(int *)(puVar10 + 2) == 0) {
      iVar8 = FontFileCompleteXLFD(local_10c8,puVar10[5]);
      iVar5 = 0x53;
      if (iVar8 != 0) {
        lVar11 = FontFileFindScaledInstance(puVar10,local_10c8,0);
        if (lVar11 == 0) {
          puVar16 = local_c48;
          FUN_0010d700(puVar16,uVar2,iVar1);
          local_c48[lVar9] = 0;
          local_1060 = local_10dc;
          __s = (char *)*puVar3;
          local_1068 = puVar16;
          local_1058 = local_1118;
          sVar12 = strlen(__s);
          sVar13 = strlen((char *)puVar10[4]);
          if (sVar13 + sVar12 < 0x801) {
            lVar9 = __memcpy_chk(local_848,__s,sVar12 + 1,0x801);
            __strcpy_chk(lVar9 + sVar12,puVar10[4],0x801 - sVar12);
            pcVar4 = *(code **)(puVar10[3] + 0x28);
            if (pcVar4 == (code *)0x0) {
              pcVar4 = *(code **)(puVar10[3] + 0x20);
              if (pcVar4 == (code *)0x0) goto LAB_0010f0ac;
              iVar5 = (*pcVar4)(param_1,*param_4,puVar10,lVar9);
            }
            else {
              iVar5 = (*pcVar4)(param_1,*param_4,puVar10,&local_10d8,lVar9,local_10c8);
            }
          }
          else {
LAB_0010f0ac:
            iVar5 = 0x53;
          }
          if (local_1118 != (void *)0x0) {
            free(local_1118);
          }
          local_1118 = (void *)0x0;
        }
        else {
          iVar5 = 0x53;
          if (*(long *)(lVar11 + 0x80) != 0) {
            iVar5 = 0x55;
            *param_4 = *(long *)(lVar11 + 0x80) + 8;
            goto LAB_0010edbf;
          }
          if (*(long *)(lVar11 + 0x78) == 0) goto LAB_0010ed8e;
          lVar9 = *(long *)(*(long *)(lVar11 + 0x78) + 0x28);
          if (lVar9 != 0) {
            iVar5 = 0x55;
            *param_4 = lVar9 + 8;
            goto LAB_0010edbf;
          }
          iVar5 = FUN_0010d520(param_1,*param_4);
        }
        if (iVar5 == 0x55) goto LAB_0010edbf;
      }
    }
LAB_0010ed8e:
    FUN_0010d700(local_1048,uVar2,iVar1);
  }
  else {
LAB_0010ec98:
    if (*(int *)(puVar10 + 2) == 2) {
      if (puVar10[5] == 0) {
        iVar5 = FUN_0010d520(param_1,*param_4,puVar10);
        if (iVar5 == 0x53) goto LAB_0010ecad;
      }
      else {
        iVar5 = 0x55;
        *param_4 = puVar10[5] + 8;
      }
    }
    else {
      if (*(int *)(puVar10 + 2) != 3) goto LAB_0010ecad;
      local_1060 = local_10dc;
      local_1058 = local_1118;
      FUN_0010d760(*puVar10,(int)*(short *)(puVar10 + 1),puVar10[3],param_2,local_10c8);
      sVar12 = strlen((char *)*param_2);
      iVar5 = 0x52;
      *param_3 = (int)sVar12;
    }
  }
LAB_0010eda6:
  if (local_1118 != (void *)0x0) {
    free(local_1118);
  }
LAB_0010edbf:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar5;
}



int FontFileListNextFontWithInfo
              (undefined8 param_1,undefined8 param_2,undefined8 *param_3,undefined4 *param_4,
              undefined8 param_5,int *param_6,undefined8 *param_7)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  long in_FS_OFFSET;
  undefined4 local_3c;
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  piVar2 = (int *)*param_7;
  iVar3 = *(int *)(param_7 + 1);
  if (iVar3 == *piVar2) {
    FreeFontNames(piVar2);
    free(param_7);
    iVar3 = 0x53;
  }
  else {
    local_38 = *(undefined8 *)(*(long *)(piVar2 + 4) + (long)iVar3 * 8);
    local_3c = *(undefined4 *)(*(long *)(piVar2 + 2) + (long)iVar3 * 4);
    iVar3 = FUN_0010eba0(param_2,&local_38,&local_3c,param_5);
    if (iVar3 == 0x53) {
      iVar3 = 0x50;
    }
    *param_3 = local_38;
    *param_4 = local_3c;
    iVar1 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar1 + 1;
    *param_6 = *(int *)*param_7 - (iVar1 + 1);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileOpenBitmap(void)

{
  FUN_0010d3e0();
  return;
}



int FontFileStartListFonts
              (undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
              undefined4 param_5,undefined8 *param_6,undefined4 param_7)

{
  int iVar1;
  long *__ptr;
  long lVar2;
  
  __ptr = (long *)malloc(0x10);
  if (__ptr == (long *)0x0) {
    iVar1 = 0x50;
  }
  else {
    lVar2 = MakeFontNamesRecord(0);
    *__ptr = lVar2;
    if (lVar2 == 0) {
      iVar1 = 0x50;
      free(__ptr);
    }
    else {
      iVar1 = FUN_0010e7f0(param_2 + 0x18,param_3,param_4,param_5,lVar2,param_7);
      if (iVar1 == 0x55) {
        *(undefined4 *)(__ptr + 1) = 0;
        *param_6 = __ptr;
      }
      else {
        FreeFontNames(*__ptr);
        free(__ptr);
      }
    }
  }
  return iVar1;
}



void FontFileStartListFontsWithInfo(void)

{
  FontFileStartListFonts();
  return;
}



void FontFileStartListFontsAndAliases(void)

{
  FontFileStartListFonts();
  return;
}



void FontFileRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FontFileNameCheck,FontFileInitFPE,FontFileFreeFPE,FontFileResetFPE,FontFileOpenFont,
             FontFileCloseFont,FontFileListFonts,FontFileStartListFontsWithInfo,
             FontFileListNextFontWithInfo,0,0,0,FontFileStartListFontsAndAliases,
             FontFileListNextFontOrAlias,FontFileEmptyBitmapSource);
  return;
}



undefined8
FontFileAddScaledInstance(long param_1,undefined8 *param_2,long param_3,undefined8 param_4)

{
  undefined8 *puVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  void *__ptr;
  
  lVar3 = *(long *)(param_1 + 0x28);
  iVar2 = *(int *)(lVar3 + 0x78);
  __ptr = *(void **)(lVar3 + 0x80);
  if (iVar2 == *(int *)(lVar3 + 0x7c)) {
    __ptr = realloc(__ptr,(long)(iVar2 + 4) * 0x88);
    if (__ptr == (void *)0x0) {
      return 0;
    }
    *(int *)(lVar3 + 0x7c) = iVar2 + 4;
    iVar2 = *(int *)(lVar3 + 0x78);
    *(void **)(lVar3 + 0x80) = __ptr;
  }
  *(int *)(lVar3 + 0x78) = iVar2 + 1;
  uVar4 = param_2[1];
  puVar1 = (undefined8 *)((long)__ptr + (long)iVar2 * 0x88);
  *puVar1 = *param_2;
  puVar1[1] = uVar4;
  uVar4 = param_2[3];
  puVar1[2] = param_2[2];
  puVar1[3] = uVar4;
  uVar4 = param_2[5];
  puVar1[4] = param_2[4];
  puVar1[5] = uVar4;
  uVar4 = param_2[7];
  puVar1[6] = param_2[6];
  puVar1[7] = uVar4;
  uVar4 = param_2[9];
  puVar1[8] = param_2[8];
  puVar1[9] = uVar4;
  uVar4 = param_2[0xb];
  puVar1[10] = param_2[10];
  puVar1[0xb] = uVar4;
  uVar4 = param_2[0xd];
  puVar1[0xc] = param_2[0xc];
  puVar1[0xd] = uVar4;
  uVar4 = param_2[0xe];
  puVar1[0x10] = param_3;
  puVar1[0xe] = uVar4;
  puVar1[0xf] = param_4;
  if (param_3 != 0) {
    *(long *)(param_3 + 0xa0) = param_1;
  }
  return 1;
}



void FontFileSwitchStringsToBitmapPointers(long param_1)

{
  long *plVar1;
  long lVar2;
  long *plVar3;
  long *plVar4;
  int iVar5;
  int iVar6;
  long *plVar7;
  int iVar8;
  
  plVar1 = *(long **)(param_1 + 0x38);
  if (*(int *)(param_1 + 0x18) < 1) {
    return;
  }
  plVar7 = (long *)(*(long *)(param_1 + 0x20) + 0x28);
  iVar8 = 0;
  do {
    lVar2 = *plVar7;
    if (0 < *(int *)(lVar2 + 0x78)) {
      plVar4 = (long *)(*(long *)(lVar2 + 0x80) + 0x78);
      iVar6 = 0;
      do {
        iVar5 = 0;
        plVar3 = plVar1;
        if (0 < *(int *)(param_1 + 0x30)) {
          do {
            while (*plVar3 != *plVar4) {
              iVar5 = iVar5 + 1;
              plVar3 = plVar3 + 0x13;
              if (*(int *)(param_1 + 0x30) <= iVar5) goto LAB_0010f577;
            }
            *plVar4 = (long)plVar3;
            iVar5 = iVar5 + 1;
            plVar3 = plVar3 + 0x13;
          } while (iVar5 < *(int *)(param_1 + 0x30));
        }
LAB_0010f577:
        iVar6 = iVar6 + 1;
        plVar4 = plVar4 + 0x11;
      } while (iVar6 < *(int *)(lVar2 + 0x78));
    }
    iVar8 = iVar8 + 1;
    plVar7 = plVar7 + 0x13;
    if (*(int *)(param_1 + 0x18) <= iVar8) {
      return;
    }
  } while( true );
}



void FontFileRemoveScaledInstance(long param_1,long param_2)

{
  undefined8 *puVar1;
  long lVar2;
  void *__ptr;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  long lVar18;
  long lVar19;
  int iVar20;
  int iVar21;
  
  lVar2 = *(long *)(param_1 + 0x28);
  if (0 < *(int *)(lVar2 + 0x78)) {
    iVar21 = 0;
    do {
      while( true ) {
        lVar19 = (long)iVar21 * 0x88;
        lVar18 = *(long *)(lVar2 + 0x80) + lVar19;
        if (*(long *)(lVar18 + 0x80) == param_2) break;
        iVar20 = *(int *)(lVar2 + 0x78);
LAB_0010f5d5:
        iVar21 = iVar21 + 1;
        if (iVar20 <= iVar21) {
          return;
        }
      }
      __ptr = *(void **)(lVar18 + 0x70);
      if (__ptr != (void *)0x0) {
        free(__ptr);
      }
      iVar20 = *(int *)(lVar2 + 0x78) + -1;
      *(int *)(lVar2 + 0x78) = iVar20;
      if (iVar20 <= iVar21) goto LAB_0010f5d5;
      do {
        iVar20 = iVar21;
        lVar19 = lVar19 + 0x88;
        lVar18 = *(long *)(lVar2 + 0x80);
        iVar21 = iVar20 + 1;
        uVar3 = ((undefined8 *)(lVar18 + lVar19))[1];
        puVar1 = (undefined8 *)(lVar18 + 0x10 + lVar19);
        uVar4 = *puVar1;
        uVar5 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x20 + lVar19);
        uVar6 = *puVar1;
        uVar7 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x30 + lVar19);
        uVar8 = *puVar1;
        uVar9 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x40 + lVar19);
        uVar10 = *puVar1;
        uVar11 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x50 + lVar19);
        uVar12 = *puVar1;
        uVar13 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + -0x88 + lVar19);
        *puVar1 = *(undefined8 *)(lVar18 + lVar19);
        puVar1[1] = uVar3;
        puVar1 = (undefined8 *)(lVar18 + 0x60 + lVar19);
        uVar14 = *puVar1;
        uVar15 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + 0x70 + lVar19);
        uVar16 = *puVar1;
        uVar17 = puVar1[1];
        puVar1 = (undefined8 *)(lVar18 + -0x78 + lVar19);
        *puVar1 = uVar4;
        puVar1[1] = uVar5;
        uVar3 = *(undefined8 *)(lVar18 + 0x80 + lVar19);
        puVar1 = (undefined8 *)(lVar18 + -0x68 + lVar19);
        *puVar1 = uVar6;
        puVar1[1] = uVar7;
        puVar1 = (undefined8 *)(lVar18 + -0x58 + lVar19);
        *puVar1 = uVar8;
        puVar1[1] = uVar9;
        *(undefined8 *)(lVar18 + -8 + lVar19) = uVar3;
        puVar1 = (undefined8 *)(lVar18 + -0x48 + lVar19);
        *puVar1 = uVar10;
        puVar1[1] = uVar11;
        puVar1 = (undefined8 *)(lVar18 + -0x38 + lVar19);
        *puVar1 = uVar12;
        puVar1[1] = uVar13;
        puVar1 = (undefined8 *)(lVar18 + -0x28 + lVar19);
        *puVar1 = uVar14;
        puVar1[1] = uVar15;
        puVar1 = (undefined8 *)(lVar18 + -0x18 + lVar19);
        *puVar1 = uVar16;
        puVar1[1] = uVar17;
      } while (iVar21 < *(int *)(lVar2 + 0x78));
      iVar21 = iVar20 + 2;
    } while (iVar21 < *(int *)(lVar2 + 0x78));
  }
  return;
}



undefined8 FontFileCompleteXLFD(uint *param_1,uint *param_2)

{
  ushort uVar1;
  uint uVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  long in_FS_OFFSET;
  undefined8 uVar6;
  double dVar7;
  double dVar8;
  double dVar9;
  double dVar10;
  double dVar11;
  double dVar12;
  double dVar13;
  int local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar3 = (ushort *)GetClientResolutions(&local_24);
  uVar4 = *param_1;
  if (((uVar4 & 3) == 0) || ((uVar4 & 0xc) == 0)) {
    uVar2 = param_1[0x14];
    uVar5 = param_1[0x15];
    if (local_24 == 0) {
LAB_0010f8d1:
      if ((int)uVar2 < 1) {
        uVar2 = param_2[0x14];
        param_1[0x14] = uVar2;
        if ((int)uVar5 < 1) goto LAB_0010f8df;
        if ((int)uVar2 < 1) goto LAB_0010f8f0;
      }
      else if ((int)uVar5 < 1) {
LAB_0010f8df:
        param_1[0x15] = param_2[0x15];
        goto LAB_0010f8e5;
      }
    }
    else {
      if ((int)uVar2 < 1) {
        uVar2 = (uint)*puVar3;
        param_1[0x14] = (uint)*puVar3;
        if ((int)uVar5 < 1) goto LAB_0010f8ca;
        goto LAB_0010f8d1;
      }
      if ((int)uVar5 < 1) {
LAB_0010f8ca:
        uVar5 = (uint)puVar3[1];
        param_1[0x15] = uVar5;
        goto LAB_0010f8d1;
      }
    }
LAB_0010f734:
    if ((uVar4 & 0xf) == 0) {
      if (local_24 == 0) {
        if ((*(byte *)param_2 & 0xc) == 0) goto LAB_0010f8f0;
        *(undefined8 *)(param_1 + 10) = *(undefined8 *)(param_2 + 10);
        *(undefined8 *)(param_1 + 0xc) = *(undefined8 *)(param_2 + 0xc);
        *(undefined8 *)(param_1 + 0xe) = *(undefined8 *)(param_2 + 0xe);
        *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_2 + 0x10);
        uVar4 = uVar4 & 0xfffffff3 | *param_2 & 0xc;
        *param_1 = uVar4;
      }
      else {
        uVar1 = puVar3[2];
        param_1[0xe] = 0;
        param_1[0xf] = 0;
        uVar4 = uVar4 & 0xfffffff3 | 4;
        param_1[0xc] = 0;
        param_1[0xd] = 0;
        *param_1 = uVar4;
        *(double *)(param_1 + 0x10) = (double)uVar1 / 10.0;
        *(double *)(param_1 + 10) = (double)uVar1 / 10.0;
      }
    }
    dVar13 = 1.0;
    if ((uVar4 & 3) == 1) {
      uVar4 = uVar4 | 3;
      dVar13 = (double)(int)uVar2 / (double)(int)uVar5;
      *param_1 = uVar4;
      *(double *)(param_1 + 2) = *(double *)(param_1 + 2) * dVar13;
    }
    dVar8 = (double)(int)uVar2 / 72.27;
    dVar9 = (double)(int)uVar5 / 72.27;
    if ((uVar4 & 0xc) == 0) goto LAB_0010f950;
    dVar7 = *(double *)(param_1 + 10);
    dVar11 = *(double *)(param_1 + 0xc);
    dVar12 = *(double *)(param_1 + 0xe);
    dVar10 = *(double *)(param_1 + 0x10);
    while( true ) {
      if (((uVar4 & 3) != 0) &&
         ((((dVar13 < ABS(*(double *)(param_1 + 2) - dVar7 * dVar8) ||
            (1.0 < ABS(*(double *)(param_1 + 4) - dVar11 * dVar9))) ||
           (1.0 < ABS(*(double *)(param_1 + 6) - dVar12 * dVar8))) ||
          (1.0 < ABS(*(double *)(param_1 + 8) - dVar10 * dVar9))))) goto LAB_0010f8f0;
      if ((uVar4 & 0xf) != 6) break;
LAB_0010f950:
      if ((ABS(dVar8) < 1e-20) || (ABS(dVar9) < 1e-20)) goto LAB_0010f8f0;
      dVar11 = *(double *)(param_1 + 4) / dVar9;
      uVar2 = (uint)((*param_1 & 3) == 2) * 4 + 4;
      uVar4 = *param_1 & 0xfffffff3 | uVar2;
      *param_1 = uVar4;
      *(double *)(param_1 + 0xc) = dVar11;
      dVar12 = *(double *)(param_1 + 6) / dVar8;
      *(double *)(param_1 + 10) = *(double *)(param_1 + 2) / dVar8;
      *(double *)(param_1 + 0xe) = dVar12;
      *(double *)(param_1 + 0x10) = *(double *)(param_1 + 8) / dVar9;
      if (uVar2 != 4) goto LAB_0010f9e4;
      dVar7 = (double)(int)((*(double *)(param_1 + 2) / dVar8) * 10.0 + 0.5) / 10.0;
      dVar10 = (double)(int)((*(double *)(param_1 + 8) / dVar9) * 10.0 + 0.5) / 10.0;
      *(double *)(param_1 + 10) = dVar7;
      *(double *)(param_1 + 0x10) = dVar10;
    }
    *(double *)(param_1 + 2) = dVar7 * dVar8;
    *(double *)(param_1 + 4) = dVar11 * dVar9;
    *(double *)(param_1 + 6) = dVar12 * dVar8;
    *(double *)(param_1 + 8) = dVar10 * dVar9;
    *param_1 = uVar4 & 0xfffffffc | ((uVar4 & 0xc) != 8) + 2;
LAB_0010f9e4:
    uVar6 = xlfd_round_double();
    *(undefined8 *)(param_1 + 2) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 4));
    *(undefined8 *)(param_1 + 4) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 6));
    *(undefined8 *)(param_1 + 6) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 8));
    *(undefined8 *)(param_1 + 8) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 10));
    *(undefined8 *)(param_1 + 10) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 0xc));
    *(undefined8 *)(param_1 + 0xc) = uVar6;
    uVar6 = xlfd_round_double(*(undefined8 *)(param_1 + 0xe));
    *(undefined8 *)(param_1 + 0xe) = uVar6;
    dVar13 = (double)xlfd_round_double(*(undefined8 *)(param_1 + 0x10));
    *(double *)(param_1 + 0x10) = dVar13;
    param_1[0x13] = (int)(dVar13 * 10.0);
    param_1[0x12] = (int)*(double *)(param_1 + 8);
    uVar6 = 1;
  }
  else {
    if ((int)param_1[0x15] < 1) {
      dVar13 = hypot(*(double *)(param_1 + 4),*(double *)(param_1 + 8));
      dVar8 = hypot(*(double *)(param_1 + 0xc),*(double *)(param_1 + 0x10));
      if (1e-20 <= dVar8) {
        uVar2 = param_1[0x14];
        param_1[0x15] = (int)((dVar13 * 72.27) / dVar8 + 0.5);
        if ((int)uVar2 < 1) {
          uVar4 = *param_1;
          goto LAB_0010fb30;
        }
LAB_0010f8e9:
        uVar5 = param_1[0x15];
        if (0 < (int)uVar5) goto LAB_0010f943;
      }
    }
    else {
      uVar2 = param_1[0x14];
      if (0 < (int)uVar2) {
        uVar5 = param_1[0x15];
LAB_0010f943:
        uVar4 = *param_1;
        goto LAB_0010f734;
      }
LAB_0010fb30:
      if ((uVar4 & 2) == 0) {
        uVar2 = param_1[0x15];
        param_1[0x14] = uVar2;
      }
      else {
        dVar13 = hypot(*(double *)(param_1 + 2),*(double *)(param_1 + 6));
        dVar8 = hypot(*(double *)(param_1 + 10),*(double *)(param_1 + 0xe));
        if (dVar8 < 1e-20) goto LAB_0010f8f0;
        uVar2 = (uint)((dVar13 * 72.27) / dVar8 + 0.5);
        param_1[0x14] = uVar2;
      }
LAB_0010f8e5:
      if (0 < (int)uVar2) goto LAB_0010f8e9;
    }
LAB_0010f8f0:
    uVar6 = 0;
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



uint * FontFileFindScaledInstance(long param_1,uint *param_2,int param_3)

{
  char *pcVar1;
  int iVar2;
  uint uVar3;
  long lVar4;
  uint *puVar5;
  int iVar6;
  char *pcVar7;
  double *pdVar8;
  char *pcVar9;
  int iVar10;
  uint *puVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  double dVar15;
  double dVar16;
  
  lVar4 = *(long *)(param_1 + 0x28);
  iVar2 = *(int *)(lVar4 + 0x78);
  if (param_3 != 0) {
    puVar11 = (uint *)0x0;
    if (iVar2 != 0) {
      puVar11 = *(uint **)(lVar4 + 0x80);
      dVar16 = *(double *)(puVar11 + 10) - *(double *)(param_2 + 10);
      dVar12 = *(double *)(puVar11 + 0xc) - *(double *)(param_2 + 0xc);
      dVar14 = *(double *)(puVar11 + 0x10) - *(double *)(param_2 + 0x10);
      dVar13 = *(double *)(puVar11 + 0xe) - *(double *)(param_2 + 0xe);
      dVar12 = dVar13 * dVar13 + dVar16 * dVar16 + dVar12 * dVar12 + dVar14 * dVar14;
      if (1 < iVar2) {
        pdVar8 = (double *)(puVar11 + 0x2c);
        iVar10 = 0;
        iVar6 = 1;
        do {
          if (((pdVar8[0xb] == 0.0) || ((*(byte *)((long)pdVar8[0xb] + 0x13) & 2) != 0)) &&
             (dVar13 = *pdVar8 - *(double *)(param_2 + 10),
             dVar15 = pdVar8[3] - *(double *)(param_2 + 0x10),
             dVar14 = pdVar8[1] - *(double *)(param_2 + 0xc),
             dVar16 = pdVar8[2] - *(double *)(param_2 + 0xe),
             dVar13 = (double)(int)(dVar16 * dVar16 + dVar13 * dVar13 + dVar14 * dVar14 +
                                   dVar15 * dVar15), dVar13 < dVar12)) {
            dVar12 = dVar13;
            iVar10 = iVar6;
          }
          iVar6 = iVar6 + 1;
          pdVar8 = pdVar8 + 0x11;
        } while (iVar6 != iVar2);
        puVar11 = puVar11 + (long)iVar10 * 0x22;
      }
      if ((*(long *)(puVar11 + 0x20) != 0) &&
         ((*(byte *)(*(long *)(puVar11 + 0x20) + 0x13) & 2) == 0)) {
        puVar11 = (uint *)0x0;
      }
    }
    return puVar11;
  }
  if (0 < iVar2) {
    puVar5 = *(uint **)(lVar4 + 0x80);
    puVar11 = puVar5 + (ulong)(iVar2 - 1) * 0x22 + 0x22;
    do {
      if (((((*(long *)(puVar5 + 0x20) == 0) ||
            ((*(byte *)(*(long *)(puVar5 + 0x20) + 0x13) & 2) != 0)) &&
           ((*(long *)(puVar5 + 0x14) == *(long *)(param_2 + 0x14) &&
            ((puVar5[0x16] == param_2[0x16] || puVar5[0x16] == 0 || (param_2[0x16] + 1 < 2)))))) &&
          ((uVar3 = *param_2, (uVar3 & 3) == 0 ||
           (((((((*puVar5 ^ uVar3) & 3) == 0 && (true)) &&
              (*(double *)(puVar5 + 2) == *(double *)(param_2 + 2))) &&
             ((true && (*(double *)(puVar5 + 4) == *(double *)(param_2 + 4))))) &&
            (((true && ((*(double *)(puVar5 + 6) == *(double *)(param_2 + 6) && (true)))) &&
             (*(double *)(puVar5 + 8) == *(double *)(param_2 + 8))))))))) &&
         (((uVar3 & 0xc) == 0 ||
          ((((((((uVar3 ^ *puVar5) & 0xc) == 0 && (true)) &&
              (*(double *)(puVar5 + 10) == *(double *)(param_2 + 10))) &&
             ((true && (*(double *)(puVar5 + 0xc) == *(double *)(param_2 + 0xc))))) &&
            ((true && ((*(double *)(puVar5 + 0xe) == *(double *)(param_2 + 0xe) && (true)))))) &&
           (*(double *)(puVar5 + 0x10) == *(double *)(param_2 + 0x10))))))) {
        uVar3 = puVar5[0x1a];
        if (uVar3 == 0) {
          return puVar5;
        }
        if (uVar3 == param_2[0x1a]) {
          if ((int)uVar3 < 1) {
            return puVar5;
          }
          pcVar9 = *(char **)(puVar5 + 0x1c);
          pcVar7 = *(char **)(param_2 + 0x1c);
          pcVar1 = pcVar9 + (ulong)(uVar3 - 1) * 4 + 4;
          while ((((pcVar9[1] == pcVar7[1] && (*pcVar9 == *pcVar7)) && (pcVar9[3] == pcVar7[3])) &&
                 (pcVar9[2] == pcVar7[2]))) {
            pcVar9 = pcVar9 + 4;
            pcVar7 = pcVar7 + 4;
            if (pcVar1 == pcVar9) {
              return puVar5;
            }
          }
        }
      }
      puVar5 = puVar5 + 0x22;
    } while (puVar5 != puVar11);
  }
  return (uint *)0x0;
}



int FUN_0010ff30(long *param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar2 = param_2;
  if (param_2 != 0) {
    do {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        iVar1 = (*(code *)param_1[0x402])(param_1);
        *(int *)((long)param_1 + 0xc) = iVar1;
        if (iVar1 == -1) {
          return -1;
        }
      }
      else {
        *param_1 = *param_1 + 1;
      }
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
  }
  return param_2;
}



undefined8 FUN_0010ff90(long param_1,undefined4 param_2)

{
  void *__ptr;
  
  __ptr = *(void **)(param_1 + 0x2030);
  inflateEnd(__ptr);
  BufFileClose(*(undefined8 *)((long)__ptr + 0x4078),param_2);
  free(__ptr);
  return 1;
}



ulong FUN_0010ffe0(long *param_1)

{
  long *plVar1;
  byte *pbVar2;
  long lVar3;
  int iVar4;
  uint uVar5;
  long lVar6;
  int iVar7;
  
  if (-1 < *(int *)(param_1 + 1)) {
    *(int *)(param_1 + 1) = *(int *)(param_1 + 1) + -1;
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    return (ulong)*pbVar2;
  }
  plVar1 = (long *)param_1[0x406];
  uVar5 = *(uint *)(plVar1 + 0xe);
  if (uVar5 != 0) {
    if ((int)uVar5 < 1) {
      if ((uVar5 & 0xfffffffd) != 0xfffffffd) {
        return 0xffffffff;
      }
    }
    else if (uVar5 != 1) {
      return 0xffffffff;
    }
    *(undefined4 *)(param_1 + 1) = 0;
    return 0xffffffff;
  }
  *(undefined4 *)(plVar1 + 4) = 0x2000;
  plVar1[3] = (long)plVar1 + 0x74;
  do {
    if (*(int *)(plVar1 + 1) == 0) {
      lVar6 = 0;
      do {
        iVar7 = (int)lVar6;
        iVar4 = *(int *)(plVar1[0x80f] + 8);
        *(int *)(plVar1[0x80f] + 8) = iVar4 + -1;
        if (iVar4 == 0) {
          lVar3 = plVar1[0x80f];
          uVar5 = (**(code **)(lVar3 + 0x2010))(lVar3);
          *(uint *)(lVar3 + 0xc) = uVar5;
          if (uVar5 == 0xffffffff) goto LAB_0011010a;
        }
        else {
          pbVar2 = *(byte **)plVar1[0x80f];
          *(byte **)plVar1[0x80f] = pbVar2 + 1;
          uVar5 = (uint)*pbVar2;
        }
        *(char *)((long)plVar1 + lVar6 + 0x2074) = (char)uVar5;
        lVar6 = lVar6 + 1;
      } while (lVar6 != 0x2000);
      iVar7 = 0x2000;
LAB_0011010a:
      *(int *)(plVar1 + 1) = *(int *)(plVar1 + 1) + iVar7;
      *plVar1 = (long)plVar1 + 0x2074;
    }
    iVar4 = inflate(plVar1,0);
    *(int *)(plVar1 + 0xe) = iVar4;
    if ((iVar4 != 0) || (*(int *)(plVar1 + 4) == 0)) {
      *param_1 = (long)plVar1 + 0x74;
      iVar4 = -*(int *)(plVar1 + 4) + 0x2000;
      if (iVar4 < 0) {
        *(int *)(param_1 + 1) = iVar4;
        return 0xffffffff;
      }
      *(int *)(param_1 + 1) = -*(int *)(plVar1 + 4) + 0x1fff;
      *param_1 = (long)plVar1 + 0x75;
      return (ulong)*(byte *)((long)plVar1 + 0x74);
    }
  } while( true );
}



undefined8 BufFilePushZIP(undefined8 param_1)

{
  long *plVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  undefined8 *__ptr;
  undefined8 uVar8;
  
  __ptr = (undefined8 *)malloc(0x4080);
  if (__ptr == (undefined8 *)0x0) {
    return 0;
  }
  __ptr[8] = 0;
  __ptr[9] = 0;
  __ptr[10] = 0;
  __ptr[0x80f] = param_1;
  *__ptr = 0;
  __ptr[3] = 0;
  *(undefined4 *)(__ptr + 4) = 0;
  *(undefined4 *)(__ptr + 1) = 0;
  iVar3 = inflateInit2_(__ptr,0xfffffff1,"1.2.11",0x70);
  *(int *)(__ptr + 0xe) = iVar3;
  if (iVar3 == 0) {
    plVar1 = (long *)__ptr[0x80f];
    *(undefined4 *)(__ptr + 4) = 0x2000;
    __ptr[3] = (long)__ptr + 0x2074;
    *(undefined4 *)(__ptr + 1) = 0;
    iVar3 = *(int *)(plVar1 + 1);
    *(int *)(plVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      uVar4 = (*(code *)plVar1[0x402])(plVar1);
      *(uint *)((long)plVar1 + 0xc) = uVar4;
      if (uVar4 == 0xffffffff) goto LAB_001103d0;
    }
    else {
      pbVar2 = (byte *)*plVar1;
      *plVar1 = (long)(pbVar2 + 1);
      uVar4 = (uint)*pbVar2;
    }
    if (uVar4 == 0x1f) {
      iVar3 = *(int *)(plVar1 + 1);
      *(int *)(plVar1 + 1) = iVar3 + -1;
      if (iVar3 == 0) {
        uVar4 = (*(code *)plVar1[0x402])(plVar1);
        *(uint *)((long)plVar1 + 0xc) = uVar4;
        if (uVar4 == 0xffffffff) goto LAB_001103d0;
      }
      else {
        pbVar2 = (byte *)*plVar1;
        *plVar1 = (long)(pbVar2 + 1);
        uVar4 = (uint)*pbVar2;
      }
      if (uVar4 == 0x8b) {
        iVar3 = *(int *)(plVar1 + 1);
        *(int *)(plVar1 + 1) = iVar3 + -1;
        if (iVar3 == 0) {
          uVar4 = (*(code *)plVar1[0x402])(plVar1);
          *(uint *)((long)plVar1 + 0xc) = uVar4;
          if (uVar4 == 0xffffffff) goto LAB_001103d0;
        }
        else {
          pbVar2 = (byte *)*plVar1;
          *plVar1 = (long)(pbVar2 + 1);
          uVar4 = (uint)*pbVar2;
        }
        if (uVar4 == 8) {
          iVar3 = *(int *)(plVar1 + 1);
          *(int *)(plVar1 + 1) = iVar3 + -1;
          if (iVar3 == 0) {
            uVar4 = (*(code *)plVar1[0x402])(plVar1);
            *(uint *)((long)plVar1 + 0xc) = uVar4;
            if (uVar4 == 0xffffffff) goto LAB_001103d0;
          }
          else {
            pbVar2 = (byte *)*plVar1;
            *plVar1 = (long)(pbVar2 + 1);
            uVar4 = (uint)*pbVar2;
          }
          if ((uVar4 & 0xe0) == 0) {
            iVar3 = *(int *)(plVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar3 = iVar5 + -1;
            *(int *)(plVar1 + 1) = iVar3;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar3 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar3 = iVar5 + -1;
            *(int *)(plVar1 + 1) = iVar3;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar3 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            iVar5 = iVar3 + -1;
            *(int *)(plVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
              iVar5 = *(int *)(plVar1 + 1);
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            *(int *)(plVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              iVar3 = (*(code *)plVar1[0x402])(plVar1);
              *(int *)((long)plVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_001103d0;
            }
            else {
              *plVar1 = *plVar1 + 1;
            }
            if ((uVar4 & 4) != 0) {
              iVar5 = *(int *)(plVar1 + 1);
              iVar3 = iVar5 + -1;
              *(int *)(plVar1 + 1) = iVar3;
              if (iVar5 == 0) {
                uVar6 = (*(code *)plVar1[0x402])(plVar1);
                *(uint *)((long)plVar1 + 0xc) = uVar6;
                if (uVar6 == 0xffffffff) goto LAB_001103d0;
                iVar3 = *(int *)(plVar1 + 1);
              }
              else {
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar6 = (uint)*pbVar2;
              }
              *(int *)(plVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar7 = (*(code *)plVar1[0x402])(plVar1);
                *(uint *)((long)plVar1 + 0xc) = uVar7;
                if (uVar7 == 0xffffffff) goto LAB_001103d0;
              }
              else {
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar7 = (uint)*pbVar2;
              }
              iVar5 = uVar7 * 0x100 + uVar6;
              iVar3 = iVar5 + -1;
              if (-1 < iVar5) {
                do {
                  iVar5 = *(int *)(plVar1 + 1);
                  *(int *)(plVar1 + 1) = iVar5 + -1;
                  if (iVar5 == 0) {
                    iVar5 = (*(code *)plVar1[0x402])(plVar1);
                    *(int *)((long)plVar1 + 0xc) = iVar5;
                    if (iVar5 == -1) goto LAB_001103d0;
                  }
                  else {
                    *plVar1 = *plVar1 + 1;
                  }
                  iVar3 = iVar3 + -1;
                } while (iVar3 != -2);
              }
            }
            uVar6 = uVar4 & 8;
            do {
              while( true ) {
                if (uVar6 == 0) {
                  uVar6 = uVar4 & 0x10;
                  goto joined_r0x00110442;
                }
                iVar3 = *(int *)(plVar1 + 1);
                *(int *)(plVar1 + 1) = iVar3 + -1;
                if (iVar3 == 0) break;
                pbVar2 = (byte *)*plVar1;
                *plVar1 = (long)(pbVar2 + 1);
                uVar6 = (uint)*pbVar2;
              }
              uVar6 = (*(code *)plVar1[0x402])(plVar1);
              *(uint *)((long)plVar1 + 0xc) = uVar6;
            } while (uVar6 != 0xffffffff);
          }
        }
      }
    }
  }
  goto LAB_001103d0;
  while( true ) {
    uVar6 = (*(code *)plVar1[0x402])(plVar1);
    *(uint *)((long)plVar1 + 0xc) = uVar6;
    if (uVar6 == 0xffffffff) break;
joined_r0x00110442:
    if (uVar6 == 0) {
      if ((uVar4 & 2) != 0) {
        iVar3 = *(int *)(plVar1 + 1);
        iVar5 = iVar3 + -1;
        *(int *)(plVar1 + 1) = iVar5;
        if (iVar3 == 0) {
          iVar3 = (*(code *)plVar1[0x402])(plVar1);
          *(int *)((long)plVar1 + 0xc) = iVar3;
          if (iVar3 == -1) break;
          iVar5 = *(int *)(plVar1 + 1);
        }
        else {
          *plVar1 = *plVar1 + 1;
        }
        *(int *)(plVar1 + 1) = iVar5 + -1;
        if (iVar5 == 0) {
          iVar3 = (*(code *)plVar1[0x402])(plVar1);
          *(int *)((long)plVar1 + 0xc) = iVar3;
          if (iVar3 == -1) break;
        }
        else {
          *plVar1 = *plVar1 + 1;
        }
      }
      uVar8 = BufFileCreate(__ptr,FUN_0010ffe0,0,FUN_0010ff30,FUN_0010ff90);
      return uVar8;
    }
    iVar3 = *(int *)(plVar1 + 1);
    *(int *)(plVar1 + 1) = iVar3 + -1;
    if (iVar3 != 0) {
      pbVar2 = (byte *)*plVar1;
      *plVar1 = (long)(pbVar2 + 1);
      uVar6 = (uint)*pbVar2;
      goto joined_r0x00110442;
    }
  }
LAB_001103d0:
  free(__ptr);
  return 0;
}



void FontFileRegisterFpeFunctions(void)

{
  BitmapRegisterFontFileFunctions();
  FreeTypeRegisterFontFileFunctions();
  FontFileRegisterLocalFpeFunctions();
  CatalogueRegisterLocalFpeFunctions();
  return;
}



undefined8 FontFilePriorityRegisterRenderer(undefined8 *param_1,int param_2)

{
  char *__s2;
  long lVar1;
  int iVar2;
  undefined8 *puVar3;
  int iVar4;
  undefined8 *puVar5;
  size_t __size;
  undefined8 uVar6;
  int iVar7;
  
  puVar3 = DAT_0013fb58;
  iVar4 = DAT_0013fb50;
  lVar1 = DAT_0013fb40;
  if (DAT_0013fb40 == serverGeneration) {
    if (DAT_0013fb50 < 1) {
      __size = 0x10;
      iVar2 = 1;
      iVar4 = 0;
    }
    else {
      iVar7 = 0;
      __s2 = (char *)*param_1;
      puVar5 = DAT_0013fb58;
      do {
        iVar2 = strcasecmp(*(char **)*puVar5,__s2);
        if (iVar2 == 0) {
          if (param_2 <= *(int *)(puVar5 + 1)) {
            if (*(int *)(puVar5 + 1) != param_2) {
              return 1;
            }
            if (lVar1 != 1) {
              return 1;
            }
            ErrorF("Warning: font renderer for \"%s\" already registered at priority %d\n",__s2,
                   param_2);
            return 1;
          }
          if (iVar7 < iVar4) goto LAB_00110793;
          iVar2 = iVar7 + 1;
          __size = (long)iVar2 << 4;
          iVar4 = iVar7;
          goto LAB_00110706;
        }
        iVar7 = iVar7 + 1;
        puVar5 = puVar5 + 2;
      } while (iVar4 != iVar7);
      iVar2 = iVar4 + 1;
      __size = (long)iVar2 << 4;
    }
  }
  else {
    DAT_0013fb40 = serverGeneration;
    DAT_0013fb50 = 0;
    if (DAT_0013fb58 != (undefined8 *)0x0) {
      free(DAT_0013fb58);
    }
    puVar3 = (undefined8 *)0x0;
    __size = 0x10;
    iVar2 = 1;
    DAT_0013fb58 = (undefined8 *)0x0;
    iVar4 = 0;
  }
LAB_00110706:
  puVar3 = (undefined8 *)realloc(puVar3,__size);
  if (puVar3 == (undefined8 *)0x0) {
    uVar6 = 0;
  }
  else {
    puVar5 = puVar3 + (long)iVar4 * 2;
    iVar7 = iVar4;
    DAT_0013fb50 = iVar2;
    DAT_0013fb58 = puVar3;
LAB_00110793:
    uVar6 = 1;
    *(int *)(param_1 + 6) = iVar7;
    *puVar5 = param_1;
    *(int *)(puVar5 + 1) = param_2;
  }
  return uVar6;
}



void FontFileRegisterRenderer(undefined8 param_1)

{
  FontFilePriorityRegisterRenderer(param_1,0);
  return;
}



undefined8 * FontFileMatchRenderer(char *param_1)

{
  long *plVar1;
  undefined8 *puVar2;
  int iVar3;
  size_t sVar4;
  long *plVar5;
  
  sVar4 = strlen(param_1);
  if (0 < DAT_0013fb50) {
    plVar1 = DAT_0013fb58 + (ulong)(DAT_0013fb50 - 1) * 2 + 2;
    plVar5 = DAT_0013fb58;
    do {
      puVar2 = (undefined8 *)*plVar5;
      if ((*(int *)(puVar2 + 1) <= (int)sVar4) &&
         (iVar3 = strcasecmp(param_1 + ((long)(int)sVar4 - (long)*(int *)(puVar2 + 1)),
                             (char *)*puVar2), iVar3 == 0)) {
        return puVar2;
      }
      plVar5 = plVar5 + 2;
    } while (plVar1 != plVar5);
  }
  return (undefined8 *)0x0;
}



undefined8 FUN_001108b0(void)

{
  return 0x59;
}



undefined  [16]
FUN_001108c0(undefined8 param_1,long param_2,undefined8 param_3,undefined8 param_4,
            undefined8 param_5,undefined8 param_6,long *param_7)

{
  undefined8 uVar1;
  int iVar2;
  long lVar3;
  undefined8 extraout_RDX;
  undefined auVar4 [16];
  undefined auVar5 [16];
  
  lVar3 = *(long *)(param_2 + 0x18);
  iVar2 = *(int *)(param_7 + 1);
  if (iVar2 != *(int *)(lVar3 + 8)) {
    do {
      uVar1 = *(undefined8 *)(*param_7 + (long)iVar2 * 8);
      auVar4._0_8_ = FontFileListNextFontOrAlias
                               (param_1,*(undefined8 *)(*(long *)(lVar3 + 0x10) + (long)iVar2 * 8),
                                param_3,param_4,param_5,param_6);
      if ((int)auVar4._0_8_ != 0x53) {
        auVar4._8_8_ = uVar1;
        return auVar4;
      }
      iVar2 = *(int *)(param_7 + 1) + 1;
      *(int *)(param_7 + 1) = iVar2;
      lVar3 = *(long *)(param_2 + 0x18);
    } while (*(int *)(lVar3 + 8) != iVar2);
  }
  free(param_7);
  auVar5._8_8_ = extraout_RDX;
  auVar5._0_8_ = 0x53;
  return auVar5;
}



int FUN_00110980(long *param_1,long *param_2)

{
  char *pcVar1;
  char *pcVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  
  lVar3 = *(long *)(*param_2 + 0x18);
  pcVar2 = *(char **)(*(long *)(*param_1 + 0x18) + 0x48);
  if (pcVar2 == (char *)0x0) {
    pcVar2 = *(char **)(lVar3 + 0x48);
    pcVar1 = (char *)0x0;
    if (pcVar2 == (char *)0x0) {
      return 0;
    }
  }
  else {
    pcVar1 = strstr(pcVar2,"pri=");
    pcVar2 = *(char **)(lVar3 + 0x48);
    if (pcVar2 == (char *)0x0) {
      return -(uint)(pcVar1 != (char *)0x0);
    }
  }
  pcVar2 = strstr(pcVar2,"pri=");
  iVar5 = 0;
  if (pcVar2 != (char *)0x0 || pcVar1 != (char *)0x0) {
    if (pcVar1 == (char *)0x0) {
      iVar5 = 1;
    }
    else if (pcVar2 == (char *)0x0) {
      iVar5 = -1;
    }
    else {
      lVar3 = strtol(pcVar1 + 4,(char **)0x0,10);
      lVar4 = strtol(pcVar2 + 4,(char **)0x0,10);
      iVar5 = (int)lVar3 - (int)lVar4;
    }
  }
  return iVar5;
}



undefined  [16]
FUN_00110a50(undefined8 param_1,long param_2,undefined8 param_3,undefined8 param_4,
            undefined8 param_5,undefined8 param_6,long *param_7)

{
  undefined8 uVar1;
  int iVar2;
  long lVar3;
  undefined8 extraout_RDX;
  undefined auVar4 [16];
  undefined auVar5 [16];
  
  lVar3 = *(long *)(param_2 + 0x18);
  iVar2 = *(int *)(param_7 + 1);
  if (iVar2 != *(int *)(lVar3 + 8)) {
    do {
      uVar1 = *(undefined8 *)(*param_7 + (long)iVar2 * 8);
      auVar4._0_8_ = FontFileListNextFontWithInfo
                               (param_1,*(undefined8 *)(*(long *)(lVar3 + 0x10) + (long)iVar2 * 8),
                                param_3,param_4,param_5,param_6);
      if ((int)auVar4._0_8_ != 0x53) {
        auVar4._8_8_ = uVar1;
        return auVar4;
      }
      iVar2 = *(int *)(param_7 + 1) + 1;
      *(int *)(param_7 + 1) = iVar2;
      lVar3 = *(long *)(param_2 + 0x18);
    } while (*(int *)(lVar3 + 8) != iVar2);
  }
  free(param_7);
  auVar5._8_8_ = extraout_RDX;
  auVar5._0_8_ = 0x53;
  return auVar5;
}



void FontFileCloseFont(void)

{
  FontFileCloseFont();
  return;
}



bool FUN_00110b20(char *param_1)

{
  int iVar1;
  
  iVar1 = strncmp(param_1,"catalogue:",10);
  return iVar1 == 0;
}



void FUN_00110b50(long param_1)

{
  int *piVar1;
  void *__ptr;
  long lVar2;
  
  if (0 < *(int *)(param_1 + 8)) {
    lVar2 = 0;
    do {
      while( true ) {
        __ptr = *(void **)(*(long *)(param_1 + 0x10) + lVar2 * 8);
        piVar1 = (int *)((long)__ptr + 0x14);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 != 0) break;
        lVar2 = lVar2 + 1;
        FontFileFreeFPE(__ptr);
        free(*(void **)((long)__ptr + 8));
        free(__ptr);
        if (*(int *)(param_1 + 8) <= (int)lVar2) goto LAB_00110ba6;
      }
      lVar2 = lVar2 + 1;
    } while ((int)lVar2 < *(int *)(param_1 + 8));
  }
LAB_00110ba6:
  *(undefined4 *)(param_1 + 8) = 0;
  return;
}



undefined8 FUN_00110bc0(long param_1,int param_2)

{
  char *__filename;
  int iVar1;
  long *__ptr;
  int iVar2;
  DIR *__dirp;
  dirent *pdVar3;
  ssize_t sVar4;
  size_t sVar5;
  char *__s;
  int *__ptr_00;
  void *pvVar6;
  undefined8 uVar7;
  long lVar8;
  long in_FS_OFFSET;
  stat local_8d8;
  char local_848 [1024];
  char local_448 [1032];
  long local_40;
  
  __ptr = *(long **)(param_1 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  __filename = (char *)(*(long *)(param_1 + 8) + 10);
  iVar2 = __xstat(1,__filename,&local_8d8);
  uVar7 = 0x56;
  if (((-1 < iVar2) && ((local_8d8.st_mode & 0xf000) == 0x4000)) &&
     ((param_2 != 0 || (uVar7 = 0x55, *__ptr < local_8d8.st_mtim.tv_sec)))) {
    __dirp = opendir(__filename);
    if (__dirp == (DIR *)0x0) {
      free(__ptr);
      uVar7 = 0x56;
    }
    else {
      FUN_00110b50(*(undefined8 *)(param_1 + 0x18));
LAB_00110c98:
      pdVar3 = readdir(__dirp);
      if (pdVar3 != (dirent *)0x0) {
        while( true ) {
          __snprintf_chk(local_848,0x400,1,0x400,"%s/%s",__filename,pdVar3->d_name);
          sVar4 = readlink(local_848,local_448,0x3ff);
          iVar2 = (int)sVar4;
          if (iVar2 < 0) break;
          local_448[iVar2] = '\0';
          if (local_448[0] != '/') {
            sVar5 = strlen(__filename);
            lVar8 = (long)(int)sVar5;
            memmove(local_448 + lVar8 + 1,local_448,0x3ff - lVar8);
            __memcpy_chk(local_448,__filename,lVar8,0x400);
            local_448[lVar8] = '/';
            iVar2 = iVar2 + 1 + (int)sVar5;
          }
          __s = strchr(local_848,0x3a);
          if (__s != (char *)0x0) {
            lVar8 = (long)iVar2;
            sVar5 = strlen(__s);
            if (lVar8 + sVar5 < 0x400) {
              iVar2 = iVar2 + (int)sVar5;
              memcpy(local_448 + lVar8,__s,sVar5);
            }
          }
          __ptr_00 = (int *)malloc(0x20);
          if (__ptr_00 == (int *)0x0) break;
          iVar1 = *(int *)(param_1 + 0x10);
          *__ptr_00 = iVar2;
          __ptr_00[4] = iVar1;
          pvVar6 = malloc((long)(iVar2 + 1));
          *(void **)(__ptr_00 + 2) = pvVar6;
          if (pvVar6 != (void *)0x0) {
            pvVar6 = memcpy(pvVar6,local_448,(long)iVar2);
            __ptr_00[5] = 1;
            *(undefined *)((long)pvVar6 + (long)iVar2) = 0;
            iVar2 = FontFileInitFPE(__ptr_00);
            if (iVar2 == 0x55) {
              iVar1 = *(int *)(__ptr + 1);
              iVar2 = *(int *)((long)__ptr + 0xc);
              pvVar6 = (void *)__ptr[2];
              if (iVar2 <= iVar1) {
                if (iVar2 == 0) {
                  sVar5 = 0x80;
                  iVar2 = 0x10;
                }
                else {
                  iVar2 = iVar2 * 2;
                  sVar5 = (long)iVar2 << 3;
                }
                *(int *)((long)__ptr + 0xc) = iVar2;
                pvVar6 = realloc(pvVar6,sVar5);
                if (pvVar6 == (void *)0x0) {
                  FontFileFreeFPE(__ptr_00);
                  free(__ptr_00);
                  break;
                }
                __ptr[2] = (long)pvVar6;
                iVar1 = *(int *)(__ptr + 1);
              }
              *(int *)(__ptr + 1) = iVar1 + 1;
              *(int **)((long)pvVar6 + (long)iVar1 * 8) = __ptr_00;
              break;
            }
            free(*(void **)(__ptr_00 + 2));
          }
          free(__ptr_00);
          pdVar3 = readdir(__dirp);
          if (pdVar3 == (dirent *)0x0) goto LAB_00110e1a;
        }
        goto LAB_00110c98;
      }
LAB_00110e1a:
      closedir(__dirp);
      qsort((void *)__ptr[2],(long)*(int *)(__ptr + 1),8,FUN_00110980);
      uVar7 = 0x55;
      *__ptr = local_8d8.st_mtim.tv_sec;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
FUN_00110f10(undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
            undefined4 param_5,undefined8 *param_6,undefined4 param_7)

{
  long lVar1;
  int iVar2;
  long *__ptr;
  long *plVar3;
  undefined8 uVar4;
  long lVar5;
  
  lVar1 = *(long *)(param_2 + 0x18);
  FUN_00110bc0(param_2,0);
  __ptr = (long *)malloc((long)*(int *)(lVar1 + 8) * 8 + 0x10);
  if (__ptr == (long *)0x0) {
    uVar4 = 0x50;
  }
  else {
    plVar3 = __ptr + 2;
    *__ptr = (long)plVar3;
    if (0 < *(int *)(lVar1 + 8)) {
      lVar5 = 0;
      while( true ) {
        iVar2 = FontFileStartListFonts
                          (param_1,*(undefined8 *)(*(long *)(lVar1 + 0x10) + lVar5 * 8),param_3,
                           param_4,param_5,(long)plVar3 + lVar5 * 8,param_7);
        if (iVar2 != 0x55) {
          free(__ptr);
          return 0x50;
        }
        lVar5 = lVar5 + 1;
        if (*(int *)(lVar1 + 8) <= (int)lVar5) break;
        plVar3 = (long *)*__ptr;
      }
    }
    *(undefined4 *)(__ptr + 1) = 0;
    *param_6 = __ptr;
    uVar4 = 0x55;
  }
  return uVar4;
}



void FUN_00111010(void)

{
  FUN_00110f10();
  return;
}



void FUN_00111030(void)

{
  FUN_00110f10();
  return;
}



undefined8 FUN_00111050(long param_1)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  
  puVar1 = (undefined8 *)malloc(0x18);
  if (puVar1 != (undefined8 *)0x0) {
    *(undefined8 **)(param_1 + 0x18) = puVar1;
    *puVar1 = 0;
    puVar1[1] = 0;
    puVar1[2] = 0;
    uVar2 = FUN_00110bc0(param_1,1);
    return uVar2;
  }
  return 0x50;
}



undefined8
FUN_001110a0(undefined8 param_1,long param_2,undefined8 param_3,undefined4 param_4,
            undefined4 param_5,undefined8 param_6)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = *(long *)(param_2 + 0x18);
  FUN_00110bc0(param_2,0);
  if (0 < *(int *)(lVar2 + 8)) {
    lVar3 = 0;
    do {
      lVar1 = lVar3 * 8;
      lVar3 = lVar3 + 1;
      FontFileListFonts(param_1,*(undefined8 *)(*(long *)(lVar2 + 0x10) + lVar1),param_3,param_4,
                        param_5,param_6);
    } while ((int)lVar3 < *(int *)(lVar2 + 8));
  }
  return 0x55;
}



undefined8
FUN_00111120(undefined8 param_1,long param_2,undefined8 param_3,undefined8 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined8 param_8,
            undefined8 param_9,undefined8 param_10,undefined8 param_11)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  
  lVar1 = *(long *)(param_2 + 0x18);
  FUN_00110bc0(param_2,0);
  if (0 < *(int *)(lVar1 + 8)) {
    lVar3 = 0;
    do {
      uVar2 = FontFileOpenFont(param_1,*(undefined8 *)(*(long *)(lVar1 + 0x10) + lVar3 * 8),param_3,
                               param_4,param_5,param_6,param_7,param_8,param_9,param_10,param_11);
      if ((int)uVar2 == 0x55) {
        return uVar2;
      }
      if ((int)uVar2 == 0x52) {
        return uVar2;
      }
      lVar3 = lVar3 + 1;
    } while ((int)lVar3 < *(int *)(lVar1 + 8));
  }
  return 0x53;
}



undefined8 FUN_001111d0(long param_1)

{
  void *__ptr;
  int iVar1;
  undefined8 uVar2;
  
  iVar1 = strncmp(*(char **)(param_1 + 8),"catalogue:",10);
  if (iVar1 == 0) {
    __ptr = *(void **)(param_1 + 0x18);
    FUN_00110b50(__ptr);
    free(*(void **)((long)__ptr + 0x10));
    free(__ptr);
    return 0x55;
  }
  uVar2 = FontFileFreeFPE(param_1);
  return uVar2;
}



void CatalogueRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FUN_00110b20,FUN_00111050,FUN_001111d0,FUN_001108b0,FUN_00111120,FontFileCloseFont,
             FUN_001110a0,FUN_00111030,FUN_00110a50,0,0,0,FUN_00111010,FUN_001108c0,
             FontFileEmptyBitmapSource);
  return;
}



undefined8
FTPickMapping(long param_1,undefined8 param_2,undefined8 param_3,long param_4,undefined4 *param_5)

{
  char *pcVar1;
  int *piVar2;
  long *plVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  char *pcVar7;
  size_t sVar8;
  size_t sVar9;
  undefined8 uVar10;
  int *piVar11;
  long lVar12;
  long *plVar13;
  int *piVar14;
  byte bVar15;
  char *pcVar16;
  long in_FS_OFFSET;
  uint local_7c;
  char *local_68;
  char *local_60;
  char local_58 [24];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_1 == 0) || (pcVar7 = (char *)FontEncFromXLFD(), pcVar7 == (char *)0x0)) {
    iVar5 = strcasecmp("iso8859-1","microsoft-symbol");
    pcVar7 = "iso8859-1";
    if (iVar5 != 0) {
      cVar4 = 'i';
      pcVar16 = pcVar7;
      goto LAB_001114a0;
    }
LAB_00111540:
    iVar5 = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
    if (iVar5 != 0) {
LAB_0011155a:
      iVar5 = FT_Select_Charmap(param_4,0x41444243);
      if (iVar5 == 0) {
LAB_00111410:
        *param_5 = 0;
        uVar10 = *(undefined8 *)(param_4 + 0xa8);
        param_5[4] = 0;
        *(undefined8 *)(param_5 + 6) = 0;
        *(undefined8 *)(param_5 + 2) = uVar10;
        uVar10 = 0x55;
        goto LAB_0011143b;
      }
      local_7c = 1;
      bVar15 = 1;
LAB_0011157d:
      lVar12 = FontEncFind(pcVar7,param_3);
      if (lVar12 == 0) {
        pcVar16 = pcVar7;
        if (bVar15 != 0) {
          lVar12 = FontEncFind("microsoft-symbol",param_3);
        }
        goto joined_r0x001114db;
      }
      goto LAB_001114e1;
    }
    local_7c = 1;
LAB_00111347:
    sVar8 = strlen(local_68);
    sVar9 = strlen(local_60);
    if (0x12 < sVar9 + sVar8) goto LAB_00111410;
    __memcpy_chk(local_58,local_68,sVar8,0x14);
    __memcpy_chk(local_58 + sVar8,&DAT_001321d3,1,0x14 - sVar8);
    __strcpy_chk(local_58 + sVar8 + 1,local_60,0x13 - sVar8);
    ErrorF("%s %s\n",local_58,pcVar7);
    iVar5 = strcasecmp(local_58,"iso10646-1");
    if (iVar5 == 0) {
      bVar15 = (byte)local_7c & 1;
      goto LAB_0011157d;
    }
    iVar5 = strcasecmp(local_58,pcVar7);
    if (iVar5 == 0) goto LAB_00111410;
  }
  else {
    iVar5 = strcasecmp(pcVar7,"microsoft-symbol");
    if (iVar5 == 0) goto LAB_00111540;
    cVar4 = *pcVar7;
    pcVar16 = pcVar7;
    while (cVar4 != '-') {
LAB_001114a0:
      if (cVar4 == '\0') {
        local_7c = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
        pcVar7 = pcVar16;
        if (local_7c == 0) goto LAB_00111347;
        goto LAB_001114c2;
      }
      pcVar1 = pcVar7 + 1;
      pcVar7 = pcVar7 + 1;
      cVar4 = *pcVar1;
    }
    iVar5 = strcasecmp(pcVar7 + 1,"fontspecific");
    iVar6 = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
    pcVar7 = pcVar16;
    if (iVar6 == 0) {
      local_7c = (uint)(iVar5 == 0);
      goto LAB_00111347;
    }
    if (iVar5 == 0) goto LAB_0011155a;
LAB_001114c2:
    lVar12 = FontEncFind(pcVar16,param_3);
    local_7c = 0;
joined_r0x001114db:
    if (lVar12 == 0) {
      ErrorF("FreeType: couldn\'t find encoding \'%s\' for \'%s\'\n",pcVar16,param_3);
      uVar10 = 0x53;
      goto LAB_0011143b;
    }
LAB_001114e1:
    iVar5 = FT_Has_PS_Glyph_Names(param_4);
    piVar14 = *(int **)(lVar12 + 0x18);
    if (iVar5 == 0) {
      if (piVar14 != (int *)0x0) goto LAB_001115e9;
    }
    else {
      piVar11 = piVar14;
      if (piVar14 != (int *)0x0) {
        do {
          if (*piVar11 == 3) {
            *(int **)(param_5 + 6) = piVar11;
            uVar10 = 0x55;
            *param_5 = 1;
            param_5[4] = 0;
            goto LAB_0011143b;
          }
          piVar2 = piVar11 + 10;
          piVar11 = *(int **)piVar2;
        } while (*(int **)piVar2 != (int *)0x0);
LAB_001115e9:
        iVar5 = *(int *)(param_4 + 0x48);
        do {
          if (*piVar14 == 1) {
            if (0 < iVar5) {
              plVar13 = *(long **)(param_4 + 0x50);
              plVar3 = plVar13 + (ulong)(iVar5 - 1) + 1;
              do {
                lVar12 = *plVar13;
                if (*(int *)(lVar12 + 0xc) == 0x10003) goto LAB_0011163d;
                plVar13 = plVar13 + 1;
              } while (plVar3 != plVar13);
            }
          }
          else if ((*piVar14 == 2) && (0 < iVar5)) {
            plVar13 = *(long **)(param_4 + 0x50);
            plVar3 = plVar13 + (ulong)(iVar5 - 1) + 1;
            do {
              lVar12 = *plVar13;
              if ((piVar14[1] == (uint)*(ushort *)(lVar12 + 0xc)) &&
                 (piVar14[2] == (uint)*(ushort *)(lVar12 + 0xe))) goto LAB_0011163d;
              plVar13 = plVar13 + 1;
            } while (plVar3 != plVar13);
          }
          piVar14 = *(int **)(piVar14 + 10);
        } while (piVar14 != (int *)0x0);
      }
    }
  }
  uVar10 = 0x58;
LAB_0011143b:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar10;
LAB_0011163d:
  *(long *)(param_5 + 2) = lVar12;
  *param_5 = 0;
  if ((local_7c == 0) || (lVar12 = FT_Get_Sfnt_Table(param_4,2), lVar12 == 0)) {
    param_5[4] = 0;
  }
  else {
    param_5[4] = *(ushort *)(lVar12 + 0x56) - 0x20;
  }
  *(int **)(param_5 + 6) = piVar14;
  uVar10 = 0x55;
  goto LAB_0011143b;
}



undefined8 FTRemap(undefined8 param_1,int *param_2,uint param_3)

{
  int iVar1;
  long lVar2;
  undefined8 uVar3;
  
  if (*(long *)(param_2 + 6) == 0) {
    if (param_3 < 0x100) goto LAB_0011176a;
  }
  else {
    if (*param_2 == 0) {
      iVar1 = FontEncRecode(param_3);
      param_3 = iVar1 + param_2[4];
LAB_0011176a:
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
      uVar3 = FT_Get_Char_Index(param_1,param_3);
      return uVar3;
    }
    lVar2 = FontEncName();
    if (lVar2 != 0) {
      uVar3 = FT_Get_Name_Index(param_1,lVar2);
      return uVar3;
    }
  }
  return 0;
}



undefined2 FUN_001117a0(void)

{
  long lVar1;
  undefined2 uVar2;
  int iVar3;
  long in_FS_OFFSET;
  undefined local_12;
  undefined local_11;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = FT_Load_Sfnt_Table();
  uVar2 = 0;
  if (iVar3 == 0) {
    uVar2 = CONCAT11(local_12,local_11);
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00111810(ushort *param_1,ushort *param_2,ushort *param_3,ushort *param_4,byte *param_5,
                 int param_6)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  ushort uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  
  if (param_6 < 1) {
    uVar9 = 0xffffffff;
    uVar8 = 0x100;
    uVar5 = 0xffffffff;
    uVar7 = 0x100;
  }
  else {
    uVar9 = 0xffffffff;
    uVar8 = 0x100;
    uVar5 = 0xffffffff;
    pbVar1 = param_5 + (ulong)(param_6 - 1) * 4 + 4;
    uVar7 = 0x100;
    do {
      bVar2 = *param_5;
      bVar3 = param_5[2];
      if (bVar2 == bVar3) {
        if (param_5[1] < uVar7) {
          uVar7 = (uint)param_5[1];
        }
        if ((int)uVar5 < (int)(uint)param_5[3]) {
          uVar5 = (uint)param_5[3];
        }
      }
      else {
        uVar7 = 0;
        uVar5 = 0xff;
      }
      if (bVar2 < uVar8) {
        uVar8 = (uint)bVar2;
      }
      if ((int)uVar9 < (int)(uint)bVar3) {
        uVar9 = (uint)bVar3;
      }
      param_5 = param_5 + 4;
    } while (pbVar1 != param_5);
  }
  uVar4 = *param_3;
  uVar6 = (uint)uVar4;
  if (uVar4 < uVar7) {
    *param_1 = uVar4;
LAB_001118c0:
    if ((int)uVar6 <= (int)uVar5) goto LAB_00111919;
LAB_001118c5:
    *param_3 = uVar4;
  }
  else {
    uVar4 = *param_1;
    uVar6 = (uint)uVar4;
    if (uVar7 <= uVar6) goto LAB_001118c0;
    uVar4 = (ushort)uVar7;
    *param_1 = uVar4;
    if ((int)uVar5 < (int)uVar7) goto LAB_001118c5;
LAB_00111919:
    if ((int)uVar5 < (int)(uint)*param_3) {
      *param_3 = (ushort)uVar5;
      uVar4 = *param_4;
      goto joined_r0x0011192a;
    }
  }
  uVar4 = *param_4;
joined_r0x0011192a:
  if (uVar4 < uVar8) {
    *param_2 = uVar4;
    *param_1 = *param_3;
    uVar4 = *param_2;
    uVar7 = (uint)uVar4;
  }
  else {
    uVar4 = *param_2;
    uVar7 = (uint)uVar4;
    if (uVar7 < uVar8) {
      uVar4 = (ushort)uVar8;
      *param_2 = uVar4;
      uVar7 = uVar8;
    }
  }
  if ((int)uVar9 < (int)uVar7) {
    *param_4 = uVar4;
    *param_3 = *param_1;
  }
  else if ((int)uVar9 < (int)(uint)*param_4) {
    *param_4 = (ushort)uVar9;
    return;
  }
  return;
}



int FUN_00111960(int param_1,ushort *param_2,ushort *param_3,ushort *param_4,ushort *param_5,
                char *param_6)

{
  char cVar1;
  byte bVar2;
  char *pcVar3;
  ushort **ppuVar4;
  ulong uVar5;
  byte *pbVar6;
  byte *__ptr;
  ushort *puVar7;
  ulong uVar8;
  long lVar9;
  ushort uVar10;
  ushort uVar11;
  long in_FS_OFFSET;
  int local_70;
  char *local_48;
  long local_40;
  
  lVar9 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_6;
  ppuVar4 = __ctype_b_loc();
  __ptr = (byte *)0x0;
  do {
    local_70 = (int)lVar9;
    puVar7 = *ppuVar4;
    while ((cVar1 = *param_6, cVar1 == ',' ||
           ((*(byte *)((long)puVar7 + (long)cVar1 * 2 + 1) & 0x20) != 0))) {
      param_6 = param_6 + 1;
    }
    uVar8 = 0;
    if (cVar1 != '-') {
      uVar8 = strtol(param_6,&local_48,0);
      if ((local_48 != param_6) && (uVar8 < 0x10000)) {
        uVar11 = (ushort)uVar8;
        cVar1 = *local_48;
        puVar7 = *ppuVar4;
        bVar2 = *(byte *)((long)puVar7 + (long)cVar1 * 2 + 1);
        param_6 = local_48;
        while ((bVar2 & 0x20) != 0) {
          cVar1 = param_6[1];
          param_6 = param_6 + 1;
          bVar2 = *(byte *)((long)puVar7 + (long)cVar1 * 2 + 1);
        }
        uVar8 = uVar8 & 0xffffffff;
        if ((cVar1 == ',') || (cVar1 == '\0')) goto LAB_00111a59;
        if (cVar1 == '-') goto LAB_001119f4;
      }
LAB_00111b13:
      if (__ptr == (byte *)0x0) {
        local_70 = 0;
      }
      else {
        if (param_1 == 0) {
          if (local_70 != 0) {
            FUN_00111810(param_2,param_3,param_4,param_5,__ptr,local_70);
            local_70 = 0;
          }
        }
        else if (local_70 != 0) {
          *param_2 = (ushort)__ptr[1];
          *param_4 = (ushort)__ptr[3];
          *param_3 = (ushort)*__ptr;
          *param_5 = (ushort)__ptr[2];
          local_70 = param_1;
        }
        free(__ptr);
      }
      goto LAB_00111b6c;
    }
LAB_001119f4:
    bVar2 = *(byte *)((long)puVar7 + (long)param_6[1] * 2 + 1);
    pcVar3 = param_6;
    while (param_6 = pcVar3 + 1, (bVar2 & 0x20) != 0) {
      bVar2 = *(byte *)((long)puVar7 + (long)pcVar3[2] * 2 + 1);
      pcVar3 = param_6;
    }
    uVar5 = strtol(param_6,&local_48,0);
    uVar10 = (ushort)uVar8;
    if (local_48 == param_6) {
      if ((*param_6 != ',') && (*param_6 != '\0')) goto LAB_00111b13;
      uVar8 = 0xffff;
      uVar11 = uVar10;
    }
    else {
      if (0xffff < uVar5) goto LAB_00111b13;
      param_6 = local_48;
      if ((0 < param_1) || (uVar11 = (ushort)uVar5, (int)uVar8 <= (int)uVar5)) {
        uVar8 = uVar5 & 0xffffffff;
        uVar11 = uVar10;
      }
    }
LAB_00111a59:
    lVar9 = lVar9 + 1;
    pbVar6 = (byte *)realloc(__ptr,lVar9 * 4);
    if (pbVar6 == (byte *)0x0) {
      free(__ptr);
      local_70 = 0;
LAB_00111b6c:
      if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return local_70;
    }
    *(ushort *)(pbVar6 + (lVar9 * 4 - 4)) = uVar11 << 8 | uVar11 >> 8;
    *(ushort *)((long)(pbVar6 + (lVar9 * 4 - 4)) + 2) = (ushort)uVar8 << 8 | (ushort)uVar8 >> 8;
    __ptr = pbVar6;
  } while( true );
}



void FUN_00111c10(undefined8 param_1,undefined4 *param_2,long param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 *param_6)

{
  undefined4 uVar1;
  long lVar2;
  int iVar3;
  long in_FS_OFFSET;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  FontDefaultFormat(param_6,param_6 + 1,param_6 + 2,param_6 + 3);
  iVar3 = CheckFSFormat(param_4,param_5,param_6,param_6 + 1,param_6 + 3,param_6 + 2);
  if (iVar3 == 0x55) {
    if (param_2 != (undefined4 *)0x0) {
      *param_2 = 0;
      *(char *)(param_2 + 0x18) = (char)*param_6;
      *(char *)((long)param_2 + 0x61) = (char)param_6[1];
      *(char *)((long)param_2 + 0x62) = (char)param_6[2];
      uVar1 = param_6[3];
      *(code **)(param_2 + 0x1c) = FUN_00114c70;
      *(code **)(param_2 + 0x1a) = FUN_00115010;
      *(char *)((long)param_2 + 99) = (char)uVar1;
      param_2[0x19] = param_4;
      *(code **)(param_2 + 0x1e) = FUN_00113190;
      *(undefined8 *)(param_2 + 0x20) = 0;
      *(undefined8 *)(param_2 + 0x22) = param_1;
      *(undefined8 *)(param_2 + 0x24) = 0;
      *(undefined8 *)(param_2 + 0x26) = 0;
      *(undefined8 *)(param_2 + 0x28) = 0;
    }
    *(ulong *)(param_3 + 8) = (ulong)((uint)*(undefined8 *)(param_3 + 8) & 0xf8000000) | 0x2300000;
  }
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00111d60(undefined8 *param_1)

{
  byte bVar1;
  undefined8 *puVar2;
  byte *pbVar3;
  uint uVar4;
  undefined8 *puVar5;
  
  pbVar3 = (byte *)*param_1;
  bVar1 = *pbVar3;
  if (bVar1 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = 0;
    do {
      pbVar3 = pbVar3 + 1;
      uVar4 = (uVar4 << 5 | uVar4 >> 0x1b) + (uint)bVar1;
      bVar1 = *pbVar3;
    } while (bVar1 != 0);
    uVar4 = uVar4 & 0x1f;
  }
  puVar2 = (undefined8 *)(&DAT_0013fb60)[(int)uVar4];
  if (param_1 == (undefined8 *)(&DAT_0013fb60)[(int)uVar4]) {
    (&DAT_0013fb60)[(int)uVar4] = param_1[5];
  }
  else {
    do {
      puVar5 = puVar2;
      if (puVar5 == (undefined8 *)0x0) {
        ErrorF("FreeType: freeing unknown face\n");
        goto LAB_00111de0;
      }
      puVar2 = (undefined8 *)puVar5[5];
    } while (param_1 != (undefined8 *)puVar5[5]);
    puVar5[5] = param_1[5];
  }
LAB_00111de0:
  FT_Done_Face(param_1[1]);
  free((void *)*param_1);
  free(param_1);
  return;
}



void FUN_00111e20(undefined8 *param_1)

{
  long *__ptr;
  long *plVar1;
  int iVar2;
  long *plVar3;
  long lVar4;
  long lVar5;
  void *pvVar6;
  void *pvVar7;
  long lVar8;
  
  __ptr = (long *)*param_1;
  if (__ptr != (long *)0x0) {
    if (__ptr == *(long **)(*__ptr + 0x20)) {
      *(undefined8 *)(*__ptr + 0x20) = 0;
    }
    iVar2 = *(int *)(__ptr + 0x2a);
    *(int *)(__ptr + 0x2a) = iVar2 + -1;
    if (iVar2 + -1 < 1) {
      plVar1 = *(long **)(*__ptr + 0x18);
      if (__ptr == plVar1) {
        *(long *)(*__ptr + 0x18) = __ptr[0x2b];
      }
      else {
        do {
          plVar3 = plVar1;
          if (plVar3 == (long *)0x0) goto LAB_00111eb8;
          plVar1 = (long *)plVar3[0x2b];
        } while (__ptr != (long *)plVar3[0x2b]);
        plVar3[0x2b] = __ptr[0x2b];
      }
LAB_00111eb8:
      FT_Done_Size(__ptr[1]);
      if (*(long *)(*__ptr + 0x18) == 0) {
        FUN_00111d60();
      }
      if ((void *)__ptr[0xf] != (void *)0x0) {
        free((void *)__ptr[0xf]);
      }
      if ((void *)__ptr[0x13] != (void *)0x0) {
        free((void *)__ptr[0x13]);
      }
      pvVar7 = (void *)__ptr[0x17];
      if (pvVar7 != (void *)0x0) {
        iVar2 = *(int *)(__ptr + 0x16);
        for (lVar8 = 0; (-1 < iVar2 + 0xf && ((int)lVar8 < iVar2 + 0xf >> 4)); lVar8 = lVar8 + 1) {
          pvVar6 = *(void **)((long)pvVar7 + lVar8 * 8);
          if (pvVar6 != (void *)0x0) {
            lVar4 = 0;
            do {
              while (*(int *)(*(long *)(__ptr[0x18] + lVar8 * 8) + lVar4) == 3) {
                lVar5 = lVar4 + 4;
                free(*(void **)((long)pvVar6 + lVar4 * 6 + 0x10));
                pvVar6 = *(void **)(__ptr[0x17] + lVar8 * 8);
                lVar4 = lVar5;
                if (lVar5 == 0x40) goto LAB_00111fee;
              }
              lVar4 = lVar4 + 4;
            } while (lVar4 != 0x40);
LAB_00111fee:
            free(pvVar6);
            pvVar7 = (void *)__ptr[0x17];
            iVar2 = *(int *)(__ptr + 0x16);
          }
        }
        free(pvVar7);
      }
      pvVar7 = (void *)__ptr[0x18];
      if (pvVar7 != (void *)0x0) {
        iVar2 = *(int *)(__ptr + 0x16);
        for (lVar8 = 0; (-1 < iVar2 + 0xf && ((int)lVar8 < iVar2 + 0xf >> 4)); lVar8 = lVar8 + 1) {
          pvVar6 = *(void **)((long)pvVar7 + lVar8 * 8);
          if (pvVar6 != (void *)0x0) {
            free(pvVar6);
            pvVar7 = (void *)__ptr[0x18];
            iVar2 = *(int *)(__ptr + 0x16);
          }
        }
        free(pvVar7);
      }
      free(__ptr);
    }
  }
  if ((void *)param_1[0xb] != (void *)0x0) {
    free((void *)param_1[0xb]);
  }
  if ((void *)param_1[10] != (void *)0x0) {
    free((void *)param_1[10]);
  }
  free(param_1);
  return;
}



undefined8
FUN_00112050(uint param_1,uint param_2,uint *param_3,int param_4,long *param_5,long *param_6,
            undefined4 *param_7,int *param_8,int *param_9)

{
  long lVar1;
  uint uVar2;
  undefined8 uVar3;
  void *pvVar4;
  void *pvVar5;
  long lVar6;
  long *plVar7;
  int iVar8;
  int iVar9;
  
  uVar2 = *param_3;
  if ((-1 < param_4) && ((param_2 & 8) != 0)) {
    param_1 = (uVar2 >> 1) + param_1;
  }
  if (uVar2 < param_1) {
    *param_7 = 0;
    return 0x55;
  }
  pvVar4 = (void *)*param_6;
  if (pvVar4 == (void *)0x0) {
    if ((int)(uVar2 + 0xf) < 0) {
      iVar9 = ((int)(uVar2 + 0x1e) >> 4) + -1;
    }
    else {
      iVar9 = (int)(uVar2 + 0xf) >> 4;
    }
    pvVar4 = calloc((long)iVar9,8);
    *param_6 = (long)pvVar4;
    if (pvVar4 != (void *)0x0) goto LAB_00112090;
LAB_00112180:
    uVar3 = 0x50;
  }
  else {
LAB_00112090:
    if ((int)param_1 < 0) {
      iVar9 = ((int)(param_1 + 0xf) >> 4) + -1;
    }
    else {
      iVar9 = (int)param_1 >> 4;
    }
    lVar6 = (long)iVar9;
    lVar1 = lVar6 * 8;
    if (*(long *)((long)pvVar4 + lVar1) == 0) {
      pvVar5 = calloc(0x10,8);
      *(long *)((long)pvVar4 + lVar1) = (long)pvVar5;
      if (*(long *)(*param_6 + lVar6 * 8) == 0) goto LAB_00112180;
    }
    if (*param_5 == 0) {
      iVar8 = *param_3 + 0xf;
      if (iVar8 < 0) {
        iVar8 = ((int)(*param_3 + 0x1e) >> 4) + -1;
      }
      else {
        iVar8 = iVar8 >> 4;
      }
      pvVar4 = calloc((long)iVar8,8);
      *param_5 = (long)pvVar4;
      if (pvVar4 == (void *)0x0) goto LAB_00112180;
      plVar7 = (long *)(lVar1 + (long)pvVar4);
      lVar1 = *plVar7;
    }
    else {
      plVar7 = (long *)(lVar1 + *param_5);
      lVar1 = *plVar7;
    }
    if (lVar1 == 0) {
      pvVar4 = malloc(0x180);
      *plVar7 = (long)pvVar4;
      if (*(long *)(*param_5 + lVar6 * 8) == 0) goto LAB_00112180;
    }
    *param_7 = 1;
    *param_8 = iVar9;
    *param_9 = param_1 + iVar9 * -0x10;
    uVar3 = 0x55;
  }
  return uVar3;
}



undefined8 FUN_00112270(long *param_1)

{
  int iVar1;
  undefined8 uVar2;
  long *plVar3;
  
  if (*(long **)(*param_1 + 0x20) == param_1) {
    return 0x55;
  }
  iVar1 = FT_Activate_Size(param_1[1]);
  if (iVar1 == 0) {
    plVar3 = (long *)0x0;
    if (*(int *)(param_1 + 3) != 0) {
      plVar3 = param_1 + 4;
    }
    FT_Set_Transform(*(undefined8 *)(*param_1 + 8),plVar3,0);
    *(long **)(*param_1 + 0x20) = param_1;
    return 0x55;
  }
  *(undefined8 *)(*param_1 + 0x20) = 0;
  ErrorF("FreeType: couldn\'t activate instance: %d\n",iVar1);
  uVar2 = FTtoXReturnCode(iVar1);
  return uVar2;
}



undefined8
FUN_00112300(undefined8 *param_1,ulong *param_2,long param_3,char *param_4,long param_5,
            undefined8 *param_6,long *param_7,int param_8,ulong *param_9,long param_10,int param_11)

{
  double dVar1;
  int iVar2;
  int iVar3;
  long lVar4;
  undefined8 *puVar5;
  ulong uVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong uVar13;
  undefined2 uVar14;
  short sVar15;
  int iVar16;
  int iVar17;
  undefined4 uVar18;
  int iVar19;
  undefined8 uVar20;
  long *__ptr;
  char *pcVar21;
  void *__dest;
  ushort uVar22;
  long lVar23;
  short *psVar24;
  int iVar25;
  long lVar26;
  long *plVar27;
  long lVar28;
  ulong uVar29;
  ulong uVar30;
  ulong uVar31;
  char *pcVar32;
  short *psVar33;
  long lVar34;
  int iVar35;
  long in_FS_OFFSET;
  bool bVar36;
  double dVar37;
  double dVar38;
  uint local_d8;
  int local_cc;
  long local_b8;
  long local_a8;
  long local_a0;
  long local_98;
  undefined8 *local_90;
  char local_48;
  
  lVar4 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = *(int *)(param_5 + 0x50);
  iVar3 = *(int *)(param_5 + 0x54);
  lVar28 = *(long *)(param_5 + 0x50);
  dVar37 = hypot(*(double *)(param_5 + 0x38),*(double *)(param_5 + 0x40));
  dVar38 = *(double *)(param_5 + 0x40);
  dVar1 = *(double *)(param_5 + 0x28);
  bVar36 = ABS(dVar1 - dVar38) < ABS(dVar1) * 0.001;
  if (bVar36) {
    local_b8 = (long)(((dVar1 + dVar38) * 0.5 * 65536.0) / dVar37);
    local_a0 = local_b8;
  }
  else {
    local_b8 = (long)(int)((dVar1 * 65536.0) / dVar37);
    local_a0 = (long)(int)((dVar38 * 65536.0) / dVar37);
  }
  local_d8 = (uint)!bVar36;
  if (ABS(*(double *)(param_5 + 0x30)) < dVar37 * 0.001) {
    local_a8 = 0;
  }
  else {
    local_d8 = 1;
    local_a8 = (long)(int)((*(double *)(param_5 + 0x30) * 65536.0) / dVar37);
  }
  if (ABS(*(double *)(param_5 + 0x38)) < dVar37 * 0.001) {
    sVar15 = *(short *)((long)param_6 + 10);
    lVar26 = *(long *)(param_3 + 8);
    local_98 = 0;
    if (sVar15 == 0xe) goto LAB_00112b7d;
LAB_0011248c:
    if (param_11 == 0) {
LAB_001124b8:
      local_cc = 1;
      if ((*(byte *)(lVar26 + 0x10) & 4) == 0) {
        iVar16 = FT_Get_PS_Font_Info(lVar26);
        lVar26 = *(long *)(param_3 + 8);
        sVar15 = *(short *)((long)param_6 + 10);
        if (iVar16 == 0) {
          local_cc = 0;
          if (local_48 != '\0') {
            local_cc = 1;
          }
        }
        else {
          local_cc = 0;
        }
      }
      if (sVar15 == 0xe) {
        pcVar32 = (char *)*param_6;
        uVar29 = (ulong)(uint)(int)*(short *)(param_6 + 1);
        goto LAB_00112c68;
      }
    }
    else if (param_11 == 99) {
      local_cc = 2;
    }
    else {
      if (param_11 != 0x6d) goto LAB_001124b8;
      local_cc = 1;
    }
    uVar20 = FTPickMapping(0,0,param_4,lVar26,param_1 + 1);
    iVar16 = (int)uVar20;
  }
  else {
    sVar15 = *(short *)((long)param_6 + 10);
    local_d8 = 1;
    lVar26 = *(long *)(param_3 + 8);
    local_98 = (long)(int)((*(double *)(param_5 + 0x38) * 65536.0) / dVar37);
    if (sVar15 != 0xe) goto LAB_0011248c;
LAB_00112b7d:
    uVar29 = (ulong)*(short *)(param_6 + 1);
    pcVar32 = (char *)*param_6;
    if (pcVar32 <= pcVar32 + (uVar29 - 2)) {
      iVar16 = 0;
      pcVar21 = pcVar32;
      do {
        if ((*pcVar21 == '-') && (iVar16 = iVar16 + 1, iVar16 == 0xb)) {
          if (pcVar21[1] == 'c') {
            if (pcVar21[2] == '-') {
              if (param_11 == 0) goto LAB_00113090;
              goto LAB_00112bdf;
            }
          }
          else if ((pcVar21[1] == 'm') && (pcVar21[2] == '-')) {
            if (param_11 != 0) goto LAB_00112bdf;
            goto LAB_00112bfb;
          }
          break;
        }
        pcVar21 = pcVar21 + 1;
      } while (pcVar21 <= pcVar32 + (uVar29 - 2));
    }
    if (param_11 == 0) goto LAB_001124b8;
LAB_00112bdf:
    if (param_11 == 99) {
LAB_00113090:
      local_cc = 2;
    }
    else {
      if (param_11 != 0x6d) goto LAB_001124b8;
LAB_00112bfb:
      local_cc = 1;
    }
LAB_00112c68:
    uVar20 = FTPickMapping(pcVar32,uVar29,param_4);
    iVar16 = (int)uVar20;
  }
  if (iVar16 != 0x55) goto LAB_00112b30;
  local_90 = param_1 + 1;
  iVar16 = *(int *)(param_5 + 0x68);
  param_1[0xb] = 0;
  *(int *)(param_1 + 7) = iVar16;
  if (iVar16 == 0) {
LAB_0011254e:
    if (param_2 == (ulong *)0x0) {
      param_1[6] = 0;
LAB_00112d58:
      *(undefined4 *)(param_1 + 5) = 0;
    }
    else {
      if (param_1[4] == 0) {
        lVar26 = 0xff;
        iVar16 = 0;
        *(undefined4 *)((long)param_2 + 4) = 0;
        *(undefined2 *)param_2 = 0;
LAB_00112f40:
        uVar22 = (ushort)lVar26 & 0xff;
LAB_001125fc:
        *(ushort *)((long)param_2 + 2) = uVar22;
      }
      else {
        lVar26 = *(long *)(param_1[4] + 0x30);
        iVar16 = *(int *)(lVar26 + 0x28);
        if (*(int *)(lVar26 + 0x14) == 0) {
          iVar17 = *(int *)(lVar26 + 0x10) + -1;
          lVar26 = (long)iVar17;
          if (0xffff < iVar17) {
            lVar26 = 0xffff;
          }
          if (iVar16 == 0) {
            lVar23 = 0;
            uVar14 = 0;
            iVar16 = 0;
          }
          else {
            lVar23 = (long)iVar16;
            lVar34 = lVar23 + 0xff;
            if (-1 < lVar23) {
              lVar34 = lVar23;
            }
            uVar14 = (undefined2)((ulong)lVar34 >> 8);
            iVar16 = -(uint)(lVar23 != 0);
          }
          *(undefined2 *)((long)param_2 + 4) = uVar14;
          lVar34 = lVar26 + 0xff;
          if (-1 < lVar26) {
            lVar34 = lVar26;
          }
          uVar22 = 0;
          sVar15 = (short)((ulong)lVar34 >> 8);
          *(short *)((long)param_2 + 6) = sVar15;
          if (*(int *)((long)param_2 + 4) == 0) {
            uVar22 = (ushort)lVar23 & 0xff;
          }
          *(ushort *)param_2 = uVar22;
          uVar22 = 0xff;
          if (sVar15 == 0) goto LAB_00112f40;
          goto LAB_001125fc;
        }
        *(short *)((long)param_2 + 4) = (short)iVar16;
        iVar16 = *(int *)(*(long *)(param_1[4] + 0x30) + 0x10) + -1;
        if (0xff < iVar16) {
          iVar16 = 0xff;
        }
        *(short *)((long)param_2 + 6) = (short)iVar16;
        *(short *)param_2 = (short)*(undefined4 *)(*(long *)(param_1[4] + 0x30) + 0x2c);
        iVar16 = *(int *)(*(long *)(param_1[4] + 0x30) + 0x14) + -1;
        if (0xff < iVar16) {
          iVar16 = 0xff;
        }
        *(short *)((long)param_2 + 2) = (short)iVar16;
        iVar16 = -(uint)((*param_2 & 0xffff0000ffff) != 0);
      }
      if (param_10 != 0) {
        FUN_00111960(0,param_2,(undefined2 *)((long)param_2 + 4),(undefined2 *)((long)param_2 + 2),
                     (undefined2 *)((long)param_2 + 6),param_10);
      }
      if (*(int *)(param_1 + 7) != 0) {
        FUN_00111810(param_2,(undefined2 *)((long)param_2 + 4),(undefined2 *)((long)param_2 + 2),
                     (undefined2 *)((long)param_2 + 6),param_1[0xb]);
      }
      param_1[6] = param_2;
      if (iVar16 == -1) goto LAB_00112d58;
      uVar18 = FTRemap(*(undefined8 *)(param_3 + 8),local_90,0);
      *(undefined4 *)(param_1 + 5) = uVar18;
    }
    lVar26 = FT_Get_Sfnt_Table(*(undefined8 *)(param_3 + 8),5);
    uVar29 = *param_9;
    if ((((uVar29 & 0x20) == 0) &&
        (1 < (int)((*(ushort *)((long)param_2 + 6) + 1) - (uint)*(ushort *)((long)param_2 + 4)))) &&
       (lVar26 != 0)) {
      uVar29 = uVar29 | 0x10;
    }
    *param_9 = uVar29 & 0xffffffffffffffdf;
    if ((((*(int *)(param_3 + 0x10) == 0) && (local_cc != 2)) ||
        (*param_9 = uVar29 & 0xffffffffffffffcf, *(int *)(param_3 + 0x10) == 0)) &&
       ((*(byte *)(*(long *)(param_3 + 8) + 0x10) & 8) == 0)) {
      *param_9 = *param_9 & 0xffffffffffffffef;
    }
    if ((lVar26 != 0) && (*(long *)(lVar26 + 8) != 0)) {
      dVar38 = sin((((double)*(long *)(lVar26 + 8) * 0.0009765625) / 5760.0) * 1.5707963267948966);
      param_9[0xf] = (ulong)-dVar38;
    }
    for (puVar5 = *(undefined8 **)(param_3 + 0x18); puVar5 != (undefined8 *)0x0;
        puVar5 = (undefined8 *)puVar5[0x2b]) {
      iVar16 = strcmp(*(char **)*puVar5,param_4);
      if ((((((iVar16 == 0) && (true)) && (dVar37 == (double)puVar5[2])) &&
           ((puVar5[8] == lVar28 && (*(uint *)(puVar5 + 3) == local_d8)))) &&
          ((local_d8 == 0 ||
           (((local_b8 == puVar5[4] && (puVar5[6] == local_a8)) &&
            ((puVar5[7] == local_a0 && (local_98 == puVar5[5])))))))) &&
         (((((((*(int *)(puVar5 + 0xb) == local_cc && (param_8 == *(int *)(puVar5 + 9))) &&
              (*(int *)(puVar5 + 0x14) == *(int *)param_7)) &&
             (((*(int *)((long)puVar5 + 0xa4) == *(int *)((long)param_7 + 4) &&
               (*(int *)(puVar5 + 0x15) == *(int *)(param_7 + 1))) && (true)))) &&
            (((double)puVar5[0x1a] == (double)param_9[1] && (true)))) &&
           ((((double)puVar5[0x1b] == (double)param_9[2] &&
             (((true && ((double)puVar5[0x1c] == (double)param_9[3])) && (true)))) &&
            (((double)puVar5[0x1d] == (double)param_9[4] && (puVar5[0x1e] == param_9[5])))))) &&
          ((puVar5[0x1f] == param_9[6] &&
           (((puVar5[0x19] == *param_9 && (true)) &&
            (((double)puVar5[0x20] == (double)param_9[7] &&
             ((*(int *)((long)puVar5 + 0x10c) < 0 && (*(int *)((long)param_9 + 0x44) < 0))))))))))))
      {
        *(int *)(puVar5 + 0x2a) = *(int *)(puVar5 + 0x2a) + 1;
        uVar20 = 0x55;
        *param_1 = puVar5;
        goto LAB_00112b30;
      }
    }
    __ptr = (long *)malloc(0x160);
    if (__ptr != (long *)0x0) {
      *__ptr = param_3;
      *(undefined4 *)(__ptr + 0x2a) = 1;
      *(int *)(__ptr + 9) = param_8;
      __ptr[0xc] = 0;
      *(int *)(__ptr + 0xb) = local_cc;
      __ptr[0xd] = 0;
      *(uint *)(__ptr + 3) = local_d8;
      __ptr[0xe] = 0;
      __ptr[4] = local_b8;
      __ptr[0xf] = 0;
      __ptr[5] = local_98;
      *(undefined4 *)(__ptr + 0x10) = 0;
      __ptr[6] = local_a8;
      __ptr[0x11] = 0;
      __ptr[7] = local_a0;
      __ptr[0x13] = 0;
      *(int *)(__ptr + 8) = iVar2;
      __ptr[2] = (long)dVar37;
      *(int *)((long)__ptr + 0x44) = iVar3;
      lVar28 = param_7[1];
      __ptr[0x14] = *param_7;
      __ptr[0x15] = lVar28;
      __ptr[0x17] = 0;
      iVar16 = *(int *)((long)param_9 + 0x44);
      __ptr[0x18] = 0;
      lVar28 = *(long *)(param_3 + 8);
      iVar17 = *(int *)(lVar28 + 0x20);
      if (-1 < iVar16) {
        iVar17 = iVar17 * 2;
      }
      uVar30 = *param_9;
      uVar31 = param_9[1];
      uVar6 = param_9[2];
      uVar7 = param_9[3];
      *(int *)(__ptr + 0x16) = iVar17;
      uVar8 = param_9[4];
      uVar9 = param_9[5];
      uVar29 = param_9[0x10];
      __ptr[0x19] = uVar30;
      __ptr[0x1a] = uVar31;
      uVar10 = param_9[6];
      uVar11 = param_9[7];
      __ptr[0x1b] = uVar6;
      __ptr[0x1c] = uVar7;
      uVar12 = param_9[8];
      uVar13 = param_9[9];
      __ptr[0x1d] = uVar8;
      __ptr[0x1e] = uVar9;
      uVar30 = param_9[10];
      uVar31 = param_9[0xb];
      __ptr[0x1f] = uVar10;
      __ptr[0x20] = uVar11;
      uVar6 = param_9[0xc];
      uVar7 = param_9[0xd];
      __ptr[0x21] = uVar12;
      __ptr[0x22] = uVar13;
      uVar8 = param_9[0xe];
      uVar9 = param_9[0xf];
      __ptr[0x29] = uVar29;
      __ptr[0x23] = uVar30;
      __ptr[0x24] = uVar31;
      __ptr[0x25] = uVar6;
      __ptr[0x26] = uVar7;
      __ptr[0x27] = uVar8;
      __ptr[0x28] = uVar9;
      iVar16 = FT_New_Size(lVar28,__ptr + 1);
      if (iVar16 != 0) {
        ErrorF("FreeType: couldn\'t create size object: %d\n",iVar16);
        free(__ptr);
        uVar20 = FTtoXReturnCode(iVar16);
        goto LAB_00112b30;
      }
      FUN_00112270(__ptr);
      if (*(int *)(param_3 + 0x10) == 0) {
        lVar28 = (long)(int)(dVar37 * 64.0 + 0.5);
        iVar16 = FT_Set_Char_Size(*(undefined8 *)(*__ptr + 8),lVar28,lVar28,iVar2,iVar3);
LAB_00112a10:
        if (iVar16 == 0) {
          lVar28 = *(long *)(param_3 + 8);
          if ((*(byte *)(lVar28 + 0x10) & 8) != 0) {
            __ptr[10] = 0xffff;
            lVar34 = (long)(dVar37 * 64.0 + 0.5);
            lVar26 = iVar3 * lVar34 + 0x24;
            lVar23 = lVar26 >> 0x3f;
            uVar30 = ((lVar26 / 0x12 + lVar23 >> 2) - lVar23) + 0x20U & 0xffffffffffffffc0;
            uVar29 = (iVar2 * lVar34 + 0x24) / 0x48 + 0x20U & 0xffffffffffffffc0;
            if (((uVar29 == 0) || ((uVar31 = uVar29, uVar30 != 0 && (uVar31 = uVar30, uVar29 == 0)))
                ) && (uVar31 = uVar30, uVar30 != 0)) {
              uVar29 = uVar30;
            }
            if (*(int *)(lVar28 + 0x38) != 0) {
              plVar27 = (long *)(*(long *)(lVar28 + 0x40) + 0x10);
              uVar30 = 0;
              do {
                if (((*plVar27 + 0x20U & 0xffffffffffffffc0) == uVar29) &&
                   ((plVar27[1] + 0x20U & 0xffffffffffffffc0) == uVar31)) {
                  __ptr[10] = uVar30;
                  break;
                }
                plVar27 = plVar27 + 4;
                bVar36 = uVar30 != *(int *)(lVar28 + 0x38) - 1;
                uVar30 = uVar30 + 1;
              } while (bVar36);
            }
          }
          __ptr[0x2b] = *(long *)(*__ptr + 0x18);
          *(long **)(*__ptr + 0x18) = __ptr;
          uVar20 = 0x55;
          *param_1 = __ptr;
        }
        else {
          FT_Done_Size(__ptr[1]);
          free(__ptr);
          uVar20 = FTtoXReturnCode(iVar16);
        }
      }
      else {
        if (local_d8 == 0) {
          iVar16 = *(int *)(*(long *)(param_3 + 8) + 0x38);
          if (0 < iVar16) {
            psVar33 = *(short **)(*(long *)(param_3 + 8) + 0x40);
            lVar28 = -1;
            iVar35 = 100;
            iVar17 = 0;
            psVar24 = psVar33;
            do {
              iVar19 = (int)psVar24[1] - (int)(((double)iVar2 * dVar37) / 72.0 + 0.5);
              if (((iVar19 + 1U < 3) &&
                  (iVar25 = (int)*psVar24 - (int)(((double)iVar3 * dVar37) / 72.0 + 0.5),
                  iVar25 + 1U < 3)) && (iVar19 = iVar25 * iVar25 + iVar19 * iVar19, iVar19 < iVar35)
                 ) {
                lVar28 = (long)iVar17;
                iVar35 = iVar19;
              }
              iVar17 = iVar17 + 1;
              psVar24 = psVar24 + 0x10;
            } while (iVar16 != iVar17);
            if ((int)lVar28 != -1) {
              psVar33 = psVar33 + lVar28 * 0x10;
              iVar16 = FT_Set_Pixel_Sizes(*(undefined8 *)(*__ptr + 8),(int)psVar33[1],(int)*psVar33)
              ;
              goto LAB_00112a10;
            }
          }
        }
        free(__ptr);
        uVar20 = 0x53;
      }
      goto LAB_00112b30;
    }
  }
  else {
    __dest = malloc((long)*(int *)(param_5 + 0x68) << 2);
    param_1[0xb] = __dest;
    if (__dest != (void *)0x0) {
      memcpy(__dest,*(void **)(param_5 + 0x70),(long)*(int *)(param_5 + 0x68) << 2);
      goto LAB_0011254e;
    }
  }
  uVar20 = 0x50;
LAB_00112b30:
  if (lVar4 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar20;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00113120(uint param_1,undefined8 *param_2,undefined4 *param_3)

{
  ushort *puVar1;
  undefined4 uVar2;
  
  puVar1 = (ushort *)param_2[6];
  if (puVar1 != (ushort *)0x0) {
    if (((uint)*puVar1 <= (param_1 & 0xff)) && ((param_1 & 0xff) <= (uint)puVar1[1])) {
      if (((uint)puVar1[2] <= param_1 >> 8) && (param_1 >> 8 <= (uint)puVar1[3])) goto LAB_00113158;
    }
    *param_3 = *(undefined4 *)(param_2 + 5);
    return 0xffffffff;
  }
LAB_00113158:
  uVar2 = FTRemap(*(undefined8 *)(*(long *)*param_2 + 8),param_2 + 1,param_1);
  *param_3 = uVar2;
  return 0;
}



void FUN_00113190(long param_1)

{
  if (param_1 == 0) {
    return;
  }
  if (*(long *)(param_1 + 0x98) != 0) {
    FUN_00111e20();
  }
  if (*(int *)(param_1 + 0x4c) < 1) {
    DestroyFontRec(param_1);
    return;
  }
  free(*(void **)(param_1 + 0x58));
  free(*(void **)(param_1 + 0x50));
  DestroyFontRec(param_1);
  return;
}



undefined8 FUN_001131f0(long param_1,long param_2,undefined2 param_3,undefined8 *param_4)

{
  long lVar1;
  undefined8 uVar2;
  int iVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  
  if (param_2 == 0xffff) {
    return 0xffffffff;
  }
  if (*(long *)(param_1 + 0x40) != 0) {
    lVar6 = param_2 * 0x20 + *(long *)(param_1 + 0x40);
    lVar1 = *(long *)(lVar6 + 0x18);
    lVar5 = lVar1 + 0x3f;
    if (-1 < lVar1) {
      lVar5 = lVar1;
    }
    lVar1 = *(long *)(lVar6 + 0x10);
    lVar6 = lVar1 + 0x3f;
    if (-1 < lVar1) {
      lVar6 = lVar1;
    }
    iVar3 = FT_Set_Pixel_Sizes(param_1,lVar6 >> 6,lVar5 >> 6);
    if (iVar3 == 0) {
      uVar4 = FT_Load_Glyph(param_1,param_3,0x4000);
      if ((int)uVar4 == 0) {
        if (param_4 != (undefined8 *)0x0) {
          lVar1 = *(long *)(param_1 + 0x98);
          uVar2 = *(undefined8 *)(lVar1 + 0x38);
          *param_4 = *(undefined8 *)(lVar1 + 0x30);
          param_4[1] = uVar2;
          uVar2 = *(undefined8 *)(lVar1 + 0x48);
          param_4[2] = *(undefined8 *)(lVar1 + 0x40);
          param_4[3] = uVar2;
          uVar2 = *(undefined8 *)(lVar1 + 0x58);
          param_4[4] = *(undefined8 *)(lVar1 + 0x50);
          param_4[5] = uVar2;
          uVar2 = *(undefined8 *)(lVar1 + 0x68);
          param_4[6] = *(undefined8 *)(lVar1 + 0x60);
          param_4[7] = uVar2;
        }
        return uVar4;
      }
    }
  }
  return 0xffffffff;
}



undefined8
FUN_001132c0(double param_1,uint param_2,long param_3,long param_4,uint param_5,undefined8 param_6,
            ulong *param_7_00,ulong *param_7,undefined8 *param_8)

{
  undefined2 uVar1;
  short sVar2;
  int iVar3;
  ulong uVar4;
  ulong uVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  long in_FS_OFFSET;
  ulong local_88;
  ulong local_80;
  ulong local_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  ulong local_50;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(param_3 + 0x10) & 8) == 0) {
    uVar6 = 0xffffffff;
  }
  else {
    local_58 = 0;
    iVar3 = FT_Load_Sfnt_Table(param_3,0x686d7478,0,0,&local_58);
    if ((param_5 == 0) || (iVar3 != 0)) {
      lVar8 = 0;
      uVar1 = 0;
    }
    else if (param_2 < param_5) {
      uVar1 = 0;
      lVar8 = 0;
      if ((ulong)param_2 * 4 + 4 <= local_58) {
        uVar1 = FUN_001117a0(param_3,0x686d7478);
        sVar2 = FUN_001117a0(param_3,0x686d7478,(ulong)param_2 * 4 + 2);
        lVar8 = (long)sVar2;
      }
    }
    else {
      lVar8 = 0;
      uVar1 = 0;
      lVar7 = (ulong)(param_5 - 1) * 4;
      if (lVar7 + 4U <= local_58) {
        uVar1 = FUN_001117a0(param_3,0x686d7478);
        if (lVar7 + (ulong)((param_2 - param_5) * 2 + 4) + 2 <= local_58) {
          sVar2 = FUN_001117a0(param_3,0x686d7478);
          lVar8 = (long)sVar2;
        }
      }
    }
    uVar4 = FT_MulFix(uVar1,*(undefined8 *)(param_4 + 0x20));
    *param_7 = uVar4;
    param_7_00[2] = uVar4;
    uVar4 = FT_MulFix(lVar8,*(undefined8 *)(param_4 + 0x20));
    *param_7_00 = uVar4;
    uVar4 = FT_MulFix(*(undefined8 *)(param_3 + 0x70),*(undefined8 *)(param_4 + 0x28));
    param_7_00[1] = uVar4;
    uVar4 = FT_MulFix(*(undefined8 *)(param_3 + 0x80),*(undefined8 *)(param_4 + 0x28));
    param_7_00[3] = uVar4;
    if (param_1 <= 0.0) {
      if (param_1 < 0.0) {
        param_7_00[2] = (long)((double)(long)param_7_00[1] * param_1 + (double)(long)param_7_00[2]);
        *param_7_00 = (long)((double)(long)uVar4 * param_1 + (double)(long)*param_7_00);
      }
    }
    else {
      param_7_00[2] = (long)((double)(long)uVar4 * param_1 + (double)(long)param_7_00[2]);
      *param_7_00 = (long)((double)(long)param_7_00[1] * param_1 + (double)(long)*param_7_00);
    }
    *param_8 = 0xffffffffffffffff;
    local_88 = *param_7_00;
    local_78 = param_7_00[2];
    local_80 = param_7_00[1];
    local_60 = param_7_00[3];
    local_70 = local_80;
    local_68 = local_88;
    local_58 = local_78;
    local_50 = local_60;
    FT_Vector_Transform(&local_88,param_6);
    FT_Vector_Transform(&local_78,param_6);
    FT_Vector_Transform(&local_68,param_6);
    FT_Vector_Transform(&local_58,param_6);
    uVar4 = local_68;
    if ((long)local_58 <= (long)local_68) {
      uVar4 = local_58;
    }
    if ((long)local_78 < (long)uVar4) {
      uVar4 = local_78;
    }
    if ((long)local_88 < (long)uVar4) {
      uVar4 = local_88;
    }
    uVar5 = local_58;
    if ((long)local_58 < (long)local_68) {
      uVar5 = local_68;
    }
    *param_7_00 = uVar4;
    if ((long)uVar5 < (long)local_78) {
      uVar5 = local_78;
    }
    if ((long)uVar5 < (long)local_88) {
      uVar5 = local_88;
    }
    param_7_00[2] = uVar5;
    uVar4 = local_60;
    if ((long)local_50 <= (long)local_60) {
      uVar4 = local_50;
    }
    if ((long)local_70 < (long)uVar4) {
      uVar4 = local_70;
    }
    if ((long)local_80 < (long)uVar4) {
      uVar4 = local_80;
    }
    uVar5 = local_50;
    if ((long)local_50 < (long)local_60) {
      uVar5 = local_60;
    }
    param_7_00[1] = uVar4;
    if ((long)uVar5 < (long)local_70) {
      uVar5 = local_70;
    }
    if ((long)uVar5 < (long)local_80) {
      uVar5 = local_80;
    }
    param_7_00[3] = uVar5;
    uVar6 = 0;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00113680(uint param_1,uint param_2,short *param_3,long *param_4,uint param_5)

{
  ulong uVar1;
  short sVar2;
  sbyte sVar3;
  int iVar4;
  undefined8 *puVar5;
  byte *pbVar6;
  long lVar7;
  byte *pbVar8;
  byte *pbVar9;
  undefined8 uVar10;
  byte *pbVar11;
  byte bVar12;
  short sVar13;
  int iVar14;
  int iVar15;
  short sVar16;
  uint uVar17;
  uint uVar18;
  byte *pbVar19;
  uint uVar20;
  int iVar21;
  long lVar22;
  long lVar23;
  int iVar24;
  long lVar25;
  int iVar26;
  int iVar27;
  byte bVar28;
  short sVar29;
  long lVar30;
  short sVar31;
  long *plVar32;
  byte bVar33;
  int iVar34;
  long *plVar35;
  long in_FS_OFFSET;
  double dVar36;
  double dVar37;
  double dVar38;
  uint local_104;
  uint local_100;
  ulong local_f8;
  uint local_e0;
  long local_b8;
  long local_b0;
  long local_a8;
  ulong local_a0;
  long local_98;
  ulong local_90;
  long local_88 [9];
  long local_40;
  
  lVar22 = *param_4;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_00112270(param_4);
  if (param_3 == (short *)0x0) {
LAB_00114340:
    uVar10 = 0x50;
    goto LAB_00113ba5;
  }
  if (param_5 == 0) {
    if ((*(int *)(param_4 + 0xb) == 2) || ((param_2 & 4) != 0)) {
      puVar5 = (undefined8 *)param_4[0xf];
LAB_00113b75:
      plVar35 = (long *)0x0;
      *(undefined8 *)param_3 = *puVar5;
      local_e0 = 0;
      *(undefined4 *)(param_3 + 4) = *(undefined4 *)(puVar5 + 1);
      goto joined_r0x00113b94;
    }
    local_e0 = param_2 & 8;
    if ((param_2 & 8) != 0) {
      puVar5 = (undefined8 *)param_4[0x13];
      goto LAB_00113b75;
    }
    if ((*(byte *)(param_4 + 9) & 8) == 0) {
      plVar32 = local_88;
      iVar14 = FUN_001131f0(*(undefined8 *)(lVar22 + 8),param_4[10],param_1 & 0xffff);
      if (iVar14 != 0) goto LAB_00113851;
      plVar35 = (long *)0x0;
LAB_001145a6:
      lVar7 = plVar32[2];
      lVar25 = lVar7 + *plVar32;
      lVar30 = lVar7 + 0x3f;
      if (-1 < lVar7) {
        lVar30 = lVar7;
      }
      lVar23 = lVar25 + 0x3f;
      if (-1 < lVar25) {
        lVar23 = lVar25;
      }
      sVar16 = (short)(lVar23 >> 6);
      dVar37 = (double)*plVar32 + (double)lVar7 + (double)lVar7;
      dVar36 = (double)plVar32[4] * (double)param_4[0x1c] * 0.015625 + 0.5;
      if (ABS(dVar36) < 4503599627370496.0) {
        dVar36 = (double)((ulong)dVar36 & 0x8000000000000000 |
                         (ulong)((double)(long)dVar36 -
                                (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                        0x3ff0000000000000)));
      }
      lVar25 = plVar32[3];
      iVar14 = (int)dVar36;
      lVar7 = lVar25 + 0x3f;
      if (-1 < lVar25) {
        lVar7 = lVar25;
      }
      sVar2 = (short)(lVar7 >> 6);
      lVar25 = plVar32[1] - lVar25;
      if (lVar25 < 0) {
        lVar25 = lVar25 + 0x3f;
      }
      sVar31 = (short)(lVar25 >> 6);
      iVar24 = iVar14;
      if ((param_4[0x19] & 8U) != 0) {
        iVar24 = iVar14 + *(int *)(param_4 + 0x1e);
      }
      iVar24 = iVar24 + *(int *)((long)param_4 + 0xf4);
      if ((param_4[0x19] & 1U) != 0) {
        sVar16 = (short)*(undefined4 *)(param_4 + 0x1e) + sVar16;
      }
      sVar29 = (short)(lVar30 >> 6) + (short)*(undefined4 *)(param_4 + 0x1f) +
               (short)*(undefined4 *)(param_4 + 0x29);
      sVar16 = (short)*(undefined4 *)((long)param_4 + 0xfc) + sVar16 +
               (short)*(undefined4 *)((long)param_4 + 0x14c);
      dVar36 = ((double)(plVar32[4] * 1000) * (double)param_4[0x1c] *
                ((double)iVar24 / (double)iVar14) * 0.015625) / (double)param_4[0xc];
      if (ABS(dVar36) < 4503599627370496.0) {
        dVar36 = (double)((ulong)dVar36 & 0x8000000000000000 |
                         (ulong)((double)(long)dVar36 -
                                (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                        0x3ff0000000000000)));
      }
      sVar13 = (short)(int)dVar36;
LAB_00113aaf:
      param_3[5] = sVar13;
      *param_3 = sVar29;
      param_3[1] = sVar16;
      param_3[2] = (short)iVar24;
      param_3[3] = sVar2;
      param_3[4] = sVar31;
      if (*(int *)(param_4 + 0xb) != 0) {
        param_3[2] = *(short *)(param_4[0xf] + 4);
      }
      if ((*(byte *)((long)param_4 + 0xc9) & 8) != 0) {
        dVar36 = ((double)param_4[0x12] * 0.5 - dVar37 * 0.5 * 0.015625) + 0.5;
        if (ABS(dVar36) < 4503599627370496.0) {
          dVar36 = (double)((ulong)((double)(long)dVar36 -
                                   (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                           0x3ff0000000000000)) | (ulong)dVar36 & 0x8000000000000000
                           );
        }
        local_e0 = (uint)dVar36;
        *param_3 = sVar29 + (short)local_e0;
        param_3[1] = sVar16 + (short)local_e0;
      }
      goto joined_r0x00113b94;
    }
LAB_00113851:
    if (((*(byte *)(param_4 + 0x19) & 0x10) != 0) &&
       (iVar14 = FUN_001132c0(param_4[0x28],param_1,*(undefined8 *)(lVar22 + 8),param_4[1],
                              *(undefined4 *)(lVar22 + 0x14),param_4 + 4,&local_a8,&local_b8,
                              &local_b0), iVar14 == 0)) {
      plVar32 = (long *)0x0;
LAB_001138d5:
      dVar37 = (double)(local_a8 + local_98);
      sVar31 = (short)((long)(0x1f - local_a0) >> 6);
      uVar1 = param_4[0x19];
      sVar16 = (short)(local_98 + 0x20 >> 6);
      dVar36 = (double)param_4[0xd];
      sVar2 = (short)((long)(local_90 + 0x20) >> 6);
      if ((false) || (dVar36 != 0.0)) {
        dVar38 = (double)local_b8 * (double)param_4[0x1c] * dVar36 * 0.015625 + 0.5;
        if (ABS(dVar38) < 4503599627370496.0) {
          dVar38 = (double)((ulong)((double)(long)dVar38 -
                                   (double)(-(ulong)(dVar38 < (double)(long)dVar38) &
                                           0x3ff0000000000000)) | (ulong)dVar38 & 0x8000000000000000
                           );
        }
        iVar24 = (int)dVar38;
        dVar38 = (double)iVar24;
        if ((uVar1 & 8) != 0) {
          iVar24 = iVar24 + *(int *)(param_4 + 0x1e);
        }
        iVar24 = iVar24 + *(int *)((long)param_4 + 0xf4);
        dVar36 = (double)(local_b8 * 1000) * (double)param_4[0x1c] * ((double)iVar24 / dVar38) *
                 dVar36 * 0.015625;
        if (ABS(dVar36) < 4503599627370496.0) {
          dVar36 = (double)((ulong)dVar36 & 0x8000000000000000 |
                           (ulong)((double)(long)dVar36 -
                                  (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                          0x3ff0000000000000)));
        }
        sVar13 = (short)(int)dVar36;
      }
      else {
        dVar36 = (double)local_b0 * (double)param_4[0x1d] * (double)param_4[0xe] * 0.015625 + 0.5;
        if (ABS(dVar36) < 4503599627370496.0) {
          dVar36 = (double)((ulong)((double)(long)dVar36 -
                                   (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                           0x3ff0000000000000)) | (ulong)dVar36 & 0x8000000000000000
                           );
        }
        iVar24 = (int)dVar36;
        if (iVar24 < 1) {
          iVar24 = (int)*(short *)(param_4[0xf] + 4);
        }
        dVar36 = (double)iVar24;
        if ((uVar1 & 8) != 0) {
          iVar24 = iVar24 + *(int *)(param_4 + 0x1e);
        }
        iVar24 = iVar24 + *(int *)((long)param_4 + 0xf4);
        dVar36 = (double)(local_b0 * 1000) * (double)param_4[0x1d] * ((double)iVar24 / dVar36) *
                 (double)param_4[0xe] * 0.015625;
        if (ABS(dVar36) < 4503599627370496.0) {
          dVar36 = (double)((ulong)dVar36 & 0x8000000000000000 |
                           (ulong)((double)(long)dVar36 -
                                  (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                          0x3ff0000000000000)));
        }
        sVar13 = (short)(int)dVar36;
        if (sVar13 == 0) {
          sVar13 = *(short *)(param_4[0xf] + 10);
        }
      }
      if ((uVar1 & 1) != 0) {
        sVar16 = (short)*(undefined4 *)(param_4 + 0x1e) + sVar16;
      }
      sVar16 = sVar16 + (short)*(undefined4 *)((long)param_4 + 0xfc);
      sVar29 = (short)(local_a8 + 0x20 >> 6) + (short)*(undefined4 *)(param_4 + 0x1f);
      plVar35 = plVar32;
      goto LAB_00113aaf;
    }
    iVar14 = FT_Load_Glyph(*(undefined8 *)(*param_4 + 8),param_1,*(undefined4 *)(param_4 + 9));
    if (iVar14 == 0) {
      lVar25 = *(long *)(*(long *)(lVar22 + 8) + 0x98);
      plVar32 = (long *)(lVar25 + 0x30);
      plVar35 = plVar32;
      if (*(int *)(lVar25 + 0x90) == 0x62697473) goto LAB_001145a6;
      iVar14 = FT_Outline_Get_BBox(lVar25 + 200,&local_a8);
      if (iVar14 == 0) {
        local_b8 = *(long *)(lVar25 + 0x50);
        local_b0 = *(long *)(lVar25 + 0x68);
        goto LAB_001138d5;
      }
    }
    goto LAB_00114330;
  }
  local_e0 = 0;
  plVar35 = (long *)0x0;
joined_r0x00113b94:
  if ((param_2 & 2) == 0) {
    local_100 = 1;
    if (*(int *)(param_4 + 0xb) != 2) {
      local_100 = param_2 & 8;
      if ((param_2 & 8) == 0) {
        if ((((*(byte *)(param_4 + 9) & 8) != 0) ||
            (iVar14 = FUN_001131f0(*(undefined8 *)(lVar22 + 8),param_4[10],param_1 & 0xffff,0),
            iVar14 != 0)) && ((*(byte *)(param_4 + 0x19) & 0x10) != 0)) {
          local_100 = (uint)(*(ulong *)(*(long *)(lVar22 + 8) + 0x10) >> 3) & 1;
        }
      }
      else {
        local_100 = 1;
      }
    }
    local_104 = param_2 & 4;
    if ((param_2 & 4) == 0) {
      if (plVar35 == (long *)0x0) {
        iVar14 = FT_Load_Glyph(*(undefined8 *)(*param_4 + 8),param_1,*(undefined4 *)(param_4 + 9));
        lVar25 = *(long *)(*(long *)(lVar22 + 8) + 0x98);
        plVar35 = (long *)(lVar25 + 0x30);
        if (iVar14 != 0) goto LAB_00114330;
      }
      else {
        lVar25 = *(long *)(*(long *)(lVar22 + 8) + 0x98);
      }
      if (*(int *)(lVar25 + 0x90) == 0x62697473) {
        if (((*(byte *)((long)param_4 + 0xc9) & 8) != 0) && ((param_5 & 1) != 0)) {
          dVar36 = ((double)plVar35[2] + (double)plVar35[2] + (double)*plVar35) * 0.5 * 0.015625;
          goto LAB_001137aa;
        }
        goto LAB_00113c58;
      }
      iVar14 = FT_Outline_Get_BBox(lVar25 + 200,&local_a8);
      if (iVar14 == 0) {
        local_a0 = local_a0 & 0xffffffffffffffc0;
        local_90 = local_90 + 0x3f & 0xffffffffffffffc0;
        if ((int)((long)(local_90 - local_a0) >> 6) == 0) goto LAB_00113c21;
        iVar14 = FT_Render_Glyph(*(undefined8 *)(*(long *)(lVar22 + 8) + 0x98),2);
        if (iVar14 != 0) goto LAB_00114330;
        if (((*(byte *)((long)param_4 + 0xc9) & 8) == 0) || ((param_5 & 1) == 0)) {
          local_104 = 1;
          goto LAB_00113c58;
        }
        if (local_100 == 0) {
          iVar14 = FT_Outline_Get_BBox(*(long *)(*(long *)(lVar22 + 8) + 0x98) + 200,&local_a8);
          if (iVar14 != 0) goto LAB_00114330;
LAB_001147e2:
          local_104 = 1;
        }
        else {
          iVar14 = FUN_001132c0(param_4[0x28],param_1,*(long *)(lVar22 + 8),param_4[1],
                                *(undefined4 *)(lVar22 + 0x14),param_4 + 4,&local_a8,&local_b8,
                                &local_b0);
          local_104 = 0xffffffff;
          if (iVar14 == 0) goto LAB_001147e2;
        }
        dVar36 = (double)(local_a8 + local_98) * 0.5 * 0.015625;
        goto LAB_001137aa;
      }
LAB_00114330:
      uVar10 = FTtoXReturnCode(iVar14);
      goto LAB_00113ba5;
    }
LAB_00113c21:
    if (((*(byte *)((long)param_4 + 0xc9) & 8) == 0) || ((param_5 & 1) == 0)) {
      local_104 = 0xffffffff;
    }
    else {
      local_104 = 0xffffffff;
      dVar36 = 0.0;
LAB_001137aa:
      dVar36 = ((double)param_4[0x12] * 0.5 - dVar36) + 0.5;
      if (ABS(dVar36) < 4503599627370496.0) {
        dVar36 = (double)((ulong)dVar36 & 0x8000000000000000 |
                         (ulong)((double)(long)dVar36 -
                                (double)(-(ulong)(dVar36 < (double)(long)dVar36) &
                                        0x3ff0000000000000)));
      }
      local_e0 = (uint)dVar36;
    }
LAB_00113c58:
    sVar16 = param_3[3];
    uVar17 = (uint)*param_3;
    iVar14 = (int)param_3[4] + (int)sVar16;
    iVar26 = (int)param_3[1] - uVar17;
    iVar24 = 1;
    if (0 < iVar14) {
      iVar24 = iVar14;
    }
    iVar21 = 1;
    if (0 < iVar26) {
      iVar21 = iVar26;
    }
    uVar20 = iVar21 + -1 + *(int *)(param_4 + 0x15) * 8 >> 3 & -*(int *)(param_4 + 0x15);
    iVar21 = uVar20 * iVar24;
    pbVar6 = (byte *)calloc(1,(long)iVar21);
    if (pbVar6 == (byte *)0x0) goto LAB_00114340;
    *(byte **)(param_3 + 8) = pbVar6;
    if (((local_104 == 0xffffffff) || (iVar26 < 1)) || (iVar14 < 1)) goto LAB_00113ba0;
    pbVar19 = (byte *)(ulong)uVar17;
    local_f8 = param_4[0x19];
    lVar25 = *(long *)(*(long *)(lVar22 + 8) + 0x98);
    iVar34 = (int)sVar16 - *(int *)(lVar25 + 0xc4);
    iVar26 = *(int *)(lVar25 + 0xc0) - uVar17;
    if ((local_f8 & 0x800) != 0) {
      iVar26 = local_e0 + iVar26;
    }
    if ((local_104 & local_100) == 0) {
      uVar17 = (uint)local_f8 & 1;
    }
    else {
      iVar14 = FT_Outline_Get_BBox(lVar25 + 200,&local_a8);
      if (iVar14 != 0) goto LAB_00114330;
      local_f8 = param_4[0x19];
      iVar14 = (int)param_3[1];
      iVar27 = (int)*param_3;
      uVar17 = (uint)local_f8 & 1;
      if ((local_f8 & 1) != 0) {
        iVar14 = iVar14 - *(int *)(param_4 + 0x1e);
      }
      if ((local_f8 & 0x800) != 0) {
        iVar27 = iVar27 - local_e0;
        iVar14 = iVar14 - local_e0;
      }
      iVar4 = (int)((long)(local_90 + 0x20) >> 6);
      iVar15 = (int)((long)(0x1f - local_a0) >> 6);
      if ((param_2 & 8) == 0) {
        if (param_4[0x1f] != 0) goto LAB_001142b8;
LAB_001144ff:
        iVar14 = iVar14 - (int)(local_98 + 0x20 >> 6);
        pbVar19 = (byte *)(ulong)(uint)(param_3[3] - iVar4);
        iVar15 = param_3[4] - iVar15;
        iVar27 = (int)(local_a8 + 0x20 >> 6) - iVar27;
        if ((iVar27 < 0) && (0 < iVar14)) {
          iVar26 = iVar26 + 1;
        }
        else if (iVar14 < 0) {
          iVar26 = iVar26 + -1 + (uint)(iVar27 < 1);
        }
      }
      else {
        if ((*(int *)((long)param_4 + 0x114) == 0) && (*(int *)(param_4 + 0x23) == 0))
        goto LAB_001144ff;
LAB_001142b8:
        pbVar19 = (byte *)(ulong)(uint)(param_3[3] - iVar4);
        iVar15 = param_3[4] - iVar15;
      }
      lVar25 = *(long *)(*(long *)(lVar22 + 8) + 0x98);
      if (((int)pbVar19 < 0) && (0 < iVar15)) {
        iVar34 = iVar34 + 1;
      }
      else if (iVar15 < 0) {
        iVar34 = iVar34 + -1 + (uint)((int)pbVar19 < 1);
      }
    }
    bVar33 = (byte)iVar26;
    if (iVar26 < 0) {
      iVar26 = (iVar26 + 7 >> 3) + -1;
      bVar33 = -bVar33 & 7;
      bVar12 = 8 - bVar33;
    }
    else {
      iVar26 = iVar26 >> 3;
      bVar12 = bVar33 & 7;
      bVar33 = 8 - (bVar33 & 7);
    }
    iVar14 = 0;
    if (-1 < iVar34) {
      iVar14 = iVar34;
    }
    if (iVar14 < iVar24) {
      iVar27 = iVar14 * uVar20;
      pbVar19 = (byte *)(ulong)(uint)(iVar14 - iVar34);
      do {
        while( true ) {
          uVar18 = (uint)pbVar19;
          if (*(uint *)(lVar25 + 0x98) <= uVar18) goto LAB_00113efa;
          iVar14 = 0;
          if (-1 < iVar26) {
            iVar14 = iVar26;
          }
          if (iVar14 < (int)uVar20) break;
LAB_00113dc0:
          pbVar19 = (byte *)(ulong)(uVar18 + 1);
          iVar27 = iVar27 + uVar20;
          if (iVar24 - iVar34 == uVar18 + 1) goto LAB_00113efa;
        }
        iVar4 = iVar14 - iVar26;
        lVar22 = (long)(int)(uVar18 * *(int *)(lVar25 + 0xa0)) + *(long *)(lVar25 + 0xa8);
        if ((0 < iVar4) && (iVar4 + -1 < *(int *)(lVar25 + 0xa0))) {
          pbVar6[(long)iVar14 + (long)iVar27] =
               pbVar6[(long)iVar14 + (long)iVar27] |
               *(char *)(lVar22 + (iVar4 + -1)) << (bVar33 & 0x1f);
        }
        if ((iVar4 < 0) || (*(int *)(lVar25 + 0xa0) <= iVar4)) goto LAB_00113dc0;
        pbVar6[(long)iVar14 + (long)iVar27] =
             pbVar6[(long)iVar14 + (long)iVar27] |
             (byte)((int)(uint)*(byte *)(lVar22 + iVar4) >> (bVar12 & 0x1f));
        if ((int)uVar20 <= iVar14 + 1) goto LAB_00113dc0;
        lVar7 = (long)(iVar4 + 1);
        pbVar19 = pbVar6 + (long)(iVar14 + 1) + (long)iVar27;
        do {
          bVar28 = *(char *)(lVar22 + -1 + lVar7) << (bVar33 & 0x1f) | *pbVar19;
          *pbVar19 = bVar28;
          if (*(int *)(lVar25 + 0xa0) <= (int)lVar7) break;
          pbVar9 = (byte *)(lVar22 + lVar7);
          lVar7 = lVar7 + 1;
          *pbVar19 = bVar28 | (byte)((int)(uint)*pbVar9 >> (bVar12 & 0x1f));
          pbVar19 = pbVar19 + 1;
        } while ((long)iVar4 + 2 + (ulong)((uVar20 - 2) - iVar14) != lVar7);
        pbVar19 = (byte *)(ulong)(uVar18 + 1);
        iVar27 = iVar27 + uVar20;
      } while (iVar24 - iVar34 != uVar18 + 1);
    }
LAB_00113efa:
    if ((uVar17 != 0) && (iVar14 = *(int *)(param_4 + 0x1e), 0 < iVar14)) {
      iVar26 = 0;
      lVar22 = (ulong)(uVar20 - 1) + 1;
      do {
        if ((local_f8 & 2) == 0) {
          iVar34 = 0;
          pbVar9 = pbVar6;
          do {
            pbVar11 = pbVar9 + lVar22;
            lVar25 = 0;
            pbVar8 = pbVar9;
            if (0 < (int)uVar20) {
              do {
                bVar33 = *pbVar8;
                pbVar9 = pbVar8 + 1;
                uVar17 = (uint)(byte)(bVar33 >> 1 | bVar33) | (uint)lVar25;
                pbVar19 = (byte *)(ulong)uVar17;
                *pbVar8 = (byte)uVar17;
                pbVar8 = pbVar9;
                lVar25 = (ulong)bVar33 << 7;
              } while (pbVar9 != pbVar11);
            }
            iVar34 = iVar34 + 1;
          } while (iVar24 != iVar34);
        }
        else {
          iVar34 = 0;
          pbVar19 = pbVar6;
          do {
            if (0 < (int)uVar20) {
              bVar33 = *pbVar19;
              pbVar9 = pbVar19 + lVar22;
              lVar25 = 0;
              while( true ) {
                pbVar11 = pbVar19;
                lVar7 = (ulong)bVar33 << 7;
                pbVar19 = pbVar11 + 1;
                bVar28 = ~bVar33;
                bVar33 = bVar33 | bVar33 >> 1;
                bVar12 = ~(bVar33 * '\x02' & bVar28) & (bVar33 | (byte)lVar25);
                *pbVar11 = bVar12;
                if (pbVar19 == pbVar9) break;
                bVar33 = *pbVar19;
                lVar25 = lVar7;
                if (((bVar28 & 1) != 0) && ((char)bVar33 < '\0')) {
                  *pbVar11 = bVar12 & 0xfe;
                }
              }
            }
            iVar34 = iVar34 + 1;
          } while (iVar24 != iVar34);
        }
        iVar26 = iVar26 + 1;
      } while (iVar26 != iVar14);
    }
    if ((local_104 == 0) && (param_4[0x29] != 0)) {
      iVar26 = (int)*(short *)(param_4[0xf] + 6);
      iVar34 = iVar26 + *(short *)(param_4[0xf] + 8);
      iVar14 = *(int *)(param_4 + 0x29) - *(int *)((long)param_4 + 0x14c);
      if (0.0 < (double)param_4[0x1a] || (double)param_4[0x1a] == 0.0) {
        iVar14 = *(int *)((long)param_4 + 0x14c) - *(int *)(param_4 + 0x29);
      }
      uVar17 = uVar20 - 1;
      iVar26 = ((iVar34 + -1) - (iVar26 - param_3[3])) * iVar14;
      lVar22 = (long)(int)uVar20;
      iVar27 = uVar20 - ((int)pbVar6 + (int)(lVar22 + -1));
      uVar18 = 0;
      if ((int)uVar17 < 1) {
        uVar18 = uVar17;
      }
      iVar4 = 0;
      do {
        uVar1 = (long)iVar26 / (long)iVar34;
        pbVar19 = (byte *)((long)iVar26 % (long)iVar34 & 0xffffffff);
        iVar15 = (int)uVar1;
        if (iVar15 < 0) {
          if (((-iVar15 & 7U) != 0) && (0 < (int)uVar20)) {
            sVar3 = (sbyte)(-iVar15 & 7U);
            pbVar19 = pbVar6;
            while( true ) {
              bVar33 = *pbVar19 << sVar3;
              *pbVar19 = bVar33;
              if (pbVar6 + uVar17 == pbVar19) break;
              *pbVar19 = (byte)((int)(uint)pbVar19[1] >> (8U - sVar3 & 0x1f)) | bVar33;
              pbVar19 = pbVar19 + 1;
            }
          }
          if (0xe < 7U - iVar15) {
            pbVar9 = pbVar6;
            if (1 < (int)uVar20) {
              do {
                pbVar19 = (byte *)(ulong)pbVar9[1];
                pbVar11 = pbVar9 + 1;
                *pbVar9 = pbVar9[1];
                pbVar9 = pbVar11;
              } while (pbVar6 + (ulong)(uVar20 - 2) + 1 != pbVar11);
              pbVar9 = pbVar6 + (int)uVar17;
            }
            *pbVar9 = 0;
          }
        }
        else {
          bVar33 = (byte)uVar1 & 7;
          if (((uVar1 & 7) != 0) && (0 < (int)uVar20)) {
            bVar12 = pbVar6[(int)uVar17];
            pbVar19 = pbVar6 + (int)uVar17;
            while( true ) {
              bVar28 = (byte)((int)(uint)bVar12 >> bVar33);
              *pbVar19 = bVar28;
              if (pbVar6 + ((lVar22 + -1) - (ulong)uVar17) == pbVar19) break;
              bVar12 = pbVar19[-1];
              if (uVar20 != iVar27 + -1 + (int)pbVar19) {
                *pbVar19 = bVar12 << (8 - bVar33 & 0x1f) | bVar28;
              }
              pbVar19 = pbVar19 + -1;
            }
          }
          if (0xe < iVar15 + 7U) {
            if (0 < (int)uVar17) {
              pbVar9 = pbVar6 + (int)uVar17;
              do {
                pbVar19 = (byte *)(ulong)pbVar9[-1];
                pbVar11 = pbVar9 + -1;
                *pbVar9 = pbVar9[-1];
                pbVar9 = pbVar11;
              } while (pbVar11 != pbVar6 + ((lVar22 + -2) - (ulong)(uVar20 - 2)));
            }
            pbVar6[(int)uVar18] = 0;
          }
        }
        iVar4 = iVar4 + 1;
        iVar26 = iVar26 - iVar14;
        pbVar6 = pbVar6 + lVar22;
        iVar27 = iVar27 - uVar20;
      } while (iVar24 != iVar4);
    }
    iVar14 = *(int *)(param_4 + 0x14);
    if (iVar14 == 0) {
      BitOrderInvert(*(undefined8 *)(param_3 + 8),iVar21,pbVar19);
      iVar14 = *(int *)(param_4 + 0x14);
    }
    if (*(int *)((long)param_4 + 0xa4) != iVar14) {
      if (*(int *)((long)param_4 + 0xac) == 2) {
        TwoByteSwap(*(undefined8 *)(param_3 + 8),iVar21);
      }
      else if (*(int *)((long)param_4 + 0xac) == 4) {
        FourByteSwap(*(undefined8 *)(param_3 + 8),iVar21);
        uVar10 = 0x55;
        goto LAB_00113ba5;
      }
    }
  }
LAB_00113ba0:
  uVar10 = 0x55;
LAB_00113ba5:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar10;
}



undefined8 FUN_00114a10(ulong param_1,ulong param_2,long *param_3,long param_4)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  long in_FS_OFFSET;
  int local_3c;
  int local_38;
  int local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(param_4 + 0x58) == 2) {
    *param_3 = *(long *)(param_4 + 0x78);
    uVar2 = 0x55;
  }
  else if ((param_2 & 8) == 0) {
    uVar2 = FUN_00112050(param_1,param_2,param_4 + 0xb0,*(undefined4 *)(param_4 + 0x10c),
                         param_4 + 0xb8,param_4 + 0xc0,&local_3c,&local_38,&local_34);
    if ((int)uVar2 == 0x55) {
      if (local_3c != 0) {
        iVar1 = *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) +
                        (long)local_34 * 4);
        if (iVar1 != 1) {
          lVar3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) + (long)local_34 * 0x18;
          if (iVar1 < 2) {
            uVar2 = FUN_00113680(param_1 & 0xffffffff,(uint)param_2 | 2,lVar3,param_4,0);
            if ((int)uVar2 != 0x55) goto LAB_00114a88;
            *(undefined4 *)
             (*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4) = 2;
            lVar3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) +
                    (long)local_34 * 0x18;
          }
          *param_3 = lVar3;
          goto LAB_00114a88;
        }
      }
      *param_3 = 0;
    }
  }
  else {
    *param_3 = *(long *)(param_4 + 0x98);
    uVar2 = 0x55;
  }
LAB_00114a88:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00114b90(undefined8 param_1,uint param_2,long *param_3,undefined8 *param_4)

{
  int iVar1;
  undefined8 uVar2;
  long in_FS_OFFSET;
  int local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_24 = 0;
  iVar1 = FUN_00113120(param_1,param_4,&local_24);
  if (((iVar1 != 0) || (local_24 == 0)) || (local_24 == *(int *)(param_4 + 5))) {
    *param_3 = 0;
    uVar2 = 0x55;
    goto LAB_00114c2d;
  }
  iVar1 = FUN_00114a10(local_24,param_2,param_3,*param_4);
  if ((iVar1 == 0x55) && (*param_3 != 0)) {
LAB_00114c57:
    uVar2 = 0x55;
  }
  else {
    uVar2 = *param_4;
    iVar1 = local_24;
    if (*(int *)(param_4 + 5) != local_24) {
      iVar1 = FUN_00114a10(*(int *)(param_4 + 5),param_2,param_3,uVar2);
      if ((iVar1 == 0x55) && (*param_3 != 0)) goto LAB_00114c57;
      uVar2 = *param_4;
      iVar1 = *(int *)(param_4 + 5);
    }
    uVar2 = FUN_00114a10(iVar1,param_2 | 4,param_3,uVar2);
  }
LAB_00114c2d:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



undefined8
FUN_00114c70(long param_1,long param_2,ushort *param_3,uint param_4,long *param_5,
            undefined8 *param_6)

{
  long *plVar1;
  long lVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  long lVar6;
  ushort uVar7;
  uint uVar8;
  long in_FS_OFFSET;
  long local_58;
  undefined *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  plVar1 = *(long **)(param_1 + 0x98);
  lVar2 = *plVar1;
  local_58 = param_2;
  if (param_2 != 0) {
    uVar7 = 0;
    iVar5 = 0;
    lVar6 = param_2 + -1;
    do {
      if (param_4 < 2) {
        uVar7 = (ushort)*(byte *)param_3;
        param_3 = (ushort *)((long)param_3 + 1);
      }
      else if (param_4 - 2 < 2) {
        uVar7 = *param_3;
        param_3 = param_3 + 1;
        uVar7 = uVar7 << 8 | uVar7 >> 8;
        uVar8 = (uint)uVar7;
        if ((*(byte *)(lVar2 + 0xc9) & 4) == 0) {
          iVar5 = 0;
          if ((int)uVar8 <= *(int *)(lVar2 + 0x10c)) {
            iVar5 = (uint)(*(int *)(lVar2 + 0x108) <= (int)uVar8) << 3;
          }
        }
        else {
          iVar5 = 8;
          if (*(int *)(lVar2 + 0x10c) < (int)uVar8) {
            iVar5 = (uint)(*(int *)(lVar2 + 0x108) <= (int)uVar8) << 3;
          }
        }
      }
      iVar3 = FUN_00114b90(uVar7,iVar5,&local_48,plVar1);
      puVar4 = &DAT_0013fc70;
      if ((iVar3 == 0x55) && (puVar4 = local_48, local_48 == (undefined *)0x0)) {
        puVar4 = &DAT_0013fc70;
      }
      lVar6 = lVar6 + -1;
      *param_6 = puVar4;
      param_6 = param_6 + 1;
    } while (lVar6 != -1);
    local_58 = (param_2 << 3) >> 3;
  }
  *param_5 = local_58;
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0x55;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FUN_00114e10(ulong param_1,undefined8 param_2,long *param_3,long param_4)

{
  long lVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  long in_FS_OFFSET;
  int local_3c;
  int local_38;
  int local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = FUN_00112050(param_1,param_2,param_4 + 0xb0,*(undefined4 *)(param_4 + 0x10c),
                       param_4 + 0xb8,param_4 + 0xc0,&local_3c,&local_38,&local_34);
  iVar4 = iVar3;
  if (iVar3 != 0x55) goto LAB_00114f10;
  if (local_3c != 0) {
    iVar2 = *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4)
    ;
    if (iVar2 != 1) {
      lVar1 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) + (long)local_34 * 0x18;
      if (iVar2 == 3) {
        *param_3 = lVar1;
        goto LAB_00114f10;
      }
      iVar4 = FUN_00113680(param_1 & 0xffffffff,(uint)param_2 | 1,lVar1,param_4,1 < iVar2);
      if (iVar4 != 0x55) {
        if (*(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4)
            < 2) goto LAB_00114f10;
        ErrorF("Warning: FreeTypeRasteriseGlyph() returns an error,\n");
        ErrorF("\tso the backend tries to set a white space.\n");
        iVar4 = FUN_00113680(param_1 & 0xffffffff,(uint)param_2 | 5,
                             *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) +
                             (long)local_34 * 0x18,param_4,
                             1 < *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8)
                                         + (long)local_34 * 4));
        if (iVar4 != 0x55) goto LAB_00114f10;
      }
      *(undefined4 *)
       (*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4) = 3;
      *param_3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) + (long)local_34 * 0x18;
      iVar4 = iVar3;
      goto LAB_00114f10;
    }
  }
  *param_3 = 0;
LAB_00114f10:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar4;
}



undefined8
FUN_00115010(long param_1,long param_2,ushort *param_3,uint param_4,long *param_5,long *param_6)

{
  ushort uVar1;
  long *plVar2;
  int iVar3;
  int iVar4;
  long *plVar5;
  void *pvVar6;
  long lVar7;
  long *plVar8;
  long lVar9;
  uint uVar10;
  long lVar11;
  long in_FS_OFFSET;
  int local_4c;
  long *local_48;
  long local_40;
  
  plVar2 = *(long **)(param_1 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar9 = *plVar2;
  if (param_2 == 0) {
    lVar9 = 0;
  }
  else {
    param_2 = param_2 + -1;
    lVar11 = 0;
    uVar10 = 0;
    plVar8 = param_6;
    do {
      if (param_4 < 2) {
        uVar10 = (uint)*(byte *)param_3;
        param_3 = (ushort *)((long)param_3 + 1);
      }
      else if (param_4 - 2 < 2) {
        uVar1 = *param_3;
        param_3 = param_3 + 1;
        uVar10 = (uint)(ushort)(uVar1 << 8 | uVar1 >> 8);
        if ((*(byte *)(lVar9 + 0xc9) & 4) == 0) {
          lVar11 = 0;
          if ((int)uVar10 <= *(int *)(lVar9 + 0x10c)) {
            lVar11 = (ulong)(*(int *)(lVar9 + 0x108) <= (int)uVar10) << 3;
          }
        }
        else {
          lVar11 = 8;
          if (*(int *)(lVar9 + 0x10c) < (int)uVar10) {
            lVar11 = (ulong)(*(int *)(lVar9 + 0x108) <= (int)uVar10) << 3;
          }
        }
      }
      local_4c = 0;
      iVar3 = FUN_00113120(uVar10,plVar2,&local_4c);
      if (((iVar3 == 0) && (local_4c != 0)) && (local_4c != *(int *)(plVar2 + 5))) {
        iVar3 = FUN_00114e10(local_4c,lVar11,&local_48,*plVar2);
        if ((iVar3 != 0x55) || (plVar5 = local_48, local_48 == (long *)0x0)) {
          lVar7 = *plVar2;
          iVar3 = local_4c;
          if (*(int *)(plVar2 + 5) != local_4c) {
            iVar3 = FUN_00114e10(*(int *)(plVar2 + 5),lVar11,&local_48,lVar7);
            if ((iVar3 == 0x55) && (plVar5 = local_48, local_48 != (long *)0x0)) goto LAB_00115139;
            lVar7 = *plVar2;
            iVar3 = *(int *)(plVar2 + 5);
          }
          iVar3 = FUN_00114e10(iVar3,(uint)lVar11 | 4,&local_48,lVar7);
          if ((iVar3 != 0x55) || (plVar5 = local_48, local_48 == (long *)0x0)) {
            if (plVar2[10] == 0) goto LAB_001151c4;
            goto LAB_00115135;
          }
        }
LAB_00115139:
        *plVar8 = (long)plVar5;
        plVar8 = plVar8 + 1;
      }
      else {
        local_48 = (long *)0x0;
        if (plVar2[10] != 0) {
LAB_00115135:
          plVar5 = plVar2 + 8;
          goto LAB_00115139;
        }
LAB_001151c4:
        lVar7 = plVar2[6];
        iVar3 = (int)*(short *)(lVar7 + 0x12) - (int)*(short *)(lVar7 + 0x10);
        if (iVar3 < 1) {
          iVar3 = 1;
        }
        iVar4 = (int)*(short *)(lVar7 + 0x16) + (int)*(short *)(lVar7 + 0x18);
        if (iVar4 < 1) {
          iVar4 = 1;
        }
        pvVar6 = calloc(1,(long)((iVar3 + -1 + *(int *)(*plVar2 + 0xa8) * 8 >> 3 &
                                 -*(int *)(*plVar2 + 0xa8)) * iVar4));
        if (pvVar6 != (void *)0x0) {
          plVar2[10] = (long)pvVar6;
          goto LAB_00115135;
        }
      }
      param_2 = param_2 + -1;
    } while (param_2 != -1);
    lVar9 = (long)plVar8 - (long)param_6 >> 3;
  }
  *param_5 = lVar9;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return 0x55;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int FUN_001152e0(char *param_1,long param_2,long param_3,ushort *param_4,undefined8 param_5,
                undefined8 *param_6)

{
  char *pcVar1;
  double dVar2;
  double dVar3;
  char cVar4;
  byte bVar5;
  ushort uVar6;
  long *plVar7;
  ushort **ppuVar8;
  ushort uVar9;
  ushort uVar10;
  short sVar11;
  ushort uVar12;
  ushort uVar13;
  ushort uVar14;
  ushort uVar15;
  ushort uVar16;
  short sVar17;
  int iVar18;
  int iVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  int iVar23;
  uint uVar24;
  long *plVar25;
  char *pcVar26;
  size_t sVar27;
  long lVar28;
  uint *puVar29;
  ushort *puVar30;
  ushort *puVar31;
  ushort *puVar32;
  undefined8 *__ptr;
  char *pcVar33;
  ushort *puVar34;
  ushort **ppuVar35;
  ushort **ppuVar36;
  void *pvVar37;
  void *pvVar38;
  undefined8 uVar39;
  long lVar40;
  short sVar41;
  long lVar42;
  int iVar43;
  byte *pbVar44;
  uint *puVar45;
  ushort **ppuVar46;
  ushort uVar47;
  uint uVar48;
  uint uVar49;
  char *pcVar50;
  byte bVar51;
  ushort uVar52;
  uint *puVar53;
  long lVar54;
  ushort uVar55;
  ulong uVar56;
  short sVar57;
  int iVar58;
  uint uVar59;
  ushort uVar60;
  ushort uVar61;
  int iVar62;
  ushort uVar63;
  ushort uVar64;
  long lVar65;
  long lVar66;
  undefined8 *puVar67;
  long in_FS_OFFSET;
  bool bVar68;
  bool bVar69;
  bool bVar70;
  double dVar71;
  double dVar72;
  double dVar73;
  double dVar74;
  double dVar75;
  double dVar76;
  double dVar77;
  double dVar78;
  double dVar79;
  double dVar80;
  double dVar81;
  double dVar82;
  double dVar83;
  double dVar84;
  double dVar85;
  double dVar86;
  uint *local_640;
  int local_618;
  int local_600;
  char *local_5f8;
  long local_5f0;
  double local_5e8;
  int local_5d8;
  int local_5d0;
  double local_5c8;
  ushort local_5c0;
  ushort local_5b8;
  uint local_5a8;
  undefined2 local_5a0;
  short local_58c;
  long local_578;
  long local_570;
  int local_568;
  int local_564;
  long local_558;
  ushort local_530;
  ushort local_52e;
  ushort local_52c;
  ushort local_52a;
  undefined local_528 [8];
  long local_520;
  ushort *local_518 [8];
  ulong local_4d8;
  double local_4d0;
  double local_4c8;
  double local_4c0;
  double local_4b8;
  undefined8 local_4b0;
  undefined8 local_4a8;
  undefined8 local_4a0;
  undefined8 local_498;
  undefined8 local_490;
  undefined8 local_488;
  double local_480;
  double local_478;
  double local_470;
  double local_468;
  undefined8 local_460;
  undefined8 local_458;
  char local_448;
  char cStack_447;
  char acStack_446 [1030];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  plVar25 = (long *)calloc(1,0x60);
  if (plVar25 == (long *)0x0) {
    iVar21 = 0x50;
    goto LAB_00115676;
  }
  iVar21 = *(int *)(param_2 + 0x48);
  iVar18 = SPropRecValList_new(local_528);
  if (iVar18 == 0) {
    pcVar26 = strrchr(param_1,0x2f);
    pcVar33 = pcVar26 + 1;
    if (pcVar26 == (char *)0x0) {
      pcVar33 = param_1;
    }
    pcVar26 = strrchr(pcVar33,0x3a);
    if (pcVar26 != (char *)0x0) {
      sVar27 = strlen(param_1);
      iVar18 = (int)pcVar33 - (int)param_1;
      local_640 = (uint *)malloc((long)((((int)sVar27 + (int)param_1) - (int)pcVar26) + iVar18));
      if (local_640 == (uint *)0x0) goto LAB_001156d8;
      if (0 < iVar18) {
        memcpy(local_640,param_1,(long)iVar18);
      }
      strcpy((char *)((long)local_640 + (long)iVar18),pcVar26 + 1);
      iVar18 = SPropRecValList_add_by_font_cap(local_528,pcVar33);
      if (iVar18 == 0) goto LAB_001153ff;
      iVar21 = 0x56;
      free(local_640);
      goto LAB_001156bc;
    }
    local_640 = (uint *)strdup(param_1);
    if (local_640 == (uint *)0x0) goto LAB_001156d8;
LAB_001153ff:
    local_4d8 = 0;
    local_4c8 = 1.0;
    local_4c0 = 1.0;
    local_4b8 = 1.0;
    local_488 = 0xfffffffe00000000;
    local_4d0 = 0.0;
    local_4b0 = 1;
    local_4a8 = 0;
    local_4a0 = 0;
    local_498 = 0xffffffffffffffff;
    local_490 = 0;
    local_480 = 1.0;
    local_478 = 1.0;
    local_470 = 0.0;
    local_468 = 1.0;
    local_460 = 0;
    local_458 = 0;
    iVar18 = SPropRecValList_search_record(local_528,&local_520,"FaceNumber");
    if (iVar18 == 0) {
LAB_00115513:
      puVar29 = (uint *)strdup((char *)local_640);
      if (puVar29 == (uint *)0x0) {
LAB_001156c8:
        free(local_640);
        goto LAB_001156d8;
      }
      local_5f0._0_4_ = 0;
    }
    else {
      pcVar33 = *(char **)(local_520 + 8);
      lVar28 = strtol(pcVar33,(char **)local_518,10);
      if (((*pcVar33 == '\0') || (local_5f0._0_4_ = (int)lVar28, *(char *)local_518[0] != '\0')) ||
         ((int)local_5f0 < 1)) goto LAB_00115513;
      sVar27 = strlen(pcVar33);
      puVar29 = local_640;
      do {
        puVar45 = puVar29;
        uVar24 = *puVar45 + 0xfefefeff & ~*puVar45;
        uVar48 = uVar24 & 0x80808080;
        puVar29 = puVar45 + 1;
      } while (uVar48 == 0);
      bVar68 = (uVar24 & 0x8080) == 0;
      if (bVar68) {
        uVar48 = uVar48 >> 0x10;
      }
      puVar53 = puVar45 + 1;
      if (bVar68) {
        puVar53 = (uint *)((long)puVar45 + 6);
      }
      lVar28 = (-3 - (ulong)CARRY1((byte)uVar48,(byte)uVar48)) - (long)local_640;
      puVar29 = (uint *)malloc((long)puVar53 + sVar27 + lVar28 + 3);
      if (puVar29 == (uint *)0x0) goto LAB_001156c8;
      *(byte *)puVar29 = 0;
      pcVar26 = strrchr((char *)local_640,0x2f);
      if (pcVar26 == (char *)0x0) {
        *(byte *)puVar29 = 0x3a;
        pcVar33 = stpcpy((char *)((long)puVar29 + 1),pcVar33);
        *pcVar33 = ':';
        memcpy(pcVar33 + 1,local_640,(long)puVar53 + lVar28 + 1);
      }
      else {
        memcpy(puVar29,local_640,(long)puVar53 + lVar28 + 1);
        pcVar50 = strrchr((char *)puVar29,0x2f);
        pcVar50[1] = '\0';
        puVar45 = puVar29;
        do {
          puVar53 = puVar45;
          uVar24 = *puVar53 + 0xfefefeff & ~*puVar53;
          uVar48 = uVar24 & 0x80808080;
          puVar45 = puVar53 + 1;
        } while (uVar48 == 0);
        bVar68 = (uVar24 & 0x8080) == 0;
        if (bVar68) {
          uVar48 = uVar48 >> 0x10;
        }
        if (bVar68) {
          puVar45 = (uint *)((long)puVar53 + 6);
        }
        pbVar44 = (byte *)((long)puVar45 +
                          ((-3 - (ulong)CARRY1((byte)uVar48,(byte)uVar48)) - (long)puVar29));
        *(byte *)((long)puVar29 + (long)pbVar44) = 0x3a;
        pcVar33 = stpcpy((char *)((long)puVar29 + (long)(pbVar44 + 1)),pcVar33);
        *pcVar33 = ':';
        strcpy(pcVar33 + 1,pcVar26 + 1);
      }
    }
    iVar18 = SPropRecValList_search_record(local_528,&local_520,"AutoItalic");
    if (iVar18 != 0) {
      local_4d0 = *(double *)(local_520 + 8);
    }
    iVar19 = SPropRecValList_search_record(local_528,&local_520,"Hinting");
    iVar18 = -1;
    if (iVar19 != 0) {
      iVar18 = *(int *)(local_520 + 8);
    }
    iVar19 = SPropRecValList_search_record(local_528,&local_520,"ScaleWidth");
    if ((iVar19 == 0) || (local_4c8 = *(double *)(local_520 + 8), 0.0 < local_4c8)) {
      iVar19 = SPropRecValList_search_record(local_528,&local_520,"ScaleBBoxWidth");
      dVar71 = local_4c0;
      dVar72 = local_4b8;
      if (iVar19 != 0) {
        puVar34 = *(ushort **)(local_520 + 8);
        if (*(char *)puVar34 == '\0') {
LAB_001155f0:
          dVar71 = 1.0;
          dVar72 = 1.0;
          goto LAB_00115613;
        }
        dVar71 = strtod((char *)puVar34,(char **)local_518);
        cVar4 = *(char *)local_518[0];
        if (puVar34 == local_518[0]) {
          if ((cVar4 != ',') && (cVar4 != ';')) goto LAB_001155f0;
          dVar71 = 1.0;
LAB_00116f32:
          puVar34 = (ushort *)((long)local_518[0] + 1);
          dVar72 = 1.0;
          if (cVar4 == ',') {
            dVar72 = strtod((char *)puVar34,(char **)local_518);
            if (local_518[0] == puVar34) {
              dVar72 = 1.0;
            }
            if ((*(char *)local_518[0] == ';') || (*(char *)local_518[0] == ',')) {
              puVar34 = (ushort *)((long)local_518[0] + 1);
              goto LAB_00116f4b;
            }
          }
          else {
LAB_00116f4b:
            lVar28 = strtol((char *)puVar34,(char **)local_518,10);
            if (local_518[0] != puVar34) {
              local_4b0 = CONCAT44((int)lVar28,(int)local_4b0);
            }
            if (*(char *)local_518[0] == ',') {
              puVar34 = (ushort *)((long)local_518[0] + 1);
              lVar28 = strtol((char *)puVar34,(char **)local_518,10);
              if (puVar34 != local_518[0]) {
                local_4a8 = CONCAT44(local_4a8._4_4_,(int)lVar28);
              }
              if ((*(char *)local_518[0] == ',') &&
                 (puVar34 = (ushort *)((long)local_518[0] + 1),
                 lVar28 = strtol((char *)puVar34,(char **)local_518,10), puVar34 != local_518[0])) {
                local_4a8 = CONCAT44((int)lVar28,(int)local_4a8);
              }
            }
          }
          if (dVar71 <= 0.0) goto LAB_00115a7b;
          if (0.0 < dVar72) goto LAB_00115613;
          fwrite("ScaleBBoxHeight needs plus.\n",1,0x1c,_stderr);
        }
        else {
          if ((cVar4 == ';') || (cVar4 == ',')) goto LAB_00116f32;
          if (0.0 < dVar71) {
            dVar72 = 1.0;
            goto LAB_00115613;
          }
LAB_00115a7b:
          fwrite("ScaleBBoxWitdh needs plus.\n",1,0x1b,_stderr);
        }
switchD_00115761_caseD_4f:
        bVar68 = true;
        puVar67 = (undefined8 *)0x0;
        iVar21 = 0x53;
        goto LAB_0011565d;
      }
LAB_00115613:
      local_4b8 = dVar72;
      local_4c0 = dVar71;
      iVar19 = SPropRecValList_search_record(local_528,&local_520,"ForceSpacing");
      if (iVar19 != 0) {
        pcVar33 = *(char **)(local_520 + 8);
        sVar27 = strlen(pcVar33);
        if (sVar27 == 1) {
          cVar4 = *pcVar33;
          if (cVar4 == 'c') {
LAB_00115a20:
            iVar19 = (int)cVar4;
            goto LAB_00115713;
          }
          if (cVar4 < 'd') {
            if (cVar4 == 'M') {
              local_4d8 = local_4d8 | 0x800;
              iVar19 = 0x6d;
              goto LAB_00115713;
            }
          }
          else if ((cVar4 == 'm') || (cVar4 == 'p')) goto LAB_00115a20;
        }
        goto switchD_00115761_caseD_4f;
      }
LAB_00115713:
      iVar20 = SPropRecValList_search_record(local_528,&local_520,"DoubleStrike");
      if (iVar20 != 0) {
        pcVar33 = *(char **)(local_520 + 8);
        if ((*pcVar33 == '\0') || (false)) goto switchD_00115761_caseD_4f;
        switch(*pcVar33) {
        case 'L':
        case 'M':
        case 'l':
        case 'm':
          local_4d8 = local_4d8 | 3;
          break;
        case 'N':
        case 'n':
          local_4d8 = local_4d8 & 0xfffffffffffffff4;
          break;
        default:
          goto switchD_00115761_caseD_4f;
        case 'Y':
        case 'y':
          local_4d8 = local_4d8 | 1;
        }
        if (((pcVar33[1] != 0) && (uVar48 = (byte)pcVar33[1] - 0x42, (byte)uVar48 < 0x38)) &&
           ((0x80400100804001U >> ((ulong)uVar48 & 0x3f) & 1) != 0)) {
          local_4d8 = local_4d8 | 8;
        }
        pcVar26 = strchr(pcVar33,0x3b);
        if ((pcVar26 != (char *)0x0) || (pcVar26 = strchr(pcVar33,0x2c), pcVar26 != (char *)0x0)) {
          puVar34 = (ushort *)(pcVar26 + 1);
          if ((pcVar26[1] != '\0') &&
             ((lVar28 = strtol((char *)puVar34,(char **)local_518,10), local_518[0] != puVar34 &&
              ((int)lVar28 <= iVar21)))) {
            local_4d8 = local_4d8 & 0xfffffffffffffffd;
          }
          pcVar33 = strchr((char *)puVar34,0x2c);
          if ((pcVar33 != (char *)0x0) && (pcVar33[1] != '\0')) {
            lVar28 = strtol(pcVar33 + 1,(char **)local_518,10);
            if ((local_518[0] != (ushort *)(pcVar33 + 1)) &&
               (((int)lVar28 <= iVar21 && ((local_4d8 & 1) != 0)))) {
              local_4b0 = CONCAT44(local_4b0._4_4_,(int)local_4b0 + iVar21 / (int)lVar28);
            }
          }
        }
      }
      iVar21 = SPropRecValList_search_record(local_528,&local_520,"VeryLazyMetrics");
      if (iVar21 != 0) {
        if (*(int *)(local_520 + 8) == -1) {
          local_4d8 = local_4d8 | 0x30;
        }
        else {
          local_4d8 = local_4d8 & 0xffffffffffffffef | 0x20;
        }
      }
      iVar21 = SPropRecValList_search_record(local_528,&local_520,"EmbeddedBitmap");
      if (iVar21 == 0) {
        local_5d8 = -1;
        iVar21 = 0;
        goto LAB_00115aa8;
      }
      pcVar33 = *(char **)(local_520 + 8);
      sVar27 = strlen(pcVar33);
      if ((sVar27 != 1) || (false)) goto switchD_00115761_caseD_4f;
      switch(*pcVar33) {
      case 'N':
      case 'n':
        local_5d8 = 0;
        iVar21 = 0;
        break;
      default:
        goto switchD_00115761_caseD_4f;
      case 'U':
      case 'u':
        local_5d8 = -1;
        iVar21 = 0;
        break;
      case 'Y':
      case 'y':
        local_5d8 = -1;
        iVar21 = -1;
      }
LAB_00115aa8:
      if (((local_4d8 & 0x10) != 0) &&
         (iVar20 = SPropRecValList_search_record(local_528,&local_520,"VeryLazyBitmapWidthScale"),
         iVar20 != 0)) {
        uVar39 = *(undefined8 *)(local_520 + 8);
        fwrite("Warning: `bs\' option is not required in X-TT version 2.\n",1,0x38,_stderr);
        local_4a0 = uVar39;
      }
      iVar20 = SPropRecValList_search_record(local_528,&local_520,"CodeRange");
      if (iVar20 == 0) {
        local_5f8 = (char *)0x0;
      }
      else {
        local_5f8 = strdup(*(char **)(local_520 + 8));
        if (local_5f8 == (char *)0x0) {
          bVar68 = true;
          puVar67 = (undefined8 *)0x0;
          iVar21 = 0x50;
          goto LAB_0011565d;
        }
      }
      local_52c = 0xff;
      local_518[0] = (ushort *)CONCAT62(local_518[0]._2_6_,0xff);
      local_52e = 0;
      local_52a = 0;
      iVar20 = SPropRecValList_search_record(local_528,&local_520,"ForceConstantSpacingCodeRange");
      if ((iVar20 != 0) &&
         (iVar20 = FUN_00111960(1,&local_52e,&local_52a,&local_52c,local_518,
                                *(undefined8 *)(local_520 + 8)), iVar20 == 1)) {
        uVar48 = (uint)local_52a << 8 | (uint)local_52e;
        uVar24 = (uint)(ushort)local_518[0] << 8 | (uint)local_52c;
        local_498 = CONCAT44(uVar24,uVar48);
        uVar56 = local_4d8 | 0x400;
        local_4d8 = local_4d8 & 0xfffffffffffffbff;
        if (uVar24 < uVar48) {
          local_4d8 = uVar56;
        }
      }
      local_530 = 0;
      local_52e = 0xff;
      local_52c = 0;
      local_52a = 0xff;
      iVar20 = SPropRecValList_search_record(local_528,&local_520,"ForceConstantSpacingMetrics");
      if ((iVar20 != 0) && (puVar34 = *(ushort **)(local_520 + 8), puVar34 != (ushort *)0x0)) {
        puVar30 = (ushort *)strchr((char *)puVar34,0x3b);
        puVar31 = (ushort *)strchr((char *)puVar34,0x2c);
        puVar32 = (ushort *)strchr((char *)puVar34,0x2e);
        if (puVar31 == (ushort *)0x0) {
LAB_00115bec:
          if ((puVar30 == (ushort *)0x0) || (puVar32 == (ushort *)0x0)) {
LAB_001175c0:
            puVar31 = (ushort *)((ulong)puVar31 | (ulong)puVar32);
          }
          else if (puVar32 <= puVar30) goto LAB_001173c0;
          if ((puVar34 == puVar30) || (puVar31 != (ushort *)0x0)) goto LAB_001173c0;
          iVar20 = FUN_00111960(1,&local_530,&local_52c,&local_52e,&local_52a,puVar34);
          if (iVar20 == 1) {
            local_488 = CONCAT44((uint)local_52c << 8 | (uint)local_530,(int)local_488);
          }
        }
        else {
          if (puVar30 == (ushort *)0x0) goto LAB_001175c0;
          if (puVar30 < puVar31) {
            puVar31 = (ushort *)0x0;
            goto LAB_00115bec;
          }
LAB_001173c0:
          dVar71 = strtod((char *)puVar34,(char **)local_518);
          if (puVar34 != local_518[0]) {
            local_480 = dVar71;
          }
          if (*(char *)local_518[0] == ',') {
            puVar34 = (ushort *)((long)local_518[0] + 1);
            dVar71 = strtod((char *)puVar34,(char **)local_518);
            if (puVar34 != local_518[0]) {
              local_4d8 = local_4d8 | 0x100;
              local_470 = dVar71;
            }
            if (*(char *)local_518[0] == ',') {
              puVar34 = (ushort *)((long)local_518[0] + 1);
              dVar71 = strtod((char *)puVar34,(char **)local_518);
              if (puVar34 != local_518[0]) {
                local_4d8 = local_4d8 | 0x200;
                local_468 = dVar71;
              }
              if ((*(char *)local_518[0] == ',') &&
                 (puVar34 = (ushort *)((long)local_518[0] + 1),
                 dVar71 = strtod((char *)puVar34,(char **)local_518), puVar34 != local_518[0])) {
                local_478 = dVar71;
              }
            }
          }
        }
        if (puVar30 != (ushort *)0x0) {
          lVar28 = strtol((char *)((long)puVar30 + 1),(char **)local_518,10);
          if ((ushort *)((long)puVar30 + 1) != local_518[0]) {
            local_490 = CONCAT44(local_490._4_4_,(int)lVar28);
          }
          if (*(char *)local_518[0] == ',') {
            puVar34 = (ushort *)((long)local_518[0] + 1);
            lVar28 = strtol((char *)puVar34,(char **)local_518,10);
            if (puVar34 != local_518[0]) {
              local_490 = CONCAT44((int)lVar28,(undefined4)local_490);
            }
            if ((*(char *)local_518[0] == ',') &&
               (puVar34 = (ushort *)((long)local_518[0] + 1),
               lVar28 = strtol((char *)puVar34,(char **)local_518,10), puVar34 != local_518[0])) {
              local_488 = CONCAT44(local_488._4_4_,(int)lVar28);
            }
          }
        }
      }
      iVar20 = SPropRecValList_search_record(local_528,&local_520,"FontProperties");
      local_564 = -1;
      if (iVar20 != 0) {
        local_564 = *(int *)(local_520 + 8);
      }
      local_488 = CONCAT44(local_488._4_4_,(int)local_488 + local_4a8._4_4_);
      local_478 = local_478 * local_4b8;
      local_490 = CONCAT44(local_490._4_4_ + (int)local_4a8,(undefined4)local_490);
      bVar51 = (iVar18 == 0) * '\x02';
      if (local_5d8 == 0) {
        bVar51 = bVar51 | 8;
      }
      local_480 = local_480 * local_4c0 * local_4c8;
      local_4c0 = local_4c0 * local_4c8;
      if (((false) || (local_4d0 != 0.0)) && (iVar21 == 0)) {
        bVar51 = bVar51 | 8;
      }
      if (DAT_0013fc60 == 0) {
        iVar21 = FT_Init_FreeType(&ftypeLibrary);
        if (iVar21 == 0) {
          DAT_0013fc60 = 1;
          goto LAB_00115e16;
        }
        puVar67 = (undefined8 *)0x0;
        ErrorF("FreeType: error initializing ftypeEngine: %d\n",iVar21);
        iVar21 = 0x50;
        bVar68 = true;
        goto LAB_00116d18;
      }
LAB_00115e16:
      bVar5 = *(byte *)puVar29;
      if (bVar5 == 0) {
        uVar48 = 0;
      }
      else {
        uVar48 = 0;
        puVar45 = puVar29;
        do {
          puVar45 = (uint *)((long)puVar45 + 1);
          uVar48 = (uVar48 << 5 | uVar48 >> 0x1b) + (uint)bVar5;
          bVar5 = *(byte *)puVar45;
        } while (bVar5 != 0);
        uVar48 = uVar48 & 0x1f;
      }
      for (puVar67 = (undefined8 *)(&DAT_0013fb60)[(int)uVar48]; puVar67 != (undefined8 *)0x0;
          puVar67 = (undefined8 *)puVar67[5]) {
        iVar21 = strcmp((char *)*puVar67,(char *)puVar29);
        if (iVar21 == 0) goto LAB_00115e84;
      }
      __ptr = (undefined8 *)calloc(1,0x30);
      puVar67 = __ptr;
      if (__ptr == (undefined8 *)0x0) goto LAB_00116d0a;
      pcVar33 = strdup((char *)puVar29);
      *__ptr = pcVar33;
      if (pcVar33 == (char *)0x0) {
        iVar21 = 0x50;
        puVar67 = (undefined8 *)0x0;
        free(__ptr);
        bVar68 = true;
      }
      else {
        iVar18 = FT_New_Face(ftypeLibrary,local_640,(long)(int)local_5f0,__ptr + 1);
        if (iVar18 == 0) {
          lVar28 = __ptr[1];
          uVar24 = ~(uint)*(undefined8 *)(lVar28 + 0x10) & 1;
          *(uint *)(__ptr + 2) = uVar24;
          if (uVar24 == 0) {
            lVar65 = FT_Get_Sfnt_Table(lVar28,1);
            lVar28 = __ptr[1];
            if ((lVar65 != 0) && (*(short *)(lVar65 + 0xc) == 0)) {
              *(undefined4 *)(__ptr + 2) = 1;
            }
          }
          uVar12 = FUN_001117a0(lVar28,0x68686561,0x22);
          *(uint *)((long)__ptr + 0x14) = (uint)uVar12;
          uVar39 = (&DAT_0013fb60)[(int)uVar48];
          (&DAT_0013fb60)[(int)uVar48] = __ptr;
          __ptr[5] = uVar39;
LAB_00115e84:
          dVar71 = hypot(*(double *)(param_2 + 0x38),*(double *)(param_2 + 0x40));
          if (((long)((*(double *)(param_2 + 0x28) / dVar71) * 65536.0) == 0x10000 &&
               (long)((*(double *)(param_2 + 0x40) / dVar71) * 65536.0) == 0x10000) &&
             ((long)((*(double *)(param_2 + 0x38) / dVar71) * 65536.0) == 0 &&
              (long)((*(double *)(param_2 + 0x30) / dVar71) * 65536.0) == 0)) {
            iVar18 = -1;
          }
          else {
            bVar51 = bVar51 | 8;
            iVar18 = 0;
          }
          if (*(int *)(puVar67 + 2) == 0) {
            *(double *)(param_2 + 0x18) =
                 local_4d0 * *(double *)(param_2 + 8) + *(double *)(param_2 + 0x18);
            *(double *)(param_2 + 0x38) =
                 *(double *)(param_2 + 0x28) * local_4d0 + *(double *)(param_2 + 0x38);
            *(double *)(param_2 + 0x20) =
                 local_4d0 * *(double *)(param_2 + 0x10) + *(double *)(param_2 + 0x20);
            *(double *)(param_2 + 0x40) =
                 local_4d0 * *(double *)(param_2 + 0x30) + *(double *)(param_2 + 0x40);
          }
          else {
            bVar51 = bVar51 & 0xf7;
          }
          dVar72 = hypot(*(double *)(param_2 + 8),*(double *)(param_2 + 0x10));
          dVar73 = hypot(*(double *)(param_2 + 0x18),*(double *)(param_2 + 0x20));
          dVar71 = dVar73;
          if (dVar73 < dVar72) {
            dVar71 = dVar72;
          }
          bVar68 = dVar71 < 1.0;
          iVar21 = 0x53;
          if (!bVar68) {
            iVar21 = FUN_00112300(plVar25,param_4,puVar67,puVar29,param_2,param_6,param_5,bVar51,
                                  &local_4d8,local_5f8,iVar19);
            if (iVar21 == 0x55) {
              lVar28 = puVar67[1];
              lVar65 = *plVar25;
              dVar71 = 0.00048828125;
              if (*(ushort *)(lVar28 + 0x88) != 0) {
                dVar71 = 1.0 / (double)*(ushort *)(lVar28 + 0x88);
              }
              iVar19 = *(int *)(lVar65 + 0x58);
              puVar34 = *(ushort **)(lVar65 + 0x78);
              if (puVar34 == (ushort *)0x0) {
                dVar72 = *(double *)(lVar65 + 0xe0);
                if (*(int *)(puVar67 + 2) == 0) {
                  dVar85 = (double)(int)*(short *)(lVar28 + 0x8a);
                  if ((double)(int)*(short *)(lVar28 + 0x8a) <= (double)*(long *)(lVar28 + 0x80)) {
                    dVar85 = (double)*(long *)(lVar28 + 0x80);
                  }
                  dVar79 = (double)*(long *)(lVar28 + 0x68) * dVar72;
                  dVar77 = (double)(int)*(short *)(lVar28 + 0x90);
                  dVar81 = (double)-(int)*(short *)(lVar28 + 0x8c);
                  if ((double)-(int)*(short *)(lVar28 + 0x8c) <= (double)-*(long *)(lVar28 + 0x70))
                  {
                    dVar81 = (double)-*(long *)(lVar28 + 0x70);
                  }
                  dVar82 = *(double *)(param_2 + 0x10);
                  dVar2 = *(double *)(param_2 + 0x20);
                  dVar78 = dVar77;
                  if (dVar77 <= (double)*(long *)(lVar28 + 0x78)) {
                    dVar78 = (double)*(long *)(lVar28 + 0x78);
                  }
                  dVar76 = *(double *)(param_2 + 8);
                  dVar3 = *(double *)(param_2 + 0x18);
                  dVar86 = dVar76 * dVar79;
                  dVar79 = dVar79 * dVar82;
                  dVar84 = dVar3 * -dVar81;
                  dVar80 = -dVar81 * dVar2;
                  dVar74 = dVar86 + dVar84;
                  dVar83 = dVar79 + dVar80;
                  dVar86 = dVar86 + dVar3 * dVar85;
                  dVar79 = dVar79 + dVar2 * dVar85;
                  dVar75 = dVar86;
                  if (dVar86 <= dVar74) {
                    dVar75 = dVar74;
                  }
                  if (dVar74 <= dVar86) {
                    dVar86 = dVar74;
                  }
                  local_5e8 = dVar79;
                  if (dVar83 <= dVar79) {
                    local_5e8 = dVar83;
                  }
                  if (dVar79 <= dVar83) {
                    dVar79 = dVar83;
                  }
                  dVar74 = dVar76 * dVar78 * dVar72;
                  dVar83 = dVar78 * dVar72 * dVar82;
                  dVar84 = dVar84 + dVar74;
                  dVar80 = dVar80 + dVar83;
                  dVar78 = dVar84;
                  if (dVar84 <= dVar75) {
                    dVar78 = dVar75;
                  }
                  if (dVar86 <= dVar84) {
                    dVar84 = dVar86;
                  }
                  if (dVar80 < local_5e8) {
                    local_5e8 = dVar80;
                  }
                  dVar74 = dVar3 * dVar85 + dVar74;
                  dVar83 = dVar83 + dVar2 * dVar85;
                  if (dVar80 <= dVar79) {
                    dVar80 = dVar79;
                  }
                  dVar79 = dVar74;
                  if (dVar74 <= dVar78) {
                    dVar79 = dVar78;
                  }
                  if (dVar84 <= dVar74) {
                    dVar74 = dVar84;
                  }
                  if (dVar83 < local_5e8) {
                    local_5e8 = dVar83;
                  }
                  local_5e8 = -local_5e8;
                  if (dVar83 <= dVar80) {
                    dVar83 = dVar80;
                  }
                  dVar78 = dVar74 * dVar71 + 0.5;
                  if (ABS(dVar78) < 4503599627370496.0) {
                    dVar78 = (double)((ulong)dVar78 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar78 -
                                            (double)(-(ulong)(dVar78 < (double)(long)dVar78) &
                                                    0x3ff0000000000000)));
                  }
                  dVar79 = dVar79 * dVar71 + 0.5;
                  if (ABS(dVar79) < 4503599627370496.0) {
                    dVar79 = (double)((ulong)dVar79 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar79 -
                                            (double)(-(ulong)(dVar79 < (double)(long)dVar79) &
                                                    0x3ff0000000000000)));
                  }
                  sVar41 = (short)(int)dVar79;
                  dVar79 = local_5e8 * dVar71 - 0.5;
                  if (ABS(dVar79) < 4503599627370496.0) {
                    dVar79 = (double)((ulong)dVar79 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar79 +
                                            (double)(-(ulong)((double)(long)dVar79 < dVar79) &
                                                    0x3ff0000000000000)));
                  }
                  iVar22 = (int)dVar79;
                  dVar79 = dVar83 * dVar71 + 0.5;
                  if (ABS(dVar79) < 4503599627370496.0) {
                    dVar79 = (double)((ulong)dVar79 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar79 -
                                            (double)(-(ulong)(dVar79 < (double)(long)dVar79) &
                                                    0x3ff0000000000000)));
                  }
                  iVar58 = (int)dVar79;
                  if (*(short *)(lVar28 + 0x92) < 1) {
                    dVar85 = dVar85 + dVar81;
                  }
                  else {
                    dVar85 = (double)(int)*(short *)(lVar28 + 0x92);
                  }
                  if ((false) || (dVar82 != 0.0)) {
                    dVar75 = *(double *)(lVar65 + 0xe8) * dVar85;
                    if ((false) || (dVar2 != 0.0)) {
                      dVar79 = ABS(dVar3 - (dVar76 * dVar2) / dVar82);
                      dVar75 = dVar75 * dVar79;
                      dVar76 = ABS(dVar76 - (dVar3 * dVar82) / dVar2);
                      dVar72 = dVar77 * dVar72 * dVar76;
                      if (dVar75 < dVar72) {
                        dVar76 = 0.0;
                      }
                      else {
                        dVar79 = 0.0;
                        dVar75 = dVar72;
                      }
                    }
                    else {
                      dVar76 = 0.0;
                      dVar79 = ABS(dVar3);
                      dVar75 = dVar75 * dVar79;
                    }
                  }
                  else {
                    dVar79 = 0.0;
                    dVar76 = ABS(dVar76);
                    dVar75 = dVar77 * dVar72 * dVar76;
                  }
                  dVar81 = dVar75 * dVar71;
                  dVar72 = dVar81 + 0.5;
                  if (ABS(dVar72) < 4503599627370496.0) {
                    dVar72 = (double)((ulong)dVar72 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar72 -
                                            (double)(-(ulong)(dVar72 < (double)(long)dVar72) &
                                                    0x3ff0000000000000)));
                  }
                  iVar23 = (int)dVar72;
                  uVar56 = *(ulong *)(lVar65 + 200);
                  iVar20 = iVar23;
                  if ((uVar56 & 8) != 0) {
                    iVar20 = iVar23 + *(int *)(lVar65 + 0xf0);
                  }
                  iVar20 = iVar20 + *(int *)(lVar65 + 0xf4);
                  if ((false) || (dVar76 != 0.0)) {
                    local_5c8 = *(double *)(lVar65 + 0x130) * dVar77 * dVar76;
                    dVar82 = *(double *)(lVar65 + 0x120) * dVar77 * dVar76;
                    dVar72 = *(double *)(lVar65 + 0x138) * dVar77 * dVar76;
                  }
                  else {
                    local_5c8 = *(double *)(lVar65 + 0x130) * dVar85 * dVar79;
                    dVar82 = *(double *)(lVar65 + 0x128) * dVar85 * dVar79;
                    dVar72 = dVar85 * *(double *)(lVar65 + 0x138) * dVar79;
                  }
                  dVar85 = dVar82 * dVar71 + 0.5;
                  if (ABS(dVar85) < 4503599627370496.0) {
                    dVar85 = (double)((ulong)dVar85 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar85 -
                                            (double)(-(ulong)(dVar85 < (double)(long)dVar85) &
                                                    0x3ff0000000000000)));
                  }
                  local_568 = (int)dVar85;
                  iVar43 = local_568;
                  if ((uVar56 & 8) != 0) {
                    iVar43 = local_568 + *(int *)(lVar65 + 0xf0);
                  }
                  local_568 = local_568 + *(int *)(lVar65 + 0x110);
                  sVar17 = (short)(int)dVar78;
                  if ((uVar56 & 0x100) != 0) {
                    dVar85 = local_5c8 * dVar71 + 0.5;
                    if (ABS(dVar85) < 4503599627370496.0) {
                      dVar85 = (double)((ulong)dVar85 & 0x8000000000000000 |
                                       (ulong)((double)(long)dVar85 -
                                              (double)(-(ulong)(dVar85 < (double)(long)dVar85) &
                                                      0x3ff0000000000000)));
                    }
                    sVar17 = (short)(int)dVar85;
                  }
                  local_58c = sVar41;
                  if ((uVar56 & 0x200) != 0) {
                    dVar72 = dVar72 * dVar71 + 0.5;
                    if (ABS(dVar72) < 4503599627370496.0) {
                      dVar72 = (double)((ulong)dVar72 & 0x8000000000000000 |
                                       (ulong)((double)(long)dVar72 -
                                              (double)(-(ulong)(dVar72 < (double)(long)dVar72) &
                                                      0x3ff0000000000000)));
                    }
                    local_58c = (short)(int)dVar72;
                  }
                  if (iVar18 == -1) {
                    dVar72 = *(double *)(lVar65 + 0xd0);
                    if ((false) || (dVar72 != 0.0)) {
                      dVar85 = (double)(iVar22 + iVar58);
                      if (dVar72 <= 0.0) {
                        iVar62 = (int)(0.5 - dVar72 * dVar85);
                        iVar18 = (int)(((double)iVar62 * (double)iVar58) / dVar85 + 0.5);
                        *(int *)(lVar65 + 0x14c) = iVar62 - iVar18;
                        *(int *)(lVar65 + 0x148) = -iVar18;
                      }
                      else {
                        iVar18 = (int)(dVar72 * dVar85 + 0.5);
                        iVar62 = (int)(((double)iVar18 * (double)iVar58) / dVar85 + 0.5);
                        *(int *)(lVar65 + 0x14c) = iVar62;
                        *(int *)(lVar65 + 0x148) = iVar62 - iVar18;
                      }
                    }
                  }
                  uVar55 = (short)(int)dVar78 + (short)*(undefined4 *)(lVar65 + 0xf8);
                  if ((uVar56 & 1) != 0) {
                    sVar57 = (short)*(undefined4 *)(lVar65 + 0xf0);
                    sVar41 = sVar41 + sVar57;
                    local_58c = local_58c + sVar57;
                  }
                  uVar61 = sVar41 + (short)*(undefined4 *)(lVar65 + 0xfc);
                  local_58c = local_58c + (short)*(undefined4 *)(lVar65 + 0x118);
                  uVar60 = sVar17 + (short)*(undefined4 *)(lVar65 + 0x114);
                  dVar72 = dVar75 * 10.0 * dVar71 * ((double)iVar20 / (double)iVar23) + 0.5;
                  if (ABS(dVar72) < 4503599627370496.0) {
                    dVar72 = (double)((ulong)((double)(long)dVar72 -
                                             (double)(-(ulong)(dVar72 < (double)(long)dVar72) &
                                                     0x3ff0000000000000)) |
                                     (ulong)dVar72 & 0x8000000000000000);
                  }
                  dVar77 = ((double)iVar20 / (double)iVar23) * dVar81;
                  dVar85 = floor((dVar77 * 1000.0) / dVar73 + 0.5);
                  local_5b8 = (ushort)(long)dVar85;
                  dVar85 = floor((dVar77 * 10.0 * 1000.0) / dVar73 + 0.5);
                  local_558 = (long)dVar85;
                  dVar71 = floor((((double)local_568 / (double)iVar43) * dVar82 * dVar71 * 1000.0) /
                                 dVar73 + 0.5);
                  local_5a0 = (undefined2)(long)dVar71;
                }
                else {
                  lVar28 = *(long *)(lVar65 + 8);
                  dVar71 = (double)*(long *)(lVar28 + 0x48);
                  dVar76 = dVar71 * dVar72 * 0.015625 + 0.5;
                  if (ABS(dVar76) < 4503599627370496.0) {
                    dVar76 = (double)((ulong)dVar76 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar76 -
                                            (double)(-(ulong)(dVar76 < (double)(long)dVar76) &
                                                    0x3ff0000000000000)));
                  }
                  iVar20 = (int)dVar76;
                  sVar41 = (short)iVar20;
                  lVar66 = *(long *)(lVar28 + 0x38);
                  lVar28 = *(long *)(lVar28 + 0x30);
                  if (lVar66 < 0) {
                    lVar66 = lVar66 + 0x3f;
                  }
                  iVar22 = -(int)(lVar66 >> 6);
                  lVar66 = lVar28 + 0x3f;
                  if (-1 < lVar28) {
                    lVar66 = lVar28;
                  }
                  dVar76 = *(double *)(lVar65 + 0x120) * dVar71 * 0.015625 + 0.5;
                  iVar58 = (int)(lVar66 >> 6);
                  if (ABS(dVar76) < 4503599627370496.0) {
                    dVar76 = (double)((ulong)dVar76 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar76 -
                                            (double)(-(ulong)(dVar76 < (double)(long)dVar76) &
                                                    0x3ff0000000000000)));
                  }
                  local_568 = (int)dVar76;
                  if (*(int *)(param_2 + 0x58) == 0) {
                    dVar72 = dVar71 * 10.0 * dVar72 * 0.015625 + 0.5;
                    if (ABS(dVar72) < 4503599627370496.0) {
                      dVar72 = (double)((ulong)dVar72 & 0x8000000000000000 |
                                       (ulong)((double)(long)dVar72 -
                                              (double)(-(ulong)(dVar72 < (double)(long)dVar72) &
                                                      0x3ff0000000000000)));
                    }
                  }
                  else {
                    dVar72 = dVar72 * (double)*(int *)(param_2 + 0x58) + 0.5;
                    if (ABS(dVar72) < 4503599627370496.0) {
                      dVar72 = (double)((ulong)((double)(long)dVar72 -
                                               (double)(-(ulong)(dVar72 < (double)(long)dVar72) &
                                                       0x3ff0000000000000)) |
                                       (ulong)dVar72 & 0x8000000000000000);
                    }
                  }
                  dVar76 = dVar71 * 0.015625 + 0.5;
                  if (ABS(dVar76) < 4503599627370496.0) {
                    dVar76 = (double)((ulong)dVar76 & 0x8000000000000000 |
                                     (ulong)((double)(long)dVar76 -
                                            (double)(-(ulong)(dVar76 < (double)(long)dVar76) &
                                                    0x3ff0000000000000)));
                  }
                  uVar56 = *(ulong *)(lVar65 + 200);
                  dVar81 = (double)(int)dVar76;
                  dVar76 = *(double *)(param_2 + 8);
                  sVar17 = 0;
                  if ((uVar56 & 0x100) != 0) {
                    dVar79 = *(double *)(lVar65 + 0x130) * dVar71 * 0.015625 + 0.5;
                    if (ABS(dVar79) < 4503599627370496.0) {
                      dVar79 = (double)((ulong)dVar79 & 0x8000000000000000 |
                                       (ulong)((double)(long)dVar79 -
                                              (double)(-(ulong)(dVar79 < (double)(long)dVar79) &
                                                      0x3ff0000000000000)));
                    }
                    sVar17 = (short)(int)dVar79;
                  }
                  sVar57 = sVar41;
                  if ((uVar56 & 0x200) != 0) {
                    dVar71 = dVar71 * *(double *)(lVar65 + 0x138) * 0.015625 + 0.5;
                    if (ABS(dVar71) < 4503599627370496.0) {
                      dVar71 = (double)((ulong)((double)(long)dVar71 -
                                               (double)(-(ulong)(dVar71 < (double)(long)dVar71) &
                                                       0x3ff0000000000000)) |
                                       (ulong)dVar71 & 0x8000000000000000);
                    }
                    sVar57 = (short)(int)dVar71;
                  }
                  dVar71 = *(double *)(lVar65 + 0xd0);
                  if ((false) || (dVar71 != 0.0)) {
                    dVar79 = (double)(iVar22 + iVar58);
                    if (dVar71 <= 0.0) {
                      iVar18 = (int)(0.5 - dVar71 * dVar79);
                      iVar23 = (int)(((double)iVar18 * (double)iVar58) / dVar79 + 0.5);
                      iVar18 = iVar18 - iVar23;
                      iVar23 = -iVar23;
                      *(int *)(lVar65 + 0x14c) = iVar18;
                      *(int *)(lVar65 + 0x148) = iVar23;
                    }
                    else {
                      iVar23 = (int)(dVar71 * dVar79 + 0.5);
                      iVar18 = (int)(((double)iVar23 * (double)iVar58) / dVar79 + 0.5);
                      *(int *)(lVar65 + 0x14c) = iVar18;
                      iVar23 = iVar18 - iVar23;
                      *(int *)(lVar65 + 0x148) = iVar23;
                    }
                  }
                  else {
                    iVar18 = *(int *)(lVar65 + 0x14c);
                    iVar23 = *(int *)(lVar65 + 0x148);
                  }
                  if ((uVar56 & 8) != 0) {
                    iVar20 = *(int *)(lVar65 + 0xf0) + iVar20;
                  }
                  uVar55 = (short)*(undefined4 *)(lVar65 + 0xf8) + (short)iVar23;
                  if ((uVar56 & 1) != 0) {
                    sVar11 = (short)*(undefined4 *)(lVar65 + 0xf0);
                    sVar41 = sVar41 + sVar11;
                    sVar57 = sVar57 + sVar11;
                  }
                  uVar61 = (short)*(undefined4 *)(lVar65 + 0xfc) + sVar41 + (short)iVar18;
                  dVar79 = 0.0;
                  local_5a0 = 0;
                  local_558 = 0;
                  local_58c = (short)iVar18 + sVar57 + (short)*(undefined4 *)(lVar65 + 0x118);
                  uVar60 = sVar17 + (short)*(undefined4 *)(lVar65 + 0x114) + (short)iVar23;
                  local_5b8 = 0;
                }
                uVar12 = (ushort)iVar20;
                local_5e8._0_2_ = (ushort)iVar22;
                uVar16 = (ushort)iVar58;
                iVar18 = (int)dVar72;
                *(double *)(lVar65 + 0x60) = dVar73;
                *(double *)(lVar65 + 0x90) = dVar81;
                if ((false) || (dVar76 != 0.0)) {
                  *(undefined8 *)(lVar65 + 0x70) = 0;
                  *(double *)(lVar65 + 0x68) = dVar76 / dVar73;
                }
                else {
                  *(undefined8 *)(lVar65 + 0x68) = 0;
                  *(double *)(lVar65 + 0x70) = dVar79 / dVar73;
                }
                pvVar37 = malloc(0xc);
                *(void **)(lVar65 + 0x78) = pvVar37;
                if (pvVar37 != (void *)0x0) {
                  *(ushort *)((long)pvVar37 + 6) = uVar16;
                  *(ushort *)(*(long *)(lVar65 + 0x78) + 8) = local_5e8._0_2_;
                  *(ushort *)(*(long *)(lVar65 + 0x78) + 10) = local_5b8;
                  *(ushort *)(*(long *)(lVar65 + 0x78) + 2) = uVar61;
                  **(ushort **)(lVar65 + 0x78) = uVar55;
                  *(ushort *)(*(long *)(lVar65 + 0x78) + 4) = uVar12;
                  *(int *)(lVar65 + 0x80) = iVar18;
                  *(long *)(lVar65 + 0x88) = local_558;
                  iVar20 = FUN_00114e10(*(undefined4 *)(plVar25 + 5),0,&local_520,*plVar25);
                  if (((iVar20 == 0x55) && (local_520 != 0)) ||
                     ((iVar20 = FUN_00114e10(*(undefined4 *)(plVar25 + 5),4,&local_520,*plVar25),
                      iVar20 == 0x55 && (local_520 != 0)))) {
                    if (*(int *)(lVar65 + 0x10c) < 0) goto LAB_00116080;
                    local_518[0] = (ushort *)0x0;
                    iVar20 = *(int *)(lVar65 + 0x11c);
                    if (*(long *)(lVar65 + 0x98) == 0) {
                      pvVar37 = malloc(0xc);
                      *(void **)(lVar65 + 0x98) = pvVar37;
                      if (pvVar37 == (void *)0x0) goto LAB_00116d0a;
                    }
                    if (iVar20 < 0) {
LAB_00116c4c:
                      puVar34 = *(ushort **)(lVar65 + 0x98);
LAB_00116c53:
                      *puVar34 = uVar60;
                      *(short *)(*(long *)(lVar65 + 0x98) + 2) = local_58c;
                      *(undefined2 *)(*(long *)(lVar65 + 0x98) + 4) = (undefined2)local_568;
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 6) = uVar16;
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 8) = local_5e8._0_2_;
                      *(undefined2 *)(*(long *)(lVar65 + 0x98) + 10) = local_5a0;
                    }
                    else {
                      iVar20 = FUN_00114b90(iVar20,0,local_518,plVar25);
                      if (iVar20 != 0x55) {
                        local_518[0] = (ushort *)0x0;
                        goto LAB_00116c4c;
                      }
                      puVar34 = *(ushort **)(lVar65 + 0x98);
                      if ((local_518[0] == (ushort *)0x0) || ((short)local_518[0][2] < 1))
                      goto LAB_00116c53;
                      *puVar34 = *local_518[0];
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 2) = local_518[0][1];
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 4) = local_518[0][2];
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 6) = local_518[0][3];
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 8) = local_518[0][4];
                      *(ushort *)(*(long *)(lVar65 + 0x98) + 10) = local_518[0][5];
                    }
                    iVar20 = FUN_00114e10(*(undefined4 *)(plVar25 + 5),8,&local_520,*plVar25);
                    if (((iVar20 == 0x55) && (local_520 != 0)) ||
                       ((iVar20 = FUN_00114e10(*(undefined4 *)(plVar25 + 5),0xc,&local_520,*plVar25)
                        , iVar20 == 0x55 && (local_520 != 0)))) goto LAB_00116080;
                  }
                }
              }
              else {
                uVar12 = puVar34[2];
                iVar18 = *(int *)(lVar65 + 0x80);
                uVar16 = puVar34[3];
                local_5e8._0_2_ = puVar34[4];
                local_5b8 = puVar34[5];
                uVar61 = puVar34[1];
                uVar55 = *puVar34;
                local_558 = *(long *)(lVar65 + 0x88);
LAB_00116080:
                if (iVar19 == 2) {
                  *(int *)(param_2 + 0x58) = iVar18;
                  if (param_4 == (ushort *)0x0) goto LAB_001175d0;
                  param_4[8] = uVar55;
                  param_4[9] = uVar61;
                  param_4[10] = uVar12;
                  param_4[0xb] = uVar16;
                  param_4[0xc] = local_5e8._0_2_;
                  param_4[0xd] = local_5b8;
                  *(undefined8 *)(param_4 + 0xe) = *(undefined8 *)(param_4 + 8);
                  *(undefined4 *)(param_4 + 0x12) = *(undefined4 *)(param_4 + 0xc);
                }
                else {
                  if (param_4 == (ushort *)0x0) {
LAB_001175d0:
                    if (param_3 != 0) {
                      *(long **)(param_3 + 0x98) = plVar25;
                    }
                    goto LAB_00116d18;
                  }
                  uVar24 = (uint)param_4[1];
                  local_518[0] = (ushort *)0x0;
                  lVar28 = *plVar25;
                  uVar48 = *(uint *)(lVar28 + 200) & 0x400;
                  iVar18 = (param_4[1] + 1) - (uint)*param_4;
                  uVar59 = (uint)param_4[3];
                  local_5a8 = (uint)param_4[2];
                  if (param_4[3] < local_5a8) {
                    local_5c0 = 0x8001;
                    uVar60 = 0x7fff;
                    uVar47 = 0x7fff;
                    uVar61 = 0x7fff;
                    uVar16 = 0x8001;
                    uVar63 = 0x7fff;
                    uVar12 = 0x7fff;
                    uVar10 = 0x8001;
                    uVar55 = 0x8001;
                    local_5e8._0_2_ = 0x8001;
                    uVar9 = 0x8001;
                    uVar64 = 0x8001;
                    uVar13 = 0x7fff;
LAB_00118f59:
                    *(undefined4 *)(param_2 + 0x58) = 0;
                  }
                  else {
                    bVar69 = false;
                    local_5e8._0_2_ = 0x8001;
                    uVar16 = 0x8001;
                    uVar60 = 0x7fff;
                    uVar10 = 0x8001;
                    uVar63 = 0x7fff;
                    uVar9 = 0x8001;
                    iVar22 = 0x7fff;
                    uVar12 = 0x7fff;
                    uVar61 = 0x7fff;
                    uVar64 = 0x8001;
                    uVar55 = 0x8001;
                    uVar47 = 0x7fff;
                    iVar19 = 0;
                    iVar20 = -0x7fff;
                    local_570 = 0;
                    local_578 = 0;
                    do {
                      if ((local_518[0] == (ushort *)0x0) || (!bVar69)) {
LAB_00117036:
                        uVar49 = (uint)*param_4;
                        if (*param_4 <= uVar24) {
                          do {
                            uVar59 = local_5a8 << 8 | uVar49;
                            if (uVar48 == 0) {
                              if (uVar59 <= *(uint *)(lVar28 + 0x10c)) {
LAB_0011708f:
                                if (*(uint *)(lVar28 + 0x108) <= uVar59) goto LAB_0011709c;
                              }
                              iVar58 = 0;
LAB_001171ea:
                              iVar23 = iVar58;
                              local_518[0] = (ushort *)0x0;
                              iVar58 = FUN_00114b90(uVar59,iVar23,local_518,plVar25);
                              uVar24 = (uint)param_4[1];
                              if (iVar58 == 0x55) goto LAB_001170aa;
                            }
                            else {
                              if (*(uint *)(lVar28 + 0x10c) < uVar59) goto LAB_0011708f;
LAB_0011709c:
                              iVar23 = 8;
                              iVar58 = 8;
                              if (!bVar69) goto LAB_001171ea;
LAB_001170aa:
                              if (local_518[0] != (ushort *)0x0) {
                                uVar13 = local_518[0][3];
                                if ((short)uVar13 < (short)uVar60) {
                                  uVar60 = uVar13;
                                }
                                if ((short)uVar13 <= (short)uVar16) {
                                  uVar13 = uVar16;
                                }
                                uVar14 = local_518[0][4];
                                if ((short)uVar14 < (short)uVar47) {
                                  uVar47 = uVar14;
                                }
                                if ((short)uVar14 <= (short)local_5e8._0_2_) {
                                  uVar14 = local_5e8._0_2_;
                                }
                                uVar15 = *local_518[0];
                                if ((short)uVar15 < (short)uVar12) {
                                  uVar12 = uVar15;
                                }
                                if ((short)uVar15 <= (short)uVar9) {
                                  uVar15 = uVar9;
                                }
                                uVar16 = local_518[0][1];
                                if ((short)uVar16 < (short)iVar22) {
                                  iVar22 = (int)(short)uVar16;
                                }
                                if ((short)uVar55 < (short)uVar16) {
                                  uVar55 = uVar16;
                                }
                                uVar6 = local_518[0][2];
                                uVar52 = local_518[0][5];
                                if ((short)uVar6 < (short)uVar61) {
                                  uVar61 = uVar6;
                                }
                                if ((short)uVar64 < (short)uVar6) {
                                  uVar64 = uVar6;
                                }
                                if ((short)uVar52 < (short)uVar63) {
                                  uVar63 = uVar52;
                                }
                                if ((short)uVar52 <= (short)uVar10) {
                                  uVar52 = uVar10;
                                }
                                iVar58 = (int)(short)uVar16 - (int)(short)uVar6;
                                if (iVar58 <= iVar20) {
                                  iVar58 = iVar20;
                                }
                                uVar16 = uVar13;
                                uVar9 = uVar15;
                                uVar10 = uVar52;
                                iVar20 = iVar58;
                                local_5e8._0_2_ = uVar14;
                                if (uVar6 != 0) {
                                  iVar19 = iVar19 + 1;
                                  lVar65 = (long)-(int)(short)uVar6;
                                  if (-1 < (short)uVar6) {
                                    lVar65 = (long)(short)uVar6;
                                  }
                                  local_570 = local_570 + (short)uVar6;
                                  local_578 = local_578 + lVar65;
                                  if (iVar23 != 0) {
                                    bVar69 = true;
                                  }
                                }
                              }
                            }
                            uVar49 = uVar49 + 1;
                          } while ((int)uVar49 <= (int)uVar24);
                          uVar59 = (uint)param_4[3];
                        }
                      }
                      else {
                        iVar58 = local_5a8 * 0x100;
                        if (uVar48 == 0) {
                          if (*(int *)(lVar28 + 0x108) < iVar58) goto LAB_001161c8;
LAB_00117518:
                          bVar69 = false;
                          goto LAB_00117036;
                        }
                        if (iVar58 <= *(int *)(lVar28 + 0x108)) {
LAB_001161c8:
                          if ((int)(*(uint *)(lVar28 + 0x10c) & 0xff00) <= iVar58)
                          goto LAB_00117518;
                        }
                        uVar13 = local_518[0][2];
                        if (uVar13 == 0) {
                          bVar69 = true;
                          goto LAB_00117036;
                        }
                        iVar19 = iVar19 + iVar18;
                        bVar69 = true;
                        local_570 = local_570 + (short)uVar13 * iVar18;
                        local_578 = local_578 +
                                    (int)((((uint)(ushort)((short)uVar13 >> 0xf) ^
                                           (int)(short)uVar13) -
                                           (uint)(ushort)((short)uVar13 >> 0xf) & 0xffff) * iVar18);
                      }
                      uVar13 = (ushort)iVar22;
                      local_5a8 = local_5a8 + 1;
                    } while ((int)local_5a8 <= (int)uVar59);
                    local_5c0 = (ushort)iVar20;
                    if (iVar19 < 1) goto LAB_00118f59;
                    iVar18 = (int)(long)(((double)local_578 * 10.0 + (double)iVar19 * 0.5) /
                                        (double)iVar19);
                    if (local_570 < 0) {
                      iVar18 = -iVar18;
                    }
                    *(int *)(param_2 + 0x58) = iVar18;
                  }
                  param_4[8] = uVar9;
                  param_4[9] = uVar55;
                  param_4[10] = uVar64;
                  param_4[0xe] = uVar12;
                  param_4[0xb] = uVar16;
                  param_4[0xf] = uVar13;
                  param_4[0xc] = local_5e8._0_2_;
                  param_4[0x10] = uVar61;
                  param_4[0xd] = uVar10;
                  param_4[0x12] = uVar47;
                  param_4[0x11] = uVar60;
                  param_4[0x13] = uVar63;
                  param_4[6] = local_5c0;
                }
                param_4[0x20] = uVar16;
                param_4[0x21] = local_5e8._0_2_;
                *(undefined8 *)(param_4 + 0x14) = *(undefined8 *)(param_4 + 8);
                *(undefined4 *)(param_4 + 0x18) = *(undefined4 *)(param_4 + 0xc);
                *(undefined8 *)(param_4 + 0x1a) = *(undefined8 *)(param_4 + 0xe);
                *(undefined4 *)(param_4 + 0x1e) = *(undefined4 *)(param_4 + 0x12);
                *(uint *)(param_4 + 4) = *(uint *)(param_4 + 4) & 0xffdf0000 | 0x200000;
                FontComputeInfoAccelerators(param_4);
                if (param_3 != 0) {
                  *(long **)(param_3 + 0x98) = plVar25;
                }
                uVar39 = *param_6;
                plVar7 = (long *)*plVar25;
                lVar28 = *plVar7;
                uVar12 = *(ushort *)(*(long *)(lVar28 + 8) + 0x88);
                uVar16 = 0x800;
                if (uVar12 != 0) {
                  uVar16 = uVar12;
                }
                ppuVar35 = (ushort **)FT_Get_Sfnt_Table(*(long *)(lVar28 + 8),2);
                ppuVar36 = (ushort **)FT_Get_Sfnt_Table(*(undefined8 *)(lVar28 + 8),5);
                iVar18 = FT_Get_PS_Font_Info(*(undefined8 *)(lVar28 + 8),local_518);
                ppuVar46 = (ushort **)0x0;
                ppuVar8 = ppuVar46;
                if (iVar18 == 0) {
                  ppuVar35 = ppuVar46;
                  ppuVar8 = local_518;
                  ppuVar36 = ppuVar46;
                }
                param_4[0x22] = 0;
                param_4[0x23] = 0;
                __strcpy_chk(&local_448,uVar39,0x400);
                iVar18 = FontParseXLFDName(&local_448,param_2,3);
                uVar48 = -(uint)(iVar18 == 0) & 0xfffffff2;
                iVar18 = uVar48 + 0x14;
                if (*(int *)(lVar28 + 0x10) == 0) {
                  iVar18 = uVar48 + 0x17;
                }
                bVar69 = false;
                iVar19 = iVar18 + 2;
                iVar20 = iVar19;
                if (local_564 != 0) {
                  bVar69 = ppuVar35 != (ushort **)0x0;
                  if (bVar69) {
                    iVar19 = iVar18 + 8;
                  }
                  iVar20 = iVar19 + 2;
                  if (ppuVar36 != (ushort **)0x0 || ppuVar8 != (ushort **)0x0) {
                    iVar20 = iVar19 + 5;
                  }
                }
                pvVar37 = malloc((long)iVar20 << 4);
                *(void **)(param_4 + 0x24) = pvVar37;
                if (pvVar37 != (void *)0x0) {
                  pvVar38 = calloc((long)iVar20,1);
                  *(void **)(param_4 + 0x28) = pvVar38;
                  if (pvVar38 != (void *)0x0) {
                    uVar39 = MakeAtom("FONT",4,1);
                    **(undefined8 **)(param_4 + 0x24) = uVar39;
                    puVar45 = (uint *)&local_448;
                    do {
                      puVar53 = puVar45;
                      uVar24 = *puVar53 + 0xfefefeff & ~*puVar53;
                      uVar48 = uVar24 & 0x80808080;
                      puVar45 = puVar53 + 1;
                    } while (uVar48 == 0);
                    bVar70 = (uVar24 & 0x8080) == 0;
                    if (bVar70) {
                      uVar48 = uVar48 >> 0x10;
                    }
                    if (bVar70) {
                      puVar45 = (uint *)((long)puVar53 + 6);
                    }
                    uVar39 = MakeAtom(&local_448,
                                      (long)puVar45 +
                                      ((-3 - (ulong)CARRY1((byte)uVar48,(byte)uVar48)) -
                                      (long)&local_448),1,uVar48 & 0xffffff00);
                    *(undefined8 *)(*(long *)(param_4 + 0x24) + 8) = uVar39;
                    **(undefined **)(param_4 + 0x28) = 1;
                    if ((local_448 != '\0') && (cStack_447 != '\0')) {
                      sVar27 = 7;
                      pcVar33 = &cStack_447;
                      pcVar26 = "FOUNDRY";
                      lVar65 = 1;
                      do {
                        local_600 = (int)lVar65;
                        pcVar50 = pcVar33;
                        if (local_600 == 0xe) {
                          if ((cStack_447 == '[') || (cStack_447 == '\0')) {
                            iVar18 = 0;
                          }
                          else {
                            do {
                              pcVar1 = pcVar50 + 1;
                              pcVar50 = pcVar50 + 1;
                              if (*pcVar1 == '\0') break;
                            } while (*pcVar1 != '[');
                            iVar18 = (int)pcVar50 - (int)pcVar33;
                          }
                          uVar39 = MakeAtom(pcVar26,sVar27,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65 * 0x10) = uVar39;
LAB_00117a98:
                          uVar39 = MakeAtom(pcVar33,iVar18,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar65 * 0x10) = uVar39;
                          local_5d0 = local_600 + 1;
                          *(undefined *)(*(long *)(param_4 + 0x28) + lVar65) = 1;
                          if (lVar65 == 0xe) goto LAB_00118aa8;
                        }
                        else {
                          if ((cStack_447 != '-') && (cStack_447 != '\0')) {
                            do {
                              pcVar1 = pcVar50 + 1;
                              pcVar50 = pcVar50 + 1;
                              if (*pcVar1 == '\0') break;
                            } while (*pcVar1 != '-');
                          }
                          uVar39 = MakeAtom(pcVar26,sVar27,1);
                          lVar66 = lVar65 * 0x10;
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar66) = uVar39;
                          if (false) {
switchD_001179b0_caseD_b:
                            iVar18 = (int)pcVar50 - (int)pcVar33;
                            goto LAB_00117a98;
                          }
                          switch(local_600) {
                          case 7:
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
                                 (long)(int)(ABS(*(double *)(param_2 + 0x20)) + 0.5);
                            break;
                          case 8:
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
                                 (long)(int)(ABS(*(double *)(param_2 + 0x40)) * 10.0 + 0.5);
                            break;
                          case 9:
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
                                 (long)*(int *)(param_2 + 0x50);
                            break;
                          case 10:
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
                                 (long)*(int *)(param_2 + 0x54);
                            break;
                          default:
                            goto switchD_001179b0_caseD_b;
                          case 0xc:
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
                                 (long)*(int *)(param_2 + 0x58);
                          }
                        }
                        pcVar33 = pcVar50 + 1;
                        lVar65 = lVar65 + 1;
                        pcVar26 = (&PTR_s_FOUNDRY_0013d800)[local_600];
                        sVar27 = strlen(pcVar26);
                        cStack_447 = *pcVar33;
                      } while( true );
                    }
                    local_600 = 3;
                    lVar65 = 0x30;
                    lVar66 = 0x20;
                    local_5f0 = 3;
                    lVar40 = 0x10;
                    local_5d0 = 1;
                    goto LAB_00117b76;
                  }
                  iVar21 = 0x50;
                  free(pvVar37);
                  bVar68 = true;
                  goto LAB_00116d18;
                }
              }
LAB_00116d0a:
              bVar68 = true;
              iVar21 = 0x50;
            }
            else {
              bVar68 = true;
            }
          }
        }
        else {
          iVar21 = 0x53;
          ErrorF("FreeType: couldn\'t open face %s: %d\n",puVar29,iVar18);
          free((void *)*__ptr);
          puVar67 = (undefined8 *)0x0;
          free(__ptr);
          bVar68 = true;
        }
      }
      goto LAB_00116d18;
    }
    puVar67 = (undefined8 *)0x0;
    iVar21 = 0x53;
    fwrite("ScaleWitdh needs plus.\n",1,0x17,_stderr);
    bVar68 = true;
    goto LAB_0011565d;
  }
LAB_001156d8:
  iVar21 = 0x50;
  goto LAB_001156bc;
LAB_00118aa8:
  local_600 = local_600 + 3;
  lVar40 = (long)local_5d0 * 0x10;
  lVar66 = lVar40 + 0x10;
  local_5f0 = (long)local_600;
  lVar65 = lVar40 + 0x20;
LAB_00117b76:
  uVar39 = MakeAtom("RAW_PIXEL_SIZE",0xe,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar40) = uVar39;
  *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar40) = 1000;
  uVar39 = MakeAtom("RAW_POINT_SIZE",0xe,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar66) = uVar39;
  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) =
       (long)(72270.0 / (double)*(int *)(param_2 + 0x54) + 0.5);
  if (*(int *)(lVar28 + 0x10) == 0) {
    uVar39 = MakeAtom("RAW_AVERAGE_WIDTH",0x11,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = (long)(int)local_558;
    local_600 = local_5d0 + 3;
    local_5f0 = (long)local_600;
    lVar65 = local_5f0 << 4;
  }
  local_5d0 = local_600 + 1;
  local_5e8 = (double)(long)local_5d0;
  lVar66 = (long)local_5e8 * 0x10;
  if (local_564 == 0) {
    lVar54 = lVar66;
    if (*(int *)(lVar28 + 0x10) == 0) {
LAB_001187f1:
      uVar39 = MakeAtom("RAW_ASCENT",10,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) =
           (long)(((double)(int)*(short *)(*(long *)(lVar28 + 8) + 0x8a) / (double)uVar16) * 1000.0)
      ;
      local_600 = local_5d0 + 1;
      lVar42 = (long)local_600;
      local_5f0 = (long)local_5e8;
      lVar40 = lVar42 << 4;
      lVar65 = lVar54;
      lVar66 = lVar54;
      lVar54 = lVar40;
      local_5e8 = (double)lVar42;
      iVar18 = local_600;
      if (local_564 != 0) goto LAB_0011897a;
      goto LAB_0011887f;
    }
  }
  else {
    uVar39 = MakeAtom("FONT_ASCENT",0xb,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = (long)(short)param_4[0x20];
    lVar40 = lVar66 + 0x10;
    local_5d0 = local_600 + 2;
    local_5e8 = (double)(long)local_5d0;
    lVar65 = lVar66;
    lVar54 = lVar40;
    iVar18 = local_5d0;
    if (*(int *)(lVar28 + 0x10) == 0) goto LAB_001187f1;
LAB_0011897a:
    local_5d0 = iVar18;
    local_5f0 = (long)local_5e8;
    uVar39 = MakeAtom("FONT_DESCENT",0xc,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar66) = uVar39;
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) = (long)(short)param_4[0x21];
    local_600 = local_5d0 + 1;
    lVar42 = (long)local_600;
    lVar54 = lVar42 << 4;
    lVar65 = lVar40;
LAB_0011887f:
    iVar18 = local_5d0;
    if (*(int *)(lVar28 + 0x10) == 0) {
      uVar39 = MakeAtom("RAW_DESCENT",0xb,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) =
           (long)-(((double)(int)*(short *)(*(long *)(lVar28 + 8) + 0x8c) / (double)uVar16) * 1000.0
                  );
      local_5d0 = local_600 + 1;
      lVar65 = lVar54;
      lVar54 = (long)local_5d0 << 4;
      local_5f0 = lVar42;
      local_5e8 = (double)(long)local_5d0;
    }
    else {
      local_5d0 = local_600;
      local_600 = iVar18;
      local_5e8 = (double)lVar42;
    }
  }
  lVar66 = local_5f0;
  iVar18 = FTGetEnglishName(*(undefined8 *)(lVar28 + 8),0,&local_448,0x400);
  puVar45 = (uint *)&local_448;
  puVar53 = (uint *)&local_448;
  if (iVar18 < 0) {
    lVar40 = lVar54;
    if (ppuVar8 == (ushort **)0x0) {
      iVar18 = FTGetEnglishName(*(undefined8 *)(lVar28 + 8),4,&local_448,0x400);
      if (iVar18 < 0) goto LAB_00117dd5;
    }
    else {
      puVar45 = (uint *)ppuVar8[1];
      if (puVar45 != (uint *)0x0) {
        sVar27 = strlen((char *)puVar45);
        iVar18 = (int)sVar27;
        goto LAB_00117c69;
      }
      iVar18 = FTGetEnglishName(*(undefined8 *)(lVar28 + 8),4,&local_448,0x400);
      if (-1 < iVar18) goto LAB_00117d33;
LAB_00118a26:
      puVar53 = (uint *)ppuVar8[2];
      if (puVar53 == (uint *)0x0) goto LAB_00117dd5;
      sVar27 = strlen((char *)puVar53);
      iVar18 = (int)sVar27;
      lVar40 = lVar54;
    }
LAB_00117d33:
    lVar66 = local_5f0;
    lVar54 = lVar40;
    if (0 < iVar18) {
      uVar39 = MakeAtom("FACE_NAME",9,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      uVar39 = MakeAtom(puVar53,iVar18,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = uVar39;
      local_5f0 = (long)local_5e8;
      *(undefined *)(*(long *)(param_4 + 0x28) + lVar66) = 1;
      local_600 = local_5d0;
      local_5e8 = (double)(long)(local_5d0 + 1);
      lVar54 = (long)local_5e8 << 4;
      lVar65 = lVar40;
      local_5d0 = local_5d0 + 1;
    }
  }
  else {
LAB_00117c69:
    if (0 < iVar18) {
      uVar39 = MakeAtom("COPYRIGHT",9,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      uVar39 = MakeAtom(puVar45,iVar18,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = uVar39;
      local_5f0 = (long)local_5e8;
      *(undefined *)(*(long *)(param_4 + 0x28) + lVar66) = 1;
      local_600 = local_5d0;
      local_5e8 = (double)(long)(local_5d0 + 1);
      lVar65 = lVar54;
      lVar54 = (long)local_5e8 << 4;
      local_5d0 = local_5d0 + 1;
    }
    iVar18 = FTGetEnglishName(*(undefined8 *)(lVar28 + 8),4,&local_448,0x400);
    lVar40 = lVar54;
    if (-1 < iVar18) goto LAB_00117d33;
    if (ppuVar8 != (ushort **)0x0) goto LAB_00118a26;
  }
LAB_00117dd5:
  lVar66 = local_5f0;
  puVar45 = (uint *)FT_Get_Postscript_Name(*(undefined8 *)(lVar28 + 8));
  if (puVar45 == (uint *)0x0) {
LAB_00117f88:
    iVar18 = FTGetEnglishName(*(undefined8 *)(lVar28 + 8),6,&local_448,0x400);
    puVar45 = (uint *)&local_448;
    if (-1 < iVar18) goto LAB_00117e0a;
    if ((ppuVar8 != (ushort **)0x0) && (puVar45 = (uint *)ppuVar8[2], puVar45 != (uint *)0x0)) {
      sVar27 = strlen((char *)puVar45);
      iVar18 = (int)sVar27;
      goto LAB_00117e0a;
    }
  }
  else {
    sVar27 = strlen((char *)puVar45);
    iVar18 = (int)sVar27;
    if (iVar18 < 0) goto LAB_00117f88;
LAB_00117e0a:
    if (0 < iVar18) {
      uVar39 = MakeAtom("_ADOBE_POSTSCRIPT_FONTNAME",0x1a,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      uVar39 = MakeAtom(puVar45,iVar18,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = uVar39;
      local_5f0 = (long)local_5e8;
      *(undefined *)(*(long *)(param_4 + 0x28) + lVar66) = 1;
      local_600 = local_5d0;
      local_5e8 = (double)(long)(local_5d0 + 1);
      lVar65 = lVar54;
      lVar54 = (long)local_5e8 << 4;
    }
  }
  local_618 = local_600 + 2;
  if (bVar69) {
    uVar39 = MakeAtom("SUBSCRIPT_SIZE",0xe,1);
    dVar72 = (double)uVar16;
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
    dVar71 = ((double)(int)*(short *)((long)ppuVar35 + 0xc) / dVar72) * *(double *)(param_2 + 0x20)
             + 0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)dVar71 & 0x8000000000000000 |
                       (ulong)((double)(long)dVar71 -
                              (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000)
                              ));
    }
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = (long)(int)dVar71;
    uVar39 = MakeAtom("SUBSCRIPT_X",0xb,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar54) = uVar39;
    dVar71 = ((double)(int)*(short *)((long)ppuVar35 + 0xe) / dVar72) * *(double *)(param_2 + 8) +
             0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)dVar71 & 0x8000000000000000 |
                       (ulong)((double)(long)dVar71 -
                              (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000)
                              ));
    }
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar54) = (long)(int)dVar71;
    uVar39 = MakeAtom("SUBSCRIPT_Y",0xb,1);
    lVar66 = (long)local_618 * 0x10;
    *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar66) = uVar39;
    dVar71 = ((double)(int)*(short *)(ppuVar35 + 2) / dVar72) * *(double *)(param_2 + 0x20) + 0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)dVar71 & 0x8000000000000000 |
                       (ulong)((double)(long)dVar71 -
                              (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000)
                              ));
    }
    *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar66) = (long)(int)dVar71;
    uVar39 = MakeAtom("SUPERSCRIPT_SIZE",0x10,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x10 + lVar66) = uVar39;
    dVar71 = ((double)(int)*(short *)((long)ppuVar35 + 0x14) / dVar72) * *(double *)(param_2 + 0x20)
             + 0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)dVar71 & 0x8000000000000000 |
                       (ulong)((double)(long)dVar71 -
                              (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000)
                              ));
    }
    *(long *)(*(long *)(param_4 + 0x24) + lVar66 + 0x18) = (long)(int)dVar71;
    uVar39 = MakeAtom("SUPERSCRIPT_X",0xd,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x20 + lVar66) = uVar39;
    dVar71 = ((double)(int)*(short *)((long)ppuVar35 + 0x16) / dVar72) * *(double *)(param_2 + 8) +
             0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)dVar71 & 0x8000000000000000 |
                       (ulong)((double)(long)dVar71 -
                              (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000)
                              ));
    }
    *(long *)(*(long *)(param_4 + 0x24) + lVar66 + 0x28) = (long)(int)dVar71;
    uVar39 = MakeAtom("SUPERSCRIPT_Y",0xd,1);
    *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x30 + lVar66) = uVar39;
    dVar71 = ((double)(int)*(short *)(ppuVar35 + 3) / dVar72) * *(double *)(param_2 + 0x20) + 0.5;
    if (ABS(dVar71) < 4503599627370496.0) {
      dVar71 = (double)((ulong)((double)(long)dVar71 -
                               (double)(-(ulong)(dVar71 < (double)(long)dVar71) & 0x3ff0000000000000
                                       )) | (ulong)dVar71 & 0x8000000000000000);
    }
    lVar65 = lVar66 + 0x40;
    lVar54 = lVar66 + 0x50;
    *(long *)(*(long *)(param_4 + 0x24) + lVar66 + 0x38) = (long)(int)dVar71;
    local_618 = local_600 + 8;
    local_5f0 = (long)(local_600 + 6);
    local_5e8 = (double)(long)(local_600 + 7);
    local_600 = local_600 + 6;
LAB_00118479:
    if (ppuVar36 != (ushort **)0x0 || ppuVar8 != (ushort **)0x0) {
      dVar72 = (double)uVar16;
      dVar71 = *(double *)(param_2 + 0x20);
      if (ppuVar36 == (ushort **)0x0) {
        dVar73 = ((double)-(int)*(short *)((long)ppuVar8 + 0x32) / dVar72) * dVar71 + 0.5;
        if (ABS(dVar73) < 4503599627370496.0) {
          dVar73 = (double)((ulong)dVar73 & 0x8000000000000000 |
                           (ulong)((double)(long)dVar73 -
                                  (double)(-(ulong)(dVar73 < (double)(long)dVar73) &
                                          0x3ff0000000000000)));
        }
        uVar48 = (uint)*(ushort *)((long)ppuVar8 + 0x34);
      }
      else {
        dVar73 = ((double)-(int)*(short *)(ppuVar36 + 2) / dVar72) * dVar71 + 0.5;
        if (ABS(dVar73) < 4503599627370496.0) {
          dVar73 = (double)((ulong)dVar73 & 0x8000000000000000 |
                           (ulong)((double)(long)dVar73 -
                                  (double)(-(ulong)(dVar73 < (double)(long)dVar73) &
                                          0x3ff0000000000000)));
        }
        uVar48 = (uint)*(short *)((long)ppuVar36 + 0x12);
      }
      dVar71 = ((double)(int)uVar48 / dVar72) * dVar71 + 0.5;
      if (ABS(dVar71) < 4503599627370496.0) {
        dVar71 = (double)((ulong)((double)(long)dVar71 -
                                 (double)(-(ulong)(dVar71 < (double)(long)dVar71) &
                                         0x3ff0000000000000)) | (ulong)dVar71 & 0x8000000000000000);
      }
      uVar39 = MakeAtom("UNDERLINE_THICKNESS",0x13,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
      lVar66 = 1;
      if (0 < (int)dVar71) {
        lVar66 = (long)(int)dVar71;
      }
      *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = lVar66;
      uVar39 = MakeAtom("UNDERLINE_POSITION",0x12,1);
      *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar54) = uVar39;
      *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar54) = (long)(int)dVar73;
      local_5f0 = (long)local_618;
      lVar65 = local_5f0 * 0x10;
      if ((ppuVar36 == (ushort **)0x0) || (plVar7[4] != plVar7[7])) {
        lVar54 = lVar65 + 0x10;
        iVar18 = local_618 + 1;
        local_618 = local_618 + 2;
        local_5e8 = (double)(long)iVar18;
      }
      else {
        uVar39 = MakeAtom("ITALIC_ANGLE",0xc,1);
        *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
        *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = ((long)ppuVar36[1] >> 10) + 0x1680;
        local_5f0 = (long)(local_600 + 3);
        lVar65 = local_5f0 * 0x10;
        local_5e8 = (double)(long)(local_600 + 4);
        lVar54 = lVar65 + 0x10;
        local_618 = local_600 + 5;
      }
    }
  }
  else if (local_564 != 0) goto LAB_00118479;
  uVar39 = MakeAtom("FONT_TYPE",9,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar65) = uVar39;
  pcVar33 = (char *)FT_Get_X11_Font_Format(*(undefined8 *)(lVar28 + 8));
  sVar27 = strlen(pcVar33);
  uVar39 = MakeAtom(pcVar33,sVar27,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar65) = uVar39;
  *(undefined *)(*(long *)(param_4 + 0x28) + local_5f0) = 1;
  uVar39 = MakeAtom("RASTERIZER_NAME",0xf,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar54) = uVar39;
  uVar39 = MakeAtom("FreeType",10,1);
  *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar54) = uVar39;
  *(undefined *)(*(long *)(param_4 + 0x28) + (long)local_5e8) = 1;
  *(int *)(param_4 + 0x22) = local_618;
LAB_00116d18:
  if (local_5f8 != (char *)0x0) {
    free(local_5f8);
  }
LAB_0011565d:
  free(puVar29);
  free(local_640);
  if (!bVar68) goto LAB_00115676;
  if (((puVar67 != (undefined8 *)0x0) && (*plVar25 == 0)) && (puVar67[3] == 0)) {
    FUN_00111d60(puVar67);
  }
LAB_001156bc:
  FUN_00111e20(plVar25);
LAB_00115676:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar21;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00119660(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                 undefined8 param_5,undefined8 param_6)

{
  int iVar1;
  long in_FS_OFFSET;
  undefined auStack_48 [8];
  int local_40;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FUN_00111c10(param_1,0,param_2,0,0,auStack_48);
  if (iVar1 == 0x55) {
    local_40 = local_40 << 3;
    FUN_001152e0(param_5,param_6,0,param_2,auStack_48,param_3);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FUN_001196f0(undefined8 param_1,long *param_2,undefined8 param_3,undefined8 param_4,
                undefined8 param_5,undefined8 param_6,undefined4 param_7,undefined4 param_8)

{
  int iVar1;
  long lVar2;
  long in_FS_OFFSET;
  undefined local_58 [24];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = CreateFontRec();
  if (lVar2 == 0) {
    iVar1 = 0x50;
  }
  else {
    iVar1 = FUN_00111c10(param_1,lVar2,lVar2 + 8,param_7,param_8,local_58);
    if (iVar1 == 0x55) {
      iVar1 = FUN_001152e0(param_5,param_6,lVar2,lVar2 + 8,local_58,param_4);
      if (iVar1 == 0x55) {
        *param_2 = lVar2;
        goto LAB_0011976f;
      }
    }
    DestroyFontRec(lVar2);
  }
LAB_0011976f:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FreeTypeRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&PTR_DAT_0013e900);
  FontFileRegisterRenderer(&PTR_DAT_0013e938);
  FontFileRegisterRenderer(&PTR_DAT_0013e970);
  FontFileRegisterRenderer(&PTR_DAT_0013e9a8);
  FontFileRegisterRenderer(&PTR_DAT_0013e9e0);
  FontFileRegisterRenderer(&PTR_DAT_0013ea18);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0013e880,0xfffffff6);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0013e8b8,0xfffffff6);
  return;
}



undefined8
FUN_00119860(undefined8 param_1,uint param_2,uint param_3,uint param_4,undefined8 *param_5)

{
  int iVar1;
  int iVar2;
  undefined8 uVar3;
  int iVar4;
  long in_FS_OFFSET;
  ushort local_58;
  ushort uStack_56;
  short sStack_54;
  ushort uStack_52;
  undefined8 uStack_50;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FT_Get_Sfnt_Name_Count();
  if (0 < iVar1) {
    iVar4 = 0;
    do {
      iVar2 = FT_Get_Sfnt_Name(param_1,iVar4,&local_58);
      if ((((iVar2 == 0) && (uStack_52 == param_2)) && (local_58 == param_3)) &&
         ((param_4 == 0xffffffff || (uStack_56 == param_4)))) {
        if (local_58 < 2) {
          if (sStack_54 == 0) goto LAB_0011990e;
        }
        else if ((local_58 != 3) || ((sStack_54 - 0x409U & 0xfbff) != 0)) {
LAB_0011990e:
          param_5[2] = local_48;
          uVar3 = 1;
          *param_5 = CONCAT26(uStack_52,CONCAT24(sStack_54,CONCAT22(uStack_56,local_58)));
          param_5[1] = uStack_50;
          goto LAB_00119932;
        }
      }
      iVar4 = iVar4 + 1;
    } while (iVar1 != iVar4);
  }
  uVar3 = 0;
LAB_00119932:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



char FTtoXReturnCode(int param_1)

{
  return (param_1 != 0x40) * '\x03' + 'P';
}



int FTGetEnglishName(undefined8 param_1,ulong param_2,undefined *param_3,int param_4)

{
  int iVar1;
  ulong uVar2;
  undefined uVar3;
  undefined *puVar4;
  long in_FS_OFFSET;
  bool bVar5;
  undefined auStack_48 [8];
  void *local_40;
  int local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FUN_00119860(param_1,param_2,3,1,auStack_48);
  if ((iVar1 == 0) &&
     (iVar1 = FUN_00119860(param_1,param_2 & 0xffffffff,0,0xffffffff,auStack_48), iVar1 == 0)) {
    iVar1 = FUN_00119860(param_1,param_2 & 0xffffffff,1,0,auStack_48);
    if (iVar1 == 0) {
      iVar1 = -1;
    }
    else {
      iVar1 = local_38;
      if (param_4 <= local_38) {
        iVar1 = param_4 + -1;
      }
      memcpy(param_3,local_40,(long)iVar1);
      param_3[iVar1] = 0;
    }
  }
  else {
    if ((local_38 < 1) || (param_4 < 2)) {
      iVar1 = 0;
    }
    else {
      uVar2 = 0;
      puVar4 = param_3;
      do {
        param_3 = puVar4 + 1;
        uVar3 = 0x3f;
        if (*(char *)((long)local_40 + uVar2 * 2) == '\0') {
          uVar3 = *(undefined *)((long)local_40 + uVar2 * 2 + 1);
        }
        *puVar4 = uVar3;
        iVar1 = (int)uVar2 + 1;
      } while ((uVar2 != local_38 - 1U >> 1) &&
              (bVar5 = uVar2 != param_4 - 2, uVar2 = uVar2 + 1, puVar4 = param_3, bVar5));
    }
    *param_3 = 0;
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_00119ae0(undefined8 *param_1,char *param_2,char *param_3)

{
  undefined4 uVar1;
  undefined8 uVar2;
  int iVar3;
  uint uVar4;
  ulong uVar5;
  undefined8 *puVar6;
  int iVar7;
  char *pcVar8;
  undefined4 uVar9;
  undefined **ppuVar10;
  long in_FS_OFFSET;
  char *local_50;
  char *local_48;
  long local_40;
  
  ppuVar10 = &PTR_s_FaceNumber_0013d990;
  pcVar8 = "FontFile";
  iVar7 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  while (iVar3 = strcasecmp(pcVar8,param_2), iVar3 != 0) {
    iVar7 = iVar7 + 1;
    if (iVar7 == 0x11) {
      pcVar8 = "truetype font : invalid record name \"%s.\"\n";
      goto LAB_00119b48;
    }
    pcVar8 = *ppuVar10;
    ppuVar10 = ppuVar10 + 2;
  }
  uVar1 = (&DAT_0013d988)[(long)iVar7 * 4];
  uVar9 = 0;
  switch(uVar1) {
  case 0:
    uVar5 = strtol(param_3,&local_48,0);
    if (*local_48 != '\0') {
      pcVar8 = "truetype font property : %s record needs integer value.\n";
LAB_00119b48:
      uVar9 = 0xffffffff;
      __fprintf_chk(_stderr,1,pcVar8,param_2);
      goto LAB_00119b64;
    }
    local_50 = (char *)(uVar5 & 0xffffffff);
    uVar9 = uVar1;
    break;
  case 1:
    local_50 = (char *)strtod(param_3,&local_48);
    if (*local_48 != '\0') {
      pcVar8 = "truetype font property : %s record needs floating point value.\n";
      goto LAB_00119b48;
    }
    break;
  case 2:
    iVar3 = strcasecmp(param_3,"yes");
    if (((((iVar3 == 0) || (iVar3 = strcasecmp(param_3,"y"), iVar3 == 0)) ||
         (iVar3 = strcasecmp(param_3,"on"), iVar3 == 0)) ||
        ((iVar3 = strcasecmp(param_3,"true"), iVar3 == 0 ||
         (iVar3 = strcasecmp(param_3,"t"), iVar3 == 0)))) ||
       (iVar3 = strcasecmp(param_3,"ok"), iVar3 == 0)) {
      uVar4 = 0xffffffff;
    }
    else {
      uVar4 = strcasecmp(param_3,"no");
      if (((uVar4 != 0) && (uVar4 = strcasecmp(param_3,"n"), uVar4 != 0)) &&
         ((uVar4 = strcasecmp(param_3,"off"), uVar4 != 0 &&
          ((uVar4 = strcasecmp(param_3,"false"), uVar4 != 0 &&
           (uVar4 = strcasecmp(param_3,"f"), uVar4 != 0)))))) {
        uVar4 = strcasecmp(param_3,"bad");
        pcVar8 = "truetype font property : %s record needs boolean value.\n";
        if (uVar4 != 0) goto LAB_00119b48;
      }
    }
    local_50 = (char *)(ulong)uVar4;
    break;
  case 3:
    local_50 = strdup(param_3);
    if (local_50 != (char *)0x0) break;
    goto LAB_00119dd0;
  case 0xffffffff:
    if (*param_3 != '\0') {
      __fprintf_chk(_stderr,1,"truetype font property : %s record needs void.\n",param_2);
      uVar9 = uVar1;
    }
  }
  puVar6 = (undefined8 *)malloc(0x18);
  if (puVar6 == (undefined8 *)0x0) {
LAB_00119dd0:
    uVar9 = 0xffffffff;
    fwrite("truetype font property : cannot allocate memory.\n",1,0x31,_stderr);
  }
  else {
    uVar2 = *param_1;
    *puVar6 = &PTR_s_FontFile_0013d980 + (long)iVar7 * 2;
    *param_1 = puVar6;
    puVar6[2] = uVar2;
    puVar6[1] = local_50;
  }
LAB_00119b64:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar9;
}



undefined8 SPropRecValList_new(undefined8 *param_1)

{
  *param_1 = 0;
  return 0;
}



undefined8 SPropRecValList_search_record(undefined8 *param_1,undefined8 *param_2,char *param_3)

{
  int iVar1;
  
  *param_2 = 0;
  param_1 = (undefined8 *)*param_1;
  while( true ) {
    if (param_1 == (undefined8 *)0x0) {
      return 0;
    }
    iVar1 = strcasecmp(*(char **)*param_1,param_3);
    if (iVar1 == 0) break;
    param_1 = (undefined8 *)param_1[2];
  }
  *param_2 = param_1;
  return 0xffffffff;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 SPropRecValList_add_by_font_cap(undefined8 param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  ushort **ppuVar4;
  void *__dest;
  char *pcVar5;
  char *__s;
  char *pcVar6;
  char *pcVar7;
  int iVar8;
  size_t sVar9;
  undefined **ppuVar10;
  
  pcVar3 = strrchr(param_2,0x3a);
  if (pcVar3 != (char *)0x0) {
    pcVar5 = pcVar3 + -1;
    if (param_2 <= pcVar5) {
      while (cVar1 = *pcVar5, cVar1 != ':') {
        ppuVar4 = __ctype_b_loc();
        if (((*(byte *)((long)*ppuVar4 + (long)cVar1 * 2 + 1) & 8) == 0) ||
           (pcVar5 = pcVar5 + -1, pcVar5 == param_2 + -1)) goto LAB_00119f50;
      }
      if (pcVar5 != pcVar3) {
        iVar8 = (int)pcVar3 - (int)pcVar5;
        __dest = malloc((long)iVar8);
        sVar9 = (size_t)(iVar8 + -1);
        memcpy(__dest,pcVar5 + 1,sVar9);
        *(undefined *)((long)__dest + sVar9) = 0;
        FUN_00119ae0(param_1,"FaceNumber",__dest);
        free(__dest);
        pcVar3 = pcVar5;
      }
    }
LAB_00119f50:
    if (param_2 < pcVar3) {
      do {
        while( true ) {
          pcVar5 = strchr(param_2,0x3a);
          sVar9 = (long)pcVar5 - (long)param_2;
          if ((long)sVar9 < 1) break;
          __s = (char *)malloc(sVar9 + 1);
          memcpy(__s,param_2,sVar9);
          pcVar7 = __s + sVar9;
          *pcVar7 = '\0';
          pcVar6 = strchr(__s,0x3d);
          if (pcVar6 != (char *)0x0) {
            *pcVar6 = '\0';
            pcVar7 = pcVar6 + 1;
          }
          ppuVar10 = &PTR_DAT_0013d890;
          pcVar6 = "fn";
          iVar8 = 0;
          while (iVar2 = strcasecmp(pcVar6,__s), iVar2 != 0) {
            iVar8 = iVar8 + 1;
            if (iVar8 == 0xf) goto LAB_00119ffd;
            pcVar6 = *ppuVar10;
            ppuVar10 = ppuVar10 + 2;
          }
          iVar8 = FUN_00119ae0(param_1,(&PTR_s_FaceNumber_0013d888)[(long)iVar8 * 2],pcVar7);
          if (iVar8 != 0) {
LAB_00119ffd:
            fwrite("truetype font : Illegal Font Cap.\n",1,0x22,_stderr);
            return 0xffffffff;
          }
          param_2 = pcVar5 + 1;
          free(__s);
          if (pcVar3 <= param_2) {
            return 0;
          }
        }
        param_2 = pcVar5 + 1;
      } while (param_2 < pcVar3);
    }
  }
  return 0;
}



void FUN_0011a090(long param_1)

{
  void *__ptr;
  undefined8 *__ptr_00;
  int iVar1;
  void *__ptr_01;
  long lVar2;
  long lVar3;
  int iVar4;
  
  __ptr = *(void **)(param_1 + 0x98);
  __ptr_00 = *(undefined8 **)((long)__ptr + 0x38);
  free(*(void **)((long)__ptr + 0x18));
  __ptr_01 = *(void **)((long)__ptr + 0x28);
  if (__ptr_01 != (void *)0x0) {
    iVar1 = (((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1) *
            (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1);
    iVar4 = iVar1 + 0xfe;
    if (-1 < iVar1 + 0x7f) {
      iVar4 = iVar1 + 0x7f;
    }
    if (0 < iVar1) {
      lVar2 = 0;
      do {
        lVar3 = lVar2 * 8;
        lVar2 = lVar2 + 1;
        free(*(void **)((long)__ptr_01 + lVar3));
        __ptr_01 = *(void **)((long)__ptr + 0x28);
      } while ((int)lVar2 < iVar4 >> 7);
    }
  }
  free(__ptr_01);
  lVar2 = 0;
  if (0 < *(int *)((long)__ptr + 4)) {
    do {
      lVar3 = lVar2 + 1;
      free(*(void **)(*(long *)((long)__ptr + 0x10) + lVar2 * 0x18 + 0x10));
      lVar2 = lVar3;
    } while ((int)lVar3 < *(int *)((long)__ptr + 4));
  }
  free(*(void **)((long)__ptr + 0x10));
  if (__ptr_00 != (undefined8 *)0x0) {
    free((void *)*__ptr_00);
    free((void *)__ptr_00[1]);
    free(__ptr_00);
  }
  free(*(void **)(param_1 + 0x50));
  free(__ptr);
  return;
}



void FUN_0011a180(undefined8 param_1)

{
  FUN_0011a090();
  DestroyFontRec(param_1);
  return;
}



// WARNING: Type propagation algorithm not settling

undefined8
bdfReadFont(long param_1,undefined8 param_2,int param_3,int param_4,int param_5,int param_6)

{
  byte bVar1;
  ushort uVar2;
  ushort uVar3;
  short sVar4;
  undefined uVar5;
  byte bVar6;
  short sVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  int iVar14;
  byte *pbVar15;
  void *pvVar16;
  undefined8 *puVar17;
  void *pvVar18;
  void *pvVar19;
  ushort **ppuVar20;
  size_t sVar21;
  undefined *puVar22;
  long lVar23;
  long lVar24;
  long lVar25;
  long lVar26;
  ulong uVar27;
  ushort uVar28;
  uint uVar29;
  byte **ppbVar30;
  uint *puVar31;
  uint *puVar32;
  char cVar33;
  short sVar34;
  byte **ppbVar35;
  long *plVar36;
  int iVar37;
  uint uVar38;
  undefined8 uVar39;
  int iVar40;
  byte *pbVar41;
  byte *pbVar42;
  long lVar43;
  long in_FS_OFFSET;
  bool bVar44;
  bool bVar45;
  bool bVar46;
  byte bVar47;
  undefined local_1d98;
  undefined local_1d94;
  undefined local_1d90;
  undefined local_1d8c;
  int local_1d80;
  short *local_1d78;
  long *local_1d60;
  void *local_1d58;
  uint local_1d48;
  char *local_1d40;
  uint local_1d38;
  uint local_1d34;
  int local_1d24;
  int local_1d20;
  uint local_1cfc;
  uint local_1cf8;
  int local_1cf4;
  int local_1cf0;
  int local_1cec;
  int local_1ce8;
  undefined local_1ce4 [4];
  int local_1ce0;
  uint local_1cdc;
  short local_1cd8;
  short sStack_1cd6;
  short sStack_1cd4;
  short sStack_1cd2;
  undefined auStack_1cd0 [8];
  void *pvStack_1cc8;
  undefined8 local_1cb8 [2];
  undefined local_1ca8 [1024];
  float local_18a8;
  int local_18a4;
  int local_18a0;
  int local_189c;
  int local_1898;
  int local_1894;
  undefined8 *local_1890;
  undefined8 *local_1888;
  long local_1880;
  long local_1878;
  undefined8 *local_1870;
  undefined8 *local_1868;
  undefined8 *local_1860;
  undefined8 *local_1858;
  char local_1850;
  char local_184f;
  char local_184e;
  byte *local_1848 [256];
  byte *local_1048 [128];
  uint local_c48 [256];
  int local_848 [256];
  undefined local_448 [1032];
  long local_40;
  
  bVar47 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  *(undefined8 *)(param_1 + 0x98) = 0;
  puVar17 = local_1cb8;
  for (lVar25 = 0x8e; lVar25 != 0; lVar25 = lVar25 + -1) {
    *puVar17 = 0;
    puVar17 = puVar17 + 1;
  }
  bdfFileLineNum = 0;
  lVar25 = bdfGetLine(param_2,local_448,0x400);
  if (lVar25 == 0) {
LAB_0011a25c:
    bdfError("bad \'STARTFONT\'\n");
  }
  else {
    iVar8 = __isoc99_sscanf(lVar25,"STARTFONT %s",local_848);
    if ((iVar8 != 1) || (local_848[0] != 0x312e32)) goto LAB_0011a25c;
    lVar25 = bdfGetLine(param_2,local_448,0x400);
    if (lVar25 == 0) {
LAB_0011a2f8:
      bdfError("bad \'FONT\'\n");
    }
    else {
      iVar8 = __isoc99_sscanf(lVar25,&DAT_00132a56,local_1ca8);
      if (iVar8 != 1) goto LAB_0011a2f8;
      pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
      bVar44 = false;
      bVar45 = pbVar15 == (byte *)0x0;
      if (bVar45) {
LAB_0011a4d8:
        bdfError("missing \'SIZE\'\n");
      }
      else {
        lVar25 = 4;
        pbVar42 = pbVar15;
        pbVar41 = (byte *)0x1324cb;
        do {
          if (lVar25 == 0) break;
          lVar25 = lVar25 + -1;
          bVar44 = *pbVar42 < *pbVar41;
          bVar45 = *pbVar42 == *pbVar41;
          pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
          pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
        } while (bVar45);
        if ((!bVar44 && !bVar45) != bVar44) goto LAB_0011a4d8;
        iVar8 = __isoc99_sscanf(pbVar15,"SIZE %f%d%d",&local_18a8,&local_18a4,&local_18a0);
        if (iVar8 == 3) {
          if (((local_18a8 < 1.0) || (local_18a4 < 1)) || (local_18a0 < 1)) {
            bdfError("SIZE values must be > 0\n");
          }
          else {
            pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
            bVar44 = false;
            bVar45 = pbVar15 == (byte *)0x0;
            if (!bVar45) {
              lVar25 = 0xf;
              pbVar42 = (byte *)"FONTBOUNDINGBOX";
              do {
                if (lVar25 == 0) break;
                lVar25 = lVar25 + -1;
                bVar44 = *pbVar15 < *pbVar42;
                bVar45 = *pbVar15 == *pbVar42;
                pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
              } while (bVar45);
              if ((!bVar44 && !bVar45) == bVar44) {
                pvVar16 = calloc(1,0x40);
                if (pvVar16 == (void *)0x0) {
                  bdfError("Couldn\'t allocate bitmapFontRec (%d)\n",0x40);
                }
                else {
                  *(void **)(param_1 + 0x98) = pvVar16;
                  *(undefined8 *)((long)pvVar16 + 0x10) = 0;
                  *(undefined8 *)((long)pvVar16 + 0x18) = 0;
                  *(undefined8 *)((long)pvVar16 + 0x20) = 0;
                  *(undefined8 *)((long)pvVar16 + 0x28) = 0;
                  *(undefined8 *)((long)pvVar16 + 0x30) = 0;
                  puVar17 = (undefined8 *)calloc(1,0x78);
                  *(undefined8 **)((long)pvVar16 + 0x38) = puVar17;
                  if (puVar17 == (undefined8 *)0x0) {
                    bdfError("Couldn\'t allocate bitmapExtra (%d)\n",0x78);
                  }
                  else {
                    *puVar17 = 0;
                    puVar17[1] = 0;
                    pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
                    bVar44 = false;
                    bVar45 = pbVar15 == (byte *)0x0;
                    if (!bVar45) {
                      lVar25 = 0xf;
                      pbVar42 = pbVar15;
                      pbVar41 = (byte *)"STARTPROPERTIES";
                      do {
                        if (lVar25 == 0) break;
                        lVar25 = lVar25 + -1;
                        bVar44 = *pbVar42 < *pbVar41;
                        bVar45 = *pbVar42 == *pbVar41;
                        pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                        pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                      } while (bVar45);
                      cVar33 = (!bVar44 && !bVar45) - bVar44;
                      local_1d48 = (uint)cVar33;
                      if (cVar33 == '\0') {
                        iVar8 = __isoc99_sscanf(pbVar15,"STARTPROPERTIES %d",&local_1cd8);
                        if (iVar8 != 1) {
                          bdfError("bad \'STARTPROPERTIES\'\n");
                          goto LAB_0011a26a;
                        }
                        *(undefined8 *)(param_1 + 0x50) = 0;
                        *(undefined4 *)(param_1 + 0x4c) = 0;
                        pvVar18 = malloc((long)(CONCAT22(sStack_1cd6,local_1cd8) + 6));
                        *(void **)(param_1 + 0x58) = pvVar18;
                        if (pvVar18 == (void *)0x0) {
                          bdfError("Couldn\'t allocate stringProps (%d*%d)\n",
                                   CONCAT22(sStack_1cd6,local_1cd8) + 6,4);
                        }
                        else {
                          pvVar19 = calloc((long)(CONCAT22(sStack_1cd6,local_1cd8) + 6),0x10);
                          *(void **)(param_1 + 0x50) = pvVar19;
                          iVar8 = CONCAT22(sStack_1cd6,local_1cd8);
                          if (pvVar19 == (void *)0x0) {
                            bdfError("Couldn\'t allocate props (%d*%d)\n",iVar8 + 6,0x10);
                          }
                          else {
                            local_1d80 = iVar8 + -1;
                            if (0 < iVar8) {
                              do {
                                pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
                                bVar44 = false;
                                bVar45 = pbVar15 == (byte *)0x0;
                                if (bVar45) {
LAB_0011b5f0:
                                  bdfError("\"STARTPROPERTIES %d\" followed by only %d properties\n"
                                           ,CONCAT22(sStack_1cd6,local_1cd8),
                                           (CONCAT22(sStack_1cd6,local_1cd8) - local_1d80) + -1);
                                  goto LAB_0011a640;
                                }
                                lVar25 = 0xd;
                                pbVar42 = pbVar15;
                                pbVar41 = (byte *)"ENDPROPERTIES";
                                do {
                                  if (lVar25 == 0) break;
                                  lVar25 = lVar25 + -1;
                                  bVar44 = *pbVar42 < *pbVar41;
                                  bVar45 = *pbVar42 == *pbVar41;
                                  pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                  pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                                } while (bVar45);
                                if ((!bVar44 && !bVar45) == bVar44) goto LAB_0011b5f0;
                                bVar6 = *pbVar15;
                                if (bVar6 != 0) {
                                  ppuVar20 = __ctype_b_loc();
                                  do {
                                    if ((*(byte *)((long)*ppuVar20 + (ulong)bVar6 * 2 + 1) & 0x20)
                                        == 0) break;
                                    bVar6 = pbVar15[1];
                                    pbVar15 = pbVar15 + 1;
                                  } while (bVar6 != 0);
                                }
                                iVar8 = __isoc99_sscanf(pbVar15,"%s%s%s",local_1048,local_c48,
                                                        local_848);
                                if (iVar8 == 2) {
                                  if ((char)local_c48[0] == '\"') {
                                    *(undefined *)((long)pvVar18 + (long)(int)local_1d48) = 1;
                                    ppbVar30 = local_1048;
                                    do {
                                      ppbVar35 = ppbVar30;
                                      uVar9 = *(uint *)ppbVar35 + 0xfefefeff & ~*(uint *)ppbVar35;
                                      uVar10 = uVar9 & 0x80808080;
                                      ppbVar30 = (byte **)((long)ppbVar35 + 4);
                                    } while (uVar10 == 0);
                                    bVar44 = (uVar9 & 0x8080) == 0;
                                    if (bVar44) {
                                      uVar10 = uVar10 >> 0x10;
                                    }
                                    if (bVar44) {
                                      ppbVar30 = (byte **)((long)ppbVar35 + 6);
                                    }
                                    bVar44 = CARRY1((byte)uVar10,(byte)uVar10);
                                    goto LAB_0011a707;
                                  }
                                  iVar8 = bdfIsInteger(local_c48);
                                  if (iVar8 == 0) goto LAB_0011ba4b;
                                  *(undefined *)((long)pvVar18 + (long)(int)local_1d48) = 0;
                                  lVar25 = strtol((char *)local_c48,(char **)0x0,10);
                                  plVar36 = (long *)((long)(int)local_1d48 * 0x10 + (long)pvVar19);
                                  plVar36[1] = (long)(int)lVar25;
                                }
                                else {
                                  if (iVar8 != 3) {
                                    bdfError("missing \'%s\' parameter value\n",local_1048);
                                    goto LAB_0011a640;
                                  }
                                  if ((char)local_c48[0] != '\"') {
LAB_0011ba4b:
                                    bdfError("invalid \'%s\' parameter value\n",local_1048);
                                    goto LAB_0011a640;
                                  }
                                  *(undefined *)((long)pvVar18 + (long)(int)local_1d48) = 1;
                                  ppbVar30 = local_1048;
                                  do {
                                    ppbVar35 = ppbVar30;
                                    uVar9 = *(uint *)ppbVar35 + 0xfefefeff & ~*(uint *)ppbVar35;
                                    uVar10 = uVar9 & 0x80808080;
                                    ppbVar30 = (byte **)((long)ppbVar35 + 4);
                                  } while (uVar10 == 0);
                                  bVar44 = (uVar9 & 0x8080) == 0;
                                  if (bVar44) {
                                    uVar10 = uVar10 >> 0x10;
                                  }
                                  if (bVar44) {
                                    ppbVar30 = (byte **)((long)ppbVar35 + 6);
                                  }
                                  bVar44 = CARRY1((byte)uVar10,(byte)uVar10);
LAB_0011a707:
                                  lVar25 = bdfGetPropertyValue(pbVar15 + (long)ppbVar30 +
                                                                         ((-2 - (ulong)bVar44) -
                                                                         (long)local_1048));
                                  plVar36 = (long *)((long)(int)local_1d48 * 0x10 + (long)pvVar19);
                                  plVar36[1] = lVar25;
                                  if (lVar25 == 0) goto LAB_0011a640;
                                }
                                lVar25 = bdfForceMakeAtom(local_1048,0);
                                *plVar36 = lVar25;
                                if (lVar25 == 0) {
                                  bdfError("Empty property name.\n");
                                  goto LAB_0011a640;
                                }
                                iVar8 = bdfSpecialProperty(param_1,plVar36,
                                                           (int)*(char *)((long)pvVar18 +
                                                                         (long)(int)local_1d48),
                                                           local_1cb8);
                                local_1d48 = local_1d48 + (iVar8 == 0);
                                local_1d80 = local_1d80 + -1;
                              } while (local_1d80 != -1);
                            }
                            pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
                            bVar44 = false;
                            bVar45 = pbVar15 == (byte *)0x0;
                            if (!bVar45) {
                              lVar25 = 0xd;
                              pbVar42 = pbVar15;
                              pbVar41 = (byte *)"ENDPROPERTIES";
                              do {
                                if (lVar25 == 0) break;
                                lVar25 = lVar25 + -1;
                                bVar44 = *pbVar42 < *pbVar41;
                                bVar45 = *pbVar42 == *pbVar41;
                                pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                              } while (bVar45);
                              cVar33 = (!bVar44 && !bVar45) - bVar44;
                              local_1cfc = (uint)cVar33;
                              if (cVar33 == '\0') {
                                if ((local_1850 == '\0') || (local_184f == '\0')) {
                                  bdfError(
                                          "missing \'FONT_ASCENT\' or \'FONT_DESCENT\' properties\n"
                                          );
                                  goto LAB_0011a640;
                                }
                                if (*(long *)((long)pvVar16 + 0x38) != 0) {
                                  *(undefined2 *)(*(long *)((long)pvVar16 + 0x38) + 0x60) =
                                       *(undefined2 *)(param_1 + 0x48);
                                  *(undefined2 *)(*(long *)((long)pvVar16 + 0x38) + 0x62) =
                                       *(undefined2 *)(param_1 + 0x4a);
                                }
                                if (local_1888 == (undefined8 *)0x0) {
                                  uVar39 = bdfForceMakeAtom("POINT_SIZE",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1888 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  *local_1888 = uVar39;
                                  local_1888[1] = (long)(int)(local_18a8 * 10.0);
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                }
                                if (local_1890 == (undefined8 *)0x0) {
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  uVar39 = bdfForceMakeAtom("FONT",0);
                                  puVar17 = (undefined8 *)((long)pvVar19 + lVar25 * 0x10);
                                  *puVar17 = uVar39;
                                  iVar8 = bdfForceMakeAtom(local_1ca8,0);
                                  puVar17[1] = (long)iVar8;
                                  *(undefined *)((long)pvVar18 + lVar25) = 1;
                                  local_1890 = puVar17;
                                }
                                if (local_1860 == (undefined8 *)0x0) {
                                  uVar39 = bdfForceMakeAtom("WEIGHT",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1860 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                  *local_1860 = uVar39;
                                  local_1860[1] = 0xffffffffffffffff;
                                }
                                if ((local_1870 == (undefined8 *)0x0) && (local_18a4 == local_18a0))
                                {
                                  uVar39 = bdfForceMakeAtom("RESOLUTION",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1870 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  *local_1870 = uVar39;
                                  local_1870[1] = (long)(int)(((double)local_18a4 * 100.0) / 72.27);
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                }
                                if (local_1880 == 0) {
                                  uVar39 = bdfForceMakeAtom("RESOLUTION_X",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1870 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  local_1870[1] = (long)local_18a4;
                                  *local_1870 = uVar39;
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                }
                                if (local_1878 == 0) {
                                  uVar39 = bdfForceMakeAtom("RESOLUTION_Y",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1870 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  local_1870[1] = (long)local_18a0;
                                  *local_1870 = uVar39;
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                }
                                if (local_1868 == (undefined8 *)0x0) {
                                  uVar39 = bdfForceMakeAtom("X_HEIGHT",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  local_1868 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                  *local_1868 = uVar39;
                                  local_1868[1] = 0xffffffffffffffff;
                                }
                                if (local_1858 == (undefined8 *)0x0) {
                                  uVar39 = bdfForceMakeAtom("QUAD_WIDTH",0);
                                  lVar25 = (long)(int)local_1d48;
                                  local_1d48 = local_1d48 + 1;
                                  *(undefined *)((long)pvVar18 + lVar25) = 0;
                                  local_1858 = (undefined8 *)(lVar25 * 0x10 + (long)pvVar19);
                                  *local_1858 = uVar39;
                                  local_1858[1] = 0xffffffffffffffff;
                                }
                                lVar25 = *(long *)(param_1 + 0x98);
                                *(uint *)(param_1 + 0x4c) = local_1d48;
                                plVar36 = *(long **)(lVar25 + 0x38);
                                if (plVar36 == (long *)0x0) {
                                  local_1d60 = (long *)0x0;
                                }
                                else {
                                  local_1d60 = plVar36 + 2;
                                  plVar36[2] = 0;
                                  plVar36[3] = 0;
                                }
                                ppbVar30 = local_1848;
                                ppbVar35 = ppbVar30;
                                for (lVar26 = 0x100; lVar26 != 0; lVar26 = lVar26 + -1) {
                                  *ppbVar35 = (byte *)0x0;
                                  ppbVar35 = ppbVar35 + (ulong)bVar47 * -2 + 1;
                                }
                                *(undefined8 *)(lVar25 + 0x10) = 0;
                                lVar26 = bdfGetLine(param_2,local_848,0x400);
                                if ((lVar26 == 0) ||
                                   (iVar8 = __isoc99_sscanf(lVar26,"CHARS %d",&local_1cf8),
                                   iVar8 != 1)) {
                                  bdfError("bad \'CHARS\' in bdf file\n");
                                }
                                else if ((int)local_1cf8 < 1) {
                                  bdfError("invalid number of CHARS in BDF file\n");
                                }
                                else {
                                  if ((int)local_1cf8 < 0x5555556) {
                                    local_1d78 = (short *)calloc((long)(int)local_1cf8,0x18);
                                    if (local_1d78 == (short *)0x0) {
                                      bdfError("Couldn\'t allocate pCI (%d*%d)\n",local_1cf8,0x18);
                                      local_1848[0] = (byte *)0x0;
                                    }
                                    else {
                                      *(short **)(lVar25 + 0x10) = local_1d78;
                                      if (plVar36 != (long *)0x0) {
                                        pvVar18 = malloc((long)(int)local_1cf8 << 3);
                                        *plVar36 = (long)pvVar18;
                                        if (pvVar18 == (void *)0x0) {
                                          bdfError("Couldn\'t allocate glyphNames (%d*%d)\n",
                                                   local_1cf8,8);
                                          local_1848[0] = (byte *)0x0;
                                          goto LAB_0011b040;
                                        }
                                        pvVar18 = malloc((long)(int)local_1cf8 << 2);
                                        plVar36[1] = (long)pvVar18;
                                        if (pvVar18 == (void *)0x0) {
                                          bdfError("Couldn\'t allocate sWidth (%d *%d)\n",local_1cf8
                                                   ,4);
                                          goto LAB_0011a26a;
                                        }
                                      }
                                      pbVar15 = (byte *)bdfGetLine(param_2,local_848,0x400);
                                      *(undefined8 *)(param_1 + 8) = 0x10000000100;
                                      if ((int)local_1cf8 < 1) {
                                        local_1d24 = 0;
                                        uVar10 = 0;
LAB_0011baaf:
                                        if (local_1cf8 != uVar10) goto LAB_0011b814;
                                        local_1cf8 = local_1cfc;
                                        *(uint *)(lVar25 + 4) = local_1cfc;
                                        bVar44 = false;
                                        bVar45 = pbVar15 == (byte *)0x0;
                                        if (bVar45) {
LAB_0011b026:
                                          bdfError("missing \'ENDFONT\'\n");
                                        }
                                        else {
LAB_0011b85d:
                                          local_1d40 = "STARTCHAR";
                                          lVar26 = 9;
                                          pbVar42 = pbVar15;
                                          do {
                                            if (lVar26 == 0) break;
                                            lVar26 = lVar26 + -1;
                                            bVar44 = *pbVar42 < (byte)*local_1d40;
                                            bVar45 = *pbVar42 == *local_1d40;
                                            pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                            local_1d40 = (char *)((byte *)local_1d40 +
                                                                 (ulong)bVar47 * -2 + 1);
                                          } while (bVar45);
                                          bVar46 = false;
                                          bVar44 = (!bVar44 && !bVar45) == bVar44;
                                          if (bVar44) {
                                            bdfError("more characters than specified\n");
                                          }
                                          else {
                                            lVar26 = 7;
                                            pbVar42 = (byte *)"ENDFONT";
                                            do {
                                              if (lVar26 == 0) break;
                                              lVar26 = lVar26 + -1;
                                              bVar46 = *pbVar15 < *pbVar42;
                                              bVar44 = *pbVar15 == *pbVar42;
                                              pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                                              pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                            } while (bVar44);
                                            cVar33 = (!bVar46 && !bVar44) - bVar46;
                                            iVar8 = (int)cVar33;
                                            if (cVar33 != '\0') goto LAB_0011b026;
                                            if (local_1d24 == 0) {
                                              bdfWarning("No characters with valid encodings\n");
                                            }
                                            iVar40 = (((uint)*(ushort *)(param_1 + 0xe) -
                                                      (uint)*(ushort *)(param_1 + 0xc)) + 1) *
                                                     (((uint)*(ushort *)(param_1 + 10) -
                                                      (uint)*(ushort *)(param_1 + 8)) + 1);
                                            iVar14 = iVar40 + 0x7f;
                                            iVar40 = iVar40 + 0xfe;
                                            if (-1 < iVar14) {
                                              iVar40 = iVar14;
                                            }
                                            pvVar18 = calloc((long)(iVar40 >> 7),8);
                                            *(void **)(lVar25 + 0x28) = pvVar18;
                                            if (pvVar18 != (void *)0x0) {
                                              *(byte *)(param_1 + 0x12) =
                                                   *(byte *)(param_1 + 0x12) | 0x40;
                                              uVar27 = (ulong)*(ushort *)(param_1 + 0xc);
                                              iVar40 = 0;
                                              if (*(ushort *)(param_1 + 0xc) <=
                                                  *(ushort *)(param_1 + 0xe)) {
                                                do {
                                                  uVar2 = *(ushort *)(param_1 + 8);
                                                  if (ppbVar30[uVar27] == (byte *)0x0) {
                                                    *(byte *)(param_1 + 0x12) =
                                                         *(byte *)(param_1 + 0x12) & 0xbf;
                                                    iVar40 = iVar40 + 1 +
                                                             ((uint)*(ushort *)(param_1 + 10) -
                                                             (uint)uVar2);
                                                  }
                                                  else if (uVar2 <= *(ushort *)(param_1 + 10)) {
                                                    pbVar15 = ppbVar30[uVar27] +
                                                              (ulong)(uint)uVar2 * 8;
                                                    iVar14 = (uint)uVar2 - iVar40;
                                                    do {
                                                      lVar26 = *(long *)pbVar15;
                                                      if (lVar26 == 0) {
                                                        *(byte *)(param_1 + 0x12) =
                                                             *(byte *)(param_1 + 0x12) & 0xbf;
                                                      }
                                                      else {
                                                        iVar37 = iVar40 + 0x7f;
                                                        if (-1 < iVar40) {
                                                          iVar37 = iVar40;
                                                        }
                                                        plVar36 = (long *)(*(long *)(lVar25 + 0x28)
                                                                          + (long)(iVar37 >> 7) * 8)
                                                        ;
                                                        lVar24 = *plVar36;
                                                        if (lVar24 == 0) {
                                                          pvVar18 = calloc(0x80,8);
                                                          *plVar36 = (long)pvVar18;
                                                          lVar24 = *(long *)(*(long *)(lVar25 + 0x28
                                                                                      ) +
                                                                            (long)(iVar37 >> 7) * 8)
                                                          ;
                                                          if (lVar24 == 0) goto LAB_0011b040;
                                                        }
                                                        *(long *)(lVar24 + (long)(iVar40 % 0x80) * 8
                                                                 ) = lVar26;
                                                      }
                                                      iVar40 = iVar40 + 1;
                                                      pbVar15 = pbVar15 + 8;
                                                    } while ((uint)(iVar40 + iVar14) <=
                                                             (uint)*(ushort *)(param_1 + 10));
                                                  }
                                                  uVar27 = uVar27 + 1;
                                                } while ((uint)uVar27 <=
                                                         (uint)*(ushort *)(param_1 + 0xe));
                                              }
                                              do {
                                                if (*ppbVar30 != (byte *)0x0) {
                                                  free(*ppbVar30);
                                                }
                                                ppbVar30 = ppbVar30 + 1;
                                              } while (local_1048 != ppbVar30);
                                              if (local_184e != '\0') {
                                                uVar2 = *(ushort *)(param_1 + 0x10);
                                                uVar28 = uVar2 >> 8;
                                                if ((*(ushort *)(param_1 + 0xc) <= uVar28) &&
                                                   (uVar28 <= *(ushort *)(param_1 + 0xe))) {
                                                  uVar3 = *(ushort *)(param_1 + 8);
                                                  if ((uVar3 <= (uVar2 & 0xff)) &&
                                                     ((uVar2 & 0xff) <= *(ushort *)(param_1 + 10)))
                                                  {
                                                    uVar10 = ((uint)(byte)uVar2 - (uint)uVar3) +
                                                             ((uint)uVar28 -
                                                             (uint)*(ushort *)(param_1 + 0xc)) *
                                                             (((uint)*(ushort *)(param_1 + 10) -
                                                              (uint)uVar3) + 1);
                                                    lVar25 = *(long *)(*(long *)((long)pvVar16 +
                                                                                0x28) +
                                                                      (ulong)(uVar10 >> 7) * 8);
                                                    if (lVar25 != 0) {
                                                      lVar25 = *(long *)(lVar25 + (ulong)(uVar10 & 
                                                  0x7f) * 8);
                                                  }
                                                  *(long *)((long)pvVar16 + 0x30) = lVar25;
                                                  }
                                                }
                                              }
                                              local_1d94 = (undefined)param_3;
                                              *(undefined *)(param_1 + 0x60) = local_1d94;
                                              local_1d8c = (undefined)param_4;
                                              *(undefined *)(param_1 + 0x61) = local_1d8c;
                                              local_1d98 = (undefined)param_5;
                                              *(undefined *)(param_1 + 0x62) = local_1d98;
                                              local_1d90 = (undefined)param_6;
                                              *(undefined *)(param_1 + 99) = local_1d90;
                                              *(byte *)(param_1 + 0x13) =
                                                   *(byte *)(param_1 + 0x13) & 0xf9 | 2;
                                              bitmapComputeFontBounds(param_1);
                                              iVar40 = FontCouldBeTerminal(param_1 + 8);
                                              if (iVar40 != 0) {
                                                sStack_1cd2 = *(short *)(param_1 + 0x48);
                                                sStack_1cd6 = *(short *)(param_1 + 0x28);
                                                lVar25 = *(long *)(param_1 + 0x98);
                                                iVar40 = (int)sStack_1cd2 +
                                                         (int)*(short *)(param_1 + 0x4a);
                                                stack0xffffffffffffe332 =
                                                     SUB1614((undefined  [16])0x0,2);
                                                auStack_1cd0._0_2_ = *(short *)(param_1 + 0x4a);
                                                cVar33 = *(char *)(param_1 + 0x62);
                                                local_1cd8 = 0;
                                                if (cVar33 == '\x01') {
                                                  iVar8 = (sStack_1cd6 + 7 >> 3) * iVar40;
                                                }
                                                else if (cVar33 == '\x02') {
                                                  iVar8 = (sStack_1cd6 + 0xf >> 3 & 0xfffffffeU) *
                                                          iVar40;
                                                }
                                                else if (cVar33 == '\x04') {
                                                  iVar8 = (sStack_1cd6 + 0x1f >> 3 & 0xfffffffcU) *
                                                          iVar40;
                                                }
                                                else if (cVar33 == '\b') {
                                                  iVar8 = (sStack_1cd6 + 0x3f >> 3 & 0xfffffff8U) *
                                                          iVar40;
                                                }
                                                lVar26 = 0;
                                                sStack_1cd4 = sStack_1cd6;
                                                if (0 < *(int *)(lVar25 + 4)) {
                                                  do {
                                                    pvVar18 = malloc((long)iVar8);
                                                    pvStack_1cc8 = pvVar18;
                                                    if (pvVar18 == (void *)0x0) {
                                                      bdfError("Couldn\'t allocate bits (%d)\n",
                                                               iVar8);
                                                      goto LAB_0011bee3;
                                                    }
                                                    lVar24 = lVar26 * 0x18;
                                                    lVar43 = lVar26 + 1;
                                                    FontCharReshape(param_1,*(long *)(lVar25 + 0x10)
                                                                            + lVar24,&local_1cd8);
                                                    lVar23 = *(long *)(lVar25 + 0x10) + lVar24;
                                                    auStack_1cd0._2_2_ =
                                                         *(undefined2 *)(lVar23 + 10);
                                                    free(*(void **)(lVar23 + 0x10));
                                                    lVar23 = *(long *)(lVar25 + 0x10);
                                                    puVar17 = (undefined8 *)(lVar23 + lVar26 * 0x18)
                                                    ;
                                                    *puVar17 = CONCAT26(sStack_1cd2,
                                                                        CONCAT24(sStack_1cd4,
                                                                                 CONCAT22(
                                                  sStack_1cd6,local_1cd8)));
                                                  puVar17[1] = auStack_1cd0;
                                                  *(void **)(lVar23 + 0x10 + lVar24) = pvStack_1cc8;
                                                  lVar26 = lVar43;
                                                  } while ((int)lVar43 < *(int *)(lVar25 + 4));
                                                }
                                                lVar26 = *(long *)(lVar25 + 0x38);
                                                if (lVar26 != 0) {
                                                  iVar8 = (int)sStack_1cd6 - (int)local_1cd8;
                                                  lVar24 = 0;
                                                  do {
                                                    uVar10 = iVar8 + 7 >> 3;
                                                    if (((lVar24 == 0) ||
                                                        (iVar40 = (int)lVar24,
                                                        uVar10 = iVar8 + 0xf >> 3 & 0xfffffffe,
                                                        iVar40 == 1)) ||
                                                       (uVar10 = iVar8 + 0x1f >> 3 & 0xfffffffc,
                                                       iVar40 == 2)) {
                                                      *(uint *)(lVar26 + 0x10 + lVar24 * 4) =
                                                           uVar10 * ((int)sStack_1cd2 +
                                                                    (int)(short)auStack_1cd0._0_2_)
                                                           * *(int *)(lVar25 + 4);
                                                    }
                                                    else {
                                                      *(uint *)(lVar26 + 0x10 + lVar24 * 4) =
                                                           *(int *)(lVar25 + 4) *
                                                           (iVar8 + 0x3f >> 3 & 0xfffffff8U) *
                                                           ((int)sStack_1cd2 +
                                                           (int)(short)auStack_1cd0._0_2_);
                                                      if (iVar40 == 3) break;
                                                    }
                                                    lVar24 = lVar24 + 1;
                                                  } while( true );
                                                }
LAB_0011bee3:
                                                bitmapComputeFontBounds(param_1);
                                              }
                                              FontComputeInfoAccelerators(param_1 + 8);
                                              if (*(long *)((long)pvVar16 + 0x38) == 0) {
                                                if ((*(byte *)(param_1 + 0x12) & 4) != 0)
                                                goto LAB_0011bd13;
                                              }
                                              else {
                                                FontComputeInfoAccelerators
                                                          (*(long *)((long)pvVar16 + 0x38) + 0x20);
                                                if ((*(byte *)(param_1 + 0x12) & 4) != 0) {
LAB_0011bd13:
                                                  iVar8 = bitmapAddInkMetrics(param_1);
                                                  if (iVar8 == 0) {
                                                    bdfError("Failed to add bitmap ink metrics\n");
                                                    goto LAB_0011a26a;
                                                  }
                                                }
                                                lVar25 = *(long *)((long)pvVar16 + 0x38);
                                                if (lVar25 != 0) {
                                                  *(byte *)(lVar25 + 0x2a) =
                                                       *(byte *)(lVar25 + 0x2a) & 0xdf |
                                                       *(byte *)(param_1 + 0x12) & 0x20;
                                                }
                                              }
                                              bitmapComputeFontInkBounds(param_1);
                                              if ((local_1868 != (undefined8 *)0x0) &&
                                                 (local_1868[1] == -1)) {
                                                lVar25 = (long)local_1894;
                                                if (local_1894 == 0) {
                                                  lVar25 = (long)*(short *)(param_1 + 0x42);
                                                }
                                                local_1868[1] = lVar25;
                                              }
                                              if ((local_1858 != (undefined8 *)0x0) &&
                                                 (local_1858[1] == -1)) {
                                                if (local_189c == 0) {
                                                  iVar8 = ((int)*(short *)(param_1 + 0x34) +
                                                          (int)*(short *)(param_1 + 0x40)) / 2;
                                                }
                                                else {
                                                  iVar8 = local_1898 / local_189c;
                                                }
                                                local_1858[1] = (long)iVar8;
                                              }
                                              if ((local_1860 != (undefined8 *)0x0) &&
                                                 (local_1860[1] == -1)) {
                                                iVar8 = bitmapComputeWeight(param_1);
                                                local_1860[1] = (long)iVar8;
                                              }
                                              uVar39 = 0x55;
                                              *(undefined8 *)(param_1 + 0x80) = 0;
                                              *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
                                              *(code **)(param_1 + 0x70) = bitmapGetMetrics;
                                              *(code **)(param_1 + 0x78) = FUN_0011a180;
                                              goto LAB_0011a282;
                                            }
                                            bdfError("Couldn\'t allocate ppCI (%d,%d)\n",iVar40 >> 7
                                                     ,8);
                                          }
                                        }
                                      }
                                      else {
                                        bVar44 = pbVar15 == (byte *)0x0;
                                        uVar10 = local_1cf8;
                                        if (!bVar44) {
                                          local_1d24 = 0;
                                          local_1d48 = 0;
                                          local_1d40 = "STARTCHAR";
                                          do {
                                            bVar45 = false;
                                            lVar26 = 9;
                                            pbVar42 = pbVar15;
                                            pbVar41 = (byte *)local_1d40;
                                            do {
                                              if (lVar26 == 0) break;
                                              lVar26 = lVar26 + -1;
                                              bVar45 = *pbVar42 < *pbVar41;
                                              bVar44 = *pbVar42 == *pbVar41;
                                              pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                              pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                                            } while (bVar44);
                                            if ((!bVar45 && !bVar44) != bVar45) {
                                              uVar10 = local_1cfc + local_1d48;
                                              bVar44 = local_1cf8 < uVar10;
                                              bVar45 = local_1cf8 == uVar10;
                                              if (!bVar45) goto LAB_0011b814;
                                              local_1cf8 = local_1d48;
                                              *(uint *)(lVar25 + 4) = local_1d48;
                                              goto LAB_0011b85d;
                                            }
                                            iVar8 = __isoc99_sscanf(pbVar15,"STARTCHAR %s",local_c48
                                                                   );
                                            if (iVar8 != 1) {
                                              bdfError("bad character name in BDF file\n");
                                              goto LAB_0011b040;
                                            }
                                            if (plVar36 != (long *)0x0) {
                                              lVar26 = *plVar36;
                                              uVar39 = bdfForceMakeAtom(local_c48,0);
                                              *(undefined8 *)(lVar26 + (long)(int)local_1d48 * 8) =
                                                   uVar39;
                                            }
                                            lVar26 = bdfGetLine(param_2,local_848,0x400);
                                            if ((lVar26 == 0) ||
                                               (iVar8 = __isoc99_sscanf(lVar26,"ENCODING %d %d",
                                                                        &local_1cdc,&local_1cd8),
                                               iVar8 < 1)) {
                                              bdfError("bad \'ENCODING\' in BDF file\n");
                                              goto LAB_0011b040;
                                            }
                                            uVar27 = (ulong)local_1cdc;
                                            if ((int)local_1cdc < -1) {
LAB_0011b7e5:
                                              bdfError("bad ENCODING value");
                                              goto LAB_0011b040;
                                            }
                                            bVar44 = false;
                                            if (iVar8 == 2) {
                                              uVar10 = CONCAT22(sStack_1cd6,local_1cd8);
                                              if ((int)uVar10 < -1) goto LAB_0011b7e5;
                                              if (local_1cdc == 0xffffffff) {
                                                uVar27 = (ulong)uVar10;
                                                local_1cdc = uVar10;
                                                goto LAB_0011aae9;
                                              }
LAB_0011aaf2:
                                              if ((int)uVar27 < 0x10000) {
                                                bVar6 = (byte)(uVar27 >> 8);
                                                uVar27 = uVar27 & 0xff;
                                                if ((ushort)bVar6 < *(ushort *)(param_1 + 0xc)) {
                                                  *(ushort *)(param_1 + 0xc) = (ushort)bVar6;
                                                }
                                                if (*(ushort *)(param_1 + 0xe) < (ushort)bVar6) {
                                                  *(ushort *)(param_1 + 0xe) = (ushort)bVar6;
                                                }
                                                if ((uint)uVar27 < (uint)*(ushort *)(param_1 + 8)) {
                                                  *(short *)(param_1 + 8) = (short)uVar27;
                                                }
                                                if ((uint)*(ushort *)(param_1 + 10) < (uint)uVar27)
                                                {
                                                  *(short *)(param_1 + 10) = (short)uVar27;
                                                }
                                                uVar10 = (uint)bVar6;
                                                pbVar15 = local_1848[uVar10];
                                                if (pbVar15 == (byte *)0x0) {
                                                  pbVar15 = (byte *)malloc(0x800);
                                                  local_1848[uVar10] = pbVar15;
                                                  if (pbVar15 == (byte *)0x0) {
                                                    bdfError(
                                                  "Couldn\'t allocate row %d of encoding (%d*%d)\n",
                                                  uVar10,0x100,8);
                                                  goto LAB_0011b040;
                                                  }
                                                  pbVar42 = pbVar15;
                                                  do {
                                                    pbVar42[0] = 0;
                                                    pbVar42[1] = 0;
                                                    pbVar42[2] = 0;
                                                    pbVar42[3] = 0;
                                                    pbVar42[4] = 0;
                                                    pbVar42[5] = 0;
                                                    pbVar42[6] = 0;
                                                    pbVar42[7] = 0;
                                                    pbVar42 = pbVar42 + 8;
                                                  } while (pbVar15 + 0x800 != pbVar42);
                                                }
                                                local_1d24 = local_1d24 + 1;
                                                *(short **)(pbVar15 + uVar27 * 8) = local_1d78;
                                              }
                                              else {
                                                bdfError("char \'%s\' has encoding too large (%d)\n"
                                                         ,local_c48);
                                              }
                                            }
                                            else {
LAB_0011aae9:
                                              if ((int)uVar27 != -1) goto LAB_0011aaf2;
                                              if (plVar36 == (long *)0x0) {
                                                local_1cfc = local_1cfc + 1;
                                                bVar44 = true;
                                              }
                                            }
                                            uVar10 = local_1cfc;
                                            lVar26 = bdfGetLine(param_2,local_848,0x400);
                                            if (lVar26 == 0) {
LAB_0011b6fd:
                                              bdfError("bad \'SWIDTH\'\n");
                                              goto LAB_0011b040;
                                            }
                                            iVar8 = __isoc99_sscanf(lVar26,"SWIDTH %d %d",
                                                                    &local_1cf4,&local_1cf0);
                                            if (iVar8 != 2) goto LAB_0011b6fd;
                                            if (local_1cf0 != 0) {
                                              bdfError("SWIDTH y value must be zero\n");
                                              goto LAB_0011b040;
                                            }
                                            if (plVar36 != (long *)0x0) {
                                              *(int *)(plVar36[1] + (long)(int)local_1d48 * 4) =
                                                   local_1cf4;
                                            }
                                            lVar26 = bdfGetLine(param_2,local_848,0x400);
                                            if ((lVar26 == 0) ||
                                               (iVar8 = __isoc99_sscanf(lVar26,"DWIDTH %d %d",
                                                                        &local_1cf4,&local_1cf0),
                                               iVar8 != 2)) {
                                              bdfError("bad \'DWIDTH\'\n");
                                              goto LAB_0011b040;
                                            }
                                            if (local_1cf0 != 0) {
                                              bdfError("DWIDTH y value must be zero\n");
                                              goto LAB_0011b040;
                                            }
                                            lVar26 = bdfGetLine(param_2,local_848,0x400);
                                            if ((lVar26 == 0) ||
                                               (iVar8 = __isoc99_sscanf(lVar26,"BBX %d %d %d %d",
                                                                        &local_1cec,&local_1ce8,
                                                                        local_1ce4,&local_1ce0),
                                               iVar8 != 4)) {
                                              bdfError("bad \'BBX\'\n");
                                              goto LAB_0011b040;
                                            }
                                            if ((local_1ce8 < 0) || (local_1cec < 0)) {
                                              bdfError(
                                                  "character \'%s\' has a negative sized bitmap, %dx%d\n"
                                                  ,local_c48);
                                              goto LAB_0011b040;
                                            }
                                            pbVar15 = (byte *)bdfGetLine(param_2,local_848,0x400);
                                            bVar45 = false;
                                            bVar46 = pbVar15 == (byte *)0x0;
                                            if (bVar46) {
LAB_0011acd1:
                                              local_1d78[5] = 0;
                                            }
                                            else {
                                              lVar26 = 10;
                                              pbVar42 = pbVar15;
                                              pbVar41 = (byte *)"ATTRIBUTES";
                                              do {
                                                if (lVar26 == 0) break;
                                                lVar26 = lVar26 + -1;
                                                bVar45 = *pbVar42 < *pbVar41;
                                                bVar46 = *pbVar42 == *pbVar41;
                                                pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                                pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                                              } while (bVar46);
                                              if ((!bVar45 && !bVar46) != bVar45) goto LAB_0011acd1;
                                              pbVar42 = pbVar15 + 0xb;
                                              bVar6 = pbVar15[0xb];
                                              if (bVar6 != 0x20) goto LAB_0011b49d;
                                              do {
                                                do {
                                                  bVar6 = pbVar42[1];
                                                  pbVar42 = pbVar42 + 1;
                                                } while (bVar6 == 0x20);
LAB_0011b49d:
                                              } while (bVar6 == 9);
                                              iVar8 = bdfHexByte(pbVar42);
                                              bVar6 = bdfHexByte(pbVar42 + 2);
                                              local_1d78[5] = (short)(iVar8 << 8) + (ushort)bVar6;
                                              pbVar15 = (byte *)bdfGetLine(param_2,local_848,0x400);
                                            }
                                            iVar8 = local_1ce8;
                                            bVar45 = false;
                                            bVar46 = pbVar15 == (byte *)0x0;
                                            if (bVar46) {
LAB_0011b783:
                                              bdfError("missing \'BITMAP\'\n");
                                              goto LAB_0011b040;
                                            }
                                            lVar26 = 6;
                                            pbVar42 = (byte *)"BITMAP";
                                            do {
                                              if (lVar26 == 0) break;
                                              lVar26 = lVar26 + -1;
                                              bVar45 = *pbVar15 < *pbVar42;
                                              bVar46 = *pbVar15 == *pbVar42;
                                              pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                                              pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                            } while (bVar46);
                                            cVar33 = (!bVar45 && !bVar46) - bVar45;
                                            iVar40 = (int)cVar33;
                                            puVar32 = local_c48;
                                            if (cVar33 != '\0') goto LAB_0011b783;
                                            do {
                                              puVar31 = puVar32;
                                              uVar11 = *puVar31 + 0xfefefeff & ~*puVar31;
                                              uVar9 = uVar11 & 0x80808080;
                                              puVar32 = puVar31 + 1;
                                            } while (uVar9 == 0);
                                            bVar45 = (uVar11 & 0x8080) == 0;
                                            if (bVar45) {
                                              uVar9 = uVar9 >> 0x10;
                                            }
                                            if (bVar45) {
                                              puVar32 = (uint *)((long)puVar31 + 6);
                                            }
                                            uVar27 = (ulong)(uVar9 & 0xffffff00);
                                            if ((long)puVar32 +
                                                ((-3 - (ulong)CARRY1((byte)uVar9,(byte)uVar9)) -
                                                (long)local_c48) == 1) {
                                              if ((byte)((char)local_c48[0] - 0x30U) < 10) {
                                                local_189c = local_189c + 1;
                                                local_1898 = local_1898 + local_1cf4;
                                              }
                                              else if (((char)local_c48[0] == 'x') &&
                                                      (local_1894 = local_1ce0 + local_1ce8,
                                                      local_1894 < 1)) {
                                                local_1894 = local_1ce8;
                                              }
                                            }
                                            if (bVar44) {
                                              do {
                                                iVar40 = iVar40 + 1;
                                                pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400
                                                                             ,uVar27);
                                                bVar44 = false;
                                                bVar45 = pbVar15 == (byte *)0x0;
                                                if (bVar45) goto LAB_0011afcb;
                                                uVar27 = 7;
                                                pbVar42 = (byte *)"ENDCHAR";
                                                do {
                                                  if (uVar27 == 0) break;
                                                  uVar27 = uVar27 - 1;
                                                  bVar44 = *pbVar15 < *pbVar42;
                                                  bVar45 = *pbVar15 == *pbVar42;
                                                  pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                                                  pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                                } while (bVar45);
                                              } while (((!bVar44 && !bVar45) != bVar44) &&
                                                      (iVar40 <= iVar8));
                                              if ((iVar40 != 1) && ((!bVar44 && !bVar45) != bVar44))
                                              {
                                                bdfError("Error in bitmap, missing \'ENDCHAR\'\n");
                                              }
                                            }
                                            else {
                                              sVar34 = (short)local_1ce8 + (short)local_1ce0;
                                              sVar7 = -(short)local_1ce0;
                                              sVar4 = local_1ce4._0_2_;
                                              *local_1d78 = sVar4;
                                              local_1d78[1] = (short)local_1cec + sVar4;
                                              local_1d78[3] = sVar34;
                                              iVar8 = (int)(short)((short)local_1cec + sVar4) -
                                                      (int)sVar4;
                                              local_1d78[4] = sVar7;
                                              uVar9 = (int)sVar7 + (int)sVar34;
                                              local_1d78[2] = (short)local_1cf4;
                                              local_1d78[8] = 0;
                                              local_1d78[9] = 0;
                                              local_1d78[10] = 0;
                                              local_1d78[0xb] = 0;
                                              if (param_5 == 1) {
                                                local_1d34 = iVar8 + 7 >> 3;
LAB_0011b518:
                                                local_1d20 = uVar9 * local_1d34;
                                                if (local_1d20 < 1) {
                                                  local_1d58 = (void *)0x0;
                                                  goto LAB_0011ae10;
                                                }
                                                local_1d58 = malloc((long)local_1d20);
                                                if (local_1d58 != (void *)0x0) goto LAB_0011ae10;
                                                bdfError("Couldn\'t allocate picture (%d*%d)\n",
                                                         local_1d34,uVar9);
LAB_0011b338:
                                                local_1d78[8] = 0;
                                                local_1d78[9] = 0;
                                                local_1d78[10] = 0;
                                                local_1d78[0xb] = 0;
                                              }
                                              else {
                                                if (param_5 == 2) {
                                                  local_1d34 = iVar8 + 0xf >> 3 & 0xfffffffe;
                                                  goto LAB_0011b518;
                                                }
                                                if (param_5 == 4) {
                                                  local_1d34 = iVar8 + 0x1f >> 3 & 0xfffffffc;
                                                  goto LAB_0011b518;
                                                }
                                                if (param_5 == 8) {
                                                  local_1d34 = iVar8 + 0x3f >> 3 & 0xfffffff8;
                                                  goto LAB_0011b518;
                                                }
                                                local_1d20 = 0;
                                                local_1d34 = 0;
                                                local_1d58 = (void *)0x0;
LAB_0011ae10:
                                                *(void **)(local_1d78 + 8) = local_1d58;
                                                uVar11 = iVar8 + 7 >> 3;
                                                if (local_1d60 != (long *)0x0) {
                                                  lVar26 = 0;
                                                  do {
                                                    iVar40 = *(int *)((long)local_1d60 + lVar26 * 4)
                                                    ;
                                                    uVar12 = uVar11;
                                                    if (((lVar26 == 0) ||
                                                        (iVar14 = (int)lVar26,
                                                        uVar12 = iVar8 + 0xf >> 3 & 0xfffffffe,
                                                        iVar14 == 1)) ||
                                                       (uVar12 = iVar8 + 0x1f >> 3 & 0xfffffffc,
                                                       iVar14 == 2)) {
                                                      *(uint *)((long)local_1d60 + lVar26 * 4) =
                                                           uVar12 * uVar9 + iVar40;
                                                    }
                                                    else {
                                                      *(uint *)((long)local_1d60 + lVar26 * 4) =
                                                           (iVar8 + 0x3f >> 3 & 0xfffffff8U) * uVar9
                                                           + iVar40;
                                                      if (iVar14 == 3) break;
                                                    }
                                                    lVar26 = lVar26 + 1;
                                                  } while( true );
                                                }
                                                if ((int)uVar9 < 1) {
                                                  if (uVar9 == 0) {
                                                    iVar40 = 0;
                                                    goto LAB_0011b2f2;
                                                  }
LAB_0011b318:
                                                  bdfError("missing \'ENDCHAR\'\n");
LAB_0011b326:
                                                  if (local_1d58 != (void *)0x0) {
                                                    free(local_1d58);
                                                  }
                                                  goto LAB_0011b338;
                                                }
                                                local_1d38 = 0;
                                                uVar12 = 0xff << (8 - ((byte)iVar8 & 7) & 0x1f);
                                                bVar6 = (byte)uVar12;
                                                uVar13 = (local_1d34 - uVar11) - 1;
                                                iVar40 = 0;
                                                do {
                                                  pbVar15 = (byte *)bdfGetLine(param_2,local_448,
                                                                               0x400);
                                                  if (pbVar15 == (byte *)0x0) goto LAB_0011b318;
                                                  bVar44 = false;
                                                  bVar45 = iVar8 == 0;
                                                  if (bVar45) {
                                                    lVar26 = 7;
                                                    pbVar42 = pbVar15;
                                                    pbVar41 = (byte *)"ENDCHAR";
                                                    do {
                                                      if (lVar26 == 0) break;
                                                      lVar26 = lVar26 + -1;
                                                      bVar44 = *pbVar42 < *pbVar41;
                                                      bVar45 = *pbVar42 == *pbVar41;
                                                      pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                                      pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                                                    } while (bVar45);
                                                    bVar44 = (!bVar44 && !bVar45) == bVar44;
                                                    if (bVar44) goto LAB_0011af5f;
                                                  }
                                                  else {
                                                    sVar21 = strlen((char *)pbVar15);
                                                    iVar37 = (int)sVar21;
                                                    iVar14 = iVar37;
                                                    if ((sVar21 & 1) != 0) {
                                                      iVar14 = iVar37 + 1;
                                                      bdfError(
                                                  "odd number of characters in hex encoding\n");
                                                  pbVar15[iVar37] = 0x30;
                                                  pbVar15[iVar14] = 0;
                                                  }
                                                  uVar38 = iVar14 >> 1;
                                                  uVar29 = uVar38;
                                                  if ((int)uVar11 <= (int)uVar38) {
                                                    uVar29 = uVar11;
                                                  }
                                                  if (0 < (int)uVar29) {
                                                    puVar22 = (undefined *)
                                                              ((long)local_1d58 + (long)iVar40);
                                                    pbVar42 = pbVar15;
                                                    do {
                                                      pbVar41 = pbVar42 + 2;
                                                      uVar5 = bdfHexByte(pbVar42);
                                                      *puVar22 = uVar5;
                                                      puVar22 = puVar22 + 1;
                                                      pbVar42 = pbVar41;
                                                    } while (pbVar41 !=
                                                             pbVar15 + (ulong)(uVar29 - 1) * 2 + 2);
                                                    iVar40 = iVar40 + 1 + (uVar29 - 1);
                                                  }
                                                  if ((int)uVar38 < (int)uVar11) {
                                                    if (0 < (int)(uVar11 - uVar38)) {
                                                      uVar29 = (uVar11 - uVar38) - 1;
                                                      puVar22 = (undefined *)
                                                                ((long)local_1d58 + (long)iVar40);
                                                      do {
                                                        *puVar22 = 0;
                                                        puVar22 = puVar22 + 1;
                                                      } while ((undefined *)
                                                               ((long)local_1d58 +
                                                               (long)iVar40 + (ulong)uVar29 + 1) !=
                                                               puVar22);
                                                      iVar40 = iVar40 + 1 + uVar29;
                                                    }
                                                  }
                                                  else if (bVar6 != 0) {
                                                    pbVar42 = (byte *)((long)local_1d58 +
                                                                      (long)iVar40 + -1);
                                                    bVar1 = *pbVar42;
                                                    if ((~(uVar12 & 0xff) & (uint)bVar1) != 0) {
                                                      *pbVar42 = bVar1 & bVar6;
                                                    }
                                                  }
                                                  if (((int)uVar11 < (int)local_1d34) &&
                                                     (0 < (int)(local_1d34 - uVar11))) {
                                                    puVar22 = (undefined *)
                                                              ((long)local_1d58 + (long)iVar40);
                                                    do {
                                                      *puVar22 = 0;
                                                      puVar22 = puVar22 + 1;
                                                    } while ((undefined *)
                                                             ((long)local_1d58 +
                                                             (long)iVar40 + (ulong)uVar13 + 1) !=
                                                             puVar22);
                                                    iVar40 = iVar40 + 1 + uVar13;
                                                  }
                                                  }
                                                  local_1d38 = local_1d38 + 1;
                                                  bVar44 = uVar9 < local_1d38;
                                                  bVar45 = uVar9 == local_1d38;
                                                } while (!bVar45);
                                                lVar26 = 7;
                                                pbVar42 = pbVar15;
                                                pbVar41 = (byte *)"ENDCHAR";
                                                do {
                                                  if (lVar26 == 0) break;
                                                  lVar26 = lVar26 + -1;
                                                  bVar44 = *pbVar42 < *pbVar41;
                                                  bVar45 = *pbVar42 == *pbVar41;
                                                  pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                                  pbVar41 = pbVar41 + (ulong)bVar47 * -2 + 1;
                                                } while (bVar45);
                                                bVar44 = (!bVar44 && !bVar45) == bVar44;
                                                if (!bVar44) {
LAB_0011b2f2:
                                                  pbVar15 = (byte *)bdfGetLine(param_2,local_448,
                                                                               0x400);
                                                  bVar44 = pbVar15 == (byte *)0x0;
                                                  if (bVar44) goto LAB_0011b318;
                                                }
LAB_0011af5f:
                                                bVar45 = false;
                                                lVar26 = 7;
                                                pbVar42 = (byte *)"ENDCHAR";
                                                do {
                                                  if (lVar26 == 0) break;
                                                  lVar26 = lVar26 + -1;
                                                  bVar45 = *pbVar15 < *pbVar42;
                                                  bVar44 = *pbVar15 == *pbVar42;
                                                  pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                                                  pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                                                } while (bVar44);
                                                if ((!bVar45 && !bVar44) != bVar45)
                                                goto LAB_0011b318;
                                                if (iVar40 != local_1d20) {
                                                  bdfError(
                                                  "bytes != rows * bytes_per_row (%d != %d * %d)\n",
                                                  iVar40,uVar9,local_1d34);
                                                  goto LAB_0011b326;
                                                }
                                                if (local_1d58 != (void *)0x0) {
                                                  if (param_3 == 0) {
                                                    BitOrderInvert(local_1d58,iVar40);
                                                  }
                                                  if (param_3 != param_4) {
                                                    if (param_6 == 2) {
                                                      TwoByteSwap(local_1d58,iVar40);
                                                    }
                                                    else if (param_6 == 4) {
                                                      FourByteSwap(local_1d58,iVar40);
                                                    }
                                                  }
                                                }
                                              }
                                              local_1d78 = local_1d78 + 0xc;
                                              local_1d48 = local_1d48 + 1;
                                            }
LAB_0011afcb:
                                            pbVar15 = (byte *)bdfGetLine(param_2,local_848,0x400);
                                            if ((int)local_1cf8 <= (int)local_1d48) {
                                              local_1cfc = local_1d48;
                                              uVar10 = uVar10 + local_1d48;
                                              goto LAB_0011baaf;
                                            }
                                            bVar44 = pbVar15 == (byte *)0x0;
                                          } while (!bVar44);
                                          uVar10 = local_1cfc + local_1d48;
                                          if (local_1cf8 == uVar10) {
                                            local_1cf8 = local_1d48;
                                            *(uint *)(lVar25 + 4) = local_1d48;
                                            goto LAB_0011b026;
                                          }
LAB_0011b814:
                                          uVar10 = local_1cf8 - uVar10;
                                          pbVar15 = local_1848[0];
                                        }
                                        bdfError("%d too few characters\n",uVar10);
                                        local_1848[0] = pbVar15;
                                      }
                                    }
                                  }
                                  else {
                                    bdfError("Couldn\'t allocate pCI (%d*%d)\n",local_1cf8,0x18);
                                    local_1848[0] = (byte *)0x0;
                                  }
LAB_0011b040:
                                  ppbVar30 = local_1848;
                                  while( true ) {
                                    ppbVar30 = ppbVar30 + 1;
                                    if (local_1848[0] != (byte *)0x0) {
                                      free(local_1848[0]);
                                    }
                                    if (local_1048 == ppbVar30) break;
                                    local_1848[0] = *ppbVar30;
                                  }
                                }
                                goto LAB_0011a26a;
                              }
                            }
                            bdfError("missing \'ENDPROPERTIES\'\n");
                          }
                        }
LAB_0011a640:
                        if (*(void **)(param_1 + 0x58) != (void *)0x0) {
                          free(*(void **)(param_1 + 0x58));
                          *(undefined8 *)(param_1 + 0x58) = 0;
                        }
                        if (*(void **)(param_1 + 0x50) != (void *)0x0) {
                          free(*(void **)(param_1 + 0x50));
                          *(undefined8 *)(param_1 + 0x50) = 0;
                        }
                        while (bVar44 = pbVar15 == (byte *)0x0, !bVar44) {
                          bVar45 = false;
                          lVar25 = 0xd;
                          pbVar42 = (byte *)"ENDPROPERTIES";
                          do {
                            if (lVar25 == 0) break;
                            lVar25 = lVar25 + -1;
                            bVar45 = *pbVar15 < *pbVar42;
                            bVar44 = *pbVar15 == *pbVar42;
                            pbVar15 = pbVar15 + (ulong)bVar47 * -2 + 1;
                            pbVar42 = pbVar42 + (ulong)bVar47 * -2 + 1;
                          } while (bVar44);
                          if ((!bVar45 && !bVar44) != bVar45) break;
                          pbVar15 = (byte *)bdfGetLine(param_2,local_448,0x400);
                        }
                        goto LAB_0011a26a;
                      }
                    }
                    bdfError("missing \'STARTPROPERTIES\'\n");
                  }
                }
                goto LAB_0011a26a;
              }
            }
            bdfError("missing \'FONTBOUNDINGBOX\'\n");
          }
        }
        else {
          bdfError("bad \'SIZE\'\n");
        }
      }
    }
  }
LAB_0011a26a:
  uVar39 = 0x50;
  if (*(long *)(param_1 + 0x98) != 0) {
    FUN_0011a090(param_1);
  }
LAB_0011a282:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar39;
}



ulong bdfReadFontInfo(undefined8 *param_1,undefined8 param_2)

{
  undefined8 uVar1;
  ulong uVar2;
  long lVar3;
  undefined8 *puVar4;
  long in_FS_OFFSET;
  undefined8 local_d8 [4];
  undefined8 uStack_b8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined4 local_90;
  undefined4 uStack_8c;
  undefined8 uStack_88;
  undefined8 local_80;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar4 = local_d8;
  for (lVar3 = 0x17; lVar3 != 0; lVar3 = lVar3 + -1) {
    *puVar4 = 0;
    puVar4 = puVar4 + 1;
  }
  uVar2 = bdfReadFont(local_d8,param_2,1,0,1,1);
  uVar1 = uStack_88;
  if ((int)uVar2 == 0x55) {
    uStack_88 = 0;
    param_1[10] = local_80;
    *param_1 = local_d8[1];
    param_1[1] = local_d8[2];
    param_1[2] = local_d8[3];
    param_1[3] = uStack_b8;
    param_1[4] = local_b0;
    param_1[5] = uStack_a8;
    param_1[6] = local_a0;
    param_1[7] = uStack_98;
    param_1[8] = CONCAT44(uStack_8c,local_90);
    param_1[9] = uVar1;
    local_80 = 0;
    uStack_8c = 0;
    FUN_0011a090(local_d8);
    uVar2 = uVar2 & 0xffffffff;
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void bdfError(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
             undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
             undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
             undefined8 param_13,undefined8 param_14)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined8 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_10;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  __fprintf_chk(_stderr,1,"BDF Error on line %d: ",bdfFileLineNum);
  __vfprintf_chk(_stderr,1,param_9,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void bdfWarning(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined8 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_10;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  __fprintf_chk(_stderr,1,"BDF Warning on line %d: ",bdfFileLineNum);
  __vfprintf_chk(_stderr,1,param_9,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



byte * bdfGetLine(long *param_1,byte *param_2,int param_3)

{
  int iVar1;
  uint uVar2;
  long lVar3;
  byte *pbVar4;
  byte *pbVar5;
  bool bVar6;
  bool bVar7;
  byte bVar8;
  
  bVar8 = 0;
  pbVar4 = param_2;
LAB_0011c703:
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) goto LAB_0011c746;
LAB_0011c710:
  pbVar5 = (byte *)*param_1;
  *param_1 = (long)(pbVar5 + 1);
  uVar2 = (uint)*pbVar5;
  do {
    if (uVar2 == 0xd) goto LAB_0011c703;
    if (uVar2 == 10) {
      bdfFileLineNum = bdfFileLineNum + 1;
      *pbVar4 = 0;
LAB_0011c77e:
      bVar6 = pbVar4 < param_2;
      bVar7 = pbVar4 == param_2;
      pbVar4 = param_2;
      if (bVar7) goto LAB_0011c703;
      lVar3 = 7;
      pbVar5 = (byte *)"COMMENT";
      break;
    }
    if ((long)(param_3 + -1) <= (long)pbVar4 - (long)param_2) {
      *pbVar4 = 0;
      goto LAB_0011c77e;
    }
    *pbVar4 = (byte)uVar2;
    iVar1 = *(int *)(param_1 + 1);
    pbVar4 = pbVar4 + 1;
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 != 0) goto LAB_0011c710;
LAB_0011c746:
    uVar2 = (*(code *)param_1[0x402])(param_1);
    *(uint *)((long)param_1 + 0xc) = uVar2;
    if (uVar2 == 0xffffffff) {
      *pbVar4 = 0;
      return (byte *)0x0;
    }
  } while( true );
  while( true ) {
    lVar3 = lVar3 + -1;
    bVar6 = *pbVar4 < *pbVar5;
    bVar7 = *pbVar4 == *pbVar5;
    pbVar4 = pbVar4 + (ulong)bVar8 * -2 + 1;
    pbVar5 = pbVar5 + (ulong)bVar8 * -2 + 1;
    if (!bVar7) break;
    if (lVar3 == 0) break;
  }
  pbVar4 = param_2;
  if ((!bVar6 && !bVar7) != bVar6) {
    return param_2;
  }
  goto LAB_0011c703;
}



long bdfForceMakeAtom(char *param_1,int *param_2)

{
  size_t sVar1;
  long lVar2;
  
  sVar1 = strlen(param_1);
  if (param_2 != (int *)0x0) {
    *param_2 = *param_2 + (int)sVar1 + 1;
  }
  lVar2 = MakeAtom(param_1,sVar1,1);
  if (lVar2 != 0) {
    return lVar2;
  }
  bdfError("Atom allocation failed\n");
  return 0;
}



undefined8 bdfGetPropertyValue(byte *param_1)

{
  byte bVar1;
  byte bVar2;
  undefined8 uVar3;
  size_t sVar4;
  byte *__ptr;
  byte *pbVar5;
  byte *pbVar6;
  ulong __size;
  
  bVar1 = *param_1;
  pbVar6 = param_1;
  while (bVar1 != 0) {
    if ((bVar1 != 0x20) && (bVar1 != 9)) {
      if (bVar1 == 0x22) {
        pbVar5 = pbVar6 + 1;
        sVar4 = strlen((char *)pbVar5);
        __size = (ulong)((int)sVar4 + 1);
        __ptr = (byte *)malloc(__size);
        if (__ptr == (byte *)0x0) {
          bdfError("Couldn\'t allocate property value string (%d)\n",__size);
          return 0;
        }
        bVar1 = pbVar6[1];
        pbVar6 = __ptr;
        do {
          if (bVar1 == 0) {
            free(__ptr);
            bdfError("unterminated quoted string property: %s\n",param_1);
            return 0;
          }
          bVar2 = pbVar5[1];
          if (bVar1 == 0x22) {
            if (bVar2 != 0x22) {
              *pbVar6 = 0;
              uVar3 = bdfForceMakeAtom(__ptr,0);
              free(__ptr);
              return uVar3;
            }
            bVar2 = pbVar5[2];
            pbVar5 = pbVar5 + 2;
            *pbVar6 = 0x22;
          }
          else {
            bVar1 = *pbVar5;
            pbVar5 = pbVar5 + 1;
            *pbVar6 = bVar1;
          }
          pbVar6 = pbVar6 + 1;
          bVar1 = bVar2;
        } while( true );
      }
      bVar1 = *pbVar6;
      pbVar5 = pbVar6;
      if (bVar1 != 0) goto LAB_0011c88c;
      break;
    }
    pbVar5 = pbVar6 + 1;
    pbVar6 = pbVar6 + 1;
    bVar1 = *pbVar5;
  }
  goto LAB_0011c899;
  while( true ) {
    bVar1 = pbVar5[1];
    pbVar5 = pbVar5 + 1;
    if (bVar1 == 0) break;
LAB_0011c88c:
    if ((bVar1 < 0x21) && ((0x100002600U >> ((ulong)bVar1 & 0x3f) & 1) != 0)) {
      *pbVar5 = 0;
      break;
    }
  }
LAB_0011c899:
  uVar3 = bdfForceMakeAtom(pbVar6,0);
  return uVar3;
}



undefined8 bdfIsInteger(char *param_1)

{
  char cVar1;
  ushort **ppuVar2;
  char *pcVar3;
  
  pcVar3 = param_1 + 1;
  cVar1 = *param_1;
  ppuVar2 = __ctype_b_loc();
  if (((*(byte *)((long)*ppuVar2 + (long)cVar1 * 2 + 1) & 8) == 0) && ((cVar1 - 0x2bU & 0xfd) != 0))
  {
    return 0;
  }
  do {
    cVar1 = *pcVar3;
    pcVar3 = pcVar3 + 1;
    if (cVar1 == '\0') {
      return 1;
    }
  } while ((*(byte *)((long)*ppuVar2 + (long)cVar1 * 2 + 1) & 8) != 0);
  return 0;
}



int bdfHexByte(char *param_1)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = 0;
  pcVar1 = param_1 + 2;
  do {
    cVar2 = *param_1;
    iVar3 = (int)cVar2;
    param_1 = param_1 + 1;
    if ((byte)(iVar3 + -0x30) < 10) {
      iVar4 = iVar4 * 0x10 + iVar3 + -0x30;
    }
    else if ((byte)(cVar2 + 0xbfU) < 6) {
      iVar4 = iVar3 + -0x37 + iVar4 * 0x10;
    }
    else if ((byte)(cVar2 + 0x9fU) < 6) {
      iVar4 = iVar3 + -0x57 + iVar4 * 0x10;
    }
    else {
      bdfError("bad hex char \'%c\'");
    }
  } while (pcVar1 != param_1);
  return iVar4;
}



undefined8 bdfSpecialProperty(long param_1,undefined8 *param_2,char param_3,long param_4)

{
  int iVar1;
  undefined8 uVar2;
  char *__s1;
  char *__s2;
  undefined **ppuVar3;
  
  __s1 = (char *)NameForAtom(*param_2);
  if (PTR_s_FONT_ASCENT_0013ea60 == (undefined *)0x0) {
switchD_0011cb06_caseD_13ea60:
    uVar2 = 1;
    if (param_3 == '\0') {
      *(short *)(param_1 + 0x48) = (short)param_2[1];
      *(undefined *)(param_4 + 0x468) = 1;
      uVar2 = FUN_0011cb13();
      return uVar2;
    }
  }
  else {
    ppuVar3 = &PTR_s_FONT_ASCENT_0013ea60;
    __s2 = PTR_s_FONT_ASCENT_0013ea60;
    do {
      iVar1 = strcmp(__s1,__s2);
      if (iVar1 == 0) break;
      __s2 = ppuVar3[1];
      ppuVar3 = ppuVar3 + 1;
    } while (__s2 != (char *)0x0);
    switch(ppuVar3) {
    case (undefined **)0x13ea60:
      goto switchD_0011cb06_caseD_13ea60;
    case (undefined **)0x13ea68:
      uVar2 = 1;
      if (param_3 == '\0') {
        *(short *)(param_1 + 0x4a) = (short)param_2[1];
        *(undefined *)(param_4 + 0x469) = 1;
        uVar2 = FUN_0011cb13();
        return uVar2;
      }
      break;
    case (undefined **)0x13ea70:
      uVar2 = 1;
      if (param_3 == '\0') {
        *(short *)(param_1 + 0x10) = (short)param_2[1];
        *(undefined *)(param_4 + 0x46a) = 1;
        uVar2 = FUN_0011cb13();
        return uVar2;
      }
      break;
    case (undefined **)0x13ea78:
      *(undefined8 **)(param_4 + 0x430) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13ea80:
      *(undefined8 **)(param_4 + 0x448) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13ea88:
      *(undefined8 **)(param_4 + 0x450) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13ea90:
      *(undefined8 **)(param_4 + 0x458) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13ea98:
      *(undefined8 **)(param_4 + 0x460) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13eaa0:
      *(undefined8 **)(param_4 + 0x428) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    case (undefined **)0x13eaa8:
      *(undefined8 **)(param_4 + 0x438) = param_2;
      uVar2 = 0;
      break;
    case (undefined **)0x13eab0:
      *(undefined8 **)(param_4 + 0x440) = param_2;
      uVar2 = FUN_0011cb13();
      return uVar2;
    default:
      uVar2 = FUN_0011cb13();
      return uVar2;
    }
  }
  return uVar2;
}



void FUN_0011cb13(void)

{
  return;
}



undefined8 switchD_0011cb06::caseD_13ea60(void)

{
  undefined8 uVar1;
  long unaff_RBP;
  long unaff_R12;
  char unaff_R13B;
  long param_7;
  
  if (unaff_R13B == '\0') {
    *(short *)(param_7 + 0x48) = (short)*(undefined8 *)(unaff_RBP + 8);
    *(undefined *)(unaff_R12 + 0x468) = 1;
    uVar1 = FUN_0011cb13();
    return uVar1;
  }
  return 1;
}



undefined8
bitmapGetGlyphs(long param_1,long param_2,byte *param_3,uint param_4,long *param_5,long *param_6)

{
  byte *pbVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  long lVar9;
  long *plVar10;
  long lVar11;
  uint uVar12;
  
  uVar3 = *(ushort *)(param_1 + 8);
  lVar5 = *(long *)(*(long *)(param_1 + 0x98) + 0x28);
  lVar6 = *(long *)(*(long *)(param_1 + 0x98) + 0x30);
  uVar12 = (*(ushort *)(param_1 + 10) + 1) - (uint)uVar3;
  uVar8 = (uint)uVar3;
  if (param_4 == 2) {
    if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) || (lVar6 == 0)) {
      lVar9 = 0;
      plVar10 = param_6;
      if (param_2 != 0) {
        do {
          uVar7 = (ushort)(*(ushort *)(param_3 + lVar9 * 2) << 8 |
                          *(ushort *)(param_3 + lVar9 * 2) >> 8) - uVar8;
          if (((uVar7 < uVar12) &&
              (lVar11 = *(long *)(lVar5 + (ulong)(uVar7 >> 7) * 8), lVar11 != 0)) &&
             (lVar11 = *(long *)(lVar11 + (ulong)(uVar7 & 0x7f) * 8), lVar11 != 0)) {
            *plVar10 = lVar11;
            plVar10 = plVar10 + 1;
          }
          else if (lVar6 != 0) {
            *plVar10 = lVar6;
            plVar10 = plVar10 + 1;
          }
          lVar9 = lVar9 + 1;
        } while (param_2 != lVar9);
        *param_5 = (long)plVar10 - (long)param_6 >> 3;
        return 0x55;
      }
    }
    else if (param_2 != 0) {
      lVar9 = 0;
      do {
        uVar8 = (uint)(ushort)(*(ushort *)(param_3 + lVar9 * 2) << 8 |
                              *(ushort *)(param_3 + lVar9 * 2) >> 8) - (uint)uVar3;
        if (uVar8 < uVar12) {
          lVar11 = *(long *)(lVar5 + (ulong)(uVar8 >> 7) * 8);
          if (lVar11 != 0) {
            lVar11 = *(long *)(lVar11 + (ulong)(uVar8 & 0x7f) * 8);
          }
          param_6[lVar9] = lVar11;
        }
        else {
          param_6[lVar9] = lVar6;
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != param_2);
LAB_0011cea0:
      *param_5 = (param_2 << 3) >> 3;
      return 0x55;
    }
  }
  else if (param_4 < 3) {
    if (*(short *)(param_1 + 0xc) != 0) {
LAB_0011cd50:
      *param_5 = 0;
      return 0x55;
    }
    if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) || (lVar6 == 0)) {
      pbVar1 = param_3 + param_2;
      plVar10 = param_6;
      if (param_2 != 0) {
        do {
          bVar2 = *param_3;
          param_3 = param_3 + 1;
          uVar7 = bVar2 - uVar8;
          if (((uVar7 < uVar12) && (lVar9 = *(long *)(lVar5 + (ulong)(uVar7 >> 7) * 8), lVar9 != 0))
             && (lVar9 = *(long *)(lVar9 + (ulong)(uVar7 & 0x7f) * 8), lVar9 != 0)) {
            *plVar10 = lVar9;
            plVar10 = plVar10 + 1;
          }
          else if (lVar6 != 0) {
            *plVar10 = lVar6;
            plVar10 = plVar10 + 1;
          }
        } while (pbVar1 != param_3);
        param_2 = (long)plVar10 - (long)param_6 >> 3;
      }
    }
    else if (param_2 != 0) {
      lVar9 = 0;
      do {
        uVar7 = param_3[lVar9] - uVar8;
        if (uVar7 < uVar12) {
          lVar11 = *(long *)(lVar5 + (ulong)(uVar7 >> 7) * 8);
          if (lVar11 != 0) {
            lVar11 = *(long *)(lVar11 + (ulong)(uVar7 & 0x7f) * 8);
          }
          param_6[lVar9] = lVar11;
        }
        else {
          param_6[lVar9] = lVar6;
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != param_2);
      goto LAB_0011cea0;
    }
  }
  else {
    if (param_4 != 3) goto LAB_0011cd50;
    uVar3 = *(ushort *)(param_1 + 0xc);
    uVar4 = *(ushort *)(param_1 + 0xe);
    lVar9 = param_2 + -1;
    plVar10 = param_6;
    if (param_2 != 0) {
      do {
        while( true ) {
          bVar2 = *param_3;
          pbVar1 = param_3 + 1;
          param_3 = param_3 + 2;
          uVar7 = (uint)bVar2 - (uint)uVar3;
          if (((uVar4 + 1) - (uint)uVar3 <= uVar7) || (uVar12 <= *pbVar1 - uVar8)) break;
          uVar7 = uVar7 * uVar12 + (*pbVar1 - uVar8);
          lVar11 = *(long *)(lVar5 + (ulong)(uVar7 >> 7) * 8);
          if ((lVar11 == 0) || (lVar11 = *(long *)(lVar11 + (ulong)(uVar7 & 0x7f) * 8), lVar11 == 0)
             ) break;
          *plVar10 = lVar11;
          plVar10 = plVar10 + 1;
LAB_0011ccfc:
          lVar9 = lVar9 + -1;
          if (lVar9 == -1) goto LAB_0011cd37;
        }
        if (lVar6 == 0) goto LAB_0011ccfc;
        lVar9 = lVar9 + -1;
        *plVar10 = lVar6;
        plVar10 = plVar10 + 1;
      } while (lVar9 != -1);
LAB_0011cd37:
      param_2 = (long)plVar10 - (long)param_6 >> 3;
    }
  }
  *param_5 = param_2;
  return 0x55;
}



void bitmapGetMetrics(long param_1)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  undefined *puVar5;
  int iVar6;
  ulong uVar7;
  ulong *in_R8;
  long in_R9;
  
  lVar1 = *(long *)(param_1 + 0x98);
  uVar2 = *(undefined8 *)(lVar1 + 0x30);
  *(undefined **)(lVar1 + 0x30) = &DAT_0013fc90;
  iVar6 = bitmapGetGlyphs();
  if (((iVar6 == 0x55) && (lVar3 = *(long *)(lVar1 + 0x18), lVar3 != 0)) &&
     (lVar4 = *(long *)(lVar1 + 0x10), *in_R8 != 0)) {
    uVar7 = 0;
    do {
      puVar5 = *(undefined **)(in_R9 + uVar7 * 8);
      if (puVar5 != &DAT_0013fc90) {
        *(long *)(in_R9 + uVar7 * 8) = lVar3 + ((long)puVar5 - lVar4 >> 3) * 4;
      }
      uVar7 = uVar7 + 1;
    } while (uVar7 < *in_R8);
    *(undefined8 *)(lVar1 + 0x30) = uVar2;
    return;
  }
  *(undefined8 *)(lVar1 + 0x30) = uVar2;
  return;
}



undefined4 FUN_0011cf60(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4)

{
  undefined4 uVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = FontFileMatchRenderer(param_4);
  if (lVar2 != 0) {
    lVar3 = FontFileOpen(param_4);
    if (lVar3 != 0) {
      uVar1 = (*(code *)(&PTR_pcfReadFontInfo_0013dbe8)
                        [(long)((int)(lVar2 + -0x13eac0 >> 3) * -0x49249249) * 2])(param_2,lVar3);
      FontFileClose(lVar3);
      return uVar1;
    }
  }
  return 0x53;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int FUN_0011d000(undefined8 param_1,undefined8 *param_2,undefined8 param_3,long param_4,
                undefined8 param_5,undefined4 param_6,undefined4 param_7)

{
  long lVar1;
  int iVar2;
  long lVar3;
  undefined4 *__ptr;
  long in_FS_OFFSET;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined local_44 [4];
  long local_40;
  
  lVar1 = *(long *)(param_4 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = FontFileOpen(param_5);
  if (lVar3 == 0) {
    iVar2 = 0x53;
  }
  else {
    __ptr = (undefined4 *)CreateFontRec();
    if (__ptr == (undefined4 *)0x0) {
      iVar2 = 0x50;
      __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate pFont (%ld)\n",0xb8);
      FontFileClose(lVar3);
    }
    else {
      FontDefaultFormat(&local_54,&local_50,&local_4c,&local_48);
      CheckFSFormat(param_6,param_7,&local_54,&local_50,&local_48,&local_4c,local_44);
      *__ptr = 0;
      iVar2 = (*(code *)(&PTR_pcfReadFont_0013dbe0)
                        [(long)((int)(lVar1 + -0x13eac0 >> 3) * -0x49249249) * 2])
                        (__ptr,lVar3,local_54,local_50,local_4c,local_48);
      FontFileClose(lVar3);
      if (iVar2 == 0x55) {
        *param_2 = __ptr;
      }
      else {
        free(__ptr);
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void BitmapRegisterFontFileFunctions(void)

{
  undefined **ppuVar1;
  undefined **ppuVar2;
  
  ppuVar1 = &PTR_DAT_0013eac0;
  do {
    ppuVar2 = ppuVar1 + 7;
    FontFileRegisterRenderer(ppuVar1);
    ppuVar1 = ppuVar2;
  } while (ppuVar2 != (undefined **)&DAT_0013ecb8);
  return;
}



void bitmapComputeFontBounds(long param_1)

{
  ulong *puVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  bool bVar5;
  ulong *puVar6;
  uint uVar7;
  short *psVar8;
  int iVar9;
  short *psVar10;
  short sVar11;
  int iVar12;
  uint uVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  
  lVar3 = *(long *)(param_1 + 0x98);
  lVar4 = *(long *)(lVar3 + 0x38);
  if (lVar4 == 0) {
    psVar10 = (short *)(param_1 + 0x24);
    psVar8 = (short *)(param_1 + 0x18);
  }
  else {
    psVar10 = (short *)(lVar4 + 0x3c);
    psVar8 = (short *)(lVar4 + 0x30);
  }
  psVar10[0] = 0x7fff;
  psVar10[1] = 0x7fff;
  psVar10[2] = 0x7fff;
  psVar10[3] = 0x7fff;
  psVar10[4] = 0x7fff;
  psVar10[5] = -1;
  psVar8[0] = -0x8000;
  psVar8[1] = -0x8000;
  psVar8[2] = -0x8000;
  psVar8[3] = -0x8000;
  psVar8[4] = -0x8000;
  psVar8[5] = 0;
  puVar6 = *(ulong **)(lVar3 + 0x10);
  if (*(int *)(lVar3 + 4) < 1) {
    iVar9 = -0x8000;
    bVar5 = false;
    iVar14 = 0;
    iVar15 = 0;
  }
  else {
    iVar14 = 0;
    iVar15 = 0;
    puVar1 = puVar6 + (ulong)(*(int *)(lVar3 + 4) - 1) * 3 + 3;
    iVar9 = -0x8000;
    do {
      sVar11 = *(short *)((long)puVar6 + 6);
      if (((sVar11 == 0) && (*(short *)(puVar6 + 1) == 0)) && ((*puVar6 & 0xffffffffffff) == 0)) {
LAB_0011d264:
        sVar11 = *(short *)((long)puVar6 + 4);
      }
      else {
        if (sVar11 < psVar10[3]) {
          psVar10[3] = sVar11;
          sVar11 = *(short *)((long)puVar6 + 6);
        }
        if (psVar8[3] < sVar11) {
          psVar8[3] = sVar11;
        }
        sVar11 = *(short *)(puVar6 + 1);
        if (sVar11 < psVar10[4]) {
          psVar10[4] = sVar11;
          sVar11 = *(short *)(puVar6 + 1);
        }
        if (psVar8[4] < sVar11) {
          psVar8[4] = sVar11;
        }
        sVar11 = *(short *)puVar6;
        if (sVar11 < *psVar10) {
          *psVar10 = sVar11;
          sVar11 = *(short *)puVar6;
        }
        if (*psVar8 < sVar11) {
          *psVar8 = sVar11;
        }
        sVar11 = *(short *)((long)puVar6 + 2);
        if (sVar11 < psVar10[1]) {
          psVar10[1] = sVar11;
          sVar11 = *(short *)((long)puVar6 + 2);
        }
        if (psVar8[1] < sVar11) {
          psVar8[1] = sVar11;
        }
        sVar11 = *(short *)((long)puVar6 + 4);
        if (sVar11 < psVar10[2]) {
          psVar10[2] = sVar11;
          sVar11 = *(short *)((long)puVar6 + 4);
        }
        if (psVar8[2] < sVar11) {
          psVar8[2] = sVar11;
          goto LAB_0011d264;
        }
      }
      if (sVar11 < 0) {
        iVar15 = iVar15 + 1;
      }
      else {
        iVar14 = iVar14 + 1;
      }
      psVar10[5] = psVar10[5] & *(ushort *)((long)puVar6 + 10);
      psVar8[5] = psVar8[5] | *(ushort *)((long)puVar6 + 10);
      iVar12 = (int)*(short *)((long)puVar6 + 2) - (int)*(short *)((long)puVar6 + 4);
      if (iVar9 < iVar12) {
        iVar9 = iVar12;
      }
      puVar6 = puVar6 + 3;
    } while (puVar1 != puVar6);
    bVar5 = iVar14 < iVar15;
  }
  lVar4 = *(long *)(lVar3 + 0x38);
  uVar13 = (uint)bVar5;
  if (lVar4 != 0) {
    *(ushort *)(lVar4 + 0x2a) = *(ushort *)(lVar4 + 0x2a) & 0xfe7f | (ushort)bVar5 << 7;
    *(short *)(*(long *)(lVar3 + 0x38) + 0x2c) = (short)iVar9;
    uVar13 = (uint)*(ushort *)(param_1 + 0xc);
    *(undefined8 *)(param_1 + 0x24) = 0x7fff7fff7fff7fff;
    *(undefined4 *)(param_1 + 0x2c) = 0xffff7fff;
    *(undefined8 *)(param_1 + 0x18) = 0x8000800080008000;
    *(undefined4 *)(param_1 + 0x20) = 0x8000;
    if (*(ushort *)(param_1 + 0xe) < *(ushort *)(param_1 + 0xc)) {
      iVar9 = -0x8000;
      uVar13 = (uint)bVar5;
    }
    else {
      uVar7 = 0;
      iVar12 = -0x8000;
      iVar9 = -0x8000;
      do {
        if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
          uVar2 = ((*(ushort *)(param_1 + 10) + 1) - (uint)*(ushort *)(param_1 + 8)) + uVar7;
          do {
            lVar4 = *(long *)(*(long *)(lVar3 + 0x28) + (long)((int)uVar7 >> 7) * 8);
            if ((lVar4 != 0) &&
               (puVar6 = *(ulong **)(lVar4 + (ulong)(uVar7 & 0x7f) * 8), puVar6 != (ulong *)0x0)) {
              sVar11 = *(short *)((long)puVar6 + 6);
              if ((sVar11 == 0) &&
                 ((*(short *)(puVar6 + 1) == 0 && ((*puVar6 & 0xffffffffffff) == 0)))) {
LAB_0011d41c:
                sVar11 = *(short *)((long)puVar6 + 4);
              }
              else {
                if (sVar11 < *(short *)(param_1 + 0x2a)) {
                  *(short *)(param_1 + 0x2a) = sVar11;
                  sVar11 = *(short *)((long)puVar6 + 6);
                }
                if (*(short *)(param_1 + 0x1e) < sVar11) {
                  *(short *)(param_1 + 0x1e) = sVar11;
                }
                sVar11 = *(short *)(puVar6 + 1);
                if (sVar11 < *(short *)(param_1 + 0x2c)) {
                  *(short *)(param_1 + 0x2c) = sVar11;
                  sVar11 = *(short *)(puVar6 + 1);
                }
                if (*(short *)(param_1 + 0x20) < sVar11) {
                  *(short *)(param_1 + 0x20) = sVar11;
                }
                sVar11 = *(short *)puVar6;
                if (sVar11 < *(short *)(param_1 + 0x24)) {
                  *(short *)(param_1 + 0x24) = sVar11;
                  sVar11 = *(short *)puVar6;
                }
                if (*(short *)(param_1 + 0x18) < sVar11) {
                  *(short *)(param_1 + 0x18) = sVar11;
                }
                sVar11 = *(short *)((long)puVar6 + 2);
                if (sVar11 < *(short *)(param_1 + 0x26)) {
                  *(short *)(param_1 + 0x26) = sVar11;
                  sVar11 = *(short *)((long)puVar6 + 2);
                }
                if (*(short *)(param_1 + 0x1a) < sVar11) {
                  *(short *)(param_1 + 0x1a) = sVar11;
                }
                sVar11 = *(short *)((long)puVar6 + 4);
                if (sVar11 < *(short *)(param_1 + 0x28)) {
                  *(short *)(param_1 + 0x28) = sVar11;
                  sVar11 = *(short *)((long)puVar6 + 4);
                }
                if (*(short *)(param_1 + 0x1c) < sVar11) {
                  *(short *)(param_1 + 0x1c) = sVar11;
                  goto LAB_0011d41c;
                }
              }
              if (sVar11 < 0) {
                iVar15 = iVar15 + 1;
              }
              else {
                iVar14 = iVar14 + 1;
              }
              *(ushort *)(param_1 + 0x2e) =
                   *(ushort *)(param_1 + 0x2e) & *(ushort *)((long)puVar6 + 10);
              *(ushort *)(param_1 + 0x22) =
                   *(ushort *)(param_1 + 0x22) | *(ushort *)((long)puVar6 + 10);
              iVar16 = (int)*(short *)((long)puVar6 + 2) - (int)*(short *)((long)puVar6 + 4);
              bVar5 = iVar9 < iVar16;
              iVar9 = iVar12;
              if (bVar5) {
                iVar9 = iVar16;
                iVar12 = iVar16;
              }
            }
            uVar7 = uVar7 + 1;
          } while (uVar2 != uVar7);
        }
        uVar13 = uVar13 + 1;
      } while (*(ushort *)(param_1 + 0xe) + 1 != uVar13);
      uVar13 = (uint)(iVar14 < iVar15);
    }
  }
  *(short *)(param_1 + 0x14) = (short)iVar9;
  *(ushort *)(param_1 + 0x12) = (ushort)(uVar13 << 7) | *(ushort *)(param_1 + 0x12) & 0xfe7f;
  return;
}



void bitmapComputeFontInkBounds(long param_1)

{
  uint uVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  short *psVar5;
  short *psVar6;
  short *psVar7;
  uint uVar8;
  short *psVar9;
  short *psVar10;
  short sVar11;
  uint uVar12;
  
  lVar3 = *(long *)(param_1 + 0x98);
  lVar4 = *(long *)(lVar3 + 0x38);
  if (*(long *)(lVar3 + 0x18) != 0) {
    if (lVar4 == 0) {
      psVar10 = (short *)(param_1 + 0x3c);
      psVar9 = (short *)(param_1 + 0x30);
    }
    else {
      psVar10 = (short *)(lVar4 + 0x54);
      psVar9 = (short *)(lVar4 + 0x48);
    }
    psVar10[0] = 0x7fff;
    psVar10[1] = 0x7fff;
    psVar10[2] = 0x7fff;
    psVar10[3] = 0x7fff;
    psVar10[4] = 0x7fff;
    psVar10[5] = -1;
    psVar9[0] = -0x8000;
    psVar9[1] = -0x8000;
    psVar9[2] = -0x8000;
    psVar9[3] = -0x8000;
    psVar9[4] = -0x8000;
    psVar9[5] = 0;
    iVar2 = *(int *)(lVar3 + 4);
    psVar5 = *(short **)(lVar3 + 0x18);
    if (0 < iVar2) {
      psVar6 = psVar5;
      do {
        sVar11 = psVar6[3];
        if ((((sVar11 != 0) || (psVar6[4] != 0)) || (*psVar6 != 0)) ||
           ((psVar6[1] != 0 || (psVar6[2] != 0)))) {
          if (sVar11 < psVar10[3]) {
            psVar10[3] = sVar11;
            sVar11 = psVar6[3];
          }
          if (psVar9[3] < sVar11) {
            psVar9[3] = sVar11;
          }
          sVar11 = psVar6[4];
          if (sVar11 < psVar10[4]) {
            psVar10[4] = sVar11;
            sVar11 = psVar6[4];
          }
          if (psVar9[4] < sVar11) {
            psVar9[4] = sVar11;
          }
          sVar11 = *psVar6;
          if (sVar11 < *psVar10) {
            *psVar10 = sVar11;
            sVar11 = *psVar6;
          }
          if (*psVar9 < sVar11) {
            *psVar9 = sVar11;
          }
          sVar11 = psVar6[1];
          if (sVar11 < psVar10[1]) {
            psVar10[1] = sVar11;
            sVar11 = psVar6[1];
          }
          if (psVar9[1] < sVar11) {
            psVar9[1] = sVar11;
          }
          sVar11 = psVar6[2];
          if (sVar11 < psVar10[2]) {
            psVar10[2] = sVar11;
            sVar11 = psVar6[2];
          }
          if (psVar9[2] < sVar11) {
            psVar9[2] = sVar11;
          }
        }
        psVar7 = psVar6 + 6;
        psVar10[5] = psVar10[5] & psVar6[5];
        psVar9[5] = psVar9[5] | psVar6[5];
        psVar6 = psVar7;
      } while (psVar5 + ((ulong)(iVar2 - 1) * 3 + 3) * 2 != psVar7);
    }
    if (*(long *)(lVar3 + 0x38) != 0) {
      *(undefined4 *)(param_1 + 0x38) = 0x8000;
      uVar12 = (uint)*(ushort *)(param_1 + 0xc);
      *(undefined8 *)(param_1 + 0x3c) = 0x7fff7fff7fff7fff;
      *(undefined4 *)(param_1 + 0x44) = 0xffff7fff;
      *(undefined8 *)(param_1 + 0x30) = 0x8000800080008000;
      if (*(ushort *)(param_1 + 0xc) <= *(ushort *)(param_1 + 0xe)) {
        uVar8 = 0;
        do {
          if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
            uVar1 = ((*(ushort *)(param_1 + 10) + 1) - (uint)*(ushort *)(param_1 + 8)) + uVar8;
            do {
              lVar4 = *(long *)(*(long *)(lVar3 + 0x28) + (long)((int)uVar8 >> 7) * 8);
              if ((lVar4 != 0) && (lVar4 = *(long *)(lVar4 + (ulong)(uVar8 & 0x7f) * 8), lVar4 != 0)
                 ) {
                psVar10 = (short *)(*(long *)(lVar3 + 0x18) +
                                   (long)((int)(lVar4 - *(long *)(lVar3 + 0x10) >> 3) * -0x55555555)
                                   * 0xc);
                sVar11 = psVar10[3];
                if (((sVar11 != 0) || (((psVar10[4] != 0 || (*psVar10 != 0)) || (psVar10[1] != 0))))
                   || (psVar10[2] != 0)) {
                  if (sVar11 < *(short *)(param_1 + 0x42)) {
                    *(short *)(param_1 + 0x42) = sVar11;
                    sVar11 = psVar10[3];
                  }
                  if (*(short *)(param_1 + 0x36) < sVar11) {
                    *(short *)(param_1 + 0x36) = sVar11;
                  }
                  sVar11 = psVar10[4];
                  if (sVar11 < *(short *)(param_1 + 0x44)) {
                    *(short *)(param_1 + 0x44) = sVar11;
                    sVar11 = psVar10[4];
                  }
                  if (*(short *)(param_1 + 0x38) < sVar11) {
                    *(short *)(param_1 + 0x38) = sVar11;
                  }
                  sVar11 = *psVar10;
                  if (sVar11 < *(short *)(param_1 + 0x3c)) {
                    *(short *)(param_1 + 0x3c) = sVar11;
                    sVar11 = *psVar10;
                  }
                  if (*(short *)(param_1 + 0x30) < sVar11) {
                    *(short *)(param_1 + 0x30) = sVar11;
                  }
                  sVar11 = psVar10[1];
                  if (sVar11 < *(short *)(param_1 + 0x3e)) {
                    *(short *)(param_1 + 0x3e) = sVar11;
                    sVar11 = psVar10[1];
                  }
                  if (*(short *)(param_1 + 0x32) < sVar11) {
                    *(short *)(param_1 + 0x32) = sVar11;
                  }
                  sVar11 = psVar10[2];
                  if (sVar11 < *(short *)(param_1 + 0x40)) {
                    *(short *)(param_1 + 0x40) = sVar11;
                    sVar11 = psVar10[2];
                  }
                  if (*(short *)(param_1 + 0x34) < sVar11) {
                    *(short *)(param_1 + 0x34) = sVar11;
                  }
                }
                *(ushort *)(param_1 + 0x46) = *(ushort *)(param_1 + 0x46) & psVar10[5];
                *(ushort *)(param_1 + 0x3a) = *(ushort *)(param_1 + 0x3a) | psVar10[5];
              }
              uVar8 = uVar8 + 1;
            } while (uVar1 != uVar8);
          }
          uVar12 = uVar12 + 1;
        } while (*(ushort *)(param_1 + 0xe) + 1 != uVar12);
      }
    }
    return;
  }
  if (lVar4 != 0) {
    *(undefined8 *)(lVar4 + 0x54) = *(undefined8 *)(lVar4 + 0x3c);
    *(undefined4 *)(lVar4 + 0x5c) = *(undefined4 *)(lVar4 + 0x44);
    lVar3 = *(long *)(lVar3 + 0x38);
    *(undefined8 *)(lVar3 + 0x48) = *(undefined8 *)(lVar3 + 0x30);
    *(undefined4 *)(lVar3 + 0x50) = *(undefined4 *)(lVar3 + 0x38);
  }
  *(undefined8 *)(param_1 + 0x3c) = *(undefined8 *)(param_1 + 0x24);
  *(undefined4 *)(param_1 + 0x44) = *(undefined4 *)(param_1 + 0x2c);
  *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0x18);
  *(undefined4 *)(param_1 + 0x38) = *(undefined4 *)(param_1 + 0x20);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 bitmapAddInkMetrics(long param_1)

{
  long lVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  void *pvVar5;
  undefined8 uVar6;
  long lVar7;
  int iVar8;
  
  lVar4 = *(long *)(param_1 + 0x98);
  iVar3 = *(int *)(lVar4 + 4);
  pvVar5 = malloc((long)iVar3 * 0xc);
  *(void **)(lVar4 + 0x18) = pvVar5;
  if (pvVar5 == (void *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate ink_metrics (%d*%ld)\n",iVar3,0xc);
    uVar6 = 0;
  }
  else {
    lVar7 = 0;
    iVar8 = 0;
    if (0 < iVar3) {
      while( true ) {
        lVar2 = (long)pvVar5 + lVar7;
        iVar8 = iVar8 + 1;
        lVar1 = lVar7 * 2;
        lVar7 = lVar7 + 0xc;
        FontCharInkMetrics(param_1,*(long *)(lVar4 + 0x10) + lVar1,lVar2);
        if (*(int *)(lVar4 + 4) <= iVar8) break;
        pvVar5 = *(void **)(lVar4 + 0x18);
      }
    }
    *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) | 0x20;
    uVar6 = 1;
  }
  return uVar6;
}



undefined8 bitmapComputeWeight(void)

{
  return 10;
}



undefined8
FUN_0011d9e0(long param_1,uint *param_2,double *param_3,double *param_4,double *param_5,
            double *param_6,double *param_7)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double dVar5;
  
  dVar1 = hypot(*(double *)(param_1 + 8),*(double *)(param_1 + 0x10));
  dVar2 = hypot(*(double *)(param_2 + 2),*(double *)(param_2 + 4));
  dVar3 = hypot(*(double *)(param_1 + 0x18),*(double *)(param_1 + 0x20));
  dVar4 = hypot(*(double *)(param_2 + 6),*(double *)(param_2 + 8));
  if (dVar1 < 1e-20) {
    *param_3 = 0.0;
    *param_5 = 0.0;
  }
  else {
    *param_3 = dVar2 / dVar1;
    *param_5 = 1000.0 / dVar1;
  }
  *param_7 = 1.0;
  if (((0 < *(int *)(param_1 + 0x58)) && (0 < (int)param_2[0x16])) &&
     (dVar1 = *param_3, 1e-20 < ABS(dVar1))) {
    dVar2 = (double)*(int *)(param_1 + 0x58);
    dVar5 = (double)(int)param_2[0x16] / dVar2;
    if (((*param_2 & 3) == 2) || ((*param_2 & 0xc) == 8)) {
      if (10.0 <= ABS(dVar5 * dVar2 - dVar2 * dVar1)) {
        return 0;
      }
    }
    else {
      *param_7 = dVar5 / dVar1;
      *param_3 = dVar5;
    }
  }
  if (dVar3 < 1e-20) {
    *param_4 = 0.0;
    *param_6 = 0.0;
    return 1;
  }
  *param_4 = dVar4 / dVar3;
  *param_6 = 1000.0 / dVar3;
  return 1;
}



undefined8
FUN_0011dbc0(double param_1,double param_2,long param_3,double *param_4,double *param_5,
            double *param_6,double *param_7)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double dVar5;
  
  dVar3 = hypot(*(double *)(param_3 + 0x18),*(double *)(param_3 + 0x20));
  dVar4 = hypot(*(double *)(param_3 + 8),*(double *)(param_3 + 0x10));
  if ((1e-20 <= dVar3) && (1e-20 <= dVar4)) {
    param_4[2] = 0.0;
    param_4[1] = 0.0;
    param_1 = param_1 / dVar4;
    param_2 = param_2 / dVar3;
    *param_4 = param_1;
    param_4[3] = param_2;
    dVar3 = *(double *)(param_3 + 0x18);
    dVar4 = *(double *)(param_3 + 8);
    dVar1 = *(double *)(param_3 + 0x20);
    dVar2 = *(double *)(param_3 + 0x10);
    dVar5 = dVar3 * 0.0 + param_1 * dVar4;
    *param_4 = dVar5;
    param_4[1] = param_1 * dVar2 + dVar1 * 0.0;
    param_4[3] = dVar2 * 0.0 + dVar1 * param_2;
    param_4[2] = param_2 * dVar3 + dVar4 * 0.0;
    *param_6 = dVar5;
    dVar3 = param_4[3];
    *param_7 = dVar3;
    dVar4 = *param_4 * dVar3 - param_4[1] * param_4[2];
    if (1e-20 <= ABS(dVar4)) {
      *param_5 = dVar3 / dVar4;
      param_5[1] = -param_4[1] / dVar4;
      param_5[2] = -param_4[2] / dVar4;
      param_5[3] = *param_4 / dVar4;
      return 1;
    }
  }
  return 0;
}



void FUN_0011dd70(long param_1)

{
  long lVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  void *__ptr;
  int iVar5;
  
  lVar2 = *(long *)(param_1 + 0x98);
  free(*(void **)(param_1 + 0x50));
  free(*(void **)(param_1 + 0x58));
  __ptr = *(void **)(lVar2 + 0x28);
  if (__ptr != (void *)0x0) {
    iVar3 = (((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1) *
            (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1);
    iVar5 = iVar3 + 0xfe;
    if (-1 < iVar3 + 0x7f) {
      iVar5 = iVar3 + 0x7f;
    }
    if (0 < iVar3) {
      lVar4 = 0;
      do {
        lVar1 = lVar4 * 8;
        lVar4 = lVar4 + 1;
        free(*(void **)((long)__ptr + lVar1));
        __ptr = *(void **)(lVar2 + 0x28);
      } while ((int)lVar4 < iVar5 >> 7);
    }
  }
  free(__ptr);
  free(*(void **)(lVar2 + 0x20));
  free(*(void **)(lVar2 + 0x18));
  free(*(void **)(lVar2 + 0x10));
  free(*(void **)(param_1 + 0x98));
  DestroyFontRec(param_1);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

ulong BitmapOpenScalable(long param_1,undefined8 *param_2,undefined8 param_3,undefined8 *param_4,
                        undefined8 param_5,uint *param_6,undefined4 param_7,undefined4 param_8)

{
  undefined uVar1;
  byte bVar2;
  char cVar3;
  char cVar4;
  ushort uVar5;
  ushort uVar6;
  undefined4 uVar7;
  undefined4 *puVar8;
  ulong *puVar9;
  short *psVar10;
  char *pcVar11;
  long lVar12;
  int *piVar13;
  byte bVar14;
  short sVar15;
  uint uVar16;
  uint uVar17;
  int iVar18;
  uint uVar19;
  int iVar20;
  int iVar21;
  uint uVar22;
  size_t sVar23;
  undefined8 *puVar24;
  undefined4 *__ptr;
  undefined4 *puVar25;
  void *pvVar26;
  undefined *puVar27;
  uint *puVar28;
  ulong uVar29;
  uint *puVar30;
  long lVar31;
  int iVar32;
  undefined *puVar33;
  short sVar34;
  ushort uVar35;
  int iVar36;
  uint *puVar37;
  long *plVar38;
  byte *pbVar39;
  long lVar40;
  char *pcVar41;
  long lVar42;
  int *piVar43;
  undefined *puVar44;
  int *piVar45;
  long lVar46;
  long lVar47;
  undefined8 *puVar48;
  int *piVar49;
  int iVar50;
  uint *puVar51;
  long *plVar52;
  uint *puVar53;
  byte *pbVar54;
  short sVar55;
  short sVar56;
  int iVar57;
  uint uVar58;
  int iVar59;
  undefined *puVar60;
  byte *pbVar61;
  long lVar62;
  int iVar63;
  int iVar64;
  long lVar65;
  undefined8 uVar66;
  int iVar67;
  long *plVar68;
  int iVar69;
  int iVar70;
  long lVar71;
  byte *pbVar72;
  undefined **ppuVar73;
  uint uVar74;
  short *psVar75;
  undefined **ppuVar76;
  long in_FS_OFFSET;
  bool bVar77;
  double dVar78;
  double dVar79;
  double dVar80;
  double dVar81;
  double dVar82;
  double dVar83;
  double dVar84;
  double dVar85;
  double dVar86;
  double dVar87;
  double dVar88;
  double dVar89;
  ulong uVar90;
  char *local_728;
  undefined8 *local_720;
  uint *local_718;
  int local_710;
  long local_700;
  undefined8 *local_6f8;
  uint *local_6f0;
  double local_6e8;
  byte *local_6e0;
  double local_6d8;
  int *local_6d0;
  long local_6c8;
  undefined8 *local_6a8;
  int *local_6a0;
  double local_698;
  double local_690;
  int local_688;
  uint local_684;
  long local_680;
  long local_660;
  void *local_640;
  uint local_62c;
  int local_618;
  void *local_600;
  uint *local_5d0;
  double local_5c8;
  char *local_5c0;
  double local_5b8;
  uint *local_5b0;
  double local_5a8;
  char *local_5a0;
  double local_598;
  int *local_590;
  uint *local_588;
  short local_580;
  undefined2 local_57e;
  char *local_578;
  short local_570;
  undefined2 local_56e;
  double local_568;
  double local_560;
  double local_558;
  double local_550;
  undefined8 local_548;
  undefined8 uStack_540;
  undefined8 local_538;
  undefined8 uStack_530;
  undefined8 local_528;
  undefined8 uStack_520;
  undefined8 local_518;
  undefined8 uStack_510;
  undefined8 local_508;
  undefined8 uStack_500;
  undefined8 local_4f8;
  undefined8 uStack_4f0;
  ulong local_4e8;
  undefined8 uStack_4e0;
  undefined8 local_4d8;
  double local_4c8;
  double local_4c0;
  double local_4b8;
  double local_4b0;
  uint local_448 [258];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  dVar78 = hypot(*(double *)(param_6 + 6),*(double *)(param_6 + 8));
  if ((dVar78 < 1.0) ||
     (dVar78 = hypot(*(double *)(param_6 + 2),*(double *)(param_6 + 4)), dVar78 < 1.0)) {
LAB_0011e2d8:
    uVar90 = 0x53;
LAB_0011e2df:
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return uVar90 & 0xffffffff;
    }
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  sVar34 = *(short *)(param_4 + 1);
  local_590 = (int *)0x3ff0000000000000;
  local_5b0 = (uint *)0x0;
  local_5a8 = 0.0;
  local_5a0 = (char *)0x0;
  local_598 = 0.0;
  __memcpy_chk(local_448,*param_4,(long)sVar34,0x400);
  *(undefined *)((long)local_448 + (long)sVar34) = 0;
  local_588 = local_448;
  FontParseXLFDName(local_448,&local_4c8,2);
  puVar37 = local_448;
  do {
    puVar30 = puVar37;
    uVar16 = *puVar30 + 0xfefefeff & ~*puVar30;
    uVar17 = uVar16 & 0x80808080;
    puVar37 = puVar30 + 1;
  } while (uVar17 == 0);
  pcVar41 = *(char **)(param_6 + 0x18);
  bVar77 = (uVar16 & 0x8080) == 0;
  if (bVar77) {
    uVar17 = uVar17 >> 0x10;
  }
  if (bVar77) {
    puVar37 = (uint *)((long)puVar30 + 6);
  }
  local_57e = *(undefined2 *)((long)param_4 + 10);
  local_580 = (((short)puVar37 + -3) - (ushort)CARRY1((byte)uVar17,(byte)uVar17)) - (short)local_448
  ;
  local_578 = pcVar41;
  sVar23 = strlen(pcVar41);
  local_570 = (short)sVar23;
  local_56e = FontFileCountDashes(pcVar41,(int)local_570);
  local_700 = 0;
  local_688 = 0x14;
  local_680 = 0;
  local_6c8 = 0;
  local_6f8 = (undefined8 *)0x0;
  local_6a0 = (int *)0x0;
  local_6d0 = (int *)0x0;
  local_690 = 0.0;
  local_698 = 0.0;
  local_6d8 = 0.0;
  local_6e0 = (byte *)0x0;
  local_6e8 = 0.0;
  local_6f0 = (uint *)0x0;
  local_684 = -1;
  uVar90 = 0;
  local_6a8 = (undefined8 *)0x0;
  local_728 = (char *)0x7ff0000000000000;
  local_718 = (uint *)0x7ff0000000000000;
LAB_0011e09b:
  if (0 < DAT_0013fd68._4_4_) {
    local_720 = (undefined8 *)0x0;
    lVar47 = 0;
    do {
      lVar46 = lVar47 * 8;
      lVar42 = *(long *)(FontFileBitmapSources + lVar47 * 8);
      if ((local_720 == (undefined8 *)0x0) && (*(long *)(param_6 + 0x18) != 0)) {
        puVar24 = (undefined8 *)FontFileFindNameInDir(*(long *)(lVar42 + 0x18) + 0x30,&local_578);
        local_700 = lVar42;
        if (puVar24 != (undefined8 *)0x0) {
          if (*(int *)(puVar24 + 2) == 2) {
            lVar42 = *(long *)(FontFileBitmapSources + lVar46);
            local_720 = puVar24;
            goto LAB_0011e0d3;
          }
          if ((local_688 != 0) && (*(int *)(puVar24 + 2) == 3)) goto LAB_00120717;
        }
        lVar42 = *(long *)(FontFileBitmapSources + lVar46);
      }
LAB_0011e0d3:
      puVar24 = param_4;
      if (((param_1 == lVar42) ||
          (puVar24 = (undefined8 *)FontFileFindNameInDir(*(long *)(lVar42 + 0x18) + 0x18,&local_588)
          , puVar24 != (undefined8 *)0x0)) && (lVar42 = puVar24[5], 0 < *(int *)(lVar42 + 0x78))) {
        lVar71 = 0;
        do {
          puVar24 = (undefined8 *)(*(long *)(lVar42 + 0x80) + lVar71 * 0x88);
          if ((puVar24[0xf] != 0) &&
             (iVar18 = FUN_0011d9e0(puVar24,param_6,&local_5b0,&local_5a0,&local_5a8,&local_598,
                                    &local_590), iVar18 != 0)) {
            if ((double)local_5a0 < 1.0) {
              iVar18 = (int)((double)local_5a0 * 20.0);
            }
            else if ((false) || ((double)local_5a0 != 1.0)) {
              if ((false) || ((double)local_5a0 != 2.0)) {
                iVar18 = (int)(30.0 / (double)local_5a0);
              }
              else {
                iVar18 = 0x28;
              }
            }
            else {
              iVar18 = 0xa0;
            }
            if ((double)local_5b0 < 1.0) {
              uVar17 = iVar18 + (int)((double)local_5b0 + (double)local_5b0);
            }
            else if ((false) || ((double)local_5b0 != 1.0)) {
              if ((false) || ((double)local_5b0 != 2.0)) {
                uVar17 = iVar18 + (int)(3.0 / (double)local_5b0);
              }
              else {
                uVar17 = iVar18 + 4;
              }
            }
            else {
              uVar17 = iVar18 + 0x10;
            }
            if (((int)(uint)uVar90 < (int)uVar17) ||
               ((uVar17 == (uint)uVar90 &&
                (((double)local_5a0 < (double)local_728 ||
                 (((true && ((double)local_5a0 == (double)local_728)) &&
                  ((double)local_5b0 < (double)local_718)))))))) {
              local_6e8 = local_5a8;
              local_6d8 = local_598;
              uVar90 = (ulong)uVar17;
              local_6c8 = *(long *)(FontFileBitmapSources + lVar46);
              local_6d0 = local_590;
              local_728 = local_5a0;
              local_718 = local_5b0;
              local_6f8 = puVar24;
              local_6f0 = local_5b0;
              local_6e0 = (byte *)local_5a0;
            }
            if ((1e-20 < ABS((double)local_5b0)) && (1e-20 < ABS((double)local_5a0))) {
              dVar78 = *(double *)(param_6 + 2);
              dVar80 = (double)puVar24[1];
              if ((ABS(dVar78 * (double)local_590 - dVar80) < 1.0) &&
                 ((ABS(*(double *)(param_6 + 4) * (double)local_590 - (double)puVar24[2]) < 1e-20 &&
                  (ABS(*(double *)(param_6 + 6) - (double)puVar24[3]) < 1e-20)))) {
                dVar83 = *(double *)(param_6 + 8);
                dVar88 = (double)puVar24[4];
                if (ABS(dVar83 - dVar88) < 1.0) {
                  if (dVar83 / dVar88 < 1.0) {
                    dVar83 = dVar83 * 80.0;
                  }
                  else {
                    dVar83 = 80.0 / dVar83;
                  }
                  if ((dVar78 * (double)local_590) / dVar80 < 1.0) {
                    dVar78 = dVar78 * 8.0;
                  }
                  else {
                    dVar78 = 8.0 / dVar78;
                  }
                  iVar18 = (int)((dVar78 * (double)local_590) / dVar80) + (int)(dVar83 / dVar88);
                  if ((int)local_684 < iVar18) {
                    local_698 = local_5a8 / (double)local_5b0;
                    local_680 = *(long *)(FontFileBitmapSources + lVar46);
                    local_690 = local_598 / (double)local_5a0;
                    local_6a8 = puVar24;
                    local_6a0 = local_590;
                    local_684 = iVar18;
                  }
                }
              }
            }
          }
          lVar71 = lVar71 + 1;
        } while ((int)lVar71 < *(int *)(lVar42 + 0x78));
      }
      lVar47 = lVar47 + 1;
      if (DAT_0013fd68._4_4_ <= (int)lVar47) goto LAB_0011e32f;
    } while( true );
  }
  local_720 = (undefined8 *)0x0;
LAB_0011e32f:
  if (local_6a8 == (undefined8 *)0x0) {
    if (local_6f8 != (undefined8 *)0x0) {
      local_548 = *local_6f8;
      uStack_540 = local_6f8[1];
      local_538 = local_6f8[2];
      uStack_530 = local_6f8[3];
      local_528 = local_6f8[4];
      uStack_520 = local_6f8[5];
      local_518 = local_6f8[6];
      uStack_510 = local_6f8[7];
      local_508 = local_6f8[8];
      uStack_500 = local_6f8[9];
      local_4f8 = local_6f8[10];
      uStack_4f0 = local_6f8[0xb];
      local_5d0 = local_6f0;
      uVar90 = local_6f8[0xc];
      uStack_4e0 = local_6f8[0xd];
      local_5c8 = local_6e8;
      local_5b8 = local_6d8;
      local_4d8 = local_6f8[0xe];
      local_5c0 = (char *)local_6e0;
      local_590 = local_6d0;
      puVar24 = (undefined8 *)local_6f8[0xf];
      local_680 = local_6c8;
      local_4e8 = uVar90;
      goto LAB_0011e3f7;
    }
    if (local_720 != (undefined8 *)0x0) goto LAB_0011e700;
    goto LAB_0011e2d8;
  }
  local_548 = *local_6a8;
  uStack_540 = local_6a8[1];
  local_538 = local_6a8[2];
  uStack_530 = local_6a8[3];
  local_528 = local_6a8[4];
  uStack_520 = local_6a8[5];
  local_518 = local_6a8[6];
  uStack_510 = local_6a8[7];
  local_508 = local_6a8[8];
  uStack_500 = local_6a8[9];
  local_4f8 = local_6a8[10];
  uStack_4f0 = local_6a8[0xb];
  uStack_4e0 = local_6a8[0xd];
  local_5c8 = local_698;
  local_4d8 = local_6a8[0xe];
  local_5b8 = local_690;
  local_590 = local_6a0;
  local_5d0 = (uint *)0x3ff0000000000000;
  local_5c0 = (char *)0x3ff0000000000000;
  puVar24 = (undefined8 *)local_6a8[0xf];
  local_4e8 = local_6a8[0xc];
LAB_0011e3f7:
  if (local_720 == (undefined8 *)0x0) {
    if (puVar24 != (undefined8 *)0x0) goto LAB_0011e43e;
    goto LAB_0011e2d8;
  }
  if ((((puVar24 == (undefined8 *)0x0) || (false)) || ((double)local_5d0 != 1.0)) ||
     ((false || ((double)local_5c0 != 1.0)))) {
LAB_0011e700:
    FontParseXLFDName(*local_720,&local_548,0);
    iVar18 = FUN_0011d9e0(&local_548,&local_548,&local_5d0,&local_5c0,&local_5c8,&local_5b8,
                          &local_590);
    if (iVar18 == 0) goto LAB_0011e2d8;
  }
  else {
LAB_0011e43e:
    local_700 = local_680;
    local_720 = puVar24;
  }
  if ((false) || ((double)local_590 != 1.0)) {
    *param_6 = *param_6 & 0xfffffff3;
    *(double *)(param_6 + 2) = *(double *)(param_6 + 2) * (double)local_590;
    *(double *)(param_6 + 4) = (double)local_590 * *(double *)(param_6 + 4);
    FontFileCompleteXLFD(param_6,param_6);
  }
  uVar17 = FontFileOpenBitmap(local_700,&local_590,1,local_720,param_7,param_8,uVar90);
  piVar13 = local_590;
  pcVar41 = local_5c0;
  dVar78 = local_5c8;
  puVar37 = local_5d0;
  uVar90 = (ulong)uVar17;
  if (uVar17 != 0x55) goto LAB_0011e2d8;
  if (param_6[0x16] == 0) {
    param_6[0x16] = (int)((double)(int)uStack_4f0 * (double)local_5d0);
  }
  puVar8 = *(undefined4 **)(local_590 + 0x26);
  __ptr = (undefined4 *)CreateFontRec();
  if (__ptr == (undefined4 *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate FontRec (%ld)\n",0xb8);
LAB_0011f18a:
    uVar90 = 0x50;
    if (*local_590 == 0) {
      FontFileCloseFont(0);
    }
    goto LAB_0011e2df;
  }
  *__ptr = 0;
  *(undefined *)(__ptr + 0x18) = *(undefined *)(piVar13 + 0x18);
  *(undefined *)((long)__ptr + 0x61) = *(undefined *)((long)piVar13 + 0x61);
  *(undefined *)((long)__ptr + 0x62) = *(undefined *)((long)piVar13 + 0x62);
  uVar1 = *(undefined *)((long)piVar13 + 99);
  *(undefined8 *)(__ptr + 0x20) = 0;
  *(undefined *)((long)__ptr + 99) = uVar1;
  *(code **)(__ptr + 0x1a) = bitmapGetGlyphs;
  *(code **)(__ptr + 0x1c) = bitmapGetMetrics;
  *(code **)(__ptr + 0x1e) = FUN_0011dd70;
  uVar66 = *(undefined8 *)(piVar13 + 4);
  *(undefined8 *)(__ptr + 2) = *(undefined8 *)(piVar13 + 2);
  *(undefined8 *)(__ptr + 4) = uVar66;
  uVar66 = *(undefined8 *)(piVar13 + 8);
  *(undefined8 *)(__ptr + 6) = *(undefined8 *)(piVar13 + 6);
  *(undefined8 *)(__ptr + 8) = uVar66;
  uVar66 = *(undefined8 *)(piVar13 + 0xc);
  *(undefined8 *)(__ptr + 10) = *(undefined8 *)(piVar13 + 10);
  *(undefined8 *)(__ptr + 0xc) = uVar66;
  uVar66 = *(undefined8 *)(piVar13 + 0x10);
  *(undefined8 *)(__ptr + 0xe) = *(undefined8 *)(piVar13 + 0xe);
  *(undefined8 *)(__ptr + 0x10) = uVar66;
  uVar66 = *(undefined8 *)(piVar13 + 0x14);
  *(undefined8 *)(__ptr + 0x12) = *(undefined8 *)(piVar13 + 0x12);
  *(undefined8 *)(__ptr + 0x14) = uVar66;
  *(undefined8 *)(__ptr + 0x16) = *(undefined8 *)(piVar13 + 0x16);
  if (param_6[0x1a] != 0) {
    *(byte *)((long)__ptr + 0x12) = *(byte *)((long)__ptr + 0x12) & 0xbf;
    if (0 < (int)param_6[0x1a]) {
      uVar16 = 0;
      uVar17 = 0xff;
      uVar19 = 0;
      uVar22 = 0xff;
      pbVar54 = *(byte **)(param_6 + 0x1c) + 4;
      pbVar39 = *(byte **)(param_6 + 0x1c);
      pbVar72 = pbVar54;
      while( true ) {
        bVar14 = *pbVar39;
        bVar2 = pbVar39[2];
        if (bVar14 != bVar2) {
          uVar17 = (uint)*(ushort *)(piVar13 + 2);
          uVar16 = (uint)*(ushort *)((long)piVar13 + 10);
        }
        if (pbVar39[1] < uVar17) {
          uVar17 = (uint)pbVar39[1];
        }
        if (uVar16 < pbVar39[3]) {
          uVar16 = (uint)pbVar39[3];
        }
        if (bVar14 < uVar22) {
          uVar22 = (uint)bVar14;
        }
        if (uVar19 < bVar2) {
          uVar19 = (uint)bVar2;
        }
        if (pbVar54 + (ulong)(param_6[0x1a] - 1) * 4 == pbVar72) break;
        pbVar39 = pbVar72;
        pbVar72 = pbVar72 + 4;
      }
      if ((uVar17 <= uVar16) && (uVar22 <= uVar19)) {
        if (uVar17 <= *(ushort *)(piVar13 + 2)) {
          uVar17 = (uint)*(ushort *)(piVar13 + 2);
        }
        uVar74 = (uint)*(ushort *)((long)piVar13 + 10);
        if (uVar16 < *(ushort *)((long)piVar13 + 10)) {
          uVar74 = uVar16;
        }
        if (uVar22 <= *(ushort *)(piVar13 + 3)) {
          uVar22 = (uint)*(ushort *)(piVar13 + 3);
        }
        uVar16 = (uint)*(ushort *)((long)piVar13 + 0xe);
        if (uVar19 < *(ushort *)((long)piVar13 + 0xe)) {
          uVar16 = uVar19;
        }
        goto LAB_0011eaf2;
      }
    }
LAB_0011f185:
    free(__ptr);
    goto LAB_0011f18a;
  }
  uVar74 = (uint)*(ushort *)((long)piVar13 + 10);
  uVar17 = (uint)*(ushort *)(piVar13 + 2);
  uVar22 = (uint)*(ushort *)(piVar13 + 3);
  uVar16 = (uint)*(ushort *)((long)piVar13 + 0xe);
LAB_0011eaf2:
  puVar25 = (undefined4 *)malloc(0x40);
  if (puVar25 == (undefined4 *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate bitmapFont (%ld)\n",0x40);
    free(__ptr);
    goto LAB_0011f18a;
  }
  iVar18 = (uVar74 - uVar17) + 1;
  uVar19 = ((uVar16 - uVar22) + 1) * iVar18;
  *(short *)(__ptr + 2) = (short)uVar17;
  *(short *)(__ptr + 3) = (short)uVar22;
  *(short *)((long)__ptr + 0xe) = (short)uVar16;
  *(short *)((long)__ptr + 10) = (short)uVar74;
  *(undefined4 **)(__ptr + 0x26) = puVar25;
  uVar7 = *puVar8;
  puVar25[1] = uVar19;
  *puVar25 = uVar7;
  uVar7 = puVar8[2];
  *(undefined8 *)(puVar25 + 6) = 0;
  puVar25[2] = uVar7;
  *(undefined8 *)(puVar25 + 8) = 0;
  *(undefined8 *)(puVar25 + 10) = 0;
  *(undefined8 *)(puVar25 + 0xe) = 0;
  *(undefined8 *)(puVar25 + 0xc) = 0;
  pvVar26 = malloc((long)(int)uVar19 * 0x18);
  *(void **)(puVar25 + 4) = pvVar26;
  if (pvVar26 == (void *)0x0) {
    uVar66 = 0x18;
    pcVar41 = "Error: Couldn\'t allocate metrics (%d*%ld)\n";
LAB_00121138:
    __fprintf_chk(_stderr,1,pcVar41,uVar19,uVar66);
LAB_0011f2b8:
    free(__ptr);
    free(*(void **)(puVar25 + 4));
    free(*(void **)(puVar25 + 6));
    free(*(void **)(puVar25 + 8));
    __ptr = *(undefined4 **)(puVar25 + 10);
    if (__ptr != (undefined4 *)0x0) {
      iVar18 = uVar19 + 0xfe;
      if (-1 < (int)(uVar19 + 0x7f)) {
        iVar18 = uVar19 + 0x7f;
      }
      if (0 < (int)uVar19) {
        lVar47 = 0;
        do {
          lVar46 = lVar47 * 2;
          lVar47 = lVar47 + 1;
          free(*(void **)(__ptr + lVar46));
          __ptr = *(undefined4 **)(puVar25 + 10);
        } while ((int)lVar47 < iVar18 >> 7);
      }
    }
    goto LAB_0011f185;
  }
  iVar20 = uVar19 + 0xfe;
  if (-1 < (int)(uVar19 + 0x7f)) {
    iVar20 = uVar19 + 0x7f;
  }
  pvVar26 = calloc((long)(iVar20 >> 7),8);
  *(void **)(puVar25 + 10) = pvVar26;
  if (pvVar26 == (void *)0x0) {
    uVar66 = 8;
    pcVar41 = "Error: Couldn\'t allocate encoding (%d*%ld)\n";
    goto LAB_00121138;
  }
  if ((false) || ((double)puVar37 != (double)pcVar41)) {
    bVar14 = *(byte *)((long)__ptr + 0x13) | 4;
    *(byte *)((long)__ptr + 0x13) = bVar14;
  }
  else {
    bVar14 = *(byte *)((long)__ptr + 0x13) & 0xfb;
    *(byte *)((long)__ptr + 0x13) = bVar14;
  }
  *(byte *)((long)__ptr + 0x13) = bVar14 | 2;
  iVar20 = FUN_0011dbc0(puVar37,pcVar41,param_6,&local_568,&local_4c8);
  if (iVar20 == 0) goto LAB_0011f2b8;
  *(short *)(__ptr + 0x12) =
       (short)(int)((double)(int)*(short *)(piVar13 + 0x12) * (double)local_578);
  sVar34 = *(short *)((long)piVar13 + 0x4a);
  *(undefined8 *)(__ptr + 8) = 0x7fff7fff80008000;
  *(undefined8 *)(__ptr + 10) = 0x7fff7fff7fff7fff;
  *(short *)((long)__ptr + 0x4a) = (short)(int)((double)(int)sVar34 * (double)local_578);
  *(undefined8 *)(__ptr + 6) = 0x8000800080008000;
  psVar75 = *(short **)(puVar25 + 4);
  if ((int)uVar19 < 1) {
    *(undefined8 *)(__ptr + 0xc) = 0x8000800080008000;
    *(undefined8 *)(__ptr + 0xf) = *(undefined8 *)(__ptr + 9);
    __ptr[0xe] = __ptr[8];
    __ptr[0x11] = __ptr[0xb];
LAB_0012057f:
    param_6[0x16] = 0;
    local_660 = 0;
  }
  else {
    uVar16 = 0;
    iVar20 = 0;
    do {
      iVar21 = (int)uVar16 / iVar18 + uVar22;
      iVar57 = ((((uint)*(ushort *)((long)piVar13 + 10) - (uint)*(ushort *)(piVar13 + 2)) + 1) *
                (iVar21 - (uint)*(ushort *)(piVar13 + 3)) + (int)uVar16 % iVar18 + uVar17) -
               (uint)*(ushort *)(piVar13 + 2);
      iVar63 = iVar57 + 0x7f;
      if (-1 < iVar57) {
        iVar63 = iVar57;
      }
      lVar47 = *(long *)(*(long *)(puVar8 + 10) + (long)(iVar63 >> 7) * 8);
      if ((lVar47 != 0) &&
         (puVar9 = *(ulong **)(lVar47 + (long)(iVar57 % 0x80) * 8), puVar9 != (ulong *)0x0)) {
        uVar74 = param_6[0x1a];
        if ((uVar74 == 0) ||
           (iVar63 = (int)uVar16 % iVar18 + uVar17 + iVar21 * 0x100, (int)uVar74 < 1)) {
LAB_0011f045:
          if ((((*puVar9 & 0xffff0000ffffffff) != 0) || (*(short *)(puVar9 + 1) != 0)) ||
             (*(short *)((long)puVar9 + 4) != 0)) {
            plVar52 = (long *)(*(long *)(puVar25 + 10) + (long)((int)uVar16 >> 7) * 8);
            lVar47 = *plVar52;
            if (lVar47 == 0) {
              pvVar26 = calloc(0x80,8);
              *plVar52 = (long)pvVar26;
              lVar47 = *(long *)(*(long *)(puVar25 + 10) + (long)((int)uVar16 >> 7) * 8);
              if (lVar47 == 0) goto LAB_0011f2b8;
            }
            *(short **)(lVar47 + (ulong)(uVar16 & 0x7f) * 8) = psVar75;
            dVar86 = local_568 * (double)(int)*(short *)puVar9;
            dVar83 = (double)(int)*(short *)puVar9 * local_560;
            dVar88 = local_558 * (double)-(int)*(short *)(puVar9 + 1);
            dVar82 = (double)-(int)*(short *)(puVar9 + 1) * local_550;
            dVar85 = local_558 * (double)(int)*(short *)((long)puVar9 + 6);
            dVar84 = local_550 * (double)(int)*(short *)((long)puVar9 + 6);
            dVar81 = dVar86 + dVar88;
            dVar79 = dVar83 + dVar82;
            dVar86 = dVar86 + dVar85;
            dVar83 = dVar83 + dVar84;
            dVar80 = dVar86;
            if (dVar86 <= dVar81) {
              dVar80 = dVar81;
            }
            if (dVar81 <= dVar86) {
              dVar86 = dVar81;
            }
            dVar81 = dVar79;
            if (dVar83 < dVar79) {
              dVar81 = dVar83;
            }
            if (dVar83 <= dVar79) {
              dVar83 = dVar79;
            }
            dVar79 = local_568 * (double)(int)*(short *)((long)puVar9 + 2);
            dVar89 = local_560 * (double)(int)*(short *)((long)puVar9 + 2);
            dVar88 = dVar88 + dVar79;
            dVar82 = dVar82 + dVar89;
            dVar87 = dVar88;
            if (dVar88 <= dVar80) {
              dVar87 = dVar80;
            }
            if (dVar86 <= dVar88) {
              dVar88 = dVar86;
            }
            if (dVar82 < dVar81) {
              dVar81 = dVar82;
            }
            dVar79 = dVar79 + dVar85;
            dVar89 = dVar89 + dVar84;
            if (dVar82 <= dVar83) {
              dVar82 = dVar83;
            }
            dVar80 = dVar79;
            if (dVar79 <= dVar87) {
              dVar80 = dVar87;
            }
            if (dVar88 <= dVar79) {
              dVar79 = dVar88;
            }
            if (dVar89 < dVar81) {
              dVar81 = dVar89;
            }
            dVar81 = -dVar81;
            if (dVar89 <= dVar82) {
              dVar89 = dVar82;
            }
            if (ABS(dVar79) < 4503599627370496.0) {
              dVar79 = (double)((ulong)dVar79 & 0x8000000000000000 |
                               (ulong)((double)(long)dVar79 -
                                      (double)(-(ulong)(dVar79 < (double)(long)dVar79) &
                                              0x3ff0000000000000)));
            }
            dVar80 = dVar80 + 0.5;
            *psVar75 = (short)(int)dVar79;
            if (ABS(dVar80) < 4503599627370496.0) {
              dVar80 = (double)((ulong)dVar80 & 0x8000000000000000 |
                               (ulong)((double)(long)dVar80 -
                                      (double)(-(ulong)(dVar80 < (double)(long)dVar80) &
                                              0x3ff0000000000000)));
            }
            sVar34 = (short)(int)dVar80;
            psVar75[1] = sVar34;
            if (ABS(dVar81) < 4503599627370496.0) {
              dVar81 = (double)((ulong)dVar81 & 0x8000000000000000 |
                               (ulong)((double)(long)dVar81 +
                                      (double)(-(ulong)((double)(long)dVar81 < dVar81) &
                                              0x3ff0000000000000)));
            }
            dVar89 = dVar89 + 0.5;
            psVar75[4] = (short)(int)dVar81;
            if (ABS(dVar89) < 4503599627370496.0) {
              dVar89 = (double)((ulong)dVar89 & 0x8000000000000000 |
                               (ulong)((double)(long)dVar89 -
                                      (double)(-(ulong)(dVar89 < (double)(long)dVar89) &
                                              0x3ff0000000000000)));
            }
            sVar15 = (short)(int)dVar89;
            psVar75[3] = sVar15;
            iVar20 = iVar20 + *(short *)((long)puVar9 + 4);
            dVar80 = (double)(int)*(short *)((long)puVar9 + 4) * (double)local_588;
            if (dVar80 < 0.0) {
              sVar55 = (short)(long)(dVar80 - 0.5);
            }
            else {
              sVar55 = (short)(long)(dVar80 + 0.5);
            }
            psVar75[2] = sVar55;
            dVar80 = (double)(int)*(short *)((long)puVar9 + 4) * dVar78;
            if (dVar80 < 0.0) {
              sVar56 = (short)(long)(dVar80 - 0.5);
            }
            else {
              sVar56 = (short)(long)(dVar80 + 0.5);
            }
            psVar75[5] = sVar56;
            if (sVar55 == 0) {
              if ((short)(int)dVar79 == sVar34) {
                psVar75[1] = sVar34 + 1;
              }
              if ((int)sVar15 + (int)(short)(int)dVar81 == 0) {
                psVar75[3] = sVar15 + 1;
              }
            }
            psVar75 = psVar75 + 0xc;
          }
        }
        else {
          pbVar54 = *(byte **)(param_6 + 0x1c);
          uVar58 = 0;
          do {
            if (((int)((uint)*pbVar54 * 0x100 + (uint)pbVar54[1]) <= iVar63) &&
               (iVar63 <= (int)((uint)pbVar54[2] * 0x100 + (uint)pbVar54[3]))) {
              if (uVar74 != uVar58) goto LAB_0011f045;
              break;
            }
            uVar58 = uVar58 + 1;
            pbVar54 = pbVar54 + 4;
          } while (uVar74 != uVar58);
        }
      }
      uVar16 = uVar16 + 1;
    } while (uVar19 != uVar16);
    lVar47 = 0;
    uVar16 = 0;
    iVar63 = 0;
    do {
      lVar46 = *(long *)(*(long *)(puVar25 + 10) + (long)((int)uVar16 >> 7) * 8);
      if ((lVar46 != 0) &&
         (psVar75 = *(short **)(lVar46 + (ulong)(uVar16 & 0x7f) * 8), psVar75 != (short *)0x0)) {
        iVar57 = ((int)uVar16 % iVar18 +
                  (((int)uVar16 / iVar18 + uVar22) - (uint)*(ushort *)(piVar13 + 3)) *
                  (((uint)*(ushort *)((long)piVar13 + 10) - (uint)*(ushort *)(piVar13 + 2)) + 1) +
                 uVar17) - (uint)*(ushort *)(piVar13 + 2);
        iVar21 = iVar57 + 0x7f;
        if (-1 < iVar57) {
          iVar21 = iVar57;
        }
        lVar46 = *(long *)(*(long *)(puVar8 + 10) + (long)(iVar21 >> 7) * 8);
        if ((lVar46 != 0) && (*(long *)(lVar46 + (long)(iVar57 % 0x80) * 8) != 0)) {
          iVar63 = iVar63 + 1;
          lVar47 = lVar47 + (ulong)((uint)(ushort)(psVar75[5] ^ psVar75[5] >> 0xf) -
                                    (uint)(ushort)(psVar75[5] >> 0xf) & 0xffff);
          sVar34 = *psVar75;
          if (sVar34 < *(short *)(__ptr + 9)) {
            *(short *)(__ptr + 9) = sVar34;
            sVar34 = *psVar75;
          }
          if (*(short *)(__ptr + 6) < sVar34) {
            *(short *)(__ptr + 6) = sVar34;
          }
          sVar34 = psVar75[1];
          if (sVar34 < *(short *)((long)__ptr + 0x26)) {
            *(short *)((long)__ptr + 0x26) = sVar34;
            sVar34 = psVar75[1];
          }
          if (*(short *)((long)__ptr + 0x1a) < sVar34) {
            *(short *)((long)__ptr + 0x1a) = sVar34;
          }
          sVar34 = psVar75[3];
          if (sVar34 < *(short *)((long)__ptr + 0x2a)) {
            *(short *)((long)__ptr + 0x2a) = sVar34;
            sVar34 = psVar75[3];
          }
          if (*(short *)((long)__ptr + 0x1e) < sVar34) {
            *(short *)((long)__ptr + 0x1e) = sVar34;
          }
          sVar34 = psVar75[4];
          if (sVar34 < *(short *)(__ptr + 0xb)) {
            *(short *)(__ptr + 0xb) = sVar34;
            sVar34 = psVar75[4];
          }
          if (*(short *)(__ptr + 8) < sVar34) {
            *(short *)(__ptr + 8) = sVar34;
          }
          sVar34 = psVar75[2];
          if (sVar34 < *(short *)(__ptr + 10)) {
            *(short *)(__ptr + 10) = sVar34;
            sVar34 = psVar75[2];
          }
          if (*(short *)(__ptr + 7) < sVar34) {
            *(short *)(__ptr + 7) = sVar34;
          }
          sVar34 = psVar75[5];
          if (sVar34 < *(short *)((long)__ptr + 0x2e)) {
            *(short *)((long)__ptr + 0x2e) = sVar34;
            sVar34 = psVar75[5];
          }
          if (*(short *)((long)__ptr + 0x22) < sVar34) {
            *(short *)((long)__ptr + 0x22) = sVar34;
          }
        }
      }
      uVar16 = uVar16 + 1;
    } while (uVar19 != uVar16);
    *(undefined8 *)(__ptr + 0xf) = *(undefined8 *)(__ptr + 9);
    __ptr[0x11] = __ptr[0xb];
    *(undefined8 *)(__ptr + 0xc) = *(undefined8 *)(__ptr + 6);
    __ptr[0xe] = __ptr[8];
    if (iVar63 == 0) goto LAB_0012057f;
    local_660 = ((long)(iVar63 >> 1) + lVar47 * 10) / (long)iVar63;
    if (iVar20 < 0) {
      local_660 = -local_660;
    }
    if (*(short *)(__ptr + 10) == *(short *)(__ptr + 7)) {
      param_6[0x16] = *(short *)(__ptr + 10) * 10;
    }
    else {
      dVar78 = ((double)local_660 * *(double *)(param_6 + 2)) / 1000.0;
      if (dVar78 < 0.0) {
        uVar17 = (uint)(long)(dVar78 - 0.5);
      }
      else {
        uVar17 = (uint)(long)(dVar78 + 0.5);
      }
      param_6[0x16] = uVar17;
    }
  }
  FontComputeInfoAccelerators(__ptr + 2);
  piVar13 = local_590;
  uVar5 = *(ushort *)(__ptr + 4);
  if (uVar5 != 0xffff) {
    uVar35 = uVar5 >> 8;
    if ((*(ushort *)(__ptr + 3) <= uVar35) && (uVar35 <= *(ushort *)((long)__ptr + 0xe))) {
      uVar6 = *(ushort *)(__ptr + 2);
      if ((uVar6 <= (uVar5 & 0xff)) && ((uVar5 & 0xff) <= *(ushort *)((long)__ptr + 10))) {
        uVar17 = ((uint)(byte)uVar5 - (uint)uVar6) +
                 ((uint)uVar35 - (uint)*(ushort *)(__ptr + 3)) *
                 (((uint)*(ushort *)((long)__ptr + 10) - (uint)uVar6) + 1);
        lVar47 = *(long *)(*(long *)(puVar25 + 10) + (ulong)(uVar17 >> 7) * 8);
        if (lVar47 != 0) {
          lVar47 = *(long *)(lVar47 + (ulong)(uVar17 & 0x7f) * 8);
        }
        *(long *)(puVar25 + 0xc) = lVar47;
      }
    }
  }
  lVar47 = *(long *)(__ptr + 0x26);
  local_5d0 = local_588;
  lVar46 = *(long *)(local_590 + 0x26);
  local_5c0 = local_578;
  iVar18 = FUN_0011dbc0(puVar37,pcVar41,param_6,&local_568,&local_4c8,&local_588,&local_578);
  if (iVar18 == 0) {
    free(__ptr);
    if (lVar47 == 0) goto LAB_0011f18a;
LAB_001205e2:
    free(*(void **)(lVar47 + 0x10));
    free(*(void **)(lVar47 + 0x18));
    free(*(void **)(lVar47 + 0x20));
    __ptr = *(undefined4 **)(lVar47 + 0x28);
    goto LAB_0011f185;
  }
  uVar5 = *(ushort *)(__ptr + 2);
  uVar35 = *(ushort *)(__ptr + 3);
  iVar18 = ((uint)*(ushort *)((long)__ptr + 10) - (uint)uVar5) + 1;
  cVar3 = *(char *)((long)__ptr + 0x62);
  uVar17 = (((uint)*(ushort *)((long)__ptr + 0xe) - (uint)uVar35) + 1) * iVar18;
  if (0 < (int)uVar17) {
    sVar23 = 0;
    lVar42 = *(long *)(lVar47 + 0x28);
    uVar16 = 0;
    do {
      lVar71 = *(long *)(lVar42 + (long)((int)uVar16 >> 7) * 8);
      if ((lVar71 != 0) &&
         (psVar75 = *(short **)(lVar71 + (ulong)(uVar16 & 0x7f) * 8), psVar75 != (short *)0x0)) {
        iVar20 = (int)psVar75[4] + (int)psVar75[3];
        iVar63 = (int)sVar23;
        if (cVar3 == '\x01') {
          sVar23 = (size_t)(uint)(iVar63 + iVar20 * (((int)psVar75[1] - (int)*psVar75) + 7 >> 3));
        }
        else if (cVar3 == '\x02') {
          sVar23 = (size_t)(iVar63 + iVar20 * (((int)psVar75[1] - (int)*psVar75) + 0xf >> 3 &
                                              0xfffffffeU));
        }
        else if (cVar3 == '\x04') {
          sVar23 = (size_t)(iVar63 + iVar20 * (((int)psVar75[1] - (int)*psVar75) + 0x1f >> 3 &
                                              0xfffffffcU));
        }
        else if (cVar3 == '\b') {
          sVar23 = (size_t)(iVar63 + iVar20 * (((int)psVar75[1] - (int)*psVar75) + 0x3f >> 3 &
                                              0xfffffff8U));
        }
      }
      uVar16 = uVar16 + 1;
    } while (uVar17 != uVar16);
    local_640 = calloc(1,sVar23);
    *(void **)(lVar47 + 0x20) = local_640;
    if (local_640 == (void *)0x0) {
      __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate bitmaps (%d)\n",sVar23);
      free(__ptr);
      free(*(void **)(lVar47 + 0x10));
      free(*(void **)(lVar47 + 0x18));
      free(*(void **)(lVar47 + 0x20));
      __ptr = *(undefined4 **)(lVar47 + 0x28);
      if (__ptr != (undefined4 *)0x0) {
        lVar46 = 0;
        while( true ) {
          lVar42 = lVar46 * 2;
          lVar46 = lVar46 + 1;
          free(*(void **)(__ptr + lVar42));
          if ((int)(uVar17 + 0x7f) >> 7 <= (int)lVar46) break;
          __ptr = *(undefined4 **)(lVar47 + 0x28);
        }
        __ptr = *(undefined4 **)(lVar47 + 0x28);
      }
      goto LAB_0011f185;
    }
    local_728._0_4_ = 0;
    do {
      lVar42 = *(long *)(lVar42 + (long)((int)(uint)local_728 >> 7) * 8);
      if ((lVar42 != 0) &&
         (psVar75 = *(short **)(lVar42 + (ulong)((uint)local_728 & 0x7f) * 8),
         psVar75 != (short *)0x0)) {
        iVar63 = ((int)(uint)local_728 % iVar18 +
                  (((int)(uint)local_728 / iVar18 + (uint)uVar35) - (uint)*(ushort *)(piVar13 + 3))
                  * (((uint)*(ushort *)((long)piVar13 + 10) - (uint)*(ushort *)(piVar13 + 2)) + 1) +
                 (uint)uVar5) - (uint)*(ushort *)(piVar13 + 2);
        iVar20 = iVar63 + 0x7f;
        if (-1 < iVar63) {
          iVar20 = iVar63;
        }
        lVar42 = *(long *)(*(long *)(lVar46 + 0x28) + (long)(iVar20 >> 7) * 8);
        if ((lVar42 != 0) &&
           (psVar10 = *(short **)(lVar42 + (long)(iVar63 % 0x80) * 8), psVar10 != (short *)0x0)) {
          *(void **)(psVar75 + 8) = local_640;
          puVar27 = &DAT_0013ecb8;
          if (*(char *)(__ptr + 0x18) == '\0') {
            puVar27 = &DAT_0013ecc0;
          }
          local_618 = (int)psVar75[3];
          local_688 = psVar75[4] + local_618;
          uVar16 = (int)psVar75[1] - (int)*psVar75;
          if ((uVar16 != 0) && (local_688 != 0)) {
            iVar63 = (int)psVar10[1] - (int)*psVar10;
            iVar20 = (int)psVar10[3] + (int)psVar10[4];
            if ((iVar63 != 0) && (iVar20 != 0)) {
              cVar4 = *(char *)((long)__ptr + 0x62);
              if (cVar4 == '\x01') {
                local_62c = iVar63 + 7 >> 3;
                local_684 = (int)(uVar16 + 7) >> 3;
              }
              else if (cVar4 == '\x02') {
                local_62c = iVar63 + 0xf >> 3 & 0xfffffffe;
                local_684 = (int)(uVar16 + 0xf) >> 3 & 0xfffffffe;
              }
              else if (cVar4 == '\x04') {
                local_62c = iVar63 + 0x1f >> 3 & 0xfffffffc;
                local_684 = (int)(uVar16 + 0x1f) >> 3 & 0xfffffffc;
              }
              else {
                local_62c = 0;
                local_684 = 0;
                if (cVar4 == '\b') {
                  local_62c = iVar63 + 0x3f >> 3 & 0xfffffff8;
                  local_684 = (int)(uVar16 + 0x3f) >> 3 & 0xfffffff8;
                }
              }
              lVar42 = *(long *)(psVar10 + 8);
              if ((((double)puVar37 <= 0.0) || ((double)pcVar41 <= 0.0)) ||
                 ((1.0 <= (double)puVar37 && (1.0 <= (double)pcVar41)))) {
LAB_0011f980:
                local_600 = (void *)0x0;
                piVar45 = (int *)0x0;
                piVar49 = (int *)0x0;
                local_6e0 = (byte *)0x0;
              }
              else {
                dVar78 = 1.0 / (double)puVar37;
                if (ABS(dVar78) < 4503599627370496.0) {
                  dVar78 = (double)((ulong)dVar78 & 0x8000000000000000 |
                                   (ulong)((double)(long)dVar78 +
                                          (double)(-(ulong)((double)(long)dVar78 < dVar78) &
                                                  0x3ff0000000000000)));
                }
                dVar80 = 1.0 / (double)pcVar41;
                if (ABS(dVar80) < 4503599627370496.0) {
                  dVar80 = (double)((ulong)dVar80 & 0x8000000000000000 |
                                   (ulong)((double)(long)dVar80 +
                                          (double)(-(ulong)((double)(long)dVar80 < dVar80) &
                                                  0x3ff0000000000000)));
                }
                iVar21 = iVar63 / 2;
                iVar57 = iVar20 / 2;
                if (dVar78 < (double)iVar21) {
                  iVar21 = (int)dVar78;
                }
                if (dVar80 < (double)iVar57) {
                  iVar57 = (int)dVar80;
                }
                if ((iVar21 < 2) && (iVar57 < 2)) goto LAB_0011f980;
                iVar59 = iVar63 + 1;
                iVar70 = (iVar20 + 1) * iVar59;
                local_6e0 = (byte *)malloc((long)iVar70);
                if (local_6e0 == (byte *)0x0) {
                  piVar45 = (int *)0x0;
                  piVar49 = (int *)0x0;
                  __fprintf_chk(_stderr,1,"Warning: Couldn\'t allocate character grayscale (%d)\n",
                                iVar70);
                  local_600 = (void *)0x0;
                  local_618 = (int)psVar75[3];
                }
                else {
                  sVar23 = (size_t)(int)(uVar16 * 2 + 4);
                  local_600 = calloc(sVar23,4);
                  piVar45 = (int *)((long)(int)uVar16 * 4 + 0xc);
                  if (local_600 == (void *)0x0) {
                    piVar49 = (int *)0x4;
                    __fprintf_chk(_stderr,1,
                                  "Warning: Couldn\'t allocate diffusion workspace (%ld)\n",
                                  sVar23 * 4);
                    free(local_6e0);
                    local_6e0 = (byte *)0x0;
                    local_618 = (int)psVar75[3];
                  }
                  else {
                    piVar49 = (int *)((long)local_600 + 4);
                    piVar45 = (int *)((long)piVar45 + (long)local_600);
                    if (iVar20 < 1) {
                      if ((iVar21 < 2) || (1 < iVar57)) goto LAB_00120c80;
                    }
                    else {
                      iVar36 = 0;
                      pbVar54 = local_6e0;
                      lVar71 = lVar42;
                      do {
                        uVar29 = 0;
                        if (0 < iVar63) {
                          do {
                            pbVar54[uVar29] =
                                 -((puVar27[(uint)uVar29 & 7] &
                                   *(byte *)(lVar71 + ((int)(uint)uVar29 >> 3))) != 0);
                            bVar77 = iVar63 - 1 != uVar29;
                            uVar29 = uVar29 + 1;
                          } while (bVar77);
                          pbVar54 = pbVar54 + (ulong)(iVar63 - 1) + 1;
                        }
                        iVar36 = iVar36 + 1;
                        lVar71 = lVar71 + (int)local_62c;
                        pbVar54 = pbVar54 + 1;
                      } while (iVar20 != iVar36);
                      if (iVar21 < 2) {
LAB_00120c80:
                        iVar50 = iVar57 >> 1;
                        iVar70 = iVar57 - iVar50;
                        iVar36 = iVar70 + -1;
                        if (0 < iVar63) {
                          pbVar54 = local_6e0 + iVar63;
                          lVar62 = (long)iVar63 + 1;
                          lVar40 = (long)(iVar50 * iVar59);
                          pbVar72 = local_6e0 + lVar40;
                          lVar71 = (long)((1 - iVar70) * iVar59);
                          lVar31 = ((ulong)(iVar70 - 2) + 1) * lVar62;
                          pbVar39 = local_6e0;
                          do {
                            iVar32 = 0;
                            iVar64 = 0;
                            pbVar61 = pbVar39;
                            do {
                              bVar14 = *pbVar61;
                              iVar64 = iVar64 + 1;
                              pbVar61 = pbVar61 + iVar59;
                              iVar32 = iVar32 + (uint)bVar14;
                            } while (iVar50 != iVar64);
                            if (iVar36 < 1) {
                              local_710 = 0;
                              pbVar61 = pbVar54;
                              iVar64 = iVar50;
                              local_718 = (uint *)pbVar39;
                            }
                            else {
                              iVar64 = iVar50 + 1;
                              lVar65 = 0;
                              do {
                                iVar32 = iVar32 + (uint)pbVar72[lVar65];
                                iVar69 = iVar32 / iVar64;
                                iVar64 = iVar64 + 1;
                                pbVar54[lVar65] = (byte)iVar69;
                                lVar65 = lVar65 + lVar62;
                              } while (iVar50 + iVar70 != iVar64);
                              pbVar61 = pbVar54 + lVar31;
                              iVar64 = iVar50 + iVar36;
                              local_718 = (uint *)(pbVar72 + (lVar31 - lVar40));
                              local_710 = iVar36;
                            }
                            if (iVar64 < iVar20) {
                              lVar65 = 0;
                              iVar64 = local_710 + iVar50;
                              do {
                                bVar14 = *(byte *)((long)local_718 + lVar65 + lVar40);
                                iVar64 = iVar64 + 1;
                                pbVar61[lVar65] = (byte)((int)(iVar32 + (uint)bVar14) / iVar57);
                                lVar12 = lVar65 + lVar71;
                                lVar65 = lVar65 + lVar62;
                                iVar32 = (iVar32 + (uint)bVar14) -
                                         (uint)*(byte *)((long)local_718 + lVar12);
                              } while (iVar64 < iVar20);
                              iVar64 = local_710 + 1 + iVar50;
                              lVar65 = (ulong)(uint)(iVar20 - iVar64) + 1;
                              if (iVar20 < iVar64) {
                                lVar65 = 1;
                              }
                              local_718 = (uint *)((long)local_718 + lVar65 * lVar62);
                              pbVar61 = pbVar61 + lVar65 * lVar62;
                            }
                            lVar65 = 0;
                            iVar64 = iVar50 + iVar36;
                            do {
                              pbVar61[lVar65] = (byte)(iVar32 / iVar64);
                              lVar12 = lVar65 + lVar71;
                              lVar65 = lVar65 + lVar62;
                              iVar32 = iVar32 - (uint)*(byte *)((long)local_718 + lVar12);
                              bVar77 = iVar70 != iVar64;
                              iVar64 = iVar64 + -1;
                            } while (bVar77);
                            lVar65 = 0;
                            iVar64 = 0;
                            if (0 < iVar20) {
                              do {
                                iVar64 = iVar64 + 1;
                                pbVar39[lVar65] = pbVar54[lVar65];
                                lVar65 = lVar65 + lVar62;
                              } while (iVar20 != iVar64);
                            }
                            pbVar39 = pbVar39 + 1;
                            pbVar72 = pbVar72 + 1;
                          } while (local_6e0 + lVar40 + 1 + (ulong)(iVar63 - 1) != pbVar72);
                        }
                        if (iVar20 < 1) goto LAB_0011f999;
                      }
                      else {
                        iVar36 = 0;
                        iVar64 = iVar21 >> 1;
                        iVar50 = iVar21 - iVar64;
                        pbVar72 = local_6e0 + (iVar70 - iVar59);
                        uVar22 = iVar64 - 1;
                        pbVar54 = local_6e0 + (ulong)uVar22 + 1;
                        pbVar39 = local_6e0 + iVar64;
                        local_718 = (uint *)local_6e0;
                        do {
                          iVar70 = 0;
                          puVar30 = local_718;
                          do {
                            bVar14 = *(byte *)puVar30;
                            puVar30 = (uint *)((long)puVar30 + 1);
                            iVar70 = iVar70 + (uint)bVar14;
                          } while ((uint *)pbVar54 != puVar30);
                          if (iVar50 < 2) {
                            local_6f0._0_4_ = 0;
                            pbVar61 = pbVar72;
                            puVar30 = local_718;
                            iVar32 = iVar64;
                          }
                          else {
                            lVar71 = (ulong)(iVar50 - 2) + 1;
                            uVar29 = 0;
                            do {
                              iVar70 = iVar70 + (uint)pbVar39[uVar29];
                              pbVar72[uVar29] = (byte)(iVar70 / (iVar64 + 1 + (int)uVar29));
                              bVar77 = iVar50 - 2 != uVar29;
                              uVar29 = uVar29 + 1;
                            } while (bVar77);
                            pbVar61 = pbVar72 + lVar71;
                            puVar30 = (uint *)((long)local_718 + lVar71);
                            iVar32 = iVar64 + iVar50 + -1;
                            local_6f0._0_4_ = iVar50 + -1;
                          }
                          if (iVar32 < iVar63) {
                            lVar71 = 0;
                            do {
                              bVar14 = *(byte *)((long)puVar30 + lVar71 + iVar64);
                              pbVar61[lVar71] = (byte)((int)(iVar70 + (uint)bVar14) / iVar21);
                              lVar31 = lVar71 + (1 - iVar50);
                              lVar71 = lVar71 + 1;
                              iVar70 = (iVar70 + (uint)bVar14) -
                                       (uint)*(byte *)((long)puVar30 + lVar31);
                            } while (iVar64 + (int)local_6f0 + (int)lVar71 < iVar63);
                            iVar32 = (int)local_6f0 + 1 + iVar64;
                            lVar71 = (ulong)(uint)(iVar63 - iVar32) + 1;
                            if (iVar63 < iVar32) {
                              lVar71 = 1;
                            }
                            puVar30 = (uint *)((long)puVar30 + lVar71);
                            pbVar61 = pbVar61 + lVar71;
                          }
                          uVar29 = 0;
                          do {
                            pbVar61[uVar29] =
                                 (byte)(iVar70 / (int)((iVar50 + uVar22) - (int)uVar29));
                            iVar70 = iVar70 - (uint)*(byte *)((long)puVar30 +
                                                             uVar29 + (long)(1 - iVar50));
                            bVar77 = uVar22 != uVar29;
                            uVar29 = uVar29 + 1;
                          } while (bVar77);
                          memmove(local_718,pbVar72,(long)iVar63);
                          iVar36 = iVar36 + 1;
                          local_718 = (uint *)((long)local_718 + (long)iVar59);
                          pbVar54 = pbVar54 + iVar59;
                          pbVar39 = pbVar39 + iVar59;
                        } while (iVar20 != iVar36);
                        if (1 < iVar57) goto LAB_00120c80;
                      }
                      iVar59 = 0;
                      pbVar54 = local_6e0;
                      do {
                        pbVar39 = pbVar54 + (ulong)(iVar63 - 1) + 1;
                        pbVar72 = pbVar54;
                        if (0 < iVar63) {
                          do {
                            bVar14 = 0xff;
                            iVar70 = (uint)*pbVar54 * iVar21 * iVar57 * 0xc0;
                            if ((iVar70 < 0x10000) &&
                               (bVar14 = (byte)((uint)(iVar70 + 0xff) >> 8), -1 < iVar70)) {
                              bVar14 = (byte)((uint)iVar70 >> 8);
                            }
                            *pbVar54 = bVar14;
                            pbVar54 = pbVar54 + 1;
                            pbVar72 = pbVar39;
                          } while (pbVar54 != pbVar39);
                        }
                        iVar59 = iVar59 + 1;
                        pbVar54 = pbVar72 + 1;
                      } while (iVar59 < iVar20);
                    }
                  }
                }
              }
LAB_0011f999:
              iVar57 = (int)((local_4b8 * 0.0 + local_4c8) * 65536.0);
              iVar21 = (int)(-(local_4b0 * 0.0 + local_4c0) * 65536.0);
              if (0 < local_688) {
                iVar59 = 0;
                iVar70 = 0;
                do {
                  dVar78 = (double)(local_618 - iVar70) - 0.5;
                  iVar36 = (int)(((local_4c8 * ((double)(int)*psVar75 + 0.5) + local_4b8 * dVar78) -
                                 (double)(int)*psVar10) * 65536.0);
                  iVar50 = (int)(((double)(int)psVar10[3] -
                                 (((double)(int)*psVar75 + 0.5) * local_4c0 + dVar78 * local_4b0)) *
                                65536.0);
                  if (local_6e0 == (byte *)0x0) {
                    uVar22 = 0;
                    piVar43 = piVar45;
                    if (0 < (int)uVar16) {
                      do {
                        uVar19 = iVar36 >> 0x10;
                        if (((-1 < (int)uVar19) && ((int)uVar19 < iVar63)) &&
                           ((iVar64 = iVar50 >> 0x10, -1 < iVar64 &&
                            ((iVar64 < iVar20 &&
                             ((*(byte *)(lVar42 + (int)(iVar64 * local_62c + (iVar36 >> 0x13))) &
                              puVar27[uVar19 & 7]) != 0)))))) {
                          pbVar54 = (byte *)((long)local_640 + (long)(((int)uVar22 >> 3) + iVar59));
                          *pbVar54 = *pbVar54 | puVar27[uVar22 & 7];
                        }
                        uVar22 = uVar22 + 1;
                        iVar36 = iVar36 + iVar57;
                        iVar50 = iVar50 + iVar21;
                      } while (uVar16 != uVar22);
                      local_618 = (int)psVar75[3];
                    }
                  }
                  else {
                    uVar29 = 0;
                    if (0 < (int)uVar16) {
                      do {
                        iVar64 = iVar36 >> 0x10;
                        if ((((iVar64 < 0) || (iVar63 <= iVar64)) ||
                            (iVar32 = iVar50 >> 0x10, iVar32 < 0)) || (iVar20 <= iVar32)) {
                          uVar22 = 0;
                        }
                        else {
                          uVar22 = (uint)local_6e0[iVar32 * (iVar63 + 1) + iVar64];
                        }
                        iVar64 = piVar49[uVar29];
                        iVar32 = iVar64 + 0xf;
                        if (-1 < iVar64) {
                          iVar32 = iVar64;
                        }
                        iVar64 = (iVar32 >> 4) + uVar22;
                        if (iVar64 < 0x100) {
                          if (iVar64 < 0) {
                            iVar64 = 0;
                            iVar69 = 0;
                            iVar67 = 0;
                            iVar32 = 0;
                          }
                          else {
                            if (0x7f < iVar64) {
                              iVar32 = iVar64 + -0xff;
                              iVar69 = iVar32 * 3;
                              iVar67 = iVar32 * 7;
                              iVar64 = iVar32 * 5;
                              goto LAB_0011fbe8;
                            }
                            iVar32 = -iVar64;
                            iVar67 = iVar64 * -7;
                            iVar69 = iVar64 * -3;
                            iVar64 = iVar64 * -5;
                          }
                        }
                        else {
                          iVar64 = 0;
                          iVar69 = 0;
                          iVar67 = 0;
                          iVar32 = 0;
LAB_0011fbe8:
                          pbVar54 = (byte *)((long)local_640 +
                                            (long)(((int)(uint)uVar29 >> 3) + iVar59));
                          *pbVar54 = *pbVar54 | puVar27[(uint)uVar29 & 7];
                        }
                        piVar49[uVar29 + 1] = piVar49[uVar29 + 1] + iVar67;
                        iVar36 = iVar36 + iVar57;
                        iVar50 = iVar50 + iVar21;
                        piVar45[uVar29 - 1] = piVar45[uVar29 - 1] + iVar69;
                        piVar45[uVar29] = piVar45[uVar29] + iVar64;
                        piVar45[uVar29 + 1] = iVar32;
                        bVar77 = uVar16 - 1 != uVar29;
                        uVar29 = uVar29 + 1;
                      } while (bVar77);
                    }
                    *piVar45 = *piVar45 + piVar45[-1];
                    piVar45[(long)(int)uVar16 + -2] =
                         piVar45[(long)(int)uVar16 + -2] + piVar49[(int)uVar16];
                    piVar45[(long)(int)uVar16 + -1] =
                         piVar45[(long)(int)uVar16 + -1] + piVar45[(int)uVar16];
                    piVar45[(int)uVar16] = 0;
                    *piVar49 = 0;
                    piVar49[-1] = 0;
                    local_618 = (int)psVar75[3];
                    piVar43 = piVar49;
                    piVar49 = piVar45;
                  }
                  iVar70 = iVar70 + 1;
                  iVar59 = iVar59 + local_684;
                  piVar45 = piVar43;
                } while (local_688 != iVar70);
              }
              local_688 = psVar75[4] + local_618;
              if (local_6e0 != (byte *)0x0) {
                free(local_6e0);
                free(local_600);
              }
            }
          }
          if (cVar3 == '\x01') {
            local_640 = (void *)((long)local_640 +
                                (long)((((int)psVar75[1] - (int)*psVar75) + 7 >> 3) * local_688));
          }
          else if (cVar3 == '\x02') {
            local_640 = (void *)((long)local_640 +
                                (long)(int)((((int)psVar75[1] - (int)*psVar75) + 0xf >> 3 &
                                            0xfffffffeU) * local_688));
          }
          else if (cVar3 == '\x04') {
            local_640 = (void *)((long)local_640 +
                                (long)(int)((((int)psVar75[1] - (int)*psVar75) + 0x1f >> 3 &
                                            0xfffffffcU) * local_688));
          }
          else if (cVar3 == '\b') {
            local_640 = (void *)((long)local_640 +
                                (long)(int)((((int)psVar75[1] - (int)*psVar75) + 0x3f >> 3 &
                                            0xfffffff8U) * local_688));
          }
        }
      }
      local_728._0_4_ = (uint)local_728 + 1;
      if (uVar17 == (uint)local_728) goto LAB_0011fe78;
      lVar42 = *(long *)(lVar47 + 0x28);
    } while( true );
  }
  pvVar26 = calloc(1,0);
  *(void **)(lVar47 + 0x20) = pvVar26;
  if (pvVar26 == (void *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate bitmaps (%d)\n",0);
    free(__ptr);
    goto LAB_001205e2;
  }
LAB_0011fe78:
  __strcpy_chk(local_448,*local_720,0x400);
  FontParseXLFDName(local_448,param_6,3);
  piVar13 = local_590;
  dVar80 = local_5b8;
  pcVar41 = local_5c0;
  dVar78 = local_5c8;
  puVar37 = local_5d0;
  if (DAT_0013fca8 != serverGeneration) {
    ppuVar76 = &PTR_s_FOUNDRY_0013f180;
    do {
      pcVar11 = *ppuVar76;
      ppuVar73 = ppuVar76 + 3;
      sVar23 = strlen(pcVar11);
      puVar27 = (undefined *)MakeAtom(pcVar11,sVar23,1);
      ppuVar76[1] = puVar27;
      ppuVar76 = ppuVar73;
    } while (ppuVar73 != (undefined **)&DAT_0013f360);
    ppuVar76 = &PTR_s_MIN_SPACE_0013eee0;
    do {
      pcVar11 = *ppuVar76;
      ppuVar73 = ppuVar76 + 3;
      sVar23 = strlen(pcVar11);
      puVar27 = (undefined *)MakeAtom(pcVar11,sVar23,1);
      ppuVar76[1] = puVar27;
      ppuVar76 = ppuVar73;
    } while (ppuVar73 != &PTR_s_FOUNDRY_0013f180);
    ppuVar76 = &PTR_s_RAW_MIN_SPACE_0013ece0;
    do {
      pcVar11 = *ppuVar76;
      ppuVar73 = ppuVar76 + 3;
      sVar23 = strlen(pcVar11);
      puVar27 = (undefined *)MakeAtom(pcVar11,sVar23,1);
      ppuVar76[1] = puVar27;
      ppuVar76 = ppuVar73;
    } while (ppuVar73 != (undefined **)&DAT_0013eed8);
    DAT_0013fca8 = serverGeneration;
  }
  puVar24 = (undefined8 *)malloc(0x460);
  if (puVar24 == (undefined8 *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate font properties (%ld*%d)\n",0x10,0x46);
LAB_001210ad:
    if (*local_590 == 0) {
      FontFileCloseFont(0);
    }
    *(undefined8 **)(__ptr + 0x14) = puVar24;
    __ptr[0x13] = 1;
    *(undefined8 *)(__ptr + 0x16) = 0;
    FUN_0011dd70(__ptr);
    uVar90 = 0x50;
    goto LAB_0011e2df;
  }
  puVar27 = (undefined *)malloc(0x46);
  if (puVar27 == (undefined *)0x0) {
    __fprintf_chk(_stderr,1,"Error: Couldn\'t allocate isStringProp (%d)\n",0x46);
    free(puVar24);
    goto LAB_001210ad;
  }
  puVar30 = (uint *)0x0;
  ppuVar76 = &PTR_s_FOUNDRY_0013f180;
  puVar44 = puVar27;
  puVar48 = puVar24;
  puVar28 = local_448;
  do {
    if (*(char *)puVar28 != '\0') {
      puVar30 = (uint *)((long)puVar28 + 1);
      puVar28 = (uint *)strchr((char *)puVar30,0x2d);
      if (puVar28 == (uint *)0x0) {
        sVar23 = strlen((char *)puVar30);
        puVar28 = (uint *)((long)puVar30 + sVar23);
      }
    }
    *puVar44 = 0;
    if (false) goto switchD_00120067_caseD_7;
    puVar51 = puVar28;
    switch(*(undefined4 *)(ppuVar76 + 2)) {
    case 1:
      cVar3 = *(char *)puVar30;
      puVar53 = puVar30;
      while ((puVar51 = puVar28, cVar3 != '\0' && (puVar51 = puVar53, cVar3 != '['))) {
        pcVar11 = (char *)((long)puVar53 + 1);
        puVar53 = (uint *)((long)puVar53 + 1);
        cVar3 = *pcVar11;
      }
    case 0:
      uVar66 = MakeAtom(puVar30,(long)puVar51 - (long)puVar30,1);
      *puVar44 = 1;
      puVar48[1] = uVar66;
      break;
    case 2:
      dVar83 = *(double *)(param_6 + 8);
      if (dVar83 < 0.0) {
        lVar47 = (long)(dVar83 - 0.5);
      }
      else {
        lVar47 = (long)(dVar83 + 0.5);
      }
      goto LAB_001202c8;
    case 3:
      dVar83 = *(double *)(param_6 + 0x10) * 10.0;
      if (dVar83 < 0.0) {
        lVar47 = (long)(dVar83 - 0.5);
      }
      else {
        lVar47 = (long)(dVar83 + 0.5);
      }
      goto LAB_001202c8;
    case 4:
      puVar48[1] = (long)(int)param_6[0x14];
      break;
    case 5:
      puVar48[1] = (long)(int)param_6[0x15];
      break;
    case 6:
      puVar48[1] = (long)(int)param_6[0x16];
      break;
    case 10:
      puVar51 = local_448;
      do {
        puVar53 = puVar51;
        uVar16 = *puVar53 + 0xfefefeff & ~*puVar53;
        uVar17 = uVar16 & 0x80808080;
        puVar51 = puVar53 + 1;
      } while (uVar17 == 0);
      bVar77 = (uVar16 & 0x8080) == 0;
      if (bVar77) {
        uVar17 = uVar17 >> 0x10;
      }
      if (bVar77) {
        puVar51 = (uint *)((long)puVar53 + 6);
      }
      uVar66 = MakeAtom(local_448,
                        (char *)((long)puVar51 +
                                ((-3 - (ulong)CARRY1((byte)uVar17,(byte)uVar17)) - (long)local_448))
                        ,1,uVar17 & 0xffffff00);
      *puVar44 = 1;
      puVar48[1] = uVar66;
      break;
    case 0xb:
      puVar48[1] = (long)((double)(int)*(short *)(piVar13 + 0x12) * dVar80);
      break;
    case 0xc:
      puVar48[1] = (long)((double)(int)*(short *)((long)piVar13 + 0x4a) * dVar80);
      break;
    case 0xd:
      puVar48[1] = 1000;
      break;
    case 0xe:
      puVar48[1] = (long)(72270.0 / (double)(int)param_6[0x15] + 0.5);
      break;
    case 0xf:
      lVar47 = local_660;
LAB_001202c8:
      puVar48[1] = lVar47;
    }
switchD_00120067_caseD_7:
    ppuVar73 = ppuVar76 + 1;
    ppuVar76 = ppuVar76 + 3;
    puVar44 = puVar44 + 1;
    *puVar48 = *ppuVar73;
    puVar48 = puVar48 + 2;
  } while (ppuVar76 != (undefined **)&DAT_0013f360);
  plVar52 = puVar24 + 0x28;
  puVar60 = *(undefined **)(piVar13 + 0x16);
  plVar38 = *(long **)(piVar13 + 0x14);
  puVar44 = puVar27 + 0x14;
  iVar18 = 0x14;
  if (piVar13[0x13] != 0) {
    iVar18 = 0;
    dVar83 = 0.0;
    plVar68 = plVar38 + ((ulong)(piVar13[0x13] - 1) + 1) * 2;
    do {
      puVar33 = (undefined *)*plVar38;
      ppuVar76 = &PTR_s_MIN_SPACE_0013eee0;
      do {
        if (ppuVar76[1] == puVar33) {
          iVar20 = *(int *)(ppuVar76 + 2);
          if (iVar20 == 8) {
            dVar83 = (double)plVar38[1] * (double)pcVar41;
            if (dVar83 < 0.0) {
              dVar83 = dVar83 - 0.5;
            }
            else {
              dVar83 = dVar83 + 0.5;
            }
            plVar52[1] = (long)dVar83;
            puVar33 = (undefined *)*plVar38;
            dVar83 = dVar80;
          }
          else {
            if (iVar20 == 9) {
              iVar18 = iVar18 + 1;
              plVar52[1] = plVar38[1];
              *plVar52 = *plVar38;
              *puVar44 = *puVar60;
              plVar52 = plVar52 + 2;
              puVar44 = puVar44 + 1;
              break;
            }
            if (iVar20 == 7) {
              dVar83 = (double)plVar38[1] * (double)puVar37;
              if (dVar83 < 0.0) {
                dVar83 = dVar83 - 0.5;
              }
              else {
                dVar83 = dVar83 + 0.5;
              }
              plVar52[1] = (long)dVar83;
              puVar33 = (undefined *)*plVar38;
              dVar83 = dVar78;
            }
          }
          *plVar52 = (long)puVar33;
          dVar88 = (double)plVar38[1] * dVar83;
          if (dVar88 < 0.0) {
            dVar88 = dVar88 - 0.5;
          }
          else {
            dVar88 = dVar88 + 0.5;
          }
          plVar52[3] = (long)dVar88;
          iVar18 = iVar18 + 2;
          plVar52[2] = (long)ppuVar76[-0x3f];
          *puVar44 = *puVar60;
          puVar44[1] = *puVar60;
          plVar52 = plVar52 + 4;
          puVar44 = puVar44 + 2;
          break;
        }
        ppuVar76 = ppuVar76 + 3;
      } while (ppuVar76 != &PTR_s_FOUNDRY_0013f180);
      plVar38 = plVar38 + 2;
      puVar60 = puVar60 + 1;
    } while (plVar38 != plVar68);
    iVar18 = iVar18 + 0x14;
  }
  if (*local_590 == 0) {
    FontFileCloseFont(0);
  }
  __ptr[0x13] = iVar18;
  *(undefined8 **)(__ptr + 0x14) = puVar24;
  *(undefined **)(__ptr + 0x16) = puVar27;
  *param_2 = __ptr;
  goto LAB_0011e2df;
LAB_00120717:
  pcVar41 = (char *)puVar24[3];
  local_688 = local_688 + -1;
  local_578 = pcVar41;
  sVar23 = strlen(pcVar41);
  local_570 = (short)sVar23;
  local_56e = FontFileCountDashes(pcVar41,(int)local_570);
  goto LAB_0011e09b;
}



int BitmapGetInfoScalable
              (undefined8 param_1,undefined8 *param_2,undefined8 param_3,undefined8 param_4,
              undefined8 param_5,undefined8 param_6)

{
  undefined8 uVar1;
  int iVar2;
  long in_FS_OFFSET;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = BitmapOpenScalable(param_1,&local_28,0,param_3,param_5,param_6,0,0,0);
  if (iVar2 == 0x55) {
    uVar1 = *(undefined8 *)(local_28 + 0x10);
    *param_2 = *(undefined8 *)(local_28 + 8);
    param_2[1] = uVar1;
    uVar1 = *(undefined8 *)(local_28 + 0x20);
    param_2[2] = *(undefined8 *)(local_28 + 0x18);
    param_2[3] = uVar1;
    uVar1 = *(undefined8 *)(local_28 + 0x30);
    param_2[4] = *(undefined8 *)(local_28 + 0x28);
    param_2[5] = uVar1;
    uVar1 = *(undefined8 *)(local_28 + 0x40);
    param_2[6] = *(undefined8 *)(local_28 + 0x38);
    param_2[7] = uVar1;
    uVar1 = *(undefined8 *)(local_28 + 0x50);
    param_2[8] = *(undefined8 *)(local_28 + 0x48);
    param_2[9] = uVar1;
    param_2[10] = *(undefined8 *)(local_28 + 0x58);
    *(undefined4 *)(local_28 + 0x4c) = 0;
    *(undefined8 *)(local_28 + 0x50) = 0;
    *(undefined8 *)(local_28 + 0x58) = 0;
    (**(code **)(local_28 + 0x78))(local_28);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontCharInkMetrics(long param_1,short *param_2,short *param_3)

{
  int iVar1;
  char cVar2;
  byte bVar3;
  short sVar4;
  int iVar5;
  char *pcVar6;
  char *pcVar7;
  int iVar8;
  byte *pbVar9;
  short sVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  uint uVar14;
  byte bVar15;
  short sVar16;
  uint uVar17;
  byte *pbVar18;
  byte *local_40;
  uint local_38;
  
  local_40 = &DAT_0013f368;
  if ((*(char *)(param_1 + 0x60) != '\x01') &&
     (local_40 = (byte *)0x0, *(char *)(param_1 + 0x60) == '\0')) {
    local_40 = &DAT_0013f360;
  }
  param_3[2] = param_2[2];
  param_3[5] = param_2[5];
  sVar4 = *param_2;
  sVar10 = param_2[3];
  iVar12 = (int)param_2[1] - (int)sVar4;
  cVar2 = *(char *)(param_1 + 0x62);
  uVar17 = iVar12 + 7 >> 3;
  if (cVar2 == '\x01') {
    iVar13 = 0;
    local_38 = uVar17;
  }
  else if (cVar2 == '\x02') {
    local_38 = iVar12 + 0xf >> 3 & 0xfffffffe;
    iVar13 = local_38 - uVar17;
  }
  else if (cVar2 == '\x04') {
    local_38 = iVar12 + 0x1f >> 3 & 0xfffffffc;
    iVar13 = local_38 - uVar17;
  }
  else if (cVar2 == '\b') {
    local_38 = iVar12 + 0x3f >> 3 & 0xfffffff8;
    iVar13 = local_38 - uVar17;
  }
  else {
    local_38 = 0;
    iVar13 = -uVar17;
  }
  iVar1 = sVar10 + -1 + (int)param_2[4];
  pcVar7 = *(char **)(param_2 + 8);
  uVar14 = uVar17 - 1;
  iVar8 = iVar1;
  if (-1 < iVar1) {
    do {
      pcVar6 = pcVar7;
      while (-1 < (int)((uVar14 + (int)pcVar7) - (int)pcVar6)) {
        cVar2 = *pcVar6;
        pcVar6 = pcVar6 + 1;
        if (cVar2 != '\0') {
          param_3[3] = ((short)iVar8 - param_2[4]) + 1;
          pcVar7 = (char *)((long)(int)(local_38 * iVar1) + (long)(int)uVar17 +
                           *(long *)(param_2 + 8));
          iVar8 = iVar1;
          goto LAB_00121443;
        }
      }
      iVar8 = iVar8 + -1;
      pcVar7 = pcVar6 + iVar13;
    } while (iVar8 != -1);
  }
  param_3[3] = 0;
  param_3[4] = 0;
  *param_3 = sVar4;
  param_3[1] = sVar4;
  return;
LAB_00121443:
  do {
    iVar5 = (int)pcVar7;
    while (-1 < (int)((uVar14 - iVar5) + (int)pcVar7)) {
      pcVar7 = pcVar7 + -1;
      if (*pcVar7 != '\0') goto LAB_00121470;
    }
    iVar8 = iVar8 + -1;
    pcVar7 = pcVar7 + -(long)iVar13;
  } while (iVar8 != -1);
LAB_00121470:
  param_3[4] = ((short)iVar8 - sVar10) + 1;
  if ((int)uVar17 < 1) {
    iVar13 = 0;
    iVar8 = 8;
    sVar10 = 0;
  }
  else {
    pbVar18 = *(byte **)(param_2 + 8);
    iVar13 = 0;
    uVar11 = 0;
    iVar8 = 8;
    do {
      bVar15 = 0;
      pbVar9 = pbVar18;
      iVar5 = iVar1;
      do {
        iVar5 = iVar5 + -1;
        bVar15 = bVar15 | *pbVar9;
        pbVar9 = pbVar9 + (int)local_38;
      } while (iVar5 != -1);
      if (bVar15 != 0) {
        iVar5 = iVar12 + uVar11 * -8;
        pbVar9 = local_40;
        iVar13 = iVar8;
        if (uVar11 == uVar14) {
          iVar13 = iVar5;
          iVar8 = iVar5;
        }
        while (iVar13 = iVar13 + -1, -1 < iVar13) {
          bVar3 = *pbVar9;
          pbVar9 = pbVar9 + 1;
          if ((bVar3 & bVar15) != 0) {
            sVar10 = (short)(uVar11 << 3);
            goto LAB_001214de;
          }
        }
      }
      uVar11 = uVar11 + 1;
      pbVar18 = pbVar18 + 1;
    } while (uVar17 != uVar11);
    sVar10 = (short)uVar17 * 8;
  }
LAB_001214de:
  sVar16 = (short)iVar13;
  iVar12 = iVar12 + uVar14 * -8;
  *param_3 = ((short)iVar8 + sVar4 + -1 + sVar10) - sVar16;
  if (-1 < (int)uVar14) {
    pbVar18 = (byte *)((long)(int)uVar14 + *(long *)(param_2 + 8));
    do {
      bVar15 = 0;
      pbVar9 = pbVar18;
      iVar8 = iVar1;
      do {
        iVar8 = iVar8 + -1;
        bVar15 = bVar15 | *pbVar9;
        pbVar9 = pbVar9 + (int)local_38;
      } while (iVar8 != -1);
      if (bVar15 != 0) {
        pbVar9 = local_40 + iVar12;
        iVar13 = iVar12;
        while (iVar13 = iVar13 + -1, -1 < iVar13) {
          pbVar9 = pbVar9 + -1;
          if ((*pbVar9 & bVar15) != 0) goto LAB_00121542;
        }
      }
      uVar14 = uVar14 - 1;
      pbVar18 = pbVar18 + -1;
      iVar12 = 8;
    } while (uVar14 != 0xffffffff);
LAB_00121542:
    sVar16 = (short)iVar13;
  }
  param_3[1] = sVar4 + 1 + sVar16 + (short)uVar14 * 8;
  return;
}



void FontCharReshape(long param_1,short *param_2,short *param_3)

{
  byte *pbVar1;
  char cVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  void *pvVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  size_t __n;
  long lVar10;
  short sVar11;
  uint uVar12;
  short sVar13;
  int iVar14;
  uint uVar15;
  short sVar16;
  int iVar17;
  
  lVar10 = *(long *)(param_2 + 8);
  iVar4 = (int)param_3[1] - (int)*param_3;
  iVar5 = (int)param_3[3] + (int)param_3[4];
  cVar2 = *(char *)(param_1 + 0x62);
  if (cVar2 == '\x01') {
    uVar12 = iVar4 + 7 >> 3;
    uVar15 = ((int)param_2[1] - (int)*param_2) + 7 >> 3;
    __n = (size_t)(int)(iVar5 * uVar12);
  }
  else if (cVar2 == '\x02') {
    uVar12 = iVar4 + 0xf >> 3 & 0xfffffffe;
    uVar15 = ((int)param_2[1] - (int)*param_2) + 0xf >> 3 & 0xfffffffe;
    __n = (size_t)(int)(iVar5 * uVar12);
  }
  else if (cVar2 == '\x04') {
    uVar12 = iVar4 + 0x1f >> 3 & 0xfffffffc;
    uVar15 = ((int)param_2[1] - (int)*param_2) + 0x1f >> 3 & 0xfffffffc;
    __n = (size_t)(int)(iVar5 * uVar12);
  }
  else if (cVar2 == '\b') {
    uVar12 = iVar4 + 0x3f >> 3 & 0xfffffff8;
    uVar15 = ((int)param_2[1] - (int)*param_2) + 0x3f >> 3 & 0xfffffff8;
    __n = (size_t)(int)(iVar5 * uVar12);
  }
  else {
    __n = 0;
    uVar12 = 0;
    uVar15 = 0;
  }
  pvVar6 = memset(*(void **)(param_3 + 8),0,__n);
  iVar4 = (int)param_3[3];
  iVar5 = (int)param_2[3];
  if (param_2[3] < param_3[3]) {
    pvVar6 = (void *)((long)pvVar6 + (long)(int)((iVar4 - iVar5) * uVar12));
    iVar4 = iVar5;
  }
  else {
    lVar10 = lVar10 + (int)((iVar5 - iVar4) * uVar15);
  }
  iVar4 = -iVar4;
  sVar16 = param_2[4];
  if (param_3[4] <= param_2[4]) {
    sVar16 = param_3[4];
  }
  sVar13 = *param_2;
  if (*param_2 <= *param_3) {
    sVar13 = *param_3;
  }
  sVar11 = param_2[1];
  if (param_3[1] <= param_2[1]) {
    sVar11 = param_3[1];
  }
  iVar17 = (int)sVar16;
  iVar14 = (int)sVar13;
  iVar5 = (int)sVar11;
  if (*(char *)(param_1 + 0x60) == '\x01') {
    if (iVar4 < iVar17) {
      do {
        iVar9 = iVar14;
        if (iVar14 < iVar5) {
          do {
            iVar7 = iVar9 - *param_2;
            iVar8 = iVar7 + 7;
            if (-1 < iVar7) {
              iVar8 = iVar7;
            }
            if ((*(byte *)(lVar10 + (iVar8 >> 3)) >> (7U - iVar7 % 8 & 0x1f) & 1) != 0) {
              iVar7 = iVar9 - *param_3;
              iVar8 = iVar7 + 7;
              if (-1 < iVar7) {
                iVar8 = iVar7;
              }
              bVar3 = (byte)(iVar7 >> 0x1f);
              pbVar1 = (byte *)((long)pvVar6 + (long)(iVar8 >> 3));
              *pbVar1 = *pbVar1 | (byte)(1 << (7 - (((char)iVar7 + (bVar3 >> 5) & 7) - (bVar3 >> 5))
                                              & 0x1f));
            }
            iVar9 = iVar9 + 1;
          } while (iVar5 != iVar9);
        }
        iVar4 = iVar4 + 1;
        lVar10 = lVar10 + (int)uVar15;
        pvVar6 = (void *)((long)pvVar6 + (long)(int)uVar12);
      } while (iVar17 != iVar4);
      return;
    }
  }
  else if (iVar4 < iVar17) {
    do {
      iVar9 = iVar14;
      if (iVar14 < iVar5) {
        do {
          iVar7 = iVar9 - *param_2;
          iVar8 = iVar7 + 7;
          if (-1 < iVar7) {
            iVar8 = iVar7;
          }
          if ((*(byte *)(lVar10 + (iVar8 >> 3)) >> (iVar7 % 8 & 0x1fU) & 1) != 0) {
            iVar7 = iVar9 - *param_3;
            iVar8 = iVar7 + 7;
            if (-1 < iVar7) {
              iVar8 = iVar7;
            }
            bVar3 = (byte)(iVar7 >> 0x1f);
            pbVar1 = (byte *)((long)pvVar6 + (long)(iVar8 >> 3));
            *pbVar1 = *pbVar1 | (byte)(1 << (((char)iVar7 + (bVar3 >> 5) & 7) - (bVar3 >> 5) & 0x1f)
                                      );
          }
          iVar9 = iVar9 + 1;
        } while (iVar5 != iVar9);
      }
      iVar4 = iVar4 + 1;
      lVar10 = lVar10 + (int)uVar15;
      pvVar6 = (void *)((long)pvVar6 + (long)(int)uVar12);
    } while (iVar17 != iVar4);
  }
  return;
}



uint FUN_00121950(long *param_1)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  iVar7 = *(int *)(param_1 + 1);
  iVar3 = iVar7 + -1;
  *(int *)(param_1 + 1) = iVar3;
  if (iVar7 == 0) {
    uVar4 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar4;
    iVar3 = *(int *)(param_1 + 1);
    iVar7 = iVar3 + -1;
    *(int *)(param_1 + 1) = iVar7;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    iVar7 = iVar7 + -2;
    uVar4 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar7;
  }
  if (iVar3 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    iVar7 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar5;
    iVar3 = iVar7 + -1;
    *(int *)(param_1 + 1) = iVar3;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    bVar1 = *pbVar2;
    iVar3 = iVar7 + -1;
    *(int *)(param_1 + 1) = iVar3;
    uVar5 = (uint)bVar1;
  }
  if (iVar7 == 0) {
    uVar6 = (*(code *)param_1[0x402])(param_1);
    iVar3 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar6;
    *(int *)(param_1 + 1) = iVar3 + -1;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar6 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar3 + -1;
  }
  uVar4 = uVar4 | uVar5 << 8 | uVar6 << 0x10;
  if (iVar3 == 0) {
    iVar7 = (*(code *)param_1[0x402])(param_1);
    DAT_0013fcb0 = DAT_0013fcb0 + 4;
    *(int *)((long)param_1 + 0xc) = iVar7;
    return iVar7 << 0x18 | uVar4;
  }
  pbVar2 = (byte *)*param_1;
  DAT_0013fcb0 = DAT_0013fcb0 + 4;
  *param_1 = (long)(pbVar2 + 1);
  return (uint)*pbVar2 << 0x18 | uVar4;
}



uint FUN_00121a50(long *param_1,uint param_2)

{
  byte bVar1;
  byte *pbVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  
  iVar6 = *(int *)(param_1 + 1);
  iVar7 = iVar6 + -1;
  *(int *)(param_1 + 1) = iVar7;
  if ((param_2 & 4) != 0) {
    if (iVar6 == 0) {
      uVar3 = (*(code *)param_1[0x402])();
      iVar7 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
      iVar6 = iVar7 + -1;
      *(int *)(param_1 + 1) = iVar6;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      bVar1 = *pbVar2;
      iVar6 = iVar6 + -2;
      *(int *)(param_1 + 1) = iVar6;
      uVar3 = (uint)bVar1;
    }
    if (iVar7 == 0) {
      uVar5 = (*(code *)param_1[0x402])(param_1);
      iVar6 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar5;
      iVar7 = iVar6 + -1;
      *(int *)(param_1 + 1) = iVar7;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      bVar1 = *pbVar2;
      iVar7 = iVar6 + -1;
      *(int *)(param_1 + 1) = iVar7;
      uVar5 = (uint)bVar1;
    }
    if (iVar6 == 0) {
      uVar4 = (*(code *)param_1[0x402])(param_1);
      iVar7 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar4;
      *(int *)(param_1 + 1) = iVar7 + -1;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      uVar4 = (uint)*pbVar2;
      *(int *)(param_1 + 1) = iVar7 + -1;
    }
    uVar3 = uVar3 << 0x18 | uVar5 << 0x10 | uVar4 << 8;
    if (iVar7 == 0) {
      uVar5 = (*(code *)param_1[0x402])(param_1);
      DAT_0013fcb0 = DAT_0013fcb0 + 4;
      *(uint *)((long)param_1 + 0xc) = uVar5;
      return uVar5 | uVar3;
    }
    pbVar2 = (byte *)*param_1;
    DAT_0013fcb0 = DAT_0013fcb0 + 4;
    *param_1 = (long)(pbVar2 + 1);
    return *pbVar2 | uVar3;
  }
  if (iVar6 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    iVar7 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar3;
    iVar6 = iVar7 + -1;
    *(int *)(param_1 + 1) = iVar6;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    iVar6 = iVar6 + -2;
    uVar3 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar6;
  }
  if (iVar7 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    iVar6 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar5;
    iVar7 = iVar6 + -1;
    *(int *)(param_1 + 1) = iVar7;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    bVar1 = *pbVar2;
    iVar7 = iVar6 + -1;
    *(int *)(param_1 + 1) = iVar7;
    uVar5 = (uint)bVar1;
  }
  if (iVar6 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    iVar7 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar4;
    *(int *)(param_1 + 1) = iVar7 + -1;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar4 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar7 + -1;
  }
  uVar3 = uVar3 | uVar5 << 8 | uVar4 << 0x10;
  if (iVar7 == 0) {
    iVar7 = (*(code *)param_1[0x402])(param_1);
    DAT_0013fcb0 = DAT_0013fcb0 + 4;
    *(int *)((long)param_1 + 0xc) = iVar7;
    return iVar7 << 0x18 | uVar3;
  }
  pbVar2 = (byte *)*param_1;
  DAT_0013fcb0 = DAT_0013fcb0 + 4;
  *param_1 = (long)(pbVar2 + 1);
  return (uint)*pbVar2 << 0x18 | uVar3;
}



uint FUN_00121c60(long *param_1,uint param_2)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  
  iVar1 = *(int *)(param_1 + 1);
  iVar4 = iVar1 + -1;
  *(int *)(param_1 + 1) = iVar4;
  if ((param_2 & 4) == 0) {
    if (iVar1 == 0) {
      uVar3 = (*(code *)param_1[0x402])();
      iVar4 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
      *(int *)(param_1 + 1) = iVar4 + -1;
    }
    else {
      pbVar2 = (byte *)*param_1;
      *param_1 = (long)(pbVar2 + 1);
      uVar3 = (uint)*pbVar2;
      *(int *)(param_1 + 1) = iVar1 + -2;
    }
    if (iVar4 != 0) {
      pbVar2 = (byte *)*param_1;
      DAT_0013fcb0 = DAT_0013fcb0 + 2;
      *param_1 = (long)(pbVar2 + 1);
      return (uint)*pbVar2 << 8 | uVar3;
    }
    iVar4 = (*(code *)param_1[0x402])(param_1);
    DAT_0013fcb0 = DAT_0013fcb0 + 2;
    *(int *)((long)param_1 + 0xc) = iVar4;
    return iVar4 << 8 | uVar3;
  }
  if (iVar1 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    iVar4 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar3;
    *(int *)(param_1 + 1) = iVar4 + -1;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar1 + -2;
  }
  if (iVar4 != 0) {
    pbVar2 = (byte *)*param_1;
    DAT_0013fcb0 = DAT_0013fcb0 + 2;
    *param_1 = (long)(pbVar2 + 1);
    return (uint)*pbVar2 | uVar3 << 8;
  }
  uVar5 = (*(code *)param_1[0x402])(param_1);
  DAT_0013fcb0 = DAT_0013fcb0 + 2;
  *(uint *)((long)param_1 + 0xc) = uVar5;
  return uVar5 | uVar3 << 8;
}



bool FUN_00121d80(long param_1,undefined4 param_2,undefined2 *param_3)

{
  undefined2 uVar1;
  
  uVar1 = FUN_00121c60();
  *param_3 = uVar1;
  uVar1 = FUN_00121c60(param_1,param_2);
  param_3[1] = uVar1;
  uVar1 = FUN_00121c60(param_1,param_2);
  param_3[2] = uVar1;
  uVar1 = FUN_00121c60(param_1,param_2);
  param_3[3] = uVar1;
  uVar1 = FUN_00121c60(param_1,param_2);
  param_3[4] = uVar1;
  uVar1 = FUN_00121c60(param_1,param_2);
  param_3[5] = uVar1;
  return *(int *)(param_1 + 0xc) != -1;
}



undefined8 FUN_00121df0(long param_1,int *param_2,int param_3,int param_4,int *param_5,int *param_6)

{
  int *piVar1;
  int iVar2;
  
  if (param_3 < 1) {
    return 0;
  }
  piVar1 = param_2 + (ulong)(param_3 - 1) * 4 + 4;
  while (*param_2 != param_4) {
    param_2 = param_2 + 4;
    if (param_2 == piVar1) {
      return 0;
    }
  }
  if ((uint)param_2[3] < DAT_0013fcb0) {
    return 0;
  }
  iVar2 = (**(code **)(param_1 + 0x2020))(param_1,param_2[3] - DAT_0013fcb0);
  *(int *)(param_1 + 0xc) = iVar2;
  if (iVar2 == -1) {
    return 0;
  }
  DAT_0013fcb0 = param_2[3];
  *param_6 = param_2[2];
  *param_5 = param_2[1];
  return 1;
}



bool FUN_00121e90(long param_1,long *param_2,undefined8 param_3,undefined4 param_4,
                 undefined4 param_5)

{
  byte bVar1;
  byte *pbVar2;
  undefined2 uVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int iVar7;
  long in_FS_OFFSET;
  bool bVar8;
  uint local_28;
  undefined local_24 [4];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar4 = FUN_00121df0(param_2,param_3,param_4,param_5,&local_28,local_24);
  if ((iVar4 != 0) && (*(int *)((long)param_2 + 0xc) != -1)) {
    local_28 = FUN_00121950(param_2);
    if ((local_28 & 0xfffffe00) == 0) {
      iVar4 = DAT_0013fcb0 + 1;
      iVar7 = *(int *)(param_2 + 1);
      DAT_0013fcb0 = iVar4;
      *(int *)(param_2 + 1) = iVar7 + -1;
      if (iVar7 == 0) {
        uVar5 = (*(code *)param_2[0x402])(param_2);
        *(undefined4 *)((long)param_2 + 0xc) = uVar5;
        bVar1 = (byte)uVar5;
        iVar4 = DAT_0013fcb0;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        bVar1 = *pbVar2;
      }
      DAT_0013fcb0 = iVar4 + 1;
      *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xfe | bVar1 & 1;
      iVar7 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar7 + -1;
      if (iVar7 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar4 + 1;
      }
      iVar7 = DAT_0013fcb0 + 1;
      DAT_0013fcb0 = iVar7;
      *(byte *)(param_1 + 10) = (byte)((uVar6 & 1) << 2) | *(byte *)(param_1 + 10) & 0xfb;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar7;
      }
      iVar7 = DAT_0013fcb0 + 1;
      DAT_0013fcb0 = iVar7;
      *(byte *)(param_1 + 10) = ((byte)uVar6 & 1) * '\x02' | *(byte *)(param_1 + 10) & 0xfd;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar7;
      }
      iVar7 = DAT_0013fcb0 + 1;
      DAT_0013fcb0 = iVar7;
      *(byte *)(param_1 + 10) = (byte)((uVar6 & 1) << 3) | *(byte *)(param_1 + 10) & 0xf7;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar7;
      }
      iVar7 = DAT_0013fcb0 + 1;
      DAT_0013fcb0 = iVar7;
      *(byte *)(param_1 + 10) = (byte)((uVar6 & 1) << 4) | *(byte *)(param_1 + 10) & 0xef;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar7;
      }
      iVar7 = DAT_0013fcb0 + 1;
      DAT_0013fcb0 = iVar7;
      *(byte *)(param_1 + 10) = (byte)((uVar6 & 1) << 5) | *(byte *)(param_1 + 10) & 0xdf;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        pbVar2 = (byte *)*param_2;
        *param_2 = (long)(pbVar2 + 1);
        uVar6 = (uint)*pbVar2;
        DAT_0013fcb0 = iVar7;
      }
      DAT_0013fcb0 = DAT_0013fcb0 + 1;
      *(ushort *)(param_1 + 10) =
           (ushort)((uVar6 & 3) << 7) | 0x200 | *(ushort *)(param_1 + 10) & 0xf87f;
      iVar4 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar4 + -1;
      if (iVar4 == 0) {
        uVar5 = (*(code *)param_2[0x402])(param_2);
        *(undefined4 *)((long)param_2 + 0xc) = uVar5;
      }
      else {
        *param_2 = *param_2 + 1;
      }
      uVar3 = FUN_00121a50(param_2,local_28);
      *(undefined2 *)(param_1 + 0x40) = uVar3;
      uVar3 = FUN_00121a50(param_2,local_28);
      *(undefined2 *)(param_1 + 0x42) = uVar3;
      uVar3 = FUN_00121a50(param_2,local_28);
      *(undefined2 *)(param_1 + 0xc) = uVar3;
      if (*(int *)((long)param_2 + 0xc) != -1) {
        iVar4 = FUN_00121d80(param_2,local_28,param_1 + 0x1c);
        if (iVar4 != 0) {
          iVar4 = FUN_00121d80(param_2,local_28,param_1 + 0x10);
          if (iVar4 != 0) {
            if (local_28 >> 8 != 1) {
              *(undefined8 *)(param_1 + 0x34) = *(undefined8 *)(param_1 + 0x1c);
              *(undefined4 *)(param_1 + 0x3c) = *(undefined4 *)(param_1 + 0x24);
              *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x10);
              *(undefined4 *)(param_1 + 0x30) = *(undefined4 *)(param_1 + 0x18);
              bVar8 = true;
              goto LAB_00122152;
            }
            iVar4 = FUN_00121d80(param_2,local_28,param_1 + 0x34);
            if (iVar4 != 0) {
              iVar4 = FUN_00121d80(param_2,local_28,param_1 + 0x28);
              bVar8 = iVar4 != 0;
              goto LAB_00122152;
            }
          }
        }
      }
    }
  }
  bVar8 = false;
LAB_00122152:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_001222a0(long param_1)

{
  long lVar1;
  void *__ptr;
  int iVar2;
  long lVar3;
  void *__ptr_00;
  int iVar4;
  
  __ptr = *(void **)(param_1 + 0x98);
  free(*(void **)((long)__ptr + 0x18));
  __ptr_00 = *(void **)((long)__ptr + 0x28);
  if (__ptr_00 != (void *)0x0) {
    iVar2 = (((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1) *
            (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1);
    iVar4 = iVar2 + 0xfe;
    if (-1 < iVar2 + 0x7f) {
      iVar4 = iVar2 + 0x7f;
    }
    if (0 < iVar2) {
      lVar3 = 0;
      do {
        lVar1 = lVar3 * 8;
        lVar3 = lVar3 + 1;
        free(*(void **)((long)__ptr_00 + lVar1));
        __ptr_00 = *(void **)((long)__ptr + 0x28);
      } while ((int)lVar3 < iVar4 >> 7);
    }
  }
  free(__ptr_00);
  free(*(void **)((long)__ptr + 0x20));
  free(*(void **)((long)__ptr + 0x10));
  free(*(void **)(param_1 + 0x58));
  free(*(void **)(param_1 + 0x50));
  free(__ptr);
  DestroyFontRec(param_1);
  return;
}



bool FUN_00122370(long *param_1,short *param_2)

{
  int iVar1;
  byte *pbVar2;
  ushort uVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  
  iVar1 = DAT_0013fcb0 + 1;
  iVar6 = *(int *)(param_1 + 1);
  DAT_0013fcb0 = iVar1;
  *(int *)(param_1 + 1) = iVar6 + -1;
  if (iVar6 == 0) {
    uVar5 = (*(code *)param_1[0x402])();
    *(undefined4 *)((long)param_1 + 0xc) = uVar5;
    uVar3 = (ushort)uVar5;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (ushort)*pbVar2;
    DAT_0013fcb0 = iVar1;
  }
  *param_2 = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar6 = DAT_0013fcb0 + 1;
  DAT_0013fcb0 = iVar6;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar5;
    uVar3 = (ushort)uVar5;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (ushort)*pbVar2;
    DAT_0013fcb0 = iVar6;
  }
  param_2[1] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar6 = DAT_0013fcb0 + 1;
  DAT_0013fcb0 = iVar6;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar5;
    uVar3 = (ushort)uVar5;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (ushort)*pbVar2;
    DAT_0013fcb0 = iVar6;
  }
  param_2[2] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar6 = DAT_0013fcb0 + 1;
  DAT_0013fcb0 = iVar6;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar5;
    uVar3 = (ushort)uVar5;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar3 = (ushort)*pbVar2;
    DAT_0013fcb0 = iVar6;
  }
  param_2[3] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  DAT_0013fcb0 = DAT_0013fcb0 + 1;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    *(uint *)((long)param_1 + 0xc) = uVar4;
  }
  else {
    pbVar2 = (byte *)*param_1;
    *param_1 = (long)(pbVar2 + 1);
    uVar4 = (uint)*pbVar2;
  }
  param_2[4] = (short)uVar4 + -0x80;
  param_2[5] = 0;
  return *(int *)((long)param_1 + 0xc) != -1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void pcfError(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
             undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
             undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
             undefined8 param_13,undefined8 param_14)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined8 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_e8 = 8;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_c0 = param_10;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  fwrite("PCF Error: ",1,0xb,_stderr);
  __vfprintf_chk(_stderr,1,param_9,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4 * FUN_00122610(long param_1,uint *param_2)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 *__ptr;
  undefined4 *puVar4;
  
  uVar2 = FUN_00121950();
  if (*(int *)(param_1 + 0xc) == -1) {
    __ptr = (undefined4 *)0x0;
  }
  else if (uVar2 < 0x8000000) {
    __ptr = (undefined4 *)malloc((long)(int)uVar2 << 4);
    if (__ptr == (undefined4 *)0x0) {
      pcfError("pcfReadTOC(): Couldn\'t allocate tables (%d*%d)\n",uVar2,0x10);
    }
    else {
      if (uVar2 != 0) {
        puVar4 = __ptr;
        do {
          uVar3 = FUN_00121950(param_1);
          *puVar4 = uVar3;
          uVar3 = FUN_00121950(param_1);
          puVar4[1] = uVar3;
          uVar3 = FUN_00121950(param_1);
          puVar4[2] = uVar3;
          uVar3 = FUN_00121950(param_1);
          iVar1 = *(int *)(param_1 + 0xc);
          puVar4[3] = uVar3;
          if (iVar1 == -1) {
            free(__ptr);
            return (undefined4 *)0x0;
          }
          puVar4 = puVar4 + 4;
        } while (puVar4 != __ptr + ((ulong)(uVar2 - 1) + 1) * 4);
      }
      *param_2 = uVar2;
    }
  }
  else {
    __ptr = (undefined4 *)0x0;
    pcfError("pcfReadTOC(): invalid file format\n");
  }
  return __ptr;
}



undefined8 FUN_00122710(long param_1,long *param_2,undefined8 param_3,undefined4 param_4)

{
  byte *pbVar1;
  byte bVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  long *__ptr;
  byte *__ptr_00;
  void *__ptr_01;
  size_t sVar6;
  long lVar7;
  undefined8 uVar8;
  int iVar9;
  byte *pbVar10;
  long lVar11;
  long *plVar12;
  long in_FS_OFFSET;
  long *local_50;
  uint local_48;
  undefined local_44 [4];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = FUN_00121df0(param_2,param_3,param_4,1,&local_48,local_44);
  if (iVar3 == 0) {
LAB_00122756:
    __ptr_00 = (byte *)0x0;
    __ptr = (long *)0x0;
  }
  else {
    local_48 = FUN_00121950(param_2);
    if ((local_48 & 0xffffff00) != 0) goto LAB_00122756;
    uVar4 = FUN_00121a50(param_2,local_48);
    if (uVar4 - 1 < 0x7ffffff) {
      if (*(int *)((long)param_2 + 0xc) == -1) goto LAB_00122756;
      __ptr = (long *)malloc((long)(int)uVar4 << 4);
      if (__ptr == (long *)0x0) {
        __ptr_00 = (byte *)0x0;
        pcfError("pcfGetProperties(): Couldn\'t allocate props (%d*%d)\n",uVar4,0x10);
      }
      else {
        __ptr_00 = (byte *)malloc((long)(int)uVar4);
        if (__ptr_00 == (byte *)0x0) {
          pcfError("pcfGetProperties(): Couldn\'t allocate isStringProp (%d*%d)\n",uVar4,1);
        }
        else {
          pbVar10 = __ptr_00;
          plVar12 = __ptr;
          do {
            iVar3 = FUN_00121a50(param_2,local_48);
            DAT_0013fcb0 = DAT_0013fcb0 + 1;
            *plVar12 = (long)iVar3;
            iVar3 = *(int *)(param_2 + 1);
            *(int *)(param_2 + 1) = iVar3 + -1;
            if (iVar3 == 0) {
              uVar5 = (*(code *)param_2[0x402])(param_2);
              *(uint *)((long)param_2 + 0xc) = uVar5;
            }
            else {
              pbVar1 = (byte *)*param_2;
              *param_2 = (long)(pbVar1 + 1);
              uVar5 = (uint)*pbVar1;
            }
            *pbVar10 = (byte)uVar5;
            iVar3 = FUN_00121a50(param_2,local_48);
            plVar12[1] = (long)iVar3;
            bVar2 = *pbVar10;
            if ((*plVar12 < 0) || (1 < bVar2)) {
LAB_001228b8:
              pcfError("pcfGetProperties(): invalid file format %ld %d %ld\n",*plVar12,
                       (int)(char)bVar2);
              goto LAB_0012275c;
            }
            if (((long)iVar3 < 0) && ((bVar2 & 1) != 0)) {
              bVar2 = 1;
              goto LAB_001228b8;
            }
            if (*(int *)((long)param_2 + 0xc) == -1) goto LAB_0012275c;
            plVar12 = plVar12 + 2;
            pbVar10 = pbVar10 + 1;
          } while (plVar12 != __ptr + ((ulong)(uVar4 - 1) + 1) * 2);
          if ((uVar4 & 3) != 0) {
            iVar9 = 4 - (uVar4 & 3);
            iVar3 = (*(code *)param_2[0x404])(param_2,iVar9);
            DAT_0013fcb0 = DAT_0013fcb0 + iVar9;
            *(int *)((long)param_2 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0012275c;
          }
          iVar3 = FUN_00121a50(param_2,local_48);
          if ((-1 < iVar3) && (*(int *)((long)param_2 + 0xc) != -1)) {
            __ptr_01 = malloc((long)iVar3);
            if (__ptr_01 == (void *)0x0) {
              pcfError("pcfGetProperties(): Couldn\'t allocate strings (%d)\n",iVar3);
            }
            else {
              BufFileRead(param_2,__ptr_01,iVar3);
              if (*(int *)((long)param_2 + 0xc) != -1) {
                DAT_0013fcb0 = DAT_0013fcb0 + iVar3;
                lVar11 = 0;
                local_50 = __ptr;
                do {
                  lVar7 = *local_50;
                  sVar6 = strlen((char *)(lVar7 + (long)__ptr_01));
                  lVar7 = MakeAtom((char *)(lVar7 + (long)__ptr_01),sVar6,1);
                  bVar2 = __ptr_00[lVar11];
                  *local_50 = lVar7;
                  if (bVar2 != 0) {
                    lVar7 = local_50[1];
                    sVar6 = strlen((char *)(lVar7 + (long)__ptr_01));
                    lVar7 = MakeAtom((char *)(lVar7 + (long)__ptr_01),sVar6,1);
                    local_50[1] = lVar7;
                  }
                  local_50 = local_50 + 2;
                  lVar11 = lVar11 + 1;
                } while ((int)lVar11 < (int)uVar4);
                free(__ptr_01);
                *(byte **)(param_1 + 0x50) = __ptr_00;
                *(long **)(param_1 + 0x48) = __ptr;
                *(uint *)(param_1 + 0x44) = uVar4;
                uVar8 = 1;
                goto LAB_0012276e;
              }
            }
          }
        }
      }
    }
    else {
      __ptr_00 = (byte *)0x0;
      pcfError("pcfGetProperties(): invalid nprops value (%d)\n",uVar4);
      __ptr = (long *)0x0;
    }
  }
LAB_0012275c:
  free(__ptr_00);
  free(__ptr);
  uVar8 = 0;
LAB_0012276e:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 pcfReadFont(long param_1,long param_2,uint param_3,uint param_4,int param_5,int param_6)

{
  long lVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  short sVar5;
  ushort uVar6;
  ushort uVar7;
  bool bVar8;
  undefined2 uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int *__ptr;
  int *piVar15;
  undefined8 uVar16;
  short *__ptr_00;
  uint *__ptr_01;
  void *pvVar17;
  uint *puVar18;
  void *pvVar19;
  undefined4 *puVar20;
  void *pvVar21;
  ulong uVar22;
  long *plVar23;
  short *psVar24;
  uint *puVar25;
  long lVar26;
  ushort uVar27;
  long in_FS_OFFSET;
  void *local_c8;
  undefined local_c0;
  undefined local_b4;
  undefined local_b0;
  undefined local_ac;
  uint local_88;
  uint local_64;
  undefined local_60 [4];
  int local_5c;
  int local_58 [4];
  int local_48 [2];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined8 *)(param_1 + 0x50) = 0;
  *(undefined8 *)(param_1 + 0x58) = 0;
  DAT_0013fcb0 = 0;
  iVar10 = FUN_00121950(param_2);
  if (iVar10 != 0x70636601) {
    __ptr = (int *)0x0;
    __ptr_01 = (uint *)0x0;
    pvVar17 = (void *)0x0;
    __ptr_00 = (short *)0x0;
    local_c8 = (void *)0x0;
    goto LAB_00122c34;
  }
  __ptr = (int *)FUN_00122610(param_2,&local_5c);
  if (__ptr != (int *)0x0) {
    lVar26 = param_1 + 8;
    iVar10 = FUN_00122710(lVar26,param_2,__ptr,local_5c);
    if (iVar10 == 0) goto LAB_00122b8f;
    if (0 < local_5c) {
      piVar15 = __ptr;
      do {
        if (*piVar15 == 0x100) {
          bVar8 = true;
          goto LAB_00122b5d;
        }
        piVar15 = piVar15 + 4;
      } while (__ptr + ((ulong)(local_5c - 1) + 1) * 4 != piVar15);
    }
    iVar10 = FUN_00121e90(lVar26,param_2,__ptr,local_5c,2);
    if (iVar10 == 0) goto LAB_00122b8f;
    bVar8 = false;
LAB_00122b5d:
    iVar10 = FUN_00121df0(param_2,__ptr,local_5c,4,&local_64);
    if ((iVar10 == 0) || (local_64 = FUN_00121950(param_2), (local_64 & 0xfffffe00) != 0))
    goto LAB_00122b8f;
    if ((local_64 & 0xffffff00) == 0) {
      uVar11 = FUN_00121a50();
    }
    else {
      uVar11 = FUN_00121c60(param_2,local_64);
    }
    if (*(int *)(param_2 + 0xc) == -1) goto LAB_00122b8f;
    if (0x5555555 < uVar11) {
      __ptr_01 = (uint *)0x0;
      pvVar19 = (void *)0x0;
      pcfError("pcfReadFont(): invalid file format\n");
      __ptr_00 = (short *)0x0;
      local_c8 = (void *)0x0;
      goto LAB_00122ba0;
    }
    __ptr_00 = (short *)malloc((long)(int)uVar11 * 0x18);
    if (__ptr_00 == (short *)0x0) {
      __ptr_01 = (uint *)0x0;
      pvVar19 = (void *)0x0;
      pcfError("pcfReadFont(): Couldn\'t allocate metrics (%d*%d)\n",uVar11,0x18);
      local_c8 = (void *)0x0;
      goto LAB_00122ba0;
    }
    if (uVar11 != 0) {
      psVar24 = __ptr_00;
      do {
        if ((local_64 & 0xffffff00) == 0) {
          iVar10 = FUN_00121d80(param_2,local_64,psVar24);
        }
        else {
          iVar10 = FUN_00122370(param_2,psVar24);
        }
        if (iVar10 == 0) {
          local_c8 = (void *)0x0;
          __ptr_01 = (uint *)0x0;
          pvVar17 = (void *)0x0;
          goto LAB_00122c34;
        }
        psVar24 = psVar24 + 0xc;
      } while (__ptr_00 + ((ulong)(uVar11 - 1) * 3 + 3) * 4 != psVar24);
    }
    iVar10 = FUN_00121df0(param_2,__ptr,local_5c,8,&local_64,local_60);
    if ((((iVar10 == 0) || (local_64 = FUN_00121950(param_2), (local_64 & 0xffffff00) != 0)) ||
        (uVar12 = FUN_00121a50(param_2,local_64), uVar11 != uVar12)) ||
       (*(int *)(param_2 + 0xc) == -1)) {
      local_c8 = (void *)0x0;
      __ptr_01 = (uint *)0x0;
      pvVar19 = (void *)0x0;
      goto LAB_00122ba0;
    }
    __ptr_01 = (uint *)malloc((long)(int)uVar12 << 2);
    if (__ptr_01 == (uint *)0x0) {
      pvVar19 = (void *)0x0;
      pcfError("pcfReadFont(): Couldn\'t allocate offsets (%d*%d)\n",uVar11,4);
      local_c8 = (void *)0x0;
      goto LAB_00122ba0;
    }
    if (uVar12 != 0) {
      puVar18 = __ptr_01;
      do {
        uVar11 = FUN_00121a50(param_2,local_64);
        iVar10 = *(int *)(param_2 + 0xc);
        *puVar18 = uVar11;
        if (iVar10 == -1) goto LAB_00122e25;
        puVar18 = puVar18 + 1;
      } while (__ptr_01 + (ulong)(uVar12 - 1) + 1 != puVar18);
    }
    piVar15 = local_58;
    do {
      iVar13 = FUN_00121a50(param_2,local_64);
      iVar10 = *(int *)(param_2 + 0xc);
      *piVar15 = iVar13;
      if (iVar10 == -1) goto LAB_00122e25;
      piVar15 = piVar15 + 1;
    } while (local_48 != piVar15);
    iVar10 = local_58[local_64 & 3];
    iVar13 = 1;
    if (iVar10 != 0) {
      iVar13 = iVar10;
    }
    local_c8 = malloc((long)iVar13);
    if (local_c8 == (void *)0x0) {
      pvVar19 = (void *)0x0;
      pcfError("pcfReadFont(): Couldn\'t allocate bitmaps (%d)\n",iVar13);
      goto LAB_00122ba0;
    }
    BufFileRead(param_2,local_c8,iVar10);
    if (*(int *)(param_2 + 0xc) != -1) {
      DAT_0013fcb0 = DAT_0013fcb0 + iVar10;
      if ((local_64 >> 3 & 1) != param_3) {
        BitOrderInvert(local_c8,iVar10);
      }
      if ((bool)(~((byte)(local_64 >> 2) ^ (byte)(local_64 >> 3)) & 1) != (param_3 == param_4)) {
        iVar13 = param_6;
        if (param_3 == param_4) {
          iVar13 = 1 << ((byte)(local_64 >> 4) & 3);
        }
        if (iVar13 == 2) {
          TwoByteSwap(local_c8,iVar10);
        }
        else if (iVar13 == 4) {
          FourByteSwap(local_c8,iVar10);
        }
      }
      if (1 << ((byte)local_64 & 3) != param_5) {
        if (param_5 == 4) {
          uVar22 = 2;
        }
        else {
          uVar22 = (ulong)(param_5 == 2);
        }
        iVar10 = local_58[uVar22];
        pvVar17 = malloc((long)iVar10);
        if (pvVar17 == (void *)0x0) {
          pcfError("pcfReadFont(): Couldn\'t allocate padbitmaps (%d)\n",iVar10);
          pvVar19 = (void *)0x0;
          goto LAB_00122ba0;
        }
        if (uVar12 != 0) {
          local_88 = 0;
          psVar24 = __ptr_00;
          puVar18 = __ptr_01;
          do {
            uVar11 = *puVar18;
            puVar25 = puVar18 + 1;
            sVar2 = psVar24[3];
            sVar3 = psVar24[4];
            sVar4 = psVar24[1];
            sVar5 = *psVar24;
            *puVar18 = local_88;
            iVar10 = RepadBitmap((long)(int)uVar11 + (long)local_c8,
                                 (long)(int)local_88 + (long)pvVar17,1 << ((byte)local_64 & 3),
                                 param_5,(int)sVar4 - (int)sVar5,(int)sVar2 + (int)sVar3);
            local_88 = local_88 + iVar10;
            psVar24 = psVar24 + 0xc;
            puVar18 = puVar25;
          } while (__ptr_01 + (ulong)(uVar12 - 1) + 1 != puVar25);
        }
        free(local_c8);
        local_c8 = pvVar17;
      }
      if (uVar12 != 0) {
        puVar18 = __ptr_01;
        plVar23 = (long *)(__ptr_00 + 8);
        do {
          uVar11 = *puVar18;
          puVar18 = puVar18 + 1;
          *plVar23 = (ulong)uVar11 + (long)local_c8;
          plVar23 = plVar23 + 3;
        } while (puVar18 != __ptr_01 + (ulong)(uVar12 - 1) + 1);
      }
      free(__ptr_01);
      iVar10 = FUN_00121df0(param_2,__ptr,local_5c,0x10,&local_64,local_60);
      pvVar17 = (void *)0x0;
      if (iVar10 == 0) {
LAB_00123094:
        iVar10 = FUN_00121df0(param_2,__ptr,local_5c,0x20,&local_64,local_60);
        if ((iVar10 != 0) && (local_64 = FUN_00121950(param_2), (local_64 & 0xffffff00) == 0)) {
          uVar9 = FUN_00121c60(param_2,local_64);
          *(undefined2 *)(param_1 + 8) = uVar9;
          uVar9 = FUN_00121c60(param_2,local_64);
          *(undefined2 *)(param_1 + 10) = uVar9;
          uVar9 = FUN_00121c60(param_2,local_64);
          *(undefined2 *)(param_1 + 0xc) = uVar9;
          uVar9 = FUN_00121c60(param_2,local_64);
          *(undefined2 *)(param_1 + 0xe) = uVar9;
          uVar9 = FUN_00121c60(param_2,local_64);
          *(undefined2 *)(param_1 + 0x10) = uVar9;
          if (*(int *)(param_2 + 0xc) != -1) {
            if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
              if ((*(ushort *)(param_1 + 0xc) <= *(ushort *)(param_1 + 0xe)) &&
                 (iVar10 = (uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8),
                 iVar10 < 0x100)) {
                iVar13 = (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1)
                         * (iVar10 + 1);
                iVar10 = (iVar13 + 0x7f) / 0x80;
                pvVar19 = calloc((long)iVar10,8);
                if (pvVar19 == (void *)0x0) {
                  __ptr_01 = (uint *)0x0;
                  pcfError("pcfReadFont(): Couldn\'t allocate encoding (%d*%d)\n",iVar13,8);
                  free(pvVar17);
                }
                else {
                  *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) | 0x40;
                  for (uVar11 = 0; (int)uVar11 < iVar13; uVar11 = uVar11 + 1) {
                    iVar14 = FUN_00121c60(param_2,local_64);
                    if (*(int *)(param_2 + 0xc) == -1) {
LAB_00123567:
                      free(pvVar17);
                      goto LAB_00123581;
                    }
                    if (iVar14 == 0xffff) {
                      *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) & 0xbf;
                    }
                    else {
                      plVar23 = (long *)((long)pvVar19 + (long)((int)uVar11 >> 7) * 8);
                      if (*plVar23 == 0) {
                        pvVar21 = calloc(0x80,8);
                        *plVar23 = (long)pvVar21;
                        if (pvVar21 == (void *)0x0) goto LAB_00123567;
                      }
                      *(short **)(*plVar23 + (ulong)(uVar11 & 0x7f) * 8) =
                           __ptr_00 + (long)iVar14 * 0xc;
                    }
                  }
                  if ((!bVar8) ||
                     (iVar14 = FUN_00121e90(lVar26,param_2,__ptr,local_5c,0x100), iVar14 != 0)) {
                    puVar20 = (undefined4 *)malloc(0x40);
                    if (puVar20 != (undefined4 *)0x0) {
                      *puVar20 = 0x70636601;
                      uVar6 = *(ushort *)(param_1 + 0x10);
                      *(short **)(puVar20 + 4) = __ptr_00;
                      puVar20[1] = uVar12;
                      *(void **)(puVar20 + 6) = pvVar17;
                      puVar20[2] = local_5c;
                      *(void **)(puVar20 + 10) = pvVar19;
                      *(void **)(puVar20 + 8) = local_c8;
                      *(undefined8 *)(puVar20 + 0xc) = 0;
                      if (uVar6 != 0xffff) {
                        uVar27 = uVar6 >> 8;
                        if ((*(ushort *)(param_1 + 0xc) <= uVar27) &&
                           (uVar27 <= *(ushort *)(param_1 + 0xe))) {
                          uVar7 = *(ushort *)(param_1 + 8);
                          if ((uVar7 <= (uVar6 & 0xff)) &&
                             ((uVar6 & 0xff) <= *(ushort *)(param_1 + 10))) {
                            uVar11 = (((uint)*(ushort *)(param_1 + 10) - (uint)uVar7) + 1) *
                                     ((uint)uVar27 - (uint)*(ushort *)(param_1 + 0xc)) +
                                     ((uint)(byte)uVar6 - (uint)uVar7);
                            lVar26 = *(long *)((long)pvVar19 + (ulong)(uVar11 >> 7) * 8);
                            if (lVar26 != 0) {
                              lVar26 = *(long *)(lVar26 + (ulong)(uVar11 & 0x7f) * 8);
                            }
                            *(long *)(puVar20 + 0xc) = lVar26;
                          }
                        }
                      }
                      *(undefined8 *)(puVar20 + 0xe) = 0;
                      *(undefined4 **)(param_1 + 0x98) = puVar20;
                      *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
                      *(undefined8 *)(param_1 + 0x80) = 0;
                      *(code **)(param_1 + 0x70) = bitmapGetMetrics;
                      *(code **)(param_1 + 0x78) = FUN_001222a0;
                      local_c0 = (undefined)param_3;
                      *(undefined *)(param_1 + 0x60) = local_c0;
                      local_b0 = (undefined)param_4;
                      *(undefined *)(param_1 + 0x61) = local_b0;
                      local_b4 = (undefined)param_5;
                      *(undefined *)(param_1 + 0x62) = local_b4;
                      local_ac = (undefined)param_6;
                      *(undefined *)(param_1 + 99) = local_ac;
                      free(__ptr);
                      uVar16 = 0x55;
                      goto LAB_00122bef;
                    }
                    pcfError("pcfReadFont(): Couldn\'t allocate bitmapFont (%d)\n",0x40);
                  }
                  free(pvVar17);
                  if (0 < iVar13) {
LAB_00123581:
                    lVar26 = 0;
                    do {
                      lVar1 = lVar26 * 8;
                      lVar26 = lVar26 + 1;
                      free(*(void **)((long)pvVar19 + lVar1));
                    } while ((int)lVar26 < iVar10);
                  }
                  __ptr_01 = (uint *)0x0;
                }
                goto LAB_00122ba0;
              }
            }
          }
        }
        __ptr_01 = (uint *)0x0;
        pvVar19 = (void *)0x0;
        free(pvVar17);
      }
      else {
        local_64 = FUN_00121950(param_2);
        if ((local_64 & 0xfffffe00) == 0) {
          if ((local_64 & 0xffffff00) == 0) {
            uVar11 = FUN_00121a50();
          }
          else {
            uVar11 = FUN_00121c60(param_2,local_64);
          }
          if ((*(int *)(param_2 + 0xc) != -1) && (uVar11 == uVar12)) {
            pvVar17 = malloc((long)(int)uVar11 * 0xc);
            if (pvVar17 == (void *)0x0) {
              __ptr_01 = (uint *)0x0;
              pvVar19 = (void *)0x0;
              pcfError("pcfReadFont(): Couldn\'t allocate ink_metrics (%d*%d)\n",uVar11,0xc);
              goto LAB_00122ba0;
            }
            local_88 = 0;
            pvVar19 = pvVar17;
            if (uVar11 != 0) {
              do {
                if ((local_64 & 0xffffff00) == 0) {
                  iVar10 = FUN_00121d80(param_2,local_64,pvVar19);
                }
                else {
                  iVar10 = FUN_00122370(param_2,pvVar19);
                }
                if (iVar10 == 0) {
                  __ptr_01 = (uint *)0x0;
                  goto LAB_00122c34;
                }
                local_88 = local_88 + 1;
                pvVar19 = (void *)((long)pvVar19 + 0xc);
              } while (uVar11 != local_88);
            }
            goto LAB_00123094;
          }
        }
        __ptr_01 = (uint *)0x0;
        pvVar19 = (void *)0x0;
      }
      goto LAB_00122ba0;
    }
    goto LAB_00122c3c;
  }
LAB_00122b8f:
  local_c8 = (void *)0x0;
  __ptr_01 = (uint *)0x0;
  pvVar19 = (void *)0x0;
  __ptr_00 = (short *)0x0;
  goto LAB_00122ba0;
LAB_00122e25:
  local_c8 = (void *)0x0;
  pvVar17 = (void *)0x0;
LAB_00122c34:
  free(pvVar17);
LAB_00122c3c:
  pvVar19 = (void *)0x0;
LAB_00122ba0:
  free(pvVar19);
  free(local_c8);
  free(__ptr_00);
  free(*(void **)(param_1 + 0x50));
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined8 *)(param_1 + 0x50) = 0;
  free(*(void **)(param_1 + 0x58));
  free(__ptr);
  free(__ptr_01);
  uVar16 = 0x50;
LAB_00122bef:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar16;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 pcfReadFontInfo(ushort *param_1,long param_2)

{
  bool bVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  int *__ptr;
  int *piVar5;
  undefined8 uVar6;
  long in_FS_OFFSET;
  int local_3c;
  uint local_38;
  undefined local_34 [4];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  param_1[0x28] = 0;
  param_1[0x29] = 0;
  param_1[0x2a] = 0;
  param_1[0x2b] = 0;
  param_1[0x24] = 0;
  param_1[0x25] = 0;
  param_1[0x26] = 0;
  param_1[0x27] = 0;
  param_1[0x22] = 0;
  param_1[0x23] = 0;
  DAT_0013fcb0 = 0;
  iVar3 = FUN_00121950(param_2);
  if (iVar3 == 0x70636601) {
    __ptr = (int *)FUN_00122610(param_2,&local_3c);
    if (__ptr != (int *)0x0) {
      iVar3 = FUN_00122710(param_1,param_2,__ptr,local_3c);
      if (iVar3 != 0) {
        if (0 < local_3c) {
          piVar5 = __ptr;
          do {
            if (*piVar5 == 0x100) {
              bVar1 = true;
              goto LAB_001236eb;
            }
            piVar5 = piVar5 + 4;
          } while (piVar5 != __ptr + ((ulong)(local_3c - 1) + 1) * 4);
        }
        iVar3 = FUN_00121e90(param_1,param_2,__ptr,local_3c,2);
        if (iVar3 != 0) {
          bVar1 = false;
LAB_001236eb:
          iVar3 = FUN_00121df0(param_2,__ptr,local_3c,0x20,&local_38,local_34);
          if (iVar3 != 0) {
            local_38 = FUN_00121950(param_2);
            if ((local_38 & 0xffffff00) == 0) {
              uVar2 = FUN_00121c60(param_2,local_38);
              *param_1 = uVar2;
              uVar2 = FUN_00121c60(param_2,local_38);
              param_1[1] = uVar2;
              uVar2 = FUN_00121c60(param_2,local_38);
              param_1[2] = uVar2;
              uVar2 = FUN_00121c60(param_2,local_38);
              param_1[3] = uVar2;
              uVar2 = FUN_00121c60(param_2,local_38);
              param_1[4] = uVar2;
              if (*(int *)(param_2 + 0xc) != -1) {
                if (*param_1 <= param_1[1]) {
                  if ((param_1[2] <= param_1[3]) &&
                     (iVar3 = (uint)param_1[1] - (uint)*param_1, iVar3 < 0x100)) {
                    *(byte *)(param_1 + 5) = *(byte *)(param_1 + 5) | 0x40;
                    iVar3 = (((uint)param_1[3] - (uint)param_1[2]) + 1) * (iVar3 + 1);
                    do {
                      if (iVar3 == 0) {
                        if (*(int *)(param_2 + 0xc) == -1) break;
                        if (bVar1) {
                          iVar3 = FUN_00121e90(param_1,param_2,__ptr,local_3c,0x100);
                          if (iVar3 == 0) break;
                        }
                        free(__ptr);
                        uVar6 = 0x55;
                        goto LAB_00123736;
                      }
                      iVar4 = FUN_00121c60(param_2,local_38);
                      if (iVar4 == 0xffff) {
                        *(byte *)(param_1 + 5) = *(byte *)(param_1 + 5) & 0xbf;
                      }
                      iVar3 = iVar3 + -1;
                    } while (*(int *)(param_2 + 0xc) != -1);
                  }
                }
              }
            }
          }
        }
      }
      goto LAB_00123710;
    }
  }
  __ptr = (int *)0x0;
LAB_00123710:
  param_1[0x22] = 0;
  param_1[0x23] = 0;
  free(*(void **)(param_1 + 0x24));
  free(*(void **)(param_1 + 0x28));
  free(__ptr);
  uVar6 = 0x50;
LAB_00123736:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_001238c0(long *param_1,uint param_2)

{
  long *plVar1;
  int iVar2;
  undefined *puVar3;
  ulong uVar4;
  
  DAT_0013fcb4 = DAT_0013fcb4 + 4;
  plVar1 = param_1 + 1;
  *(int *)plVar1 = *(int *)plVar1 + -1;
  if (*(int *)plVar1 == 0) {
    (*(code *)param_1[0x403])(param_2 & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *param_1 = (long)(puVar3 + 1);
    *puVar3 = (char)param_2;
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
    (*(code *)param_1[0x403])((int)param_2 >> 8 & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *param_1 = (long)(puVar3 + 1);
    *puVar3 = (char)(param_2 >> 8);
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
    (*(code *)param_1[0x403])((int)param_2 >> 0x10 & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *param_1 = (long)(puVar3 + 1);
    *puVar3 = (char)(param_2 >> 0x10);
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
                    // WARNING: Could not recover jumptable at 0x0012394d. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar4 = (*(code *)param_1[0x403])((ulong)(param_2 >> 0x18),param_1);
    return uVar4;
  }
  puVar3 = (undefined *)*param_1;
  *param_1 = (long)(puVar3 + 1);
  *puVar3 = (char)(param_2 >> 0x18);
  return (ulong)(param_2 >> 0x18);
}



ulong FUN_001239b0(long *param_1,uint param_2,ulong param_3)

{
  long *plVar1;
  undefined *puVar2;
  int iVar3;
  ulong uVar4;
  undefined uVar5;
  undefined uVar7;
  undefined uVar6;
  undefined uVar8;
  uint uVar9;
  uint uVar10;
  
  DAT_0013fcb4 = DAT_0013fcb4 + 4;
  iVar3 = *(int *)(param_1 + 1) + -1;
  *(int *)(param_1 + 1) = iVar3;
  uVar5 = (undefined)(param_3 & 0xffffffff);
  uVar6 = (undefined)(param_3 >> 0x18);
  uVar9 = (int)param_3 >> 8;
  uVar10 = (int)param_3 >> 0x10;
  uVar7 = (undefined)(param_3 >> 8);
  uVar8 = (undefined)(param_3 >> 0x10);
  if ((param_2 & 4) == 0) {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(param_3 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar5;
    }
    iVar3 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) {
      (*(code *)param_1[0x403])(uVar9 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar7;
    }
    iVar3 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) {
      (*(code *)param_1[0x403])(uVar10 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar8;
    }
    iVar3 = *(int *)(param_1 + 1);
    param_3 = (param_3 & 0xffffffff) >> 0x18;
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 != 0) {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar6;
      return param_3;
    }
  }
  else {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(param_3 >> 0x18 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar6;
    }
    iVar3 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) {
      (*(code *)param_1[0x403])(uVar10 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar8;
    }
    iVar3 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) {
      (*(code *)param_1[0x403])(uVar9 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar7;
    }
    plVar1 = param_1 + 1;
    *(int *)plVar1 = *(int *)plVar1 + -1;
    param_3 = param_3 & 0xff;
    if (*(int *)plVar1 != 0) {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar5;
      return param_3;
    }
  }
                    // WARNING: Could not recover jumptable at 0x00123b30. Too many branches
                    // WARNING: Treating indirect jump as call
  uVar4 = (*(code *)param_1[0x403])(param_3,param_1);
  return uVar4;
}



ulong FUN_00123ba0(long *param_1,uint param_2,ulong param_3)

{
  long *plVar1;
  undefined *puVar2;
  int iVar3;
  ulong uVar4;
  undefined uVar5;
  uint uVar6;
  
  uVar6 = (int)param_3 >> 8;
  DAT_0013fcb4 = DAT_0013fcb4 + 2;
  iVar3 = *(int *)(param_1 + 1) + -1;
  *(int *)(param_1 + 1) = iVar3;
  uVar5 = (undefined)(param_3 >> 8);
  if ((param_2 & 4) == 0) {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(param_3 & 0xff,param_1);
      plVar1 = param_1 + 1;
      *(int *)plVar1 = *(int *)plVar1 + -1;
      iVar3 = *(int *)plVar1;
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = (char)param_3;
      plVar1 = param_1 + 1;
      *(int *)plVar1 = *(int *)plVar1 + -1;
      iVar3 = *(int *)plVar1;
    }
    uVar4 = (ulong)(uVar6 & 0xff);
    if (iVar3 != 0) {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar5;
      return uVar4;
    }
  }
  else {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(uVar6 & 0xff,param_1);
    }
    else {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = uVar5;
    }
    plVar1 = param_1 + 1;
    *(int *)plVar1 = *(int *)plVar1 + -1;
    uVar4 = param_3 & 0xff;
    if (*(int *)plVar1 != 0) {
      puVar2 = (undefined *)*param_1;
      *param_1 = (long)(puVar2 + 1);
      *puVar2 = (char)param_3;
      return uVar4;
    }
  }
                    // WARNING: Could not recover jumptable at 0x00123c54. Too many branches
                    // WARNING: Treating indirect jump as call
  uVar4 = (*(code *)param_1[0x403])(uVar4,param_1);
  return uVar4;
}



void FUN_00123c80(undefined8 param_1,ulong param_2,short *param_3)

{
  FUN_00123ba0(param_1,param_2,(int)*param_3);
  FUN_00123ba0(param_1,param_2 & 0xffffffff,(int)param_3[1]);
  FUN_00123ba0(param_1,param_2 & 0xffffffff,(int)param_3[2]);
  FUN_00123ba0(param_1,param_2 & 0xffffffff,(int)param_3[3]);
  FUN_00123ba0(param_1,param_2 & 0xffffffff,(int)param_3[4]);
  FUN_00123ba0(param_1,param_2 & 0xffffffff,param_3[5]);
  return;
}



ulong FUN_00123cf0(long *param_1,byte param_2)

{
  long *plVar1;
  byte *pbVar2;
  ulong uVar3;
  
  DAT_0013fcb4 = DAT_0013fcb4 + 1;
  plVar1 = param_1 + 1;
  *(int *)plVar1 = *(int *)plVar1 + -1;
  if (*(int *)plVar1 == 0) {
                    // WARNING: Could not recover jumptable at 0x00123d0e. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar3 = (*(code *)param_1[0x403])((ulong)param_2,param_1);
    return uVar3;
  }
  pbVar2 = (byte *)*param_1;
  *param_1 = (long)(pbVar2 + 1);
  *pbVar2 = param_2;
  return (ulong)param_2;
}



void FUN_00123d20(undefined8 param_1,uint param_2,long param_3)

{
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) & 1);
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) >> 2 & 1);
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) >> 1 & 1);
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) >> 3 & 1);
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) >> 4 & 1);
  FUN_00123cf0(param_1,*(byte *)(param_3 + 10) >> 5 & 1);
  FUN_00123cf0(param_1,*(ushort *)(param_3 + 10) >> 7 & 3);
  FUN_00123cf0(param_1,0);
  FUN_001239b0(param_1,param_2,(int)*(short *)(param_3 + 0x40));
  FUN_001239b0(param_1,param_2,(int)*(short *)(param_3 + 0x42));
  FUN_001239b0(param_1,param_2,(int)*(short *)(param_3 + 0xc));
  FUN_00123c80(param_1,param_2,param_3 + 0x1c);
  FUN_00123c80(param_1,param_2,param_3 + 0x10);
  if (param_2 >> 8 != 1) {
    return;
  }
  FUN_00123c80(param_1,param_2,param_3 + 0x34);
  FUN_00123c80(param_1,param_2,param_3 + 0x28);
  return;
}



void FUN_00123e40(undefined8 param_1,short *param_2)

{
  FUN_00123cf0(param_1,*param_2 + 0x80);
  FUN_00123cf0(param_1,param_2[1] + 0x80);
  FUN_00123cf0(param_1,param_2[2] + 0x80);
  FUN_00123cf0(param_1,param_2[3] + 0x80);
  FUN_00123cf0(param_1,param_2[4] + 0x80);
  return;
}



undefined8 pcfWriteFont(long param_1,long *param_2)

{
  short *psVar1;
  undefined *puVar2;
  byte bVar3;
  ushort uVar4;
  ushort uVar5;
  short sVar6;
  long lVar7;
  undefined *puVar8;
  uint uVar9;
  uint uVar10;
  undefined4 *__ptr;
  char *pcVar11;
  size_t sVar12;
  undefined8 uVar13;
  uint *puVar14;
  uint uVar15;
  uint *puVar16;
  int iVar17;
  long *plVar18;
  ulong uVar19;
  uint *puVar20;
  long lVar21;
  long lVar22;
  uint *puVar23;
  undefined4 *puVar24;
  undefined *puVar25;
  undefined *puVar26;
  uint uVar27;
  int iVar28;
  long in_FS_OFFSET;
  int local_288;
  int local_284;
  short *local_278;
  short *local_268;
  uint local_260;
  short *local_258;
  short *local_250;
  uint local_248 [130];
  long local_40;
  
  lVar7 = *(long *)(param_1 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar22 = *(long *)(lVar7 + 0x38);
  if (lVar22 == 0) {
    local_278 = (short *)(param_1 + 0x24);
    local_258 = (short *)(param_1 + 0x18);
    local_268 = (short *)(param_1 + 0x3c);
    local_250 = (short *)(param_1 + 0x30);
  }
  else {
    local_278 = (short *)(lVar22 + 0x3c);
    local_258 = (short *)(lVar22 + 0x30);
    local_268 = (short *)(lVar22 + 0x54);
    local_250 = (short *)(lVar22 + 0x48);
  }
  iVar28 = *(int *)(param_1 + 0x4c);
  __ptr = (undefined4 *)malloc((long)iVar28 << 4);
  if (__ptr == (undefined4 *)0x0) {
    pcfError("pcfWriteFont(): Couldn\'t allocate offsetProps (%d*%d)",iVar28,0x10);
    uVar13 = 0x50;
  }
  else {
    local_288 = 0;
    lVar22 = 0;
    if (0 < iVar28) {
      local_288 = 0;
      plVar18 = (long *)(__ptr + 2);
      do {
        while( true ) {
          plVar18[-1] = (long)local_288;
          lVar21 = lVar22 * 0x10;
          pcVar11 = (char *)NameForAtom(*(undefined8 *)(*(long *)(param_1 + 0x50) + lVar21));
          sVar12 = strlen(pcVar11);
          local_288 = local_288 + 1 + (int)sVar12;
          if (*(char *)(*(long *)(param_1 + 0x58) + lVar22) == '\0') break;
          lVar22 = lVar22 + 1;
          *plVar18 = (long)local_288;
          pcVar11 = (char *)NameForAtom(*(undefined8 *)(*(long *)(param_1 + 0x50) + 8 + lVar21));
          sVar12 = strlen(pcVar11);
          local_288 = local_288 + 1 + (int)sVar12;
          plVar18 = plVar18 + 2;
          if (*(int *)(param_1 + 0x4c) <= (int)lVar22) goto LAB_00123fdf;
        }
        lVar22 = lVar22 + 1;
        *plVar18 = *(long *)(*(long *)(param_1 + 0x50) + 8 + lVar21);
        plVar18 = plVar18 + 2;
      } while ((int)lVar22 < *(int *)(param_1 + 0x4c));
    }
LAB_00123fdf:
    uVar9 = 0x20;
    if (*(char *)(param_1 + 99) != '\x04') {
      uVar9 = (uint)(*(char *)(param_1 + 99) == '\x02') << 4;
    }
    if (*(char *)(param_1 + 0x60) == '\x01') {
      uVar9 = uVar9 | 8;
    }
    if (*(char *)(param_1 + 0x61) == '\x01') {
      uVar9 = uVar9 | 4;
    }
    uVar15 = 2;
    if (*(char *)(param_1 + 0x62) != '\x04') {
      uVar15 = (uint)(*(char *)(param_1 + 0x62) == '\x02');
    }
    uVar9 = uVar15 | uVar9;
    puVar23 = local_248;
    local_284 = 0;
    local_260 = 0;
    uVar27 = 0xfffffff;
    puVar16 = puVar23;
    do {
      while( true ) {
        uVar10 = -uVar27 & uVar27;
        *puVar16 = uVar10;
        uVar27 = uVar27 & ~uVar10;
        if (uVar10 < 0x21) break;
        if (uVar10 == 0x80) {
          puVar16[1] = uVar9;
          iVar28 = *(int *)(lVar7 + 4);
          if (iVar28 < 1) {
            uVar10 = 0;
          }
          else {
            lVar22 = 0;
            iVar17 = 0;
            do {
              lVar21 = lVar22 * 8;
              lVar22 = lVar22 + 1;
              pcVar11 = (char *)NameForAtom(*(undefined8 *)(**(long **)(lVar7 + 0x38) + lVar21));
              sVar12 = strlen(pcVar11);
              iVar17 = iVar17 + 1 + (int)sVar12;
              iVar28 = *(int *)(lVar7 + 4);
            } while ((int)lVar22 < iVar28);
            uVar10 = iVar17 + 3U & 0xfffffffc;
          }
          puVar16[2] = uVar10 + 0xc + iVar28 * 4;
        }
        else {
          if (uVar10 == 0x100) {
            puVar16[2] = 100;
            uVar10 = uVar9 | 0x100;
            if ((*(byte *)(param_1 + 0x12) & 0x20) == 0) {
              uVar10 = uVar9;
            }
            puVar16[1] = uVar10;
LAB_001240e1:
            puVar16 = puVar16 + 4;
            goto joined_r0x0012429c;
          }
          if (uVar10 != 0x40) goto joined_r0x0012429c;
          puVar16[1] = uVar9;
          puVar16[2] = *(int *)(lVar7 + 4) * 4 + 8;
        }
joined_r0x0012439a:
        puVar16 = puVar16 + 4;
        if (uVar27 == 0) goto LAB_001240ea;
      }
      if ((uVar10 == 0) || (false)) goto joined_r0x0012429c;
      switch(uVar10) {
      case 1:
        puVar16[1] = uVar9;
        iVar28 = *(int *)(param_1 + 0x4c) * 9;
        uVar10 = iVar28 + 0xbU & 0xfffffffc;
        local_284 = uVar10 - (iVar28 + 8);
        puVar16[2] = uVar10 + 4 + (local_288 + 3U & 0xfffffffc);
        goto joined_r0x0012439a;
      case 2:
        bVar3 = *(byte *)(*(long *)(lVar7 + 0x38) + 0x2a);
        puVar16[2] = 100;
        uVar10 = uVar9 | 0x100;
        if ((bVar3 & 0x20) == 0) {
          uVar10 = uVar9;
        }
        puVar16[1] = uVar10;
        goto joined_r0x0012429c;
      case 4:
        if ((((ushort)(*local_278 + 0x80U) < 0x100) && ((ushort)(local_278[1] + 0x80U) < 0x100)) &&
           (((ushort)(local_278[2] + 0x80U) < 0x100 &&
            (((ushort)(local_278[3] + 0x80U) < 0x100 && ((ushort)(local_278[4] + 0x80U) < 0x100)))))
           ) {
          sVar6 = local_278[5];
          psVar1 = local_258;
joined_r0x00124c6f:
          if (((((sVar6 == 0) && ((ushort)(*psVar1 + 0x80U) < 0x100)) &&
               ((ushort)(psVar1[1] + 0x80U) < 0x100)) &&
              (((ushort)(psVar1[2] + 0x80U) < 0x100 && ((ushort)(psVar1[3] + 0x80U) < 0x100)))) &&
             (((ushort)(psVar1[4] + 0x80U) < 0x100 && (psVar1[5] == 0)))) {
            puVar16[1] = uVar9 | 0x100;
            puVar16[2] = *(int *)(lVar7 + 4) * 5 + 9U & 0xfffffffc;
            goto LAB_001240e1;
          }
        }
LAB_001240c9:
        puVar16[1] = uVar9;
        puVar16[2] = *(int *)(lVar7 + 4) * 0xc + 8;
        goto LAB_001240e1;
      case 8:
        puVar16[1] = uVar9;
        puVar16[2] = *(int *)(*(long *)(lVar7 + 0x38) + 0x10 + (ulong)uVar15 * 4) + 0x1b +
                     *(int *)(lVar7 + 4) * 4 & 0xfffffffc;
joined_r0x0012429c:
        puVar16 = puVar16 + 4;
        break;
      case 0x10:
        if (*(long *)(lVar7 + 0x18) != 0) {
          if (((((ushort)(*local_268 + 0x80U) < 0x100) && ((ushort)(local_268[1] + 0x80U) < 0x100))
              && ((ushort)(local_268[2] + 0x80U) < 0x100)) &&
             (((ushort)(local_268[3] + 0x80U) < 0x100 && ((ushort)(local_268[4] + 0x80U) < 0x100))))
          {
            sVar6 = local_268[5];
            psVar1 = local_250;
            goto joined_r0x00124c6f;
          }
          goto LAB_001240c9;
        }
        break;
      case 0x20:
        uVar4 = *(ushort *)(param_1 + 0xe);
        uVar5 = *(ushort *)(param_1 + 8);
        puVar16[1] = uVar9;
        local_260 = (((uint)uVar4 - (uint)*(ushort *)(param_1 + 0xc)) + 1) *
                    (((uint)*(ushort *)(param_1 + 10) - (uint)uVar5) + 1);
        puVar16[2] = local_260 * 2 + 0x11 & 0xfffffffc;
        puVar16 = puVar16 + 4;
      }
joined_r0x0012429c:
    } while (uVar27 != 0);
LAB_001240ea:
    uVar27 = (int)((long)puVar16 - (long)puVar23) + 8;
    uVar19 = (long)puVar16 - (long)puVar23 >> 4;
    if ((int)uVar19 < 1) {
      DAT_0013fcb4 = 0;
      FUN_001238c0(param_2,0x70636601);
      FUN_001238c0(param_2,uVar19 & 0xffffffff);
    }
    else {
      puVar14 = puVar23 + ((ulong)((int)uVar19 - 1) + 1) * 4;
      puVar16 = puVar23;
      do {
        puVar16[3] = uVar27;
        uVar27 = uVar27 + puVar16[2];
        puVar16 = puVar16 + 4;
      } while (puVar16 != puVar14);
      DAT_0013fcb4 = 0;
      FUN_001238c0(param_2,0x70636601);
      FUN_001238c0(param_2,uVar19 & 0xffffffff);
      puVar16 = puVar23;
      do {
        puVar20 = puVar16 + 4;
        FUN_001238c0(param_2,*puVar16);
        FUN_001238c0(param_2,puVar16[1]);
        FUN_001238c0(param_2,puVar16[2]);
        FUN_001238c0(param_2,puVar16[3]);
        puVar16 = puVar20;
      } while (puVar20 != puVar14);
      do {
        if (puVar23[3] < DAT_0013fcb4) {
          __printf_chk(1,"can\'t go backwards... %d > %d\n");
          free(__ptr);
          uVar13 = 0x53;
          goto LAB_001243ee;
        }
        if (DAT_0013fcb4 < puVar23[3]) {
          do {
            FUN_00123cf0(param_2,0);
          } while (DAT_0013fcb4 < puVar23[3]);
        }
        FUN_001238c0(param_2);
        uVar27 = *puVar23;
        if (uVar27 < 0x21) {
          if ((uVar27 != 0) && (true)) {
            switch(uVar27) {
            case 1:
              lVar22 = 0;
              FUN_001239b0(param_2,uVar9,*(undefined4 *)(param_1 + 0x4c));
              puVar24 = __ptr;
              if (0 < *(int *)(param_1 + 0x4c)) {
                do {
                  FUN_001239b0(param_2,uVar9,*puVar24);
                  pcVar11 = (char *)(*(long *)(param_1 + 0x58) + lVar22);
                  lVar22 = lVar22 + 1;
                  FUN_00123cf0(param_2,(int)*pcVar11);
                  FUN_001239b0(param_2,uVar9,puVar24[2]);
                  puVar24 = puVar24 + 4;
                } while ((int)lVar22 < *(int *)(param_1 + 0x4c));
              }
              iVar28 = 0;
              if (0 < local_284) {
                do {
                  iVar28 = iVar28 + 1;
                  FUN_00123cf0(param_2,0);
                } while (local_284 != iVar28);
              }
              lVar22 = 0;
              FUN_001239b0(param_2,uVar9,local_288);
              if (0 < *(int *)(param_1 + 0x4c)) {
                do {
                  while( true ) {
                    lVar21 = lVar22 * 0x10;
                    pcVar11 = (char *)NameForAtom(*(undefined8 *)
                                                   (*(long *)(param_1 + 0x50) + lVar21));
                    sVar12 = strlen(pcVar11);
                    DAT_0013fcb4 = DAT_0013fcb4 + (int)sVar12 + 1;
                    BufFileWrite(param_2);
                    if (*(char *)(*(long *)(param_1 + 0x58) + lVar22) == '\0') break;
                    lVar22 = lVar22 + 1;
                    pcVar11 = (char *)NameForAtom(*(undefined8 *)
                                                   (*(long *)(param_1 + 0x50) + 8 + lVar21));
                    sVar12 = strlen(pcVar11);
                    DAT_0013fcb4 = DAT_0013fcb4 + (int)sVar12 + 1;
                    BufFileWrite(param_2);
                    if (*(int *)(param_1 + 0x4c) <= (int)lVar22) goto joined_r0x00124632;
                  }
                  lVar22 = lVar22 + 1;
                } while ((int)lVar22 < *(int *)(param_1 + 0x4c));
              }
              break;
            case 2:
              FUN_00123d20(param_2,puVar23[1],*(long *)(lVar7 + 0x38) + 0x20);
              break;
            case 4:
              if (puVar23[1] >> 8 == 1) {
                FUN_00123ba0(param_2,uVar9,*(undefined4 *)(lVar7 + 4));
                if (0 < *(int *)(lVar7 + 4)) {
                  iVar28 = 0;
                  do {
                    iVar28 = iVar28 + 1;
                    FUN_00123e40(param_2);
                  } while (iVar28 < *(int *)(lVar7 + 4));
                }
              }
              else {
                FUN_001239b0(param_2);
                if (0 < *(int *)(lVar7 + 4)) {
                  lVar22 = 0;
                  do {
                    lVar21 = lVar22 + 1;
                    FUN_00123c80(param_2,uVar9,*(long *)(lVar7 + 0x10) + lVar22 * 0x18);
                    lVar22 = lVar21;
                  } while ((int)lVar21 < *(int *)(lVar7 + 4));
                }
              }
              break;
            case 8:
              lVar22 = 0;
              FUN_001239b0(param_2,uVar9,*(undefined4 *)(lVar7 + 4));
              iVar28 = 0;
              if (0 < *(int *)(lVar7 + 4)) {
                do {
                  FUN_001239b0(param_2,uVar9,iVar28);
                  psVar1 = (short *)(*(long *)(lVar7 + 0x10) + lVar22 * 0x18);
                  if (uVar15 == 0) {
                    uVar27 = ((int)psVar1[1] - (int)*psVar1) + 7 >> 3;
                  }
                  else {
                    iVar17 = (int)psVar1[1] - (int)*psVar1;
                    if (uVar15 == 1) {
                      uVar27 = iVar17 + 0xf >> 3 & 0xfffffffe;
                    }
                    else if (uVar15 == 2) {
                      uVar27 = iVar17 + 0x1f >> 3 & 0xfffffffc;
                    }
                    else {
                      uVar27 = iVar17 + 0x3f >> 3 & 0xfffffff8;
                    }
                  }
                  lVar22 = lVar22 + 1;
                  iVar28 = iVar28 + uVar27 * ((int)psVar1[3] + (int)psVar1[4]);
                } while ((int)lVar22 < *(int *)(lVar7 + 4));
              }
              iVar28 = 0;
              do {
                lVar22 = (long)iVar28;
                iVar28 = iVar28 + 1;
                FUN_001239b0(param_2,uVar9,
                             *(undefined4 *)(*(long *)(lVar7 + 0x38) + 0x10 + lVar22 * 4));
              } while (iVar28 != 4);
              if (0 < *(int *)(lVar7 + 4)) {
                lVar22 = 0;
                do {
                  psVar1 = (short *)(*(long *)(lVar7 + 0x10) + lVar22 * 0x18);
                  iVar28 = (int)psVar1[1] - (int)*psVar1;
                  if (uVar15 == 0) {
                    uVar27 = iVar28 + 7 >> 3;
                  }
                  else if (uVar15 == 1) {
                    uVar27 = iVar28 + 0xf >> 3 & 0xfffffffe;
                  }
                  else if (uVar15 == 2) {
                    uVar27 = iVar28 + 0x1f >> 3 & 0xfffffffc;
                  }
                  else {
                    uVar27 = iVar28 + 0x3f >> 3 & 0xfffffff8;
                  }
                  iVar28 = uVar27 * ((int)psVar1[3] + (int)psVar1[4]);
                  DAT_0013fcb4 = DAT_0013fcb4 + iVar28;
                  puVar2 = *(undefined **)(psVar1 + 8) + (ulong)(iVar28 - 1) + 1;
                  puVar25 = *(undefined **)(psVar1 + 8);
                  if (iVar28 != 0) {
                    do {
                      while( true ) {
                        iVar28 = *(int *)(param_2 + 1);
                        puVar26 = puVar25 + 1;
                        *(int *)(param_2 + 1) = iVar28 + -1;
                        if (iVar28 + -1 != 0) break;
                        (*(code *)param_2[0x403])(*puVar25);
                        puVar25 = puVar26;
                        if (puVar2 == puVar26) goto LAB_00124b01;
                      }
                      puVar8 = (undefined *)*param_2;
                      *param_2 = (long)(puVar8 + 1);
                      *puVar8 = *puVar25;
                      puVar25 = puVar26;
                    } while (puVar2 != puVar26);
                  }
LAB_00124b01:
                  lVar22 = lVar22 + 1;
                } while ((int)lVar22 < *(int *)(lVar7 + 4));
              }
              break;
            case 0x10:
              if (puVar23[1] >> 8 == 1) {
                FUN_00123ba0(param_2,uVar9,*(undefined4 *)(lVar7 + 4));
                if (0 < *(int *)(lVar7 + 4)) {
                  iVar28 = 0;
                  do {
                    iVar28 = iVar28 + 1;
                    FUN_00123e40(param_2);
                  } while (iVar28 < *(int *)(lVar7 + 4));
                }
              }
              else {
                FUN_001239b0(param_2,uVar9);
                if (0 < *(int *)(lVar7 + 4)) {
                  lVar22 = 0;
                  do {
                    lVar21 = lVar22 + 1;
                    FUN_00123c80(param_2,uVar9,*(long *)(lVar7 + 0x18) + lVar22 * 0xc);
                    lVar22 = lVar21;
                  } while ((int)lVar21 < *(int *)(lVar7 + 4));
                }
              }
              break;
            case 0x20:
              FUN_00123ba0(param_2,uVar9,*(undefined2 *)(param_1 + 8));
              FUN_00123ba0(param_2,uVar9,*(undefined2 *)(param_1 + 10));
              FUN_00123ba0(param_2,uVar9,*(undefined2 *)(param_1 + 0xc));
              FUN_00123ba0(param_2,uVar9,*(undefined2 *)(param_1 + 0xe));
              FUN_00123ba0(param_2,uVar9,*(undefined2 *)(param_1 + 0x10));
              if (0 < (int)local_260) {
                uVar27 = 0;
                do {
                  while ((lVar22 = *(long *)(*(long *)(lVar7 + 0x28) + (long)((int)uVar27 >> 7) * 8)
                         , lVar22 != 0 &&
                         (lVar22 = *(long *)(lVar22 + (ulong)(uVar27 & 0x7f) * 8), lVar22 != 0))) {
                    uVar27 = uVar27 + 1;
                    FUN_00123ba0(param_2,uVar9,
                                 (lVar22 - *(long *)(lVar7 + 0x10) >> 3) * -0x5555555555555555);
                    if (uVar27 == local_260) goto joined_r0x00124632;
                  }
                  uVar27 = uVar27 + 1;
                  FUN_00123ba0(param_2,uVar9,0xffff);
                } while (uVar27 != local_260);
              }
            }
          }
        }
        else if (uVar27 == 0x80) {
          FUN_001239b0(param_2,uVar9,*(undefined4 *)(lVar7 + 4));
          if (*(int *)(lVar7 + 4) < 1) {
            iVar28 = 0;
          }
          else {
            iVar28 = 0;
            lVar22 = 0;
            do {
              FUN_001239b0(param_2,uVar9,iVar28);
              lVar21 = lVar22 * 8;
              lVar22 = lVar22 + 1;
              pcVar11 = (char *)NameForAtom(*(undefined8 *)(**(long **)(lVar7 + 0x38) + lVar21));
              sVar12 = strlen(pcVar11);
              iVar28 = iVar28 + 1 + (int)sVar12;
            } while ((int)lVar22 < *(int *)(lVar7 + 4));
          }
          FUN_001239b0(param_2,uVar9,iVar28);
          if (0 < *(int *)(lVar7 + 4)) {
            lVar22 = 0;
            do {
              lVar21 = lVar22 * 8;
              lVar22 = lVar22 + 1;
              pcVar11 = (char *)NameForAtom(*(undefined8 *)(**(long **)(lVar7 + 0x38) + lVar21));
              sVar12 = strlen(pcVar11);
              DAT_0013fcb4 = DAT_0013fcb4 + (int)sVar12 + 1;
              BufFileWrite(param_2);
            } while ((int)lVar22 < *(int *)(lVar7 + 4));
          }
        }
        else if (uVar27 == 0x100) {
          FUN_00123d20(param_2,puVar23[1],param_1 + 8);
        }
        else if ((uVar27 == 0x40) &&
                (FUN_001239b0(param_2,uVar9,*(undefined4 *)(lVar7 + 4)), 0 < *(int *)(lVar7 + 4))) {
          lVar22 = 0;
          do {
            lVar21 = lVar22 * 4;
            lVar22 = lVar22 + 1;
            FUN_001239b0(param_2,uVar9,
                         *(undefined4 *)(*(long *)(*(long *)(lVar7 + 0x38) + 8) + lVar21));
          } while ((int)lVar22 < *(int *)(lVar7 + 4));
        }
joined_r0x00124632:
        puVar23 = puVar23 + 4;
      } while (puVar23 != puVar14);
    }
    free(__ptr);
    uVar13 = 0x55;
  }
LAB_001243ee:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar13;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00124e50(long param_1)

{
  void *__ptr;
  
  __ptr = *(void **)(param_1 + 0x98);
  free(*(void **)((long)__ptr + 0x20));
  free(__ptr);
  DestroyFontRec(param_1);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_00124e90(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                 undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
                 undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined8 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_e8 = 8;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_c0 = param_10;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  fwrite("SNF Error: ",1,0xb,_stderr);
  __vfprintf_chk(_stderr,1,param_9,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FUN_00124f80(int *param_1,undefined8 param_2)

{
  int iVar1;
  
  iVar1 = BufFileRead(param_2,param_1,0x6c);
  if ((iVar1 == 0x6c) && (*param_1 == 4)) {
    return (param_1[0x1a] == 4) + 0x53 + (uint)(param_1[0x1a] == 4);
  }
  return 0x53;
}



undefined8
FUN_00124fc0(uint *param_1,int param_2,undefined8 *param_3,long *param_4,undefined8 param_5)

{
  uint uVar1;
  int iVar2;
  uint *__ptr;
  size_t sVar3;
  undefined8 uVar4;
  uint *puVar5;
  char *pcVar6;
  long lVar7;
  
  param_2 = param_2 + *param_1 * 0xc;
  __ptr = (uint *)malloc((long)param_2);
  if (__ptr == (uint *)0x0) {
    FUN_00124e90("snfReadProps(): Couldn\'t allocate propspace (%d)\n",param_2);
    uVar4 = 0x50;
  }
  else {
    iVar2 = BufFileRead(param_5,__ptr,param_2);
    if (param_2 != iVar2) {
      free(__ptr);
      return 0x53;
    }
    uVar1 = *param_1;
    param_3 = (undefined8 *)*param_3;
    if (uVar1 != 0) {
      lVar7 = 0;
      puVar5 = __ptr;
      do {
        pcVar6 = (char *)((long)__ptr + (ulong)*puVar5 + (ulong)uVar1 * 0xc);
        sVar3 = strlen(pcVar6);
        uVar4 = MakeAtom(pcVar6,sVar3,1);
        *param_3 = uVar4;
        *(char *)(*param_4 + lVar7) = (char)puVar5[2];
        if (puVar5[2] == 0) {
          param_3[1] = (long)(int)puVar5[1];
        }
        else {
          pcVar6 = (char *)((long)__ptr + (long)(int)puVar5[1] + (ulong)uVar1 * 0xc);
          sVar3 = strlen(pcVar6);
          iVar2 = MakeAtom(pcVar6,sVar3,1);
          param_3[1] = (long)iVar2;
        }
        param_3 = param_3 + 2;
        puVar5 = puVar5 + 3;
        lVar7 = lVar7 + 1;
      } while ((uint)lVar7 < *param_1);
    }
    free(__ptr);
    uVar4 = 0x55;
  }
  return uVar4;
}



void SnfSetFormat(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  DAT_0013fcc4 = param_1;
  DAT_0013fcc0 = param_2;
  DAT_0013fcbc = param_3;
  DAT_0013fcb8 = param_4;
  DAT_0013fcc8 = 1;
  return;
}



int snfReadFont(long param_1,undefined8 param_2,int param_3,int param_4,int param_5,int param_6)

{
  long *plVar1;
  int iVar2;
  short *psVar3;
  byte bVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  ushort uVar8;
  int iVar9;
  uint uVar10;
  void *__ptr;
  void *__ptr_00;
  long lVar11;
  long lVar12;
  ulong uVar13;
  ushort uVar14;
  ulong uVar15;
  short *psVar16;
  int iVar17;
  int iVar18;
  int iVar19;
  long lVar20;
  void *pvVar21;
  uint uVar22;
  undefined8 *puVar23;
  int iVar24;
  short *psVar25;
  uint uVar26;
  long in_FS_OFFSET;
  bool bVar27;
  undefined local_f8;
  undefined local_f4;
  undefined local_e4;
  undefined local_e0;
  undefined8 local_c8;
  undefined4 local_c0;
  uint local_bc;
  undefined local_b8 [4];
  uint local_b4;
  uint local_b0;
  byte local_ac;
  int local_a8;
  int local_a4;
  byte local_a0;
  int local_9c;
  int local_98;
  int local_94;
  int local_90;
  int local_8c;
  undefined4 local_88;
  uint local_84;
  undefined2 local_80;
  undefined2 local_7c;
  undefined8 local_78;
  undefined4 local_70;
  undefined8 local_68;
  undefined4 local_60;
  uint local_5c;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar9 = FUN_00124f80(local_b8);
  if (iVar9 != 0x55) goto LAB_001251a4;
  if (DAT_0013fcc8 == 0) {
    FontDefaultFormat(&DAT_0013fcc4,&DAT_0013fcc0,&DAT_0013fcbc,&DAT_0013fcb8);
  }
  iVar7 = DAT_0013fcc4;
  iVar6 = DAT_0013fcc0;
  iVar5 = DAT_0013fcbc;
  iVar19 = DAT_0013fcb8;
  uVar10 = (local_5c & 0xffffff) + 3 & 0xfffffffc;
  iVar17 = ((local_90 + 1) - local_94) * ((local_98 + 1) - local_9c);
  iVar24 = iVar17 * 0x18 + 0x40;
  iVar9 = iVar17 + 0xfe;
  if (-1 < iVar17 + 0x7f) {
    iVar9 = iVar17 + 0x7f;
  }
  iVar2 = iVar24 + (iVar9 >> 7) * 8;
  iVar18 = local_8c * 0x10 + iVar2;
  uVar22 = local_8c + 3 + iVar18 & 0xfffffffc;
  uVar26 = uVar22 + iVar17 * 0xc;
  if ((local_a0 & 8) == 0) {
    uVar26 = uVar22;
  }
  bVar4 = local_a0 & 8;
  __ptr = malloc((ulong)uVar26);
  if (__ptr == (void *)0x0) {
    iVar9 = 0x50;
    FUN_00124e90("snfReadFont(): Couldn\'t allocate fontspace (%d)\n",uVar26);
    goto LAB_001251a4;
  }
  __ptr_00 = malloc((long)(int)uVar10);
  if (__ptr_00 == (void *)0x0) {
    iVar9 = 0x50;
    FUN_00124e90("snfReadFont(): Couldn\'t allocate bitmaps (%d)\n",uVar10);
    free(__ptr);
    goto LAB_001251a4;
  }
  pvVar21 = (void *)((long)iVar24 + (long)__ptr);
  *(int *)((long)__ptr + 4) = iVar17;
  *(long *)((long)__ptr + 0x10) = (long)__ptr + 0x40;
  *(void **)((long)__ptr + 0x20) = __ptr_00;
  *(long *)(param_1 + 0x58) = (long)iVar18 + (long)__ptr;
  lVar11 = (long)(int)uVar22 + (long)__ptr;
  *(void **)((long)__ptr + 0x28) = pvVar21;
  if (bVar4 == 0) {
    lVar11 = 0;
  }
  *(long *)(param_1 + 0x50) = (long)iVar2 + (long)__ptr;
  *(undefined8 *)((long)__ptr + 0x30) = 0;
  *(undefined8 *)((long)__ptr + 0x38) = 0;
  *(long *)((long)__ptr + 0x18) = lVar11;
  memset(pvVar21,0,(long)(iVar9 >> 7) << 3);
  if (iVar17 < 1) {
LAB_001254d4:
    uVar26 = BufFileRead(param_2,__ptr_00,uVar10);
    if (uVar26 != uVar10) {
      iVar9 = 0x53;
      free(__ptr_00);
      free(__ptr);
      goto LAB_001251a4;
    }
    if (param_3 != iVar7) {
      BitOrderInvert(__ptr_00,uVar10);
    }
    if ((iVar7 == iVar6) != (param_3 == param_4)) {
      if (param_3 != param_4) {
        iVar19 = param_6;
      }
      if (iVar19 == 2) {
        TwoByteSwap(__ptr_00);
      }
      else if (iVar19 == 4) {
        FourByteSwap(__ptr_00);
      }
    }
    if (param_5 != iVar5) {
      psVar3 = *(short **)((long)__ptr + 0x10);
      if (iVar17 < 1) {
        pvVar21 = malloc(0);
        if (pvVar21 == (void *)0x0) {
          iVar19 = 0;
          goto LAB_00125a6e;
        }
        *(void **)((long)__ptr + 0x20) = pvVar21;
      }
      else {
        iVar19 = 0;
        psVar16 = psVar3;
        do {
          if (*(long *)(psVar16 + 8) != 0) {
            iVar9 = (int)psVar16[4] + (int)psVar16[3];
            if (param_5 == 1) {
              iVar19 = iVar19 + iVar9 * (((int)psVar16[1] - (int)*psVar16) + 7 >> 3);
            }
            else if (param_5 == 2) {
              iVar19 = iVar19 + iVar9 * (((int)psVar16[1] - (int)*psVar16) + 0xf >> 3 & 0xfffffffeU)
              ;
            }
            else if (param_5 == 4) {
              iVar19 = iVar19 + iVar9 * (((int)psVar16[1] - (int)*psVar16) + 0x1f >> 3 & 0xfffffffcU
                                        );
            }
            else if (param_5 == 8) {
              iVar19 = iVar19 + iVar9 * (((int)psVar16[1] - (int)*psVar16) + 0x3f >> 3 & 0xfffffff8U
                                        );
            }
          }
          psVar16 = psVar16 + 0xc;
        } while (psVar16 != psVar3 + ((ulong)(iVar17 - 1) * 3 + 3) * 4);
        pvVar21 = malloc((long)iVar19);
        if (pvVar21 == (void *)0x0) {
LAB_00125a6e:
          iVar9 = 0x50;
          FUN_00124e90("snfReadFont(): Couldn\'t allocate padbitmaps (%d)\n",iVar19);
          free(__ptr_00);
          free(__ptr);
          goto LAB_001251a4;
        }
        *(void **)((long)__ptr + 0x20) = pvVar21;
        psVar16 = psVar3;
        do {
          psVar25 = psVar16 + 0xc;
          iVar9 = RepadBitmap(*(undefined8 *)(psVar16 + 8),pvVar21,iVar5,param_5,
                              (int)psVar16[1] - (int)*psVar16,(int)psVar16[3] + (int)psVar16[4]);
          *(void **)(psVar16 + 8) = pvVar21;
          pvVar21 = (void *)((long)pvVar21 + (long)iVar9);
          psVar16 = psVar25;
        } while (psVar25 != psVar3 + ((ulong)(iVar17 - 1) * 3 + 3) * 4);
      }
      free(__ptr_00);
    }
    iVar9 = FUN_00124fc0(&local_8c,local_88,param_1 + 0x50,param_1 + 0x58,param_2);
    if (iVar9 == 0x55) {
      *(undefined2 *)(param_1 + 8) = (undefined2)local_9c;
      *(undefined2 *)(param_1 + 10) = (undefined2)local_98;
      *(undefined2 *)(param_1 + 0x48) = local_7c;
      *(undefined2 *)(param_1 + 0xc) = (undefined2)local_94;
      *(undefined8 *)(param_1 + 0x24) = local_78;
      *(undefined2 *)(param_1 + 0xe) = (undefined2)local_90;
      *(undefined4 *)(param_1 + 0x2c) = local_70;
      *(short *)(param_1 + 0x10) = (short)local_84;
      uVar15 = (ulong)local_84;
      *(undefined2 *)(param_1 + 0x4a) = local_80;
      *(uint *)(param_1 + 0x12) =
           local_a4 * 2 & 2U | (uint)CONCAT11(2,local_ac & 1) | local_a8 * 4 & 4U |
           (local_a0 >> 1 & 1) << 3 | (local_a0 >> 2 & 1) << 4 | (local_a0 >> 3 & 1) << 5 |
           (local_b4 & 1) << 6 | (local_b0 & 3) << 7 | *(uint *)(param_1 + 0x12) & 0xf800;
      *(undefined8 *)(param_1 + 0x18) = local_68;
      *(undefined4 *)(param_1 + 0x20) = local_60;
      *(int *)(param_1 + 0x4c) = local_8c;
      if ((local_a0 & 8) == 0) {
        *(undefined8 *)(param_1 + 0x3c) = local_78;
        *(undefined4 *)(param_1 + 0x44) = local_70;
        *(undefined8 *)(param_1 + 0x30) = local_68;
        *(undefined4 *)(param_1 + 0x38) = local_60;
      }
      else {
        iVar19 = BufFileRead(param_2,&local_c8,0x10);
        if (iVar19 == 0x10) {
          *(undefined8 *)(param_1 + 0x3c) = local_c8;
          *(undefined4 *)(param_1 + 0x44) = local_c0;
        }
        iVar19 = BufFileRead(param_2,&local_c8,0x10);
        if (iVar19 != 0x10) {
LAB_001259ac:
          iVar9 = 0x53;
          free(__ptr);
          goto LAB_001251a4;
        }
        *(undefined8 *)(param_1 + 0x30) = local_c8;
        *(undefined4 *)(param_1 + 0x38) = local_c0;
        if (iVar17 < 1) {
          uVar15 = (ulong)*(ushort *)(param_1 + 0x10);
        }
        else {
          lVar11 = 0;
          do {
            puVar23 = (undefined8 *)(*(long *)((long)__ptr + 0x18) + lVar11);
            iVar19 = BufFileRead(param_2,&local_c8,0x10);
            if (iVar19 != 0x10) goto LAB_001259ac;
            lVar11 = lVar11 + 0xc;
            *puVar23 = local_c8;
            *(undefined4 *)(puVar23 + 1) = local_c0;
          } while (lVar11 != ((ulong)(iVar17 - 1) * 3 + 3) * 4);
          uVar15 = (ulong)*(ushort *)(param_1 + 0x10);
        }
      }
      if ((short)uVar15 != -1) {
        uVar13 = uVar15 >> 8 & 0xff;
        uVar8 = (ushort)uVar13;
        if ((*(ushort *)(param_1 + 0xc) <= uVar8) && (uVar8 <= *(ushort *)(param_1 + 0xe))) {
          uVar8 = *(ushort *)(param_1 + 8);
          uVar14 = (ushort)(uVar15 & 0xff);
          if ((uVar8 <= uVar14) && (uVar14 <= *(ushort *)(param_1 + 10))) {
            *(ulong *)((long)__ptr + 0x30) =
                 *(long *)((long)__ptr + 0x10) +
                 (ulong)(((int)uVar13 - (uint)*(ushort *)(param_1 + 0xc)) *
                         (((uint)*(ushort *)(param_1 + 10) - (uint)uVar8) + 1) +
                        ((int)(uVar15 & 0xff) - (uint)uVar8)) * 0x18;
          }
        }
      }
      *(undefined8 *)((long)__ptr + 0x38) = 0;
      *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
      *(void **)(param_1 + 0x98) = __ptr;
      *(code **)(param_1 + 0x70) = bitmapGetMetrics;
      *(code **)(param_1 + 0x78) = FUN_00124e50;
      local_f8 = (undefined)param_3;
      *(undefined8 *)(param_1 + 0x80) = 0;
      *(undefined *)(param_1 + 0x60) = local_f8;
      local_e4 = (undefined)param_4;
      *(undefined *)(param_1 + 0x61) = local_e4;
      local_f4 = (undefined)param_5;
      *(undefined *)(param_1 + 0x62) = local_f4;
      local_e0 = (undefined)param_6;
      *(undefined *)(param_1 + 99) = local_e0;
      goto LAB_001251a4;
    }
  }
  else {
    lVar11 = 0;
    uVar26 = 0;
    do {
      lVar12 = *(long *)((long)__ptr + 0x10);
      iVar9 = BufFileRead(param_2,&local_c8,0x10);
      if (iVar9 == 0x10) {
        puVar23 = (undefined8 *)(lVar12 + lVar11);
        *puVar23 = local_c8;
        *(undefined4 *)(puVar23 + 1) = local_c0;
        if ((local_bc & 0x1000000) == 0) {
          puVar23[2] = 0;
        }
        else {
          puVar23[2] = (ulong)(local_bc & 0xffffff) + (long)__ptr_00;
        }
        lVar12 = *(long *)((long)__ptr + 0x10);
        iVar9 = 0x55;
        if (*(long *)(lVar12 + 0x10 + lVar11) != 0) goto LAB_001253f0;
        bVar27 = true;
      }
      else {
        lVar12 = *(long *)((long)__ptr + 0x10);
        if (*(long *)(lVar12 + 0x10 + lVar11) == 0) {
          uVar26 = uVar26 + 1;
          iVar9 = 0x53;
          goto LAB_0012547d;
        }
        iVar9 = 0x53;
LAB_001253f0:
        plVar1 = (long *)(*(long *)((long)__ptr + 0x28) + (long)((int)uVar26 >> 7) * 8);
        lVar20 = *plVar1;
        if (lVar20 == 0) {
          pvVar21 = calloc(0x80,8);
          *plVar1 = (long)pvVar21;
          lVar20 = *(long *)(*(long *)((long)__ptr + 0x28) + (long)((int)uVar26 >> 7) * 8);
          if (lVar20 == 0) {
            iVar9 = 0x50;
            goto LAB_0012547d;
          }
          lVar12 = *(long *)((long)__ptr + 0x10);
        }
        bVar27 = iVar9 == 0x55;
        *(long *)(lVar20 + (ulong)(uVar26 & 0x7f) * 8) = lVar12 + lVar11;
      }
      uVar26 = uVar26 + 1;
      lVar11 = lVar11 + 0x18;
    } while (((int)uVar26 < iVar17) && (bVar27));
    if (iVar9 == 0x55) goto LAB_001254d4;
LAB_0012547d:
    free(__ptr_00);
    lVar11 = *(long *)((long)__ptr + 0x28);
    if ((lVar11 != 0) && ((int)uVar26 >> 7 != 0)) {
      iVar19 = 0;
      while( true ) {
        iVar19 = iVar19 + 1;
        free(*(void **)(lVar11 + (long)(int)uVar26 * 8));
        if ((int)uVar26 >> 7 == iVar19) break;
        lVar11 = *(long *)((long)__ptr + 0x28);
      }
    }
  }
  free(__ptr);
LAB_001251a4:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar9;
}



int snfReadFontInfo(undefined2 *param_1,long param_2)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  void *pvVar4;
  ulong __size;
  long in_FS_OFFSET;
  undefined8 local_c8;
  undefined4 local_c0;
  undefined local_b8 [4];
  uint local_b4;
  uint local_b0;
  byte local_ac;
  int local_a8;
  int local_a4;
  byte local_a0;
  int local_9c;
  int local_98;
  int local_94;
  int local_90;
  uint local_8c;
  undefined4 local_88;
  undefined2 local_84;
  undefined2 local_80;
  undefined2 local_7c;
  undefined8 local_78;
  undefined4 local_70;
  undefined8 local_68;
  undefined4 local_60;
  uint local_5c;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FUN_00124f80(local_b8);
  if (iVar1 == 0x55) {
    __size = (ulong)local_8c;
    *param_1 = (short)local_9c;
    param_1[1] = (short)local_98;
    param_1[4] = local_84;
    param_1[2] = (short)local_94;
    param_1[3] = (short)local_90;
    *(uint *)(param_1 + 5) =
         local_a4 * 2 & 2U | (uint)CONCAT11(2,local_ac & 1) | local_a8 * 4 & 4U |
         (local_a0 >> 1 & 1) << 3 | (local_a0 >> 2 & 1) << 4 | (local_a0 >> 3 & 1) << 5 |
         (local_b4 & 1) << 6 | (local_b0 & 3) << 7 | *(uint *)(param_1 + 5) & 0xf800;
    *(undefined8 *)(param_1 + 0xe) = local_78;
    *(undefined4 *)(param_1 + 0x12) = local_70;
    *(undefined8 *)(param_1 + 8) = local_68;
    *(undefined4 *)(param_1 + 0xc) = local_60;
    param_1[0x20] = local_7c;
    param_1[0x21] = local_80;
    *(uint *)(param_1 + 0x22) = local_8c;
    pvVar4 = malloc(__size << 4);
    *(void **)(param_1 + 0x24) = pvVar4;
    if (pvVar4 == (void *)0x0) {
      iVar1 = 0x50;
      FUN_00124e90("snfReadFontInfo(): Couldn\'t allocate props (%d*%d)\n",__size,0x10);
    }
    else {
      pvVar4 = malloc(__size);
      *(void **)(param_1 + 0x28) = pvVar4;
      if (pvVar4 == (void *)0x0) {
        iVar1 = 0x50;
        FUN_00124e90("snfReadFontInfo(): Couldn\'t allocate isStringProp (%d*%d)\n",__size,1);
        free(*(void **)(param_1 + 0x24));
      }
      else {
        uVar2 = (**(code **)(param_2 + 0x2020))
                          (param_2,((local_5c & 0xffffff) + 3 & 0xfffffffc) +
                                   ((local_90 + 1) - local_94) * ((local_98 + 1) - local_9c) * 0x10)
        ;
        *(undefined4 *)(param_2 + 0xc) = uVar2;
        iVar1 = FUN_00124fc0(&local_8c,local_88,param_1 + 0x24,param_1 + 0x28,param_2);
        if (iVar1 == 0x55) {
          if ((local_a0 & 8) == 0) {
            *(undefined8 *)(param_1 + 0x1a) = *(undefined8 *)(param_1 + 0xe);
            *(undefined4 *)(param_1 + 0x1e) = *(undefined4 *)(param_1 + 0x12);
            *(undefined8 *)(param_1 + 0x14) = *(undefined8 *)(param_1 + 8);
            *(undefined4 *)(param_1 + 0x18) = *(undefined4 *)(param_1 + 0xc);
          }
          else {
            iVar3 = BufFileRead(param_2,&local_c8,0x10);
            if (iVar3 == 0x10) {
              *(undefined8 *)(param_1 + 0x1a) = local_c8;
              *(undefined4 *)(param_1 + 0x1e) = local_c0;
              iVar3 = BufFileRead(param_2,&local_c8,0x10);
              if (iVar3 == 0x10) {
                *(undefined8 *)(param_1 + 0x14) = local_c8;
                *(undefined4 *)(param_1 + 0x18) = local_c0;
                goto LAB_00125b00;
              }
            }
            iVar1 = 0x53;
            free(*(void **)(param_1 + 0x24));
            free(*(void **)(param_1 + 0x28));
          }
        }
        else {
          free(*(void **)(param_1 + 0x24));
          free(*(void **)(param_1 + 0x28));
        }
      }
    }
  }
LAB_00125b00:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 BuiltinReadDirectory(undefined8 param_1,undefined8 *param_2)

{
  undefined8 *puVar1;
  int iVar2;
  undefined8 uVar3;
  size_t sVar4;
  void *pvVar5;
  char *pcVar6;
  char *pcVar7;
  undefined8 *puVar8;
  undefined **ppuVar9;
  int iVar10;
  undefined **ppuVar11;
  undefined **local_48;
  
  uVar3 = FontFileMakeDir("",2);
  if (DAT_0013fcd8 == (void *)0x0) {
    pvVar5 = calloc(2,0x10);
    if ((pvVar5 != (void *)0x0) && (true)) {
      puVar8 = (undefined8 *)((long)pvVar5 + 8);
      ppuVar9 = &PTR_s__misc_fixed_medium_r_semicondens_0013dae8;
      do {
        ppuVar11 = ppuVar9 + 2;
        pcVar7 = strdup(ppuVar9[-1]);
        pcVar6 = *ppuVar9;
        puVar8[-1] = pcVar7;
        pcVar6 = strdup(pcVar6);
        *puVar8 = pcVar6;
        puVar8 = puVar8 + 2;
        ppuVar9 = ppuVar11;
      } while (ppuVar11 != (undefined **)&DAT_0013db08);
    }
  }
  else {
    pvVar5 = DAT_0013fcd8;
    if (true) {
      puVar8 = (undefined8 *)((long)DAT_0013fcd8 + 8);
      ppuVar9 = &PTR_s__misc_fixed_medium_r_semicondens_0013dae8;
      puVar1 = (undefined8 *)((long)DAT_0013fcd8 + 0x28);
      do {
        pcVar6 = (char *)*puVar8;
        if (pcVar6 != (char *)0x0) {
          sVar4 = strlen(pcVar6);
          memmove(*ppuVar9,pcVar6,sVar4);
        }
        puVar8 = puVar8 + 2;
        ppuVar9 = ppuVar9 + 2;
        pvVar5 = DAT_0013fcd8;
      } while (puVar8 != puVar1);
    }
  }
  DAT_0013fcd8 = pvVar5;
  if (DAT_0013fcd0 == (void *)0x0) {
    pvVar5 = calloc(3,0x10);
    if (pvVar5 != (void *)0x0) {
      if (false) goto LAB_001260aa;
      ppuVar9 = &PTR_s__misc_fixed_medium_r_semicondens_0013daa8;
      puVar8 = (undefined8 *)((long)pvVar5 + 8);
      do {
        pcVar6 = *ppuVar9;
        ppuVar9 = ppuVar9 + 2;
        pcVar6 = strdup(pcVar6);
        *puVar8 = pcVar6;
        puVar8 = puVar8 + 2;
      } while (ppuVar9 != (undefined **)&DAT_0013dad8);
      goto LAB_00125f0b;
    }
    DAT_0013fcd0 = (void *)0x0;
    if (true) goto LAB_00125f10;
LAB_00125f70:
    if (false) goto LAB_001260b3;
  }
  else {
    pvVar5 = DAT_0013fcd0;
    if (false) {
LAB_001260aa:
      DAT_0013fcd0 = pvVar5;
      if (false) goto LAB_001260b3;
LAB_00125f10:
      ppuVar9 = &builtin_dir;
      iVar10 = 0;
      do {
        iVar2 = FontFileAddFontFile(uVar3,ppuVar9[1],*ppuVar9);
        if (iVar2 == 0) goto LAB_00125f40;
        iVar10 = iVar10 + 1;
        ppuVar9 = ppuVar9 + 2;
      } while (iVar10 < 2);
      goto LAB_00125f70;
    }
    puVar8 = (undefined8 *)((long)DAT_0013fcd0 + 8);
    ppuVar9 = &PTR_s__misc_fixed_medium_r_semicondens_0013daa8;
    puVar1 = (undefined8 *)((long)DAT_0013fcd0 + 0x38);
    do {
      pcVar6 = (char *)puVar8[-1];
      if (pcVar6 != (char *)0x0) {
        sVar4 = strlen(pcVar6);
        memmove(ppuVar9[-1],pcVar6,sVar4);
      }
      pcVar6 = (char *)*puVar8;
      if (pcVar6 != (char *)0x0) {
        sVar4 = strlen(pcVar6);
        memmove(*ppuVar9,pcVar6,sVar4);
      }
      puVar8 = puVar8 + 2;
      ppuVar9 = ppuVar9 + 2;
      pvVar5 = DAT_0013fcd0;
    } while (puVar8 != puVar1);
LAB_00125f0b:
    DAT_0013fcd0 = pvVar5;
    if (true) goto LAB_00125f10;
  }
  local_48 = &builtin_alias;
  iVar10 = 0;
  do {
    iVar2 = FontFileAddFontAlias(uVar3,*local_48,local_48[1]);
    if (iVar2 == 0) {
LAB_00125f40:
      FontFileFreeDir(uVar3);
      return 0x56;
    }
    iVar10 = iVar10 + 1;
    local_48 = local_48 + 2;
  } while (iVar10 < 3);
LAB_001260b3:
  FontFileSortDir(uVar3);
  *param_2 = uVar3;
  return 0x55;
}



int FUN_001260e0(long *param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  
  iVar1 = *(int *)(param_1 + 1);
  if (param_2 <= iVar1) {
    *param_1 = *param_1 + (long)param_2;
    *(int *)(param_1 + 1) = iVar1 - param_2;
    return param_2;
  }
  piVar2 = (int *)param_1[0x406];
  iVar3 = *piVar2 + (param_2 - iVar1);
  *piVar2 = iVar3;
  iVar1 = *(int *)(*(long *)(piVar2 + 2) + 8);
  if (iVar1 < iVar3) {
    *piVar2 = iVar1;
    iVar3 = iVar1;
  }
  if (-1 < iVar3) {
    *(undefined4 *)(param_1 + 1) = 0;
    return param_2;
  }
  *piVar2 = 0;
  *(undefined4 *)(param_1 + 1) = 0;
  return param_2;
}



undefined8 FUN_00126140(long param_1)

{
  free(*(void **)(param_1 + 0x2030));
  return 1;
}



ulong FUN_00126160(long *param_1)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  ulong uVar4;
  long *plVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  uint uVar8;
  int iVar9;
  long lVar10;
  
  piVar2 = (int *)param_1[0x406];
  lVar10 = *(long *)(piVar2 + 2);
  iVar1 = *piVar2;
  uVar8 = *(int *)(lVar10 + 8) - iVar1;
  if ((int)uVar8 < 1) {
    *(undefined4 *)(param_1 + 1) = 0;
    return 0xffffffff;
  }
  if ((int)uVar8 < 0x2000) {
    iVar9 = uVar8 - 1;
    plVar5 = (long *)((long)iVar1 + *(long *)(lVar10 + 0x10));
    uVar4 = (ulong)uVar8;
    uVar3 = uVar8;
    iVar1 = iVar9;
    if (7 < uVar8) goto LAB_001261ee;
  }
  else {
    plVar5 = (long *)((long)iVar1 + *(long *)(lVar10 + 0x10));
    iVar9 = 0x1fff;
    uVar8 = 0x2000;
    uVar4 = 0x2000;
    uVar3 = 0x2000;
    iVar1 = 0x1fff;
    if (true) {
LAB_001261ee:
      param_1[2] = *plVar5;
      *(undefined8 *)((long)param_1 + (ulong)uVar8 + 8) =
           *(undefined8 *)((long)plVar5 + ((ulong)uVar8 - 8));
      lVar10 = (long)param_1 + (0x10 - (long)((ulong)(param_1 + 3) & 0xfffffffffffffff8));
      puVar6 = (undefined8 *)((long)plVar5 - lVar10);
      puVar7 = (undefined8 *)((ulong)(param_1 + 3) & 0xfffffffffffffff8);
      for (uVar4 = (ulong)(uVar8 + (int)lVar10 >> 3); uVar4 != 0; uVar4 = uVar4 - 1) {
        *puVar7 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar7 = puVar7 + 1;
      }
      goto LAB_001261c2;
    }
  }
  iVar9 = iVar1;
  uVar8 = uVar3;
  if ((uVar8 & 4) == 0) {
    if (((int)uVar4 != 0) && (*(undefined *)(param_1 + 2) = *(undefined *)plVar5, (uVar4 & 2) != 0))
    {
      *(undefined2 *)((long)param_1 + uVar4 + 0xe) = *(undefined2 *)((long)plVar5 + (uVar4 - 2));
    }
  }
  else {
    *(undefined4 *)(param_1 + 2) = *(undefined4 *)plVar5;
    *(undefined4 *)((long)param_1 + uVar4 + 0xc) = *(undefined4 *)((long)plVar5 + (uVar4 - 4));
  }
LAB_001261c2:
  *piVar2 = *piVar2 + uVar8;
  *(int *)(param_1 + 1) = iVar9;
  *param_1 = (long)param_1 + 0x11;
  return (ulong)*(byte *)(param_1 + 2);
}



long * BuiltinFileOpen(char *param_1)

{
  char cVar1;
  long lVar2;
  int iVar3;
  undefined4 *__ptr;
  long *plVar4;
  long *plVar5;
  int iVar6;
  undefined **ppuVar7;
  
  cVar1 = *param_1;
  if (false) {
    if (true) {
      iVar6 = 0;
LAB_001262c0:
      __ptr = (undefined4 *)malloc(0x10);
      if (__ptr != (undefined4 *)0x0) {
        *__ptr = 0;
        *(undefined ***)(__ptr + 2) = &builtin_files + (long)iVar6 * 3;
        plVar4 = (long *)BufFileCreate(__ptr,FUN_00126160,0,FUN_001260e0,FUN_00126140);
        if (plVar4 != (long *)0x0) {
          plVar5 = (long *)BufFilePushZIP(plVar4);
          if (plVar5 != (long *)0x0) {
            return plVar5;
          }
          lVar2 = *plVar4;
          *plVar4 = (long)(plVar4 + 2);
          *(int *)(plVar4 + 1) = *(int *)(plVar4 + 1) + ((int)lVar2 - (int)(plVar4 + 2));
          return plVar4;
        }
        free(__ptr);
      }
    }
  }
  else {
    ppuVar7 = &builtin_files;
    iVar6 = 0;
    do {
      iVar3 = strcmp(param_1 + (cVar1 == '/'),*ppuVar7);
      if (iVar3 == 0) goto LAB_001262c0;
      iVar6 = iVar6 + 1;
      ppuVar7 = ppuVar7 + 3;
    } while (iVar6 != 2);
  }
  return (long *)0x0;
}



void BuiltinFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



undefined8 FUN_00126380(void)

{
  return 0x55;
}



undefined8 FUN_00126390(long param_1)

{
  FontFileFreeDir(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



void FUN_001263b0(long param_1)

{
  int iVar1;
  long in_FS_OFFSET;
  undefined8 local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = BuiltinReadDirectory(*(undefined8 *)(param_1 + 8),&local_18);
  if (iVar1 == 0x55) {
    *(undefined8 *)(param_1 + 0x18) = local_18;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool FUN_00126400(char *param_1)

{
  int iVar1;
  
  iVar1 = strcmp(param_1,"built-ins");
  return iVar1 == 0;
}



void BuiltinRegisterFpeFunctions(void)

{
  BuiltinRegisterFontFileFunctions();
  RegisterFPEFunctions
            (FUN_00126400,FUN_001263b0,FUN_00126390,FUN_00126380,FontFileOpenFont,FontFileCloseFont,
             FontFileListFonts,FontFileStartListFontsWithInfo,FontFileListNextFontWithInfo,0,0,0,0,0
             ,0);
  return;
}



undefined8 FUN_001264a0(void)

{
  return 0x53;
}



undefined8 FUN_001264b0(void)

{
  return 0x53;
}



undefined4 FUN_001264c0(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4)

{
  undefined4 uVar1;
  long lVar2;
  
  lVar2 = BuiltinFileOpen(param_4);
  if (lVar2 != 0) {
    uVar1 = pcfReadFontInfo(param_2,lVar2);
    BuiltinFileClose(lVar2,0);
    return uVar1;
  }
  return 0x53;
}



int FUN_00126520(undefined8 param_1,undefined8 *param_2,undefined8 param_3,undefined8 param_4,
                undefined8 param_5,undefined4 param_6,undefined4 param_7)

{
  int iVar1;
  long lVar2;
  undefined4 *__ptr;
  long in_FS_OFFSET;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined local_44 [4];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = BuiltinFileOpen(param_5);
  if (lVar2 == 0) {
    iVar1 = 0x53;
  }
  else {
    __ptr = (undefined4 *)malloc(0xb8);
    if (__ptr == (undefined4 *)0x0) {
      iVar1 = 0x50;
      BuiltinFileClose(lVar2,0);
    }
    else {
      FontDefaultFormat(&local_54,&local_50,&local_4c,&local_48);
      CheckFSFormat(param_6,param_7,&local_54,&local_50,&local_48,&local_4c,local_44);
      *__ptr = 0;
      __ptr[0x2a] = 0xffffffff;
      *(undefined8 *)(__ptr + 0x2c) = 0;
      iVar1 = pcfReadFont(__ptr,lVar2,local_54,local_50,local_4c,local_48);
      BuiltinFileClose(lVar2,0);
      if (iVar1 == 0x55) {
        *param_2 = __ptr;
      }
      else {
        free(__ptr);
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void BuiltinRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&PTR_s__builtin_0013f420);
  return;
}



undefined8
FUN_00126680(long param_1,long param_2,byte *param_3,uint param_4,long *param_5,long *param_6)

{
  byte *pbVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  long lVar5;
  uint uVar6;
  uint uVar7;
  long lVar8;
  long *plVar9;
  long *plVar10;
  long lVar11;
  uint uVar12;
  long lVar13;
  bool bVar14;
  
  plVar10 = *(long **)(param_1 + 0x98);
  lVar5 = plVar10[2];
  if (*plVar10 == 0) {
    uVar3 = *(ushort *)(param_1 + 8);
    uVar7 = (uint)uVar3;
    uVar12 = (*(ushort *)(param_1 + 10) + 1) - (uint)uVar3;
    lVar13 = 0;
    if (param_4 == 2) {
      bVar14 = false;
      lVar13 = 0;
LAB_00126804:
      lVar8 = 0;
      plVar10 = param_6;
      if (param_2 != 0) {
        do {
          uVar6 = (ushort)(*(ushort *)(param_3 + lVar8 * 2) << 8 |
                          *(ushort *)(param_3 + lVar8 * 2) >> 8) - uVar7;
          if (uVar6 < uVar12) {
            *plVar10 = lVar5 + (ulong)uVar6 * 0x18;
            plVar10 = plVar10 + 1;
          }
          else if (bVar14) {
            *plVar10 = lVar13;
            plVar10 = plVar10 + 1;
          }
          lVar8 = lVar8 + 1;
        } while (param_2 != lVar8);
        *param_5 = (long)plVar10 - (long)param_6 >> 3;
        return 0x55;
      }
      goto LAB_0012671c;
    }
LAB_001266c1:
    uVar7 = (uint)uVar3;
    if (2 < param_4) {
      if (param_4 == 3) {
        uVar3 = *(ushort *)(param_1 + 0xe);
        uVar4 = *(ushort *)(param_1 + 0xc);
        lVar8 = param_2 + -1;
        plVar10 = param_6;
        if (param_2 != 0) {
          do {
            bVar2 = *param_3;
            pbVar1 = param_3 + 1;
            param_3 = param_3 + 2;
            uVar6 = (uint)bVar2 - (uint)uVar4;
            if ((uVar6 < (uVar3 + 1) - (uint)uVar4) && (*pbVar1 - uVar7 < uVar12)) {
              plVar9 = plVar10 + 1;
              *plVar10 = lVar5 + (ulong)(uVar6 * uVar12 + (*pbVar1 - uVar7)) * 0x18;
            }
            else {
              plVar9 = plVar10;
              if (lVar13 != 0) {
                *plVar10 = lVar13;
                plVar9 = plVar10 + 1;
              }
            }
            lVar8 = lVar8 + -1;
            plVar10 = plVar9;
          } while (lVar8 != -1);
          *param_5 = (long)plVar9 - (long)param_6 >> 3;
          return 0x55;
        }
        goto LAB_0012671c;
      }
LAB_001267d0:
      *param_5 = 0;
      return 0x55;
    }
    if (*(short *)(param_1 + 0xc) != 0) goto LAB_001267d0;
    if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) || (lVar13 == 0)) {
      pbVar1 = param_3 + param_2;
      plVar10 = param_6;
      if (param_2 != 0) {
        do {
          bVar2 = *param_3;
          param_3 = param_3 + 1;
          if (bVar2 - uVar7 < uVar12) {
            plVar9 = plVar10 + 1;
            *plVar10 = lVar5 + (ulong)(bVar2 - uVar7) * 0x18;
          }
          else {
            plVar9 = plVar10;
            if (lVar13 != 0) {
              *plVar10 = lVar13;
              plVar9 = plVar10 + 1;
            }
          }
          plVar10 = plVar9;
        } while (pbVar1 != param_3);
        param_2 = (long)plVar9 - (long)param_6 >> 3;
      }
      goto LAB_0012671c;
    }
    if (param_2 == 0) goto LAB_0012671c;
    lVar8 = 0;
    do {
      lVar11 = lVar13;
      if (param_3[lVar8] - uVar7 < uVar12) {
        lVar11 = lVar5 + (ulong)(param_3[lVar8] - uVar7) * 0x18;
      }
      param_6[lVar8] = lVar11;
      lVar8 = lVar8 + 1;
    } while (lVar8 != param_2);
  }
  else {
    uVar3 = *(ushort *)(param_1 + 8);
    lVar13 = (*plVar10 - plVar10[1]) + lVar5;
    uVar12 = (*(ushort *)(param_1 + 10) + 1) - (uint)uVar3;
    if (param_4 != 2) goto LAB_001266c1;
    bVar14 = lVar13 != 0;
    uVar7 = (uint)uVar3;
    if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) || (uVar7 = (uint)uVar3, !bVar14))
    goto LAB_00126804;
    if (param_2 == 0) goto LAB_0012671c;
    lVar8 = 0;
    do {
      uVar7 = (uint)(ushort)(*(ushort *)(param_3 + lVar8 * 2) << 8 |
                            *(ushort *)(param_3 + lVar8 * 2) >> 8) - (uint)uVar3;
      lVar11 = lVar13;
      if (uVar7 < uVar12) {
        lVar11 = lVar5 + (ulong)uVar7 * 0x18;
      }
      param_6[lVar8] = lVar11;
      lVar8 = lVar8 + 1;
    } while (lVar8 != param_2);
  }
  param_2 = (param_2 << 3) >> 3;
LAB_0012671c:
  *param_5 = param_2;
  return 0x55;
}



undefined8
FUN_00126930(long param_1,long param_2,ushort *param_3,uint param_4,long *param_5,long *param_6)

{
  byte *pbVar1;
  long lVar2;
  byte bVar3;
  ushort uVar4;
  ushort uVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  uint uVar9;
  undefined8 uVar10;
  long lVar11;
  long lVar12;
  long *plVar13;
  long *plVar14;
  uint uVar15;
  undefined1 *puVar16;
  uint uVar17;
  bool bVar18;
  
  uVar4 = *(ushort *)(param_1 + 8);
  lVar12 = *(long *)(param_1 + 0xa0);
  lVar6 = (*(long **)(param_1 + 0x98))[1];
  lVar7 = **(long **)(param_1 + 0x98);
  uVar17 = (*(ushort *)(param_1 + 10) + 1) - (uint)uVar4;
  uVar9 = (uint)uVar4;
  plVar13 = param_6;
  if (param_4 == 2) {
    if (((*(byte *)(param_1 + 0x12) & 0x40) != 0) && (lVar7 != 0)) {
LAB_00126b36:
      lVar11 = param_2 + -1;
      plVar14 = plVar13;
      if (param_2 != 0) {
        do {
          uVar5 = *param_3;
          param_3 = param_3 + 1;
          plVar13 = plVar14 + 1;
          uVar9 = (uint)(ushort)(uVar5 << 8 | uVar5 >> 8) - (uint)uVar4;
          if (uVar9 < uVar17) {
            lVar2 = lVar6 + (ulong)uVar9 * 0x18;
            if ((*(long *)(lVar12 + 0x10) != 0) &&
               ((*(undefined1 **)(lVar2 + 0x10) == &_fs_glyph_requested ||
                (*(undefined1 **)(lVar2 + 0x10) == &_fs_glyph_undefined)))) goto LAB_00126ea0;
            *plVar14 = lVar2;
          }
          else {
            *plVar14 = lVar7;
          }
          lVar11 = lVar11 + -1;
          plVar14 = plVar13;
          if (lVar11 == -1) break;
        } while( true );
      }
      goto LAB_001269b0;
    }
LAB_00126c84:
    do {
      bVar18 = param_2 == 0;
      param_2 = param_2 + -1;
      plVar14 = plVar13;
      if (bVar18) goto LAB_001269b0;
      while( true ) {
        uVar4 = *param_3;
        param_3 = param_3 + 1;
        uVar8 = (ushort)(uVar4 << 8 | uVar4 >> 8) - uVar9;
        plVar13 = plVar14;
        if (uVar8 < uVar17) break;
        lVar11 = param_2 + -1;
        if (lVar7 == 0) goto LAB_00126c84;
        plVar13 = plVar14 + 1;
        *plVar14 = lVar7;
        param_2 = lVar11;
        plVar14 = plVar13;
        if (lVar11 == -1) goto LAB_001269b0;
      }
      lVar11 = lVar6 + (ulong)uVar8 * 0x18;
      uVar10 = 0x55;
      puVar16 = *(undefined1 **)(lVar11 + 0x10);
      if ((*(long *)(lVar12 + 0x10) != 0) &&
         ((puVar16 == &_fs_glyph_requested || (puVar16 == &_fs_glyph_undefined)))) {
        uVar10 = fs_load_all_glyphs();
        puVar16 = *(undefined1 **)(lVar11 + 0x10);
      }
      if (puVar16 == (undefined1 *)0x0) {
        if (lVar7 != 0) {
          *plVar14 = lVar7;
          plVar13 = plVar14 + 1;
        }
      }
      else {
        *plVar14 = lVar11;
        plVar13 = plVar14 + 1;
      }
    } while ((int)uVar10 == 0x55);
LAB_00126a74:
    lVar12 = (long)plVar13 - (long)param_6 >> 3;
  }
  else {
    if (param_4 < 3) {
      if (*(short *)(param_1 + 0xc) == 0) {
        if (((*(byte *)(param_1 + 0x12) & 0x40) != 0) && (lVar7 != 0)) {
LAB_0012699a:
          lVar11 = param_2 + -1;
          plVar14 = plVar13;
          if (param_2 != 0) {
            do {
              bVar3 = *(byte *)param_3;
              param_3 = (ushort *)((long)param_3 + 1);
              plVar13 = plVar14 + 1;
              if (bVar3 - uVar9 < uVar17) {
                lVar2 = lVar6 + (ulong)(bVar3 - uVar9) * 0x18;
                if ((*(long *)(lVar12 + 0x10) != 0) &&
                   ((*(undefined1 **)(lVar2 + 0x10) == &_fs_glyph_undefined ||
                    (*(undefined1 **)(lVar2 + 0x10) == &_fs_glyph_requested)))) goto LAB_00126df0;
                *plVar14 = lVar2;
              }
              else {
                *plVar14 = lVar7;
              }
              lVar11 = lVar11 + -1;
              plVar14 = plVar13;
              if (lVar11 == -1) break;
            } while( true );
          }
          goto LAB_001269b0;
        }
LAB_00126d94:
        do {
          bVar18 = param_2 == 0;
          param_2 = param_2 + -1;
          if (bVar18) goto LAB_001269b0;
          while( true ) {
            bVar3 = *(byte *)param_3;
            param_3 = (ushort *)((long)param_3 + 1);
            if (bVar3 - uVar9 < uVar17) break;
            lVar11 = param_2 + -1;
            if (lVar7 == 0) goto LAB_00126d94;
            plVar14 = plVar13 + 1;
            *plVar13 = lVar7;
            param_2 = lVar11;
            plVar13 = plVar14;
            if (lVar11 == -1) goto LAB_001269b0;
          }
          lVar11 = lVar6 + (ulong)(bVar3 - uVar9) * 0x18;
          uVar10 = 0x55;
          puVar16 = *(undefined1 **)(lVar11 + 0x10);
          if ((*(long *)(lVar12 + 0x10) != 0) &&
             ((puVar16 == &_fs_glyph_undefined || (puVar16 == &_fs_glyph_requested)))) {
            uVar10 = fs_load_all_glyphs();
            puVar16 = *(undefined1 **)(lVar11 + 0x10);
          }
          if (puVar16 == (undefined1 *)0x0) {
            if (lVar7 != 0) {
              *plVar13 = lVar7;
              plVar13 = plVar13 + 1;
            }
          }
          else {
            *plVar13 = lVar11;
            plVar13 = plVar13 + 1;
          }
        } while ((int)uVar10 == 0x55);
        goto LAB_00126a74;
      }
    }
    else if (param_4 == 3) {
      uVar4 = *(ushort *)(param_1 + 0xe);
      uVar5 = *(ushort *)(param_1 + 0xc);
LAB_001269ec:
      do {
        param_2 = param_2 + -1;
        if (param_2 == -1) goto LAB_001269b0;
        bVar3 = *(byte *)param_3;
        pbVar1 = (byte *)((long)param_3 + 1);
        param_3 = param_3 + 1;
        uVar8 = (uint)bVar3 - (uint)uVar5;
        uVar15 = *pbVar1 - uVar9;
        if ((uVar8 < (uVar4 + 1) - (uint)uVar5) && (uVar15 < uVar17)) {
          lVar11 = lVar6 + (ulong)(uVar8 * uVar17 + uVar15) * 0x18;
          puVar16 = *(undefined1 **)(lVar11 + 0x10);
          if ((*(long *)(lVar12 + 0x10) == 0) ||
             ((puVar16 != &_fs_glyph_undefined && (puVar16 != &_fs_glyph_requested)))) {
            if (puVar16 == (undefined1 *)0x0) {
              if (lVar7 != 0) {
                *plVar13 = lVar7;
                plVar13 = plVar13 + 1;
              }
            }
            else {
              *plVar13 = lVar11;
              plVar13 = plVar13 + 1;
            }
            goto LAB_001269ec;
          }
          uVar10 = fs_load_all_glyphs();
          if (*(long *)(lVar11 + 0x10) == 0) {
            if (lVar7 != 0) goto LAB_00126a63;
          }
          else {
            *plVar13 = lVar11;
            plVar13 = plVar13 + 1;
          }
        }
        else {
          if (lVar7 == 0) goto LAB_001269ec;
          uVar10 = 0x55;
LAB_00126a63:
          *plVar13 = lVar7;
          plVar13 = plVar13 + 1;
        }
      } while ((int)uVar10 == 0x55);
      goto LAB_00126a74;
    }
    lVar12 = 0;
    uVar10 = 0x55;
  }
LAB_00126a7b:
  *param_5 = lVar12;
  return uVar10;
LAB_00126ea0:
  uVar10 = fs_load_all_glyphs();
  *plVar14 = lVar2;
  param_2 = lVar11;
  if ((int)uVar10 != 0x55) goto LAB_00126a74;
  goto LAB_00126b36;
LAB_00126df0:
  uVar10 = fs_load_all_glyphs();
  *plVar14 = lVar2;
  param_2 = lVar11;
  if ((int)uVar10 != 0x55) goto LAB_00126a74;
  goto LAB_0012699a;
LAB_001269b0:
  uVar10 = 0x55;
  lVar12 = (long)plVar13 - (long)param_6 >> 3;
  goto LAB_00126a7b;
}



void _fs_convert_char_info(undefined2 *param_1,undefined2 *param_2)

{
  param_2[3] = param_1[3];
  param_2[4] = param_1[4];
  *param_2 = *param_1;
  param_2[1] = param_1[1];
  param_2[2] = param_1[2];
  param_2[5] = param_1[5];
  return;
}



void _fs_init_fontinfo(long param_1,undefined2 *param_2)

{
  ushort *puVar1;
  undefined2 uVar2;
  int iVar3;
  
  if (*(int *)(param_1 + 0x30) == 1) {
    uVar2 = *param_2;
    puVar1 = param_2 + 4;
    *puVar1 = *puVar1 << 8 | *puVar1 >> 8;
    *param_2 = param_2[2];
    param_2[2] = uVar2;
    uVar2 = param_2[1];
    param_2[1] = param_2[3];
    param_2[3] = uVar2;
  }
  iVar3 = FontCouldBeTerminal(param_2);
  if (iVar3 != 0) {
    *(byte *)(param_2 + 5) = *(byte *)(param_2 + 5) | 2;
    *(undefined4 *)(param_2 + 0x11) = *(undefined4 *)(param_2 + 0x20);
    param_2[0xe] = 0;
    param_2[0xf] = param_2[0x10];
    *(undefined8 *)(param_2 + 8) = *(undefined8 *)(param_2 + 0xe);
    *(undefined4 *)(param_2 + 0xc) = *(undefined4 *)(param_2 + 0x12);
  }
  FontComputeInfoAccelerators(param_2);
  return;
}



int _fs_convert_props(int *param_1,uint *param_2,long param_3,long param_4)

{
  undefined8 *puVar1;
  char cVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined8 *puVar7;
  undefined8 uVar8;
  undefined8 *puVar9;
  
  iVar3 = *param_1;
  *(int *)(param_4 + 0x44) = iVar3;
  if (-1 < iVar3) {
    puVar7 = (undefined8 *)malloc((long)iVar3 * 0x11);
    if (puVar7 != (undefined8 *)0x0) {
      puVar9 = puVar7 + (long)iVar3 * 2;
      *(undefined8 **)(param_4 + 0x48) = puVar7;
      *(undefined8 **)(param_4 + 0x50) = puVar9;
      if (iVar3 == 0) {
        return 0;
      }
      puVar1 = puVar7 + ((ulong)(iVar3 - 1) + 1) * 2;
      do {
        cVar2 = *(char *)(param_2 + 4);
        uVar4 = param_2[2];
        uVar5 = param_2[3];
        uVar8 = MakeAtom((ulong)*param_2 + param_3,param_2[1],1);
        *puVar7 = uVar8;
        if (cVar2 == '\0') {
          *(undefined *)puVar9 = 1;
          iVar6 = MakeAtom((ulong)uVar4 + param_3,uVar5,1);
          puVar7[1] = (long)iVar6;
        }
        else {
          *(undefined *)puVar9 = 0;
          puVar7[1] = (ulong)uVar4;
        }
        param_2 = param_2 + 5;
        puVar7 = puVar7 + 2;
        puVar9 = (undefined8 *)((long)puVar9 + 1);
      } while (puVar1 != puVar7);
      return iVar3;
    }
  }
  return -1;
}



void _fs_free_props(long param_1)

{
  if (*(void **)(param_1 + 0x48) != (void *)0x0) {
    free(*(void **)(param_1 + 0x48));
    *(undefined4 *)(param_1 + 0x44) = 0;
    *(undefined8 *)(param_1 + 0x48) = 0;
  }
  return;
}



void FUN_001270f0(long param_1)

{
  void *__ptr;
  undefined8 *puVar1;
  long lVar2;
  undefined8 *__ptr_00;
  
  __ptr = *(void **)(param_1 + 0x98);
  puVar1 = *(undefined8 **)(param_1 + 0xa0);
  __ptr_00 = *(undefined8 **)((long)__ptr + 8);
  if (__ptr_00 != (undefined8 *)0x0) goto LAB_0012711f;
  while (__ptr_00 = *(undefined8 **)((long)__ptr + 0x18), __ptr_00 != (undefined8 *)0x0) {
    *(undefined8 *)((long)__ptr + 0x18) = *__ptr_00;
LAB_0012711f:
    free(__ptr_00);
  }
  lVar2 = find_old_font(*puVar1);
  if (lVar2 != 0) {
    DeleteFontClientID(*puVar1);
  }
  FUN_0010a1b0(param_1 + 8);
  free(__ptr);
  DestroyFontRec(param_1);
  return;
}



char _fs_convert_lfwi_reply
               (undefined8 param_1,ushort *param_2,long param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6)

{
  int iVar1;
  
  *(byte *)(param_2 + 5) =
       *(byte *)(param_2 + 5) & 0xbf | (byte)((*(byte *)(param_3 + 0xc) & 1) << 6);
  param_2[5] = param_2[5] & 0xfe7f | (ushort)(*(char *)(param_3 + 0x14) != '\0') << 7;
  *(byte *)(param_2 + 5) =
       (byte)((*(uint *)(param_3 + 0xc) >> 1 & 1) << 4) | *(byte *)(param_2 + 5) & 0xef;
  param_2[2] = (ushort)*(byte *)(param_3 + 0x10);
  *param_2 = (ushort)*(byte *)(param_3 + 0x11);
  param_2[3] = (ushort)*(byte *)(param_3 + 0x12);
  param_2[1] = (ushort)*(byte *)(param_3 + 0x13);
  param_2[4] = (ushort)*(byte *)(param_3 + 0x16) * 0x100 + (ushort)*(byte *)(param_3 + 0x17);
  param_2[0x21] = *(ushort *)(param_3 + 0x32);
  param_2[0x20] = *(ushort *)(param_3 + 0x30);
  param_2[0xe] = *(ushort *)(param_3 + 0x18);
  param_2[0xf] = *(ushort *)(param_3 + 0x1a);
  param_2[0x10] = *(ushort *)(param_3 + 0x1c);
  param_2[0x11] = *(ushort *)(param_3 + 0x1e);
  param_2[0x12] = *(ushort *)(param_3 + 0x20);
  param_2[0x13] = *(ushort *)(param_3 + 0x22);
  param_2[0x1a] = *(ushort *)(param_3 + 0x18);
  param_2[0x1b] = *(ushort *)(param_3 + 0x1a);
  param_2[0x1c] = *(ushort *)(param_3 + 0x1c);
  param_2[0x1d] = *(ushort *)(param_3 + 0x1e);
  param_2[0x1e] = *(ushort *)(param_3 + 0x20);
  param_2[0x1f] = *(ushort *)(param_3 + 0x22);
  param_2[8] = *(ushort *)(param_3 + 0x24);
  param_2[9] = *(ushort *)(param_3 + 0x26);
  param_2[10] = *(ushort *)(param_3 + 0x28);
  param_2[0xb] = *(ushort *)(param_3 + 0x2a);
  param_2[0xc] = *(ushort *)(param_3 + 0x2c);
  param_2[0xd] = *(ushort *)(param_3 + 0x2e);
  param_2[0x14] = *(ushort *)(param_3 + 0x24);
  param_2[0x15] = *(ushort *)(param_3 + 0x26);
  param_2[0x16] = *(ushort *)(param_3 + 0x28);
  param_2[0x17] = *(ushort *)(param_3 + 0x2a);
  param_2[0x18] = *(ushort *)(param_3 + 0x2c);
  param_2[0x19] = *(ushort *)(param_3 + 0x2e);
  _fs_init_fontinfo();
  iVar1 = _fs_convert_props(param_4,param_5,param_6,param_2);
  return (iVar1 != -1) * '\x05' + 'P';
}



undefined8
fs_build_range(long param_1,int param_2,int param_3,int param_4,byte *param_5,undefined8 param_6,
              undefined8 param_7)

{
  byte *pbVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  long lVar7;
  undefined1 *puVar8;
  int iVar9;
  uint uVar10;
  undefined8 uVar11;
  ulong uVar12;
  ulong uVar13;
  ulong uVar14;
  long lVar15;
  uint uVar16;
  ulong uVar17;
  ulong uVar18;
  ulong uVar19;
  uint uVar20;
  ulong uVar21;
  ushort uVar22;
  undefined8 *puVar23;
  long in_FS_OFFSET;
  bool bVar24;
  bool bVar25;
  ulong local_a8;
  uint local_98;
  long local_90;
  ulong local_80;
  byte *local_78;
  int local_70;
  undefined local_6a;
  char local_48;
  char local_47;
  char local_46;
  char local_45;
  byte local_44;
  byte local_43;
  undefined local_42;
  undefined local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(*(long *)(param_1 + 0xa0) + 0x10) != 0) {
    uVar3 = *(ushort *)(param_1 + 0xc);
    uVar12 = (ulong)uVar3;
    lVar7 = (*(long **)(param_1 + 0x98))[1];
    lVar15 = **(long **)(param_1 + 0x98);
    uVar4 = *(ushort *)(param_1 + 8);
    uVar19 = (ulong)uVar4;
    uVar5 = *(ushort *)(param_1 + 0xe);
    uVar6 = *(ushort *)(param_1 + 10);
    uVar21 = (ulong)uVar6;
    bVar2 = (byte)uVar4;
    if (lVar15 == 0) {
      bVar24 = true;
    }
    else if (*(undefined1 **)(lVar15 + 0x10) == &_fs_glyph_undefined) {
      uVar14 = (lVar15 - lVar7 >> 3) * -0x5555555555555555;
      uVar17 = ((ulong)uVar6 + 1) - uVar19;
      local_48 = (char)(uVar14 / uVar17) + (byte)uVar3;
      local_47 = (char)(uVar14 % uVar17) + bVar2;
      local_46 = local_48;
      local_45 = local_47;
      uVar11 = add_range(&local_48,param_6,param_7,0);
      if ((int)uVar11 != 0x55) goto LAB_00127578;
      bVar24 = false;
      *(undefined1 **)(lVar15 + 0x10) = &_fs_glyph_requested;
    }
    else {
      bVar24 = *(undefined1 **)(lVar15 + 0x10) != &_fs_glyph_requested;
    }
    if (param_2 == 0) {
      if (param_4 != 1) {
        if (false) goto LAB_001275bb;
        goto LAB_0012774a;
      }
      if (uVar12 != 0) goto LAB_001275a8;
      if (param_3 != 0) {
        pbVar1 = param_5 + (ulong)(param_3 - 1) + 1;
        do {
          while( true ) {
            bVar2 = *param_5;
            uVar12 = (ulong)bVar2;
            param_5 = param_5 + 1;
            if ((uVar19 <= uVar12) && (uVar12 <= uVar21)) break;
LAB_0012742c:
            if (param_5 == pbVar1) goto LAB_00127568;
          }
          puVar8 = *(undefined1 **)(lVar7 + 0x10 + (uVar12 - uVar19) * 0x18);
          if (puVar8 != &_fs_glyph_undefined) {
            bVar24 = (bool)(bVar24 & puVar8 != &_fs_glyph_requested);
            goto LAB_0012742c;
          }
          uVar12 = (ulong)(bVar2 & 0xf0);
          if ((bVar2 & 0xf0) < uVar19) {
            uVar12 = uVar19;
          }
          uVar14 = (ulong)(bVar2 & 0xf0) + 0xf;
          if (uVar21 < uVar14) {
            uVar14 = uVar21;
          }
          if (uVar14 < uVar12) goto LAB_0012742c;
          puVar23 = (undefined8 *)(lVar7 + 0x10 + (uVar12 - uVar19) * 0x18);
          while( true ) {
            if ((undefined1 *)*puVar23 == &_fs_glyph_undefined) {
              local_47 = (char)uVar12;
              local_46 = '\0';
              local_48 = '\0';
              local_45 = local_47;
              uVar11 = add_range(&local_48,param_6,param_7,0);
              if ((int)uVar11 != 0x55) goto LAB_00127578;
              bVar24 = false;
              *puVar23 = &_fs_glyph_requested;
            }
            else {
              bVar24 = (bool)(bVar24 & (undefined1 *)*puVar23 != &_fs_glyph_requested);
            }
            if (uVar14 == uVar12) break;
            uVar12 = uVar12 + 1;
            puVar23 = puVar23 + 3;
          }
        } while (param_5 != pbVar1);
      }
    }
    else {
LAB_001275bb:
      if (param_3 == 0) {
        local_6a = (undefined)uVar5;
        local_41 = (char)uVar6;
        local_78 = &local_44;
        local_70 = 1;
        param_3 = 2;
        local_42 = local_6a;
        uVar22 = uVar3;
        local_44 = (byte)uVar3;
        local_43 = bVar2;
        goto LAB_00127613;
      }
LAB_0012774a:
      local_70 = param_3 + -1;
      if (param_3 != 0) {
        uVar22 = (ushort)*param_5;
        bVar2 = param_5[1];
        local_78 = param_5;
LAB_00127613:
        uVar14 = (ulong)uVar5;
        uVar16 = (uint)uVar6;
        iVar9 = local_70;
        do {
          local_70 = iVar9;
          uVar13 = (ulong)bVar2;
          uVar17 = (ulong)(byte)uVar22;
          uVar22 = uVar22 & 0xff;
          pbVar1 = local_78 + 2;
          uVar20 = (uint)bVar2;
          local_98 = uVar16;
          if (param_2 == 0) {
            local_78 = pbVar1;
            if ((((uVar12 <= uVar17) && (uVar17 <= uVar14)) && (uVar19 <= uVar13)) &&
               (local_98 = uVar20, local_80 = uVar17, uVar6 = uVar22, uVar13 <= uVar21)) {
LAB_0012780f:
              lVar15 = (uVar21 + 1) - uVar19;
              local_90 = (uVar17 - uVar12) * lVar15 - uVar19;
              local_a8 = (ulong)(int)uVar20;
              uVar13 = (long)(int)local_98;
LAB_00127861:
              do {
                if (local_a8 <= uVar13) {
                  uVar18 = local_a8;
                  puVar23 = (undefined8 *)(lVar7 + 0x10 + (local_90 + local_a8) * 0x18);
                  do {
                    while (puVar8 = (undefined1 *)*puVar23, puVar8 == &_fs_glyph_undefined) {
                      if ((uVar6 == uVar22) &&
                         (((((uVar20 & 0xf) != 0 && (uVar19 < local_a8)) ||
                           ((local_98 & 0xf) != 0xf)) && (uVar13 < uVar21)))) {
                        uVar20 = uVar20 & 0xf0;
                        local_98 = (local_98 & 0xf0) + 0xf;
                        local_a8 = (ulong)(int)uVar20;
                        if (local_a8 < uVar19) {
                          local_a8 = (ulong)uVar4;
                          uVar20 = (uint)uVar4;
                        }
                        uVar13 = (long)(int)local_98;
                        if (uVar21 < (ulong)(long)(int)local_98) {
                          uVar13 = uVar21;
                          local_98 = uVar16;
                        }
                        goto LAB_00127861;
                      }
                      local_47 = (char)uVar18;
                      local_48 = (char)uVar17;
                      local_46 = local_48;
                      local_45 = local_47;
                      uVar11 = add_range(&local_48,param_6,param_7,0);
                      if ((int)uVar11 != 0x55) goto LAB_00127578;
                      uVar18 = uVar18 + 1;
                      bVar24 = false;
                      *puVar23 = &_fs_glyph_requested;
                      puVar23 = puVar23 + 3;
                      if (uVar13 < uVar18) goto LAB_00127955;
                    }
                    uVar18 = uVar18 + 1;
                    puVar23 = puVar23 + 3;
                    bVar24 = (bool)(bVar24 & puVar8 != &_fs_glyph_requested);
                  } while (uVar18 <= uVar13);
                }
LAB_00127955:
                local_90 = local_90 + lVar15;
                bVar25 = local_80 != uVar17;
                uVar17 = uVar17 + 1;
              } while (bVar25);
            }
          }
          else {
            local_80 = uVar14;
            uVar6 = uVar5;
            if (local_70 == 0) {
              uVar18 = uVar21;
              local_78 = pbVar1;
              if (uVar17 < uVar12) goto LAB_001277a8;
            }
            else {
              pbVar1 = local_78 + 4;
              local_80 = (ulong)local_78[2];
              uVar18 = (ulong)local_78[3];
              uVar6 = (ushort)local_78[2];
              local_98 = (uint)local_78[3];
              local_70 = param_3 + -2;
              local_78 = pbVar1;
              if (uVar17 < uVar12) {
LAB_001277a8:
                uVar17 = uVar12;
                uVar22 = uVar3;
              }
              if (uVar14 < local_80) {
                local_80 = uVar14;
                uVar6 = uVar5;
              }
            }
            uVar10 = (uint)uVar4;
            if (uVar19 <= uVar13) {
              uVar10 = uVar20;
            }
            if (uVar21 < uVar18) {
              local_98 = uVar16;
            }
            uVar20 = uVar10;
            if (uVar17 <= local_80) goto LAB_0012780f;
          }
          if (local_70 == 0) break;
          uVar22 = (ushort)*local_78;
          bVar2 = local_78[1];
          iVar9 = local_70 + -1;
          param_3 = local_70;
        } while( true );
      }
    }
LAB_00127568:
    uVar11 = 0x55;
    if (!bVar24) goto LAB_00127578;
  }
LAB_001275a8:
  uVar11 = 0x400;
LAB_00127578:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar11;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void _fs_clean_aborted_loadglyphs(long param_1,int param_2,byte *param_3)

{
  byte bVar1;
  long lVar2;
  uint uVar3;
  long lVar4;
  ushort uVar5;
  uint uVar6;
  byte *pbVar7;
  uint uVar8;
  int iVar9;
  long in_FS_OFFSET;
  byte local_24;
  undefined local_23;
  undefined local_22;
  undefined local_21;
  long local_20;
  
  lVar2 = *(long *)(param_1 + 0x98);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(lVar2 + 8) == 0) {
LAB_00127b40:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    return;
  }
  if (param_2 == 0) {
    uVar3 = (uint)*(ushort *)(param_1 + 0xc);
    param_3 = &local_24;
    param_2 = 1;
    uVar5 = *(ushort *)(param_1 + 0xe);
    local_23 = (char)*(undefined2 *)(param_1 + 8);
    local_24 = (byte)*(ushort *)(param_1 + 0xc);
    local_22 = (char)uVar5;
    local_21 = (char)*(undefined2 *)(param_1 + 10);
  }
  else {
    if (param_2 < 1) goto LAB_00127b40;
    uVar3 = (uint)*param_3;
    uVar5 = (ushort)param_3[2];
  }
  iVar9 = 0;
  pbVar7 = param_3 + 1;
  do {
    uVar8 = uVar3 & 0xff;
    if ((byte)uVar3 <= (byte)uVar5) {
      uVar3 = (uint)pbVar7[2];
      do {
        bVar1 = *pbVar7;
        uVar6 = (uint)bVar1;
        lVar4 = *(long *)(lVar2 + 8) +
                (long)(int)(((((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1
                             ) * (uVar8 - *(ushort *)(param_1 + 0xc)) + (uint)bVar1) -
                           (uint)*(ushort *)(param_1 + 8)) * 0x18;
        if (bVar1 <= uVar3) {
          do {
            while (*(undefined1 **)(lVar4 + 0x10) != &_fs_glyph_requested) {
              uVar6 = uVar6 + 1;
              lVar4 = lVar4 + 0x18;
              if ((int)uVar3 < (int)uVar6) goto LAB_00127b1b;
            }
            uVar6 = uVar6 + 1;
            *(undefined1 **)(lVar4 + 0x10) = &_fs_glyph_undefined;
            uVar3 = (uint)pbVar7[2];
            lVar4 = lVar4 + 0x18;
          } while ((int)uVar6 <= (int)(uint)pbVar7[2]);
        }
LAB_00127b1b:
        uVar8 = uVar8 + 1;
      } while ((int)uVar8 <= (int)(uint)pbVar7[1]);
    }
    iVar9 = iVar9 + 1;
    if (param_2 <= iVar9) goto LAB_00127b40;
    uVar3 = (uint)pbVar7[3];
    uVar5 = (ushort)pbVar7[5];
    pbVar7 = pbVar7 + 4;
  } while( true );
}



long fs_create_font(undefined8 param_1,void *param_2,int param_3,undefined4 param_4,
                   undefined4 param_5)

{
  int iVar1;
  long lVar2;
  undefined (*__ptr) [16];
  undefined8 uVar3;
  size_t __n;
  long lVar4;
  long in_FS_OFFSET;
  undefined local_50 [4];
  undefined local_4c [4];
  undefined local_48 [4];
  undefined local_44 [4];
  long local_40;
  
  __n = (size_t)param_3;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = CreateFontRec();
  lVar4 = lVar2;
  if (lVar2 != 0) {
    __ptr = (undefined (*) [16])malloc(__n + 0x51);
    if (__ptr != (undefined (*) [16])0x0) {
      *__ptr = (undefined  [16])0x0;
      __ptr[1] = (undefined  [16])0x0;
      __ptr[2] = (undefined  [16])0x0;
      __ptr[3] = (undefined  [16])0x0;
      __ptr[4] = (undefined  [16])0x0;
      *(undefined8 *)(lVar2 + 0x88) = param_1;
      *(undefined (**) [16])(lVar2 + 0x98) = __ptr;
      *(undefined (**) [16])(lVar2 + 0xa0) = __ptr + 2;
      CheckFSFormat(param_4,0x1b,local_50,local_4c,local_48,local_44);
      *(undefined4 *)(lVar2 + 100) = param_4;
      *(undefined *)(lVar2 + 0x60) = local_50[0];
      *(undefined4 *)(lVar2 + 0x4c) = 0;
      *(undefined *)(lVar2 + 0x61) = local_4c[0];
      *(undefined8 *)(lVar2 + 0x50) = 0;
      *(undefined *)(lVar2 + 99) = local_48[0];
      *(undefined8 *)(lVar2 + 0x58) = 0;
      *(undefined *)(lVar2 + 0x62) = local_44[0];
      *(code **)(lVar2 + 0x68) = FUN_00126930;
      *(code **)(lVar2 + 0x70) = FUN_00126680;
      *(code **)(lVar2 + 0x78) = FUN_001270f0;
      *(undefined8 *)(lVar2 + 0x80) = 0;
      *(undefined (**) [16])__ptr[4] = __ptr + 5;
      *(undefined4 *)(__ptr[4] + 8) = param_4;
      *(undefined4 *)(__ptr[4] + 0xc) = param_5;
      memcpy(__ptr + 5,param_2,__n);
      __ptr[5][__n] = 0;
      uVar3 = GetNewFontClientID();
      *(undefined8 *)__ptr[2] = uVar3;
      iVar1 = StoreFontClientFont(lVar2,uVar3);
      if (iVar1 != 0) goto LAB_00127d09;
      free(__ptr);
    }
    lVar4 = 0;
    DestroyFontRec(lVar2);
  }
LAB_00127d09:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 * fs_alloc_glyphs(long param_1,int param_2)

{
  long lVar1;
  undefined8 *puVar2;
  
  lVar1 = *(long *)(param_1 + 0x98);
  puVar2 = (undefined8 *)malloc((long)param_2 + 8);
  *puVar2 = *(undefined8 *)(lVar1 + 0x18);
  *(undefined8 **)(lVar1 + 0x18) = puVar2;
  return puVar2 + 1;
}



void FUN_00127d80(undefined8 *param_1)

{
  undefined8 *__ptr;
  
  __ptr = (undefined8 *)*param_1;
  while (__ptr != (undefined8 *)0x0) {
    *param_1 = __ptr[1];
    ClientSignal(*__ptr);
    free(__ptr);
    __ptr = (undefined8 *)*param_1;
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 * FUN_00127dc0(undefined8 param_1,long *param_2,long param_3)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  undefined8 *puVar4;
  int iVar5;
  uint uVar6;
  
  lVar3 = 0;
  do {
    *(ulong *)(param_3 + lVar3) =
         *(ulong *)(param_3 + lVar3) | *(ulong *)((long)&_fs_fd_mask + lVar3);
    lVar3 = lVar3 + 8;
  } while (lVar3 != 0x80);
  puVar4 = DAT_0013fd00;
  if ((DAT_0013fcf8 & 1) != 0) {
    for (; puVar4 != (undefined8 *)0x0; puVar4 = (undefined8 *)*puVar4) {
      while ((*(byte *)(puVar4 + 0x13) & 1) == 0) {
        puVar4 = (undefined8 *)*puVar4;
        if (puVar4 == (undefined8 *)0x0) goto joined_r0x00127e79;
      }
      _fs_flush(puVar4);
    }
  }
joined_r0x00127e79:
  if ((DAT_0013fcf8 & 0x20) == 0) {
    puVar4 = (undefined8 *)(ulong)DAT_0013fcf8;
    if ((DAT_0013fcf8 & 0x4e) != 0) {
      iVar2 = GetTimeInMillis();
      iVar5 = iVar2 + 10000000;
      puVar4 = DAT_0013fd00;
      if (DAT_0013fd00 == (undefined8 *)0x0) {
        uVar6 = 10000000;
        lVar3 = 0;
        _DAT_0013fce0 = 10000;
      }
      else {
        do {
          uVar6 = *(uint *)(puVar4 + 0x13);
          if (((uVar6 & 0x40) != 0) && (*(int *)((long)puVar4 + 0xa4) - iVar5 < 0)) {
            iVar5 = *(int *)((long)puVar4 + 0xa4);
          }
          if (((uVar6 & 4) != 0) && (*(int *)(puVar4 + 0x15) - iVar5 < 0)) {
            iVar5 = *(int *)(puVar4 + 0x15);
          }
          if (((uVar6 & 2) != 0) && (*(int *)(puVar4 + 0x14) - iVar5 < 0)) {
            iVar5 = *(int *)(puVar4 + 0x14);
          }
          if (((uVar6 & 8) != 0) && (*(int *)((long)puVar4 + 0x9c) - iVar5 < 0)) {
            iVar5 = *(int *)((long)puVar4 + 0x9c);
          }
          puVar4 = (undefined8 *)*puVar4;
        } while (puVar4 != (undefined8 *)0x0);
        uVar6 = iVar5 - iVar2;
        if (iVar5 - iVar2 < 0) {
          uVar6 = 0;
        }
        _DAT_0013fce0 = (long)(int)(uVar6 / 1000);
        lVar3 = (long)(int)((uVar6 % 1000) * 1000);
      }
      plVar1 = (long *)*param_2;
      _DAT_0013fce8 = lVar3;
      if (plVar1 == (long *)0x0) goto LAB_00127f80;
      puVar4 = (undefined8 *)(plVar1[1] * 0x20c49ba5e353f7cf);
      if ((long)(int)uVar6 < plVar1[1] / 1000 + *plVar1 * 1000) {
        *plVar1 = _DAT_0013fce0;
        plVar1[1] = lVar3;
      }
    }
  }
  else {
    _DAT_0013fce0 = 0;
    _DAT_0013fce8 = 0;
    puVar4 = (undefined8 *)*param_2;
    if (puVar4 == (undefined8 *)0x0) {
LAB_00127f80:
      *param_2 = (long)&DAT_0013fce0;
      return (undefined8 *)&DAT_0013fce0;
    }
    *puVar4 = 0;
    puVar4[1] = 0;
  }
  return puVar4;
}



void FUN_00127fb0(long param_1)

{
  int iVar1;
  undefined8 uVar2;
  long in_FS_OFFSET;
  int local_28;
  undefined local_24;
  undefined local_23;
  undefined2 local_22;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = GetClientResolutions(&local_28);
  if (local_28 != 0) {
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_23 = (undefined)local_28;
    local_24 = 0xb;
    local_22 = (undefined2)(local_28 * 6 + 7 >> 2);
    iVar1 = _fs_write(param_1,&local_24,4);
    if (iVar1 != -1) {
      _fs_write_pad(param_1,uVar2,(long)(local_28 * 6));
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool FUN_00128050(char *param_1)

{
  char *pcVar1;
  
  if ((param_1 != (char *)0x0) && (*param_1 != '/')) {
    pcVar1 = strchr(param_1,0x2f);
    return pcVar1 != (char *)0x0;
  }
  return false;
}



char * FUN_00128090(char *param_1)

{
  char *pcVar1;
  
  pcVar1 = strchr(param_1,0x2f);
  if (pcVar1 != (char *)0x0) {
    pcVar1 = strrchr(pcVar1 + 1,0x2f);
    return pcVar1;
  }
  return (char *)0x0;
}



undefined8 FUN_001280c0(long param_1)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  char *__s;
  size_t sVar4;
  char *pcVar5;
  char cVar6;
  int iVar7;
  long in_FS_OFFSET;
  char local_3d;
  int local_3c;
  undefined local_38;
  undefined local_37;
  undefined2 local_36;
  undefined local_34;
  char local_33;
  undefined2 local_32;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = GetClientResolutions(&local_3c);
  if (local_3c == 0) {
LAB_001280f8:
    if (*(int *)(param_1 + 0x2c) == 0) {
      lVar3 = FUN_00128090(*(undefined8 *)(param_1 + 0x18));
joined_r0x0012819c:
      if (lVar3 == 0) {
        *(undefined4 *)(param_1 + 0x20) = 0;
        uVar2 = 1;
        goto LAB_001281f5;
      }
    }
    else {
      lVar3 = FUN_00128090(*(undefined8 *)
                            ((long)*(int *)(param_1 + 0x2c) * 0x10 + *(long *)(param_1 + 0x38) +
                            -0x10));
      if (lVar3 == 0) {
        lVar3 = FUN_00128090(*(undefined8 *)(param_1 + 0x18));
        goto joined_r0x0012819c;
      }
    }
    *(undefined4 *)(param_1 + 0x20) = 1;
    __s = (char *)(lVar3 + 1);
    if (*(char *)(lVar3 + 1) == '\0') {
      local_32 = 1;
      local_33 = '\0';
      iVar7 = 0;
    }
    else {
      iVar7 = 0;
      cVar6 = '\0';
      pcVar5 = __s;
      do {
        cVar6 = cVar6 + '\x01';
        __s = strchr(pcVar5,0x2b);
        if (__s == (char *)0x0) {
          sVar4 = strlen(pcVar5);
          __s = pcVar5 + sVar4;
        }
        iVar7 = iVar7 + 1 + ((int)__s - (int)pcVar5);
        pcVar5 = __s;
      } while (*__s != '\0');
      local_32 = (undefined2)(iVar7 + 7 >> 2);
      local_33 = cVar6;
    }
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_34 = 4;
    iVar1 = _fs_write(param_1,&local_34,4);
    if (iVar1 == 1) {
      while (*__s != '\0') {
        pcVar5 = strchr(__s,0x2b);
        if (pcVar5 == (char *)0x0) {
          sVar4 = strlen(__s);
          pcVar5 = __s + sVar4;
        }
        local_3d = (char)pcVar5 - (char)__s;
        iVar1 = _fs_write(param_1,&local_3d,1);
        if ((iVar1 != 1) ||
           (iVar1 = _fs_write(param_1,__s,(long)local_3d), __s = pcVar5, iVar1 != 1))
        goto LAB_001281f0;
      }
      lVar3 = _fs_pad_length((long)iVar7);
      uVar2 = _fs_write(param_1,&DAT_001361da,lVar3 - iVar7);
      if ((int)uVar2 == 1) goto LAB_001281f5;
    }
  }
  else {
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_37 = (undefined)local_3c;
    local_38 = 0xb;
    local_36 = (undefined2)(local_3c * 6 + 7 >> 2);
    iVar7 = _fs_write(param_1,&local_38,4);
    if ((iVar7 == 1) && (iVar7 = _fs_write_pad(param_1,uVar2,(long)(local_3c * 6)), iVar7 == 1))
    goto LAB_001280f8;
  }
LAB_001281f0:
  uVar2 = 0xffffffff;
LAB_001281f5:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00128340(long param_1)

{
  FUN_001280c0(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



bool FUN_00128360(long param_1)

{
  byte bVar1;
  long lVar2;
  ulong uVar3;
  
  if (*(int *)(param_1 + 8) != -1) {
    lVar2 = __fdelt_chk();
    bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x1f);
    if (((&_fs_fd_mask)[lVar2] &
        1L << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f)) !=
        0) {
      uVar3 = *(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88);
      if (7 < uVar3) {
        return (long)(ulong)(uint)(*(int *)(*(long *)(param_1 + 0x70) + 4 +
                                           *(long *)(param_1 + 0x88)) << 2) <= (long)uVar3;
      }
    }
  }
  return false;
}



long FUN_001283e0(long param_1,undefined4 *param_2)

{
  int iVar1;
  long lVar2;
  long in_FS_OFFSET;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(param_1 + 8) != -1) {
    lVar2 = __fdelt_chk();
    if (((&_fs_fd_mask)[lVar2] & 1L << ((byte)(*(int *)(param_1 + 8) % 0x40) & 0x3f)) != 0) {
      iVar1 = _fs_start_read(param_1,8,&local_28);
      if (iVar1 == 1) {
        iVar1 = _fs_start_read(param_1,*(int *)(local_28 + 4) << 2,&local_28);
        if (iVar1 == 1) {
          *param_2 = 1;
          goto LAB_00128480;
        }
      }
    }
  }
  *param_2 = 0;
  local_28 = 0;
LAB_00128480:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_28;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_001284a0(long param_1,undefined4 param_2)

{
  long in_FS_OFFSET;
  undefined4 local_18;
  undefined4 local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(param_1 + 0x98) & 0x10) == 0) {
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_18 = 0x20015;
    local_14 = param_2;
    _fs_write(param_1,&local_18,8);
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0x55;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00128500(long param_1,long param_2)

{
  if (*(int *)(*(long *)(param_1 + 0x18) + 0x24) != *(int *)(*(undefined8 **)(param_2 + 0xa0) + 1))
  {
                    // WARNING: Could not recover jumptable at 0x00128523. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(param_2 + 0x78))(param_2);
    return;
  }
  FUN_001284a0(*(long *)(param_1 + 0x18),**(undefined8 **)(param_2 + 0xa0));
                    // WARNING: Could not recover jumptable at 0x00128538. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_2 + 0x78))(param_2);
  return;
}



void FUN_00128540(long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (lVar1 == 0) {
    return;
  }
  lVar2 = *(long *)(lVar1 + 0xa0);
  FUN_001284a0(*(undefined8 *)(*(long *)(lVar1 + 0x88) + 0x18),param_1[1]);
  if ((*(byte *)((long)param_1 + 0x14) & 0x20) != 0) {
    *(undefined4 *)(lVar2 + 8) = 0xffffffff;
    return;
  }
  if (*(int *)(param_1 + 3) != 0) {
    (**(code **)(*param_1 + 0x78))(*param_1);
  }
  *param_1 = 0;
  return;
}



void FUN_001285b0(long param_1,undefined8 param_2,int param_3)

{
  long lVar1;
  int *piVar2;
  undefined8 *puVar3;
  long lVar4;
  
  piVar2 = (int *)malloc((long)*(int *)(&DAT_00136200 + (ulong)(param_3 - 1) * 4) + 0x38);
  if (piVar2 != (int *)0x0) {
    *(undefined8 *)(piVar2 + 2) = param_2;
    *(int **)(piVar2 + 6) = piVar2 + 0xe;
    *(undefined2 *)(piVar2 + 4) = 0xffff;
    lVar1 = *(long *)(param_1 + 0xb0);
    piVar2[8] = 0x51;
    *piVar2 = param_3;
    piVar2[10] = 0;
    piVar2[0xb] = 0;
    piVar2[0xc] = 0;
    piVar2[0xd] = 0;
    if (lVar1 == 0) {
      puVar3 = (undefined8 *)(param_1 + 0xb0);
    }
    else {
      do {
        lVar4 = lVar1;
        lVar1 = *(long *)(lVar4 + 0x30);
      } while (lVar1 != 0);
      puVar3 = (undefined8 *)(lVar4 + 0x30);
    }
    *puVar3 = piVar2;
  }
  return;
}



undefined8 FUN_00128640(undefined8 param_1,int *param_2,long *param_3)

{
  long *plVar1;
  int iVar2;
  ushort uVar3;
  uint uVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  byte *pbVar8;
  int iVar9;
  char *pcVar10;
  void *__dest;
  ulong *puVar11;
  byte *pbVar12;
  int iVar13;
  ulong uVar14;
  ulong uVar15;
  undefined *puVar16;
  long lVar17;
  undefined8 uVar18;
  long lVar19;
  ulong __n;
  void *pvVar20;
  long in_FS_OFFSET;
  int local_44;
  long local_40;
  
  lVar5 = *param_3;
  lVar6 = *(long *)(lVar5 + 0xa0);
  lVar7 = *(long *)(lVar5 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar10 = (char *)FUN_001283e0(param_1,&local_44);
  if (pcVar10 == (char *)0x0) {
    uVar18 = 0x51;
    if (local_44 == 0) goto LAB_00128861;
LAB_0012895a:
    uVar18 = 0x50;
  }
  else if (*pcVar10 == '\x01') {
    uVar18 = 0x51;
    if (local_44 == 0) goto LAB_00128861;
    uVar18 = 0x50;
    _fs_done_read(param_1,*(int *)(pcVar10 + 4) * 4);
  }
  else {
    uVar4 = *(uint *)(pcVar10 + 0xc);
    uVar15 = (ulong)uVar4;
    pbVar12 = (byte *)0x0;
    if (*param_2 == 2) {
      iVar2 = *(int *)(param_3 + 1);
      pbVar8 = (byte *)param_3[2];
      pbVar12 = pbVar8;
      if (iVar2 == 0) goto LAB_001286d5;
      uVar3 = *(ushort *)(lVar5 + 8);
      pbVar12 = pbVar8 + 4;
      iVar13 = ((uint)*(ushort *)(lVar5 + 10) - (uint)uVar3) + 1;
      uVar14 = (ulong)(int)((((uint)*pbVar8 - (uint)*(ushort *)(lVar5 + 0xc)) * iVar13 +
                            (uint)pbVar8[1]) - (uint)uVar3);
      uVar15 = (ulong)(int)((((uint)pbVar8[2] - (uint)*(ushort *)(lVar5 + 0xc)) * iVar13 +
                            (uint)pbVar8[3]) - (uint)uVar3);
    }
    else {
LAB_001286d5:
      iVar2 = 0;
      uVar14 = 0;
    }
    __dest = (void *)fs_alloc_glyphs(lVar5,*(undefined4 *)(pcVar10 + 0x10));
    if (__dest == (void *)0x0) goto LAB_0012895a;
    iVar13 = *param_2;
    if (*(int *)(pcVar10 + 0xc) != 0) {
      lVar19 = 0;
      do {
        while( true ) {
          lVar17 = uVar14 * 0x18;
          puVar11 = (ulong *)(*(long *)(lVar7 + 8) + lVar17);
          if ((iVar13 != 1) && ((undefined1 *)puVar11[2] != &_fs_glyph_requested)) break;
          pvVar20 = __dest;
          if (((*puVar11 & 0xffff0000ffffffff) != 0) ||
             ((*(short *)(puVar11 + 1) != 0 ||
              (puVar16 = (undefined *)0x0, *(short *)((long)puVar11 + 4) != 0)))) {
            puVar16 = &DAT_0013fcf4;
            __n = *(ulong *)(pcVar10 + lVar19 * 8 + 0x14) >> 0x20;
            if (__n != 0) {
              pvVar20 = (void *)(__n + (long)__dest);
              puVar16 = (undefined *)
                        memcpy(__dest,pcVar10 + (ulong)(uVar4 * 8) + 0x14 +
                                                (*(ulong *)(pcVar10 + lVar19 * 8 + 0x14) &
                                                0xffffffff),__n);
              puVar11 = (ulong *)(lVar17 + *(long *)(lVar7 + 8));
            }
          }
          if ((undefined1 *)puVar11[2] == &_fs_glyph_requested) {
            plVar1 = (long *)(lVar6 + 0x10);
            *plVar1 = *plVar1 + -1;
            puVar11 = (ulong *)(*(long *)(lVar7 + 8) + lVar17);
          }
          puVar11[2] = (ulong)puVar16;
          iVar13 = *param_2;
          __dest = pvVar20;
          if (uVar15 != uVar14) goto LAB_00128753;
LAB_001287c3:
          iVar2 = iVar2 + -1;
          if (iVar2 == 0) goto LAB_00128822;
          uVar3 = *(ushort *)(lVar5 + 8);
          lVar19 = lVar19 + 1;
          iVar9 = ((uint)*(ushort *)(lVar5 + 10) - (uint)uVar3) + 1;
          uVar14 = (ulong)(int)((((uint)*pbVar12 - (uint)*(ushort *)(lVar5 + 0xc)) * iVar9 +
                                (uint)pbVar12[1]) - (uint)uVar3);
          uVar15 = (ulong)(int)(((uint)pbVar12[3] +
                                iVar9 * ((uint)pbVar12[2] - (uint)*(ushort *)(lVar5 + 0xc))) -
                               (uint)uVar3);
          pbVar12 = pbVar12 + 4;
          if (*(uint *)(pcVar10 + 0xc) <= (uint)lVar19) goto LAB_00128822;
        }
        if (uVar15 == uVar14) goto LAB_001287c3;
LAB_00128753:
        uVar14 = uVar14 + 1;
        lVar19 = lVar19 + 1;
      } while ((uint)lVar19 < *(uint *)(pcVar10 + 0xc));
    }
LAB_00128822:
    uVar18 = 0x55;
    if (iVar13 == 1) {
      *(undefined8 *)(lVar6 + 0x10) = 0;
      *(undefined4 *)(param_3 + 2) = 4;
    }
  }
  _fs_done_read(param_1,*(int *)(pcVar10 + 4) << 2);
LAB_00128861:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar18;
}



void FUN_001289d0(long param_1,long param_2)

{
  int iVar1;
  long *plVar2;
  int iVar3;
  undefined4 uVar4;
  long *plVar5;
  long *plVar6;
  long lVar7;
  long in_FS_OFFSET;
  uint local_54;
  undefined4 *local_50;
  undefined local_44;
  char local_43;
  undefined2 local_42;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  long local_30;
  
  plVar2 = *(long **)(param_1 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_34 = 0;
  if (plVar2 != (long *)0x0) {
    plVar5 = (long *)(param_1 + 0x40);
    plVar6 = plVar2;
    do {
      if (*plVar6 == param_2) {
        if ((long *)(param_1 + 0x40) != plVar5) {
          *plVar5 = plVar6[1];
          plVar6[1] = *(long *)(param_1 + 0x40);
          *(long **)(param_1 + 0x40) = plVar6;
        }
        iVar1 = *(int *)(plVar6 + 3);
        iVar3 = client_auth_generation(param_2);
        if (iVar1 == iVar3) goto LAB_00128b0a;
        lVar7 = plVar6[2];
        *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
        local_38 = (undefined4)lVar7;
        local_3c = 0x20009;
        _fs_write(param_1,&local_3c,8);
        goto LAB_00128a85;
      }
      plVar5 = plVar6 + 1;
      plVar6 = (long *)plVar6[1];
    } while (plVar6 != (long *)0x0);
  }
  plVar6 = (long *)malloc(0x20);
  if (plVar6 != (long *)0x0) {
    *plVar6 = param_2;
    plVar6[1] = (long)plVar2;
    *(long **)(param_1 + 0x40) = plVar6;
    lVar7 = GetNewFontClientID();
    plVar6[2] = lVar7;
LAB_00128a85:
    local_44 = 8;
    local_43 = set_font_authorizations(&local_50,&local_54,param_2);
    if (local_43 == '\0') {
      local_54 = 4;
      local_50 = &local_34;
      local_42 = 3;
    }
    else {
      local_54 = local_54 + 3 & 0xfffffffc;
      local_42 = (undefined2)((long)(int)local_54 + 8U >> 2);
    }
    lVar7 = plVar6[2];
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_40 = (undefined4)lVar7;
    _fs_write(param_1,&local_44,8);
    _fs_write(param_1,local_50,(long)(int)local_54);
    *(undefined8 *)(param_1 + 0x48) = 0;
    uVar4 = client_auth_generation(param_2);
    *(undefined4 *)(plVar6 + 3) = uVar4;
LAB_00128b0a:
    lVar7 = plVar6[2];
    if (*(long *)(param_1 + 0x48) != lVar7) {
      *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
      local_3c = 0x2000a;
      local_38 = (undefined4)lVar7;
      _fs_write(param_1,&local_3c,8);
      *(long *)(param_1 + 0x48) = plVar6[2];
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void _fs_mark_block(long param_1,uint param_2)

{
  *(uint *)(param_1 + 0x98) = *(uint *)(param_1 + 0x98) | param_2;
  DAT_0013fcf8 = DAT_0013fcf8 | param_2;
  return;
}



void FUN_00128be0(long param_1)

{
  int iVar1;
  
  _fs_mark_block(param_1,8);
  iVar1 = GetTimeInMillis();
  *(int *)(param_1 + 0x9c) = iVar1 + 30000;
  return;
}



void FUN_00128c00(long param_1)

{
  if ((*(byte *)(param_1 + 0x98) & 8) != 0) {
    _fs_flush();
    return;
  }
  FUN_00128be0();
  _fs_flush(param_1);
  return;
}



undefined4 FUN_00128c30(undefined8 param_1,long param_2,int param_3,long param_4)

{
  undefined uVar1;
  undefined uVar2;
  undefined uVar3;
  undefined uVar4;
  long lVar5;
  long *plVar6;
  ulong uVar7;
  undefined4 uVar8;
  long lVar9;
  undefined *puVar10;
  ulong uVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined local_158;
  undefined local_157;
  short local_156;
  undefined4 local_154;
  uint local_150;
  int local_14c;
  undefined local_148 [264];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = *(long *)(*(long *)(param_2 + 0x88) + 0x18);
  uVar8 = 0x57;
  if ((*(byte *)(lVar5 + 0x98) & 0x10) == 0) {
    lVar9 = FUN_001285b0(lVar5,param_1,2);
    if (lVar9 == 0) {
      uVar8 = 0x50;
    }
    else {
      plVar6 = *(long **)(lVar9 + 0x18);
      *plVar6 = param_2;
      *(int *)(plVar6 + 1) = param_3;
      plVar6[2] = param_4;
      plVar6[3] = 0;
      if ((*(uint *)(lVar5 + 0x98) & 0x44) == 0) {
        local_158 = 0x14;
        local_157 = 1;
        local_154 = (undefined4)**(undefined8 **)(param_2 + 0xa0);
        local_150 = *(uint *)(param_2 + 100) & 0xfffffff3 | 8;
        if ((*(byte *)(param_2 + 0x12) & 2) == 0) {
          local_150 = *(uint *)(param_2 + 100);
        }
        *(int *)(lVar5 + 0x10) = *(int *)(lVar5 + 0x10) + 1;
        local_156 = (short)param_3 + 4;
        local_14c = param_3 * 2;
        _fs_write(lVar5,&local_158,0x10);
        *(short *)(lVar9 + 0x10) = (short)*(undefined4 *)(lVar5 + 0x10);
        if ((param_3 != 0) && (0 < param_3)) {
          uVar12 = (ulong)(param_3 - 1) + 2;
          puVar10 = local_148;
          uVar7 = 1;
          do {
            while( true ) {
              uVar11 = uVar7;
              uVar1 = *(undefined *)(param_4 + -3 + uVar11 * 4);
              uVar2 = *(undefined *)(param_4 + -4 + uVar11 * 4);
              uVar3 = *(undefined *)(param_4 + -1 + uVar11 * 4);
              uVar4 = *(undefined *)(param_4 + -2 + uVar11 * 4);
              if (*(int *)(lVar5 + 0x30) < 2) break;
              *puVar10 = uVar2;
              puVar10[1] = uVar1;
              puVar10[2] = uVar4;
              puVar10[3] = uVar3;
              if ((uVar11 & 0x3f) != 0) goto LAB_00128d8e;
LAB_00128dcd:
              _fs_write(lVar5,local_148,0x100);
              puVar10 = local_148;
              uVar7 = uVar11 + 1;
              if (uVar12 == uVar11 + 1) goto LAB_00128de9;
            }
            *puVar10 = uVar1;
            puVar10[1] = uVar2;
            puVar10[2] = uVar3;
            puVar10[3] = uVar4;
            if ((uVar11 & 0x3f) == 0) goto LAB_00128dcd;
LAB_00128d8e:
            puVar10 = puVar10 + 4;
            uVar7 = uVar11 + 1;
          } while (uVar12 != uVar11 + 1);
LAB_00128de9:
          if ((uVar11 & 0x3f) != 0) {
            _fs_write(lVar5,local_148,((uint)uVar11 & 0x3f) * 4);
          }
        }
        FUN_00128c00(lVar5);
        uVar8 = 0x54;
      }
      else {
        uVar8 = 0x54;
        if ((*(uint *)(lVar5 + 0x98) & 8) == 0) {
          FUN_00128be0(lVar5);
          uVar8 = 0x54;
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
FUN_00128e60(undefined8 param_1,long param_2,undefined8 param_3,int param_4,undefined4 param_5)

{
  long lVar1;
  undefined8 *puVar2;
  undefined4 uVar3;
  long lVar4;
  ulong uVar5;
  undefined8 *puVar6;
  long in_FS_OFFSET;
  byte bVar7;
  undefined2 local_4c;
  undefined2 local_4a;
  undefined4 local_48;
  undefined2 local_44;
  long local_40;
  
  bVar7 = 0;
  lVar1 = *(long *)(param_2 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = 0x53;
  if ((*(byte *)(lVar1 + 0x98) & 0x10) == 0) {
    lVar4 = FUN_001285b0(lVar1,param_1,4);
    uVar3 = 0x50;
    if (lVar4 != 0) {
      puVar2 = *(undefined8 **)(lVar4 + 0x18);
      *puVar2 = 0;
      puVar2[0x2c] = 0;
      puVar6 = (undefined8 *)((ulong)(puVar2 + 1) & 0xfffffffffffffff8);
      for (uVar5 = (ulong)(((int)puVar2 -
                           (int)(undefined8 *)((ulong)(puVar2 + 1) & 0xfffffffffffffff8)) + 0x168U
                          >> 3); uVar5 != 0; uVar5 = uVar5 - 1) {
        *puVar6 = 0;
        puVar6 = puVar6 + (ulong)bVar7 * -2 + 1;
      }
      *(undefined4 *)puVar2 = 0;
      if ((*(uint *)(lVar1 + 0x98) & 0x44) == 0) {
        FUN_001289d0(lVar1,param_1);
        FUN_00127fb0(lVar1);
        *(int *)(lVar1 + 0x10) = *(int *)(lVar1 + 0x10) + 1;
        local_4c = 0xe;
        local_4a = (undefined2)(param_4 + 0xf >> 2);
        local_48 = param_5;
        local_44 = (short)param_4;
        _fs_write(lVar1,&local_4c,0xc);
        _fs_write_pad(lVar1,param_3,(long)param_4);
        *(short *)(lVar4 + 0x10) = (short)*(undefined4 *)(lVar1 + 0x10);
        FUN_00128c00(lVar1);
        uVar3 = 0x55;
      }
      else {
        uVar3 = 0x54;
        if ((*(uint *)(lVar1 + 0x98) & 8) == 0) {
          FUN_00128be0(lVar1);
          uVar3 = 0x54;
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void _fs_unmark_block(long param_1,uint param_2)

{
  long *plVar1;
  
  plVar1 = DAT_0013fd00;
  if ((*(uint *)(param_1 + 0x98) & param_2) != 0) {
    DAT_0013fcf8 = 0;
    *(uint *)(param_1 + 0x98) = ~param_2 & *(uint *)(param_1 + 0x98);
    if (plVar1 != (long *)0x0) {
      DAT_0013fcf8 = 0;
      do {
        DAT_0013fcf8 = DAT_0013fcf8 | *(uint *)(plVar1 + 0x13);
        plVar1 = (long *)*plVar1;
      } while (plVar1 != (long *)0x0);
    }
  }
  return;
}



void FUN_00129020(long param_1)

{
  byte bVar1;
  long lVar2;
  
  _fs_unmark_block(param_1,0x27);
  if (*(long *)(param_1 + 0xb8) != 0) {
    _FontTransClose();
    *(undefined8 *)(param_1 + 0xb8) = 0;
    _fs_io_reinit(param_1);
  }
  if (-1 < *(int *)(param_1 + 8)) {
    lVar2 = __fdelt_chk();
    bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x1f);
    bVar1 = ((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f;
    (&_fs_fd_mask)[lVar2] =
         (&_fs_fd_mask)[lVar2] & (-2L << bVar1 | 0xfffffffffffffffeU >> 0x40 - bVar1);
    *(undefined4 *)(param_1 + 8) = 0xffffffff;
  }
  *(undefined4 *)(param_1 + 0xc) = 0;
  return;
}



ulong FUN_001290a0(long param_1)

{
  short *psVar1;
  byte bVar2;
  uint uVar3;
  short *psVar4;
  int iVar5;
  ulong uVar6;
  undefined8 uVar7;
  char *pcVar8;
  undefined8 *puVar9;
  long lVar10;
  ulong uVar11;
  undefined8 *puVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  int iVar15;
  short *psVar16;
  long in_FS_OFFSET;
  byte bVar17;
  undefined local_50;
  undefined uStack_4f;
  undefined2 uStack_4e;
  undefined4 uStack_4c;
  undefined2 uStack_48;
  undefined2 local_46;
  long local_40;
  
  bVar17 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar5 = *(int *)(param_1 + 0xc);
  do {
    switch(iVar5) {
    case 0:
      if (*(int *)(param_1 + 0x2c) == 0) {
        uVar7 = *(undefined8 *)(param_1 + 0x18);
      }
      else {
        uVar7 = *(undefined8 *)
                 ((long)*(int *)(param_1 + 0x2c) * 0x10 + *(long *)(param_1 + 0x38) + -0x10);
      }
      uVar7 = _fs_connect(uVar7);
      *(undefined8 *)(param_1 + 0xb8) = uVar7;
      iVar5 = GetTimeInMillis();
      *(int *)(param_1 + 0xa4) = iVar5 + 5000;
      uVar3 = CONCAT22(uStack_4e,CONCAT11(uStack_4f,local_50));
      uVar6 = (ulong)uVar3;
      if (uVar3 == 0) {
        *(undefined4 *)(param_1 + 0xc) = 1;
LAB_00129350:
        iVar5 = GetTimeInMillis();
        if (iVar5 - *(int *)(param_1 + 0xa4) < 0) {
          uVar6 = 0;
          goto LAB_001292c4;
        }
      }
      else {
LAB_00129103:
        if ((int)uVar6 == 1) {
          iVar5 = *(int *)(param_1 + 0xc);
          goto joined_r0x0012940f;
        }
LAB_001292bf:
        if ((int)uVar6 != -1) goto LAB_001292c4;
      }
      break;
    case 1:
      uVar6 = _fs_poll_connect(*(undefined8 *)(param_1 + 0xb8),0);
      if ((int)uVar6 != 1) {
LAB_001292b7:
        if ((int)uVar6 != 0) goto LAB_001292bf;
        goto LAB_00129350;
      }
      iVar5 = _FontTransGetConnectionNumber(*(undefined8 *)(param_1 + 0xb8));
      *(int *)(param_1 + 8) = iVar5;
      lVar10 = __fdelt_chk((long)iVar5);
      (&_fs_fd_mask)[lVar10] =
           (&_fs_fd_mask)[lVar10] | 1L << ((byte)(*(int *)(param_1 + 8) % 0x40) & 0x3f);
      iVar5 = *(int *)(param_1 + 0xc);
    default:
joined_r0x0012940f:
      if (iVar5 < 6) {
LAB_001292fb:
        iVar5 = iVar5 + 1;
        *(int *)(param_1 + 0xc) = iVar5;
      }
      goto LAB_00129275;
    case 2:
      local_50 = 0x6c;
      uStack_4f = 0;
      uStack_4e = 2;
      uStack_4c = 0;
      iVar5 = _fs_write(param_1,&local_50,8);
      goto joined_r0x001293ae;
    case 3:
      uVar6 = _fs_start_read(param_1,0xc,&local_50);
      if ((int)uVar6 != 1) goto LAB_001292b7;
      psVar4 = (short *)CONCAT44(uStack_4c,CONCAT22(uStack_4e,CONCAT11(uStack_4f,local_50)));
      if ((ushort)psVar4[1] < 3) {
        iVar5 = (uint)(ushort)psVar4[5] * 4 + 0xc + (uint)(ushort)psVar4[4] * 4;
        if (*psVar4 == 0) {
          uVar6 = _fs_start_read(param_1,iVar5 + 0xc,&local_50);
          if ((int)uVar6 != 1) goto LAB_001292b7;
          iVar5 = iVar5 + *(int *)(CONCAT44(uStack_4c,
                                            CONCAT22(uStack_4e,CONCAT11(uStack_4f,local_50))) +
                                  (long)iVar5) * 4;
        }
        uVar6 = _fs_start_read(param_1,(long)iVar5,&local_50);
        if ((int)uVar6 != 1) goto LAB_001292b7;
        psVar4 = (short *)CONCAT44(uStack_4c,CONCAT22(uStack_4e,CONCAT11(uStack_4f,local_50)));
        if (psVar4 != (short *)0x0) {
          *(undefined4 *)(param_1 + 0x10) = 0;
          *(uint *)(param_1 + 0x30) = (uint)(ushort)psVar4[1];
          if (*(int *)(param_1 + 0x2c) == 0) {
            if (*(void **)(param_1 + 0x38) != (void *)0x0) {
              free(*(void **)(param_1 + 0x38));
              *(undefined8 *)(param_1 + 0x38) = 0;
              *(undefined4 *)(param_1 + 0x28) = 0;
            }
            bVar2 = *(byte *)(psVar4 + 3);
            if (bVar2 != 0) {
              puVar9 = (undefined8 *)
                       malloc((long)(int)((uint)(ushort)psVar4[4] << 2) + (ulong)bVar2 * 0x10);
              if (puVar9 != (undefined8 *)0x0) {
                psVar16 = psVar4 + 6;
                pcVar8 = (char *)(puVar9 + (ulong)bVar2 * 2);
                iVar15 = 0;
                puVar14 = puVar9;
                do {
                  psVar1 = psVar16 + 1;
                  *(int *)(puVar14 + 1) = (int)*(char *)psVar16;
                  bVar2 = *(byte *)((long)psVar16 + 1);
                  uVar6 = (ulong)(char)bVar2;
                  *puVar14 = pcVar8;
                  if (uVar6 < 8) {
                    if ((uVar6 & 4) == 0) {
                      if ((uVar6 != 0) && (*pcVar8 = *(char *)psVar1, (bVar2 & 2) != 0)) {
                        *(undefined2 *)(pcVar8 + (uVar6 - 2)) =
                             *(undefined2 *)((long)psVar16 + uVar6);
                      }
                    }
                    else {
                      *(undefined4 *)pcVar8 = *(undefined4 *)psVar1;
                      *(undefined4 *)(pcVar8 + (uVar6 - 4)) =
                           *(undefined4 *)((long)psVar16 + (uVar6 - 2));
                    }
                  }
                  else {
                    *(undefined8 *)pcVar8 = *(undefined8 *)(psVar16 + 1);
                    *(undefined8 *)(pcVar8 + (uVar6 - 8)) =
                         *(undefined8 *)((long)psVar16 + (uVar6 - 6));
                    lVar10 = (long)pcVar8 - (long)((ulong)(pcVar8 + 8) & 0xfffffffffffffff8);
                    puVar12 = (undefined8 *)((long)psVar1 - lVar10);
                    puVar13 = (undefined8 *)((ulong)(pcVar8 + 8) & 0xfffffffffffffff8);
                    for (uVar11 = lVar10 + uVar6 >> 3; uVar11 != 0; uVar11 = uVar11 - 1) {
                      *puVar13 = *puVar12;
                      puVar12 = puVar12 + (ulong)bVar17 * -2 + 1;
                      puVar13 = puVar13 + (ulong)bVar17 * -2 + 1;
                    }
                  }
                  pcVar8[uVar6] = '\0';
                  pcVar8 = pcVar8 + uVar6 + 1;
                  iVar15 = iVar15 + 1;
                  lVar10 = _fs_pad_length((long)((char)bVar2 + 2));
                  psVar16 = (short *)((long)psVar16 + lVar10);
                  puVar14 = puVar14 + 2;
                } while (iVar15 < (int)(uint)*(byte *)(psVar4 + 3));
                *(uint *)(param_1 + 0x28) = (uint)*(byte *)(psVar4 + 3);
                *(undefined8 **)(param_1 + 0x38) = puVar9;
              }
            }
          }
          _fs_done_read(param_1,(long)iVar5);
          if (*psVar4 == 0) {
            iVar5 = *(int *)(param_1 + 0xc);
            goto joined_r0x0012940f;
          }
        }
      }
      break;
    case 4:
      uVar6 = FUN_001280c0(param_1);
      if (*(int *)(param_1 + 0x20) == 0) {
LAB_001290fb:
        if ((int)uVar6 != 0) goto LAB_00129103;
        goto LAB_00129350;
      }
      *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
      local_50 = 3;
      uStack_4e = 3;
      uStack_4c = 0;
      uStack_48 = 0;
      local_46 = 0;
      iVar5 = _fs_write(param_1,&local_50,0xc);
joined_r0x001293ae:
      if (iVar5 == 1) {
        iVar5 = GetTimeInMillis();
        *(int *)(param_1 + 0xa4) = iVar5 + 30000;
        iVar5 = *(int *)(param_1 + 0xc);
        goto joined_r0x0012940f;
      }
      break;
    case 5:
      if (*(int *)(param_1 + 0x20) != 0) {
        pcVar8 = (char *)FUN_001283e0(param_1,&local_50);
        if (pcVar8 == (char *)0x0) {
          uVar6 = (ulong)CONCAT22(uStack_4e,CONCAT11(uStack_4f,local_50));
          goto LAB_001290fb;
        }
        if ((*pcVar8 == '\x01') && (pcVar8[0xc] == '\x04')) {
          _fs_done_read(param_1,*(int *)(pcVar8 + 4) * 4);
          break;
        }
        _fs_done_read(param_1,*(int *)(pcVar8 + 4) * 4);
        iVar5 = *(int *)(param_1 + 0xc);
        goto joined_r0x0012940f;
      }
      goto LAB_001292fb;
    }
    FUN_00129020(param_1);
    if (*(int *)(param_1 + 0x28) <= *(int *)(param_1 + 0x2c)) {
      *(undefined4 *)(param_1 + 0x2c) = 0;
      uVar6 = 0xffffffff;
      goto LAB_001292c4;
    }
    *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x2c) + 1;
    iVar5 = *(int *)(param_1 + 0xc);
LAB_00129275:
  } while (iVar5 != 6);
  DAT_0013fcf0 = DAT_0013fcf0 + 1;
  *(int *)(param_1 + 0x24) = DAT_0013fcf0;
  uVar6 = 1;
LAB_001292c4:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void FUN_001295b0(void *param_1)

{
  FUN_00129020();
  _fs_io_fini(param_1);
  if (*(void **)((long)param_1 + 0x38) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x38));
  }
  free(param_1);
  return;
}



void FUN_001295e0(long param_1,int *param_2)

{
  int *piVar1;
  long lVar2;
  int iVar3;
  int *piVar4;
  
  piVar1 = *(int **)(param_1 + 0xb0);
  if (piVar1 == (int *)0x0) {
LAB_00129619:
    iVar3 = *param_2;
  }
  else {
    if (param_2 == piVar1) {
      piVar4 = (int *)(param_1 + 0xb0);
    }
    else {
      do {
        piVar4 = piVar1;
        piVar1 = *(int **)(piVar4 + 0xc);
        if (piVar1 == (int *)0x0) goto LAB_00129619;
      } while (param_2 != piVar1);
      piVar4 = piVar4 + 0xc;
    }
    *(undefined8 *)piVar4 = *(undefined8 *)(param_2 + 0xc);
    iVar3 = *param_2;
  }
  if ((iVar3 == 2) && (*(int *)(*(long *)(param_2 + 6) + 8) != 0)) {
    free(*(void **)(*(long *)(param_2 + 6) + 0x10));
  }
  free(param_2);
  lVar2 = *(long *)(param_1 + 0xb0);
  while( true ) {
    if (lVar2 == 0) {
      _fs_unmark_block(param_1,8);
      return;
    }
    if (*(int *)(lVar2 + 0x20) == 0x51) break;
    lVar2 = *(long *)(lVar2 + 0x30);
  }
  iVar3 = GetTimeInMillis();
  *(int *)(param_1 + 0x9c) = iVar3 + 30000;
  _fs_mark_block(param_1,8);
  return;
}



void FUN_001296c0(long param_1,int *param_2)

{
  int iVar1;
  undefined8 *puVar2;
  int *piVar3;
  long lVar4;
  
  iVar1 = *param_2;
  if (iVar1 == 2) {
    puVar2 = *(undefined8 **)(param_2 + 6);
    _fs_clean_aborted_loadglyphs(*puVar2,*(undefined4 *)(puVar2 + 1),puVar2[2]);
    FUN_00127d80(puVar2 + 3);
    FUN_001295e0(param_1,param_2);
    return;
  }
  if (iVar1 != 4) {
    if (iVar1 != 1) {
      FUN_001295e0(param_1,param_2);
      return;
    }
    lVar4 = *(long *)(param_2 + 6);
    FUN_00128540(lVar4);
    FUN_00127d80(lVar4 + 0x28);
    FUN_001295e0(param_1,param_2);
    return;
  }
  piVar3 = *(int **)(param_2 + 6);
  if (*piVar3 == 1) {
    lVar4 = __fdelt_chk((long)*(int *)(param_1 + 8));
    (&_fs_fd_mask)[lVar4] =
         (&_fs_fd_mask)[lVar4] | 1L << ((byte)(*(int *)(param_1 + 8) % 0x40) & 0x3f);
  }
  FUN_0010a1b0(piVar3 + 2);
  FUN_001295e0(param_1,param_2);
  return;
}



void FUN_001297b0(long param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long *__ptr;
  long lVar3;
  long *plVar4;
  long in_FS_OFFSET;
  undefined4 local_38;
  undefined4 local_34;
  long local_30;
  
  lVar1 = *(long *)(param_2 + 0x18);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = *(long **)(lVar1 + 0x40);
  if (__ptr != (long *)0x0) {
    plVar4 = (long *)(lVar1 + 0x40);
    do {
      if (*__ptr == param_1) {
        lVar3 = __ptr[2];
        *(int *)(lVar1 + 0x10) = *(int *)(lVar1 + 0x10) + 1;
        local_38 = 0x20009;
        local_34 = (undefined4)lVar3;
        _fs_write(lVar1,&local_38,8);
        *plVar4 = __ptr[1];
        free(__ptr);
        break;
      }
      plVar4 = __ptr + 1;
      __ptr = (long *)__ptr[1];
    } while (__ptr != (long *)0x0);
  }
  lVar3 = *(long *)(lVar1 + 0xb0);
  do {
    if (lVar3 == 0) {
LAB_00129870:
      if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    if (*(long *)(lVar3 + 8) == param_1) {
      lVar2 = *(long *)(lVar3 + 0x28);
      if (lVar2 != 0) {
        *(undefined8 *)(lVar3 + 8) = *(undefined8 *)(lVar2 + 8);
        *(undefined8 *)(lVar3 + 0x28) = *(undefined8 *)(lVar2 + 0x28);
        lVar3 = lVar2;
      }
      FUN_001296c0(lVar1,lVar3);
      goto LAB_00129870;
    }
    lVar3 = *(long *)(lVar3 + 0x30);
  } while( true );
}



int FUN_001298a0(long param_1,long param_2,undefined8 *param_3,int *param_4,undefined8 *param_5,
                int *param_6)

{
  long lVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  long lVar6;
  
  lVar1 = *(long *)(param_2 + 0x18);
  piVar2 = *(int **)(lVar1 + 0xb0);
  while( true ) {
    if (piVar2 == (int *)0x0) {
      return 0x53;
    }
    if ((*piVar2 == 4) && (*(long *)(piVar2 + 2) == param_1)) break;
    piVar2 = *(int **)(piVar2 + 0xc);
  }
  piVar3 = *(int **)(piVar2 + 6);
  iVar4 = 0x54;
  if (*piVar3 != 0) {
    *param_3 = piVar3 + 0x18;
    *param_4 = piVar3[1];
    *param_5 = piVar3 + 2;
    *param_6 = piVar3[0x58];
    lVar6 = __fdelt_chk((long)*(int *)(lVar1 + 8));
    (&_fs_fd_mask)[lVar6] =
         (&_fs_fd_mask)[lVar6] | 1L << ((byte)(*(int *)(lVar1 + 8) % 0x40) & 0x3f);
    iVar4 = FUN_00128360(lVar1);
    if (iVar4 == 0) {
      iVar5 = *piVar3;
      iVar4 = piVar2[8];
    }
    else {
      _fs_mark_block(lVar1,0x20);
      iVar5 = *piVar3;
      iVar4 = piVar2[8];
    }
    if (iVar5 == 1) {
      *piVar3 = 0;
      piVar2[8] = 0x51;
      iVar5 = GetTimeInMillis();
      *(int *)(lVar1 + 0x9c) = iVar5 + 30000;
      _fs_mark_block(lVar1,8);
      return iVar4;
    }
    if (iVar5 == 2) {
      FUN_001295e0(lVar1,piVar2);
      return iVar4;
    }
  }
  return iVar4;
}



int FUN_00129a10(long param_1,long param_2,undefined8 param_3,int param_4,undefined4 param_5,
                undefined8 param_6)

{
  long lVar1;
  int *piVar2;
  int iVar3;
  long lVar4;
  long in_FS_OFFSET;
  undefined2 local_4c;
  undefined2 local_4a;
  undefined4 local_48;
  undefined2 local_44;
  long local_40;
  
  lVar1 = *(long *)(param_2 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  piVar2 = *(int **)(lVar1 + 0xb0);
  do {
    if (piVar2 == (int *)0x0) {
      iVar3 = 0x53;
      if ((*(byte *)(lVar1 + 0x98) & 0x10) == 0) {
        lVar4 = FUN_001285b0(lVar1,param_1,3);
        if (lVar4 == 0) {
          iVar3 = 0x50;
        }
        else {
          **(undefined8 **)(lVar4 + 0x18) = param_6;
          if ((*(uint *)(lVar1 + 0x98) & 0x44) == 0) {
            FUN_001289d0(lVar1,param_1);
            FUN_00127fb0(lVar1);
            *(int *)(lVar1 + 0x10) = *(int *)(lVar1 + 0x10) + 1;
            local_4c = 0xd;
            local_4a = (undefined2)(param_4 + 0xf >> 2);
            local_48 = param_5;
            local_44 = (short)param_4;
            _fs_write(lVar1,&local_4c,0xc);
            _fs_write_pad(lVar1,param_3,(long)param_4);
            *(short *)(lVar4 + 0x10) = (short)*(undefined4 *)(lVar1 + 0x10);
            FUN_00128c00(lVar1);
            iVar3 = 0x54;
          }
          else {
            iVar3 = 0x54;
            if ((*(uint *)(lVar1 + 0x98) & 8) == 0) {
              FUN_00128be0(lVar1);
              iVar3 = 0x54;
            }
          }
        }
      }
LAB_00129a90:
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        return iVar3;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    if ((*piVar2 == 3) && (*(long *)(piVar2 + 2) == param_1)) {
      iVar3 = piVar2[8];
      if (iVar3 == 0x51) {
        iVar3 = 0x54;
      }
      else {
        FUN_001295e0(lVar1);
      }
      goto LAB_00129a90;
    }
    piVar2 = *(int **)(piVar2 + 0xc);
  } while( true );
}



void FUN_00129bc0(long param_1,long param_2)

{
  long lVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  undefined4 uVar6;
  long lVar7;
  undefined4 *puVar8;
  long *plVar9;
  undefined8 uVar10;
  long lVar11;
  bool bVar12;
  short sVar13;
  undefined2 uVar14;
  int iVar15;
  uint uVar16;
  uint uVar17;
  short *psVar18;
  char *pcVar19;
  byte *pbVar20;
  ulong *puVar21;
  void *pvVar22;
  long lVar23;
  long lVar24;
  short sVar25;
  ulong uVar26;
  ulong uVar27;
  short sVar28;
  long *plVar29;
  int *piVar30;
  undefined8 *puVar31;
  uint uVar32;
  char *pcVar33;
  long *plVar34;
  uint uVar35;
  undefined8 *puVar36;
  int *piVar37;
  ushort *puVar38;
  char *pcVar39;
  int *piVar40;
  ulong *puVar41;
  ulong *puVar42;
  long in_FS_OFFSET;
  byte bVar43;
  void *local_f0;
  undefined local_b0 [4];
  int local_ac;
  int local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_9c;
  undefined8 local_98;
  undefined4 local_90;
  long local_40;
  
  bVar43 = 0;
  lVar7 = *(long *)(param_1 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  psVar18 = (short *)FUN_001283e0(lVar7,local_b0);
  uVar10 = local_98;
  if (psVar18 == (short *)0x0) goto LAB_00129cc5;
  piVar30 = *(int **)(lVar7 + 0xb0);
  if (piVar30 != (int *)0x0) {
LAB_00129c2d:
    if (*(short *)(piVar30 + 4) != psVar18[1]) goto LAB_00129c20;
    iVar15 = *piVar30;
    if (iVar15 == 3) {
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      puVar31 = *(undefined8 **)(piVar30 + 6);
      pcVar19 = (char *)FUN_001283e0(uVar10,&local_98);
      if (pcVar19 == (char *)0x0) {
        if ((int)local_98 == 0) goto LAB_0012a290;
LAB_0012a26d:
        piVar30[8] = 0x50;
        iVar15 = 0x50;
      }
      else {
        if (*pcVar19 != '\x01') {
          pbVar20 = (byte *)(pcVar19 + 0x10);
          if (*(int *)(pcVar19 + 0xc) == 0) goto LAB_0012a2f4;
          uVar17 = 0;
          goto LAB_0012a19a;
        }
        if ((int)local_98 == 0) goto LAB_0012a290;
        iVar15 = 0x50;
        _fs_done_read(uVar10,*(int *)(pcVar19 + 4) << 2);
        piVar30[8] = 0x50;
      }
      goto LAB_00129c80;
    }
    if (3 < iVar15) {
      if (iVar15 != 4) goto LAB_0012a108;
      puVar8 = *(undefined4 **)(piVar30 + 6);
      lVar24 = *(long *)(param_1 + 0x18);
      FUN_0010a1b0(puVar8 + 2);
      pcVar19 = (char *)FUN_001283e0(lVar24,&local_98);
      if ((pcVar19 == (char *)0x0) || (*pcVar19 == '\x01')) {
        if ((int)local_98 != 0) {
          *puVar8 = 2;
          _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
          goto LAB_0012a26d;
        }
        goto LAB_0012a290;
      }
      bVar2 = pcVar19[1];
      uVar27 = (ulong)bVar2;
      if (bVar2 == 0) {
        *puVar8 = 2;
        iVar15 = 0x53;
        _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
        piVar30[8] = 0x53;
        goto LAB_00129c80;
      }
      piVar40 = (int *)(pcVar19 + 0x34);
      if (1 < *(int *)(lVar24 + 0x30)) {
        piVar37 = (int *)(pcVar19 + 0x3c);
        pcVar39 = (char *)((ulong)(uint)(*(int *)(pcVar19 + 0x34) * 0x14) + (long)piVar37);
        pcVar33 = pcVar39 + *(uint *)(pcVar19 + 0x38);
        goto LAB_00129d7f;
      }
      uVar17 = (uint)bVar2;
      uVar26 = (ulong)uVar17;
      if (uVar17 < 8) {
        if ((bVar2 & 4) == 0) {
          if ((uVar17 != 0) && (*(char *)(puVar8 + 0x18) = *(char *)piVar40, (bVar2 & 2) != 0)) {
            *(undefined2 *)((long)puVar8 + uVar26 + 0x5e) = *(undefined2 *)(pcVar19 + uVar26 + 0x32)
            ;
          }
        }
        else {
          puVar8[0x18] = *piVar40;
          *(undefined4 *)((long)puVar8 + uVar26 + 0x5c) = *(undefined4 *)(pcVar19 + uVar26 + 0x30);
        }
      }
      else {
        *(undefined8 *)(puVar8 + 0x18) = *(undefined8 *)(pcVar19 + 0x34);
        *(undefined8 *)((long)puVar8 + uVar27 + 0x58) = *(undefined8 *)(pcVar19 + uVar27 + 0x2c);
        lVar23 = (long)puVar8 + (0x60 - (long)((ulong)(puVar8 + 0x1a) & 0xfffffffffffffff8));
        puVar31 = (undefined8 *)((long)piVar40 - lVar23);
        puVar36 = (undefined8 *)((ulong)(puVar8 + 0x1a) & 0xfffffffffffffff8);
        for (uVar27 = (ulong)((int)lVar23 + uVar17 >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
          *puVar36 = *puVar31;
          puVar31 = puVar31 + (ulong)bVar43 * -2 + 1;
          puVar36 = puVar36 + (ulong)bVar43 * -2 + 1;
        }
      }
      lVar23 = _fs_pad_length(pcVar19[1]);
      piVar40 = (int *)((long)piVar40 + lVar23);
      piVar37 = piVar40 + 2;
      pcVar39 = (char *)((ulong)(uint)(*piVar40 * 0x14) + (long)piVar37);
      if (1 < *(int *)(lVar24 + 0x30)) {
        uVar27 = (ulong)(byte)pcVar19[1];
        pcVar33 = pcVar39 + (uint)piVar40[1];
LAB_00129d7f:
        uVar17 = (uint)uVar27;
        if (uVar17 < 8) {
          if ((uVar27 & 4) == 0) {
            if ((uVar17 != 0) && (*(char *)(puVar8 + 0x18) = *pcVar33, (uVar27 & 2) != 0)) {
              *(undefined2 *)((long)puVar8 + uVar27 + 0x5e) =
                   *(undefined2 *)(pcVar33 + (uVar27 - 2));
            }
          }
          else {
            puVar8[0x18] = *(undefined4 *)pcVar33;
            *(undefined4 *)((long)puVar8 + uVar27 + 0x5c) = *(undefined4 *)(pcVar33 + (uVar27 - 4));
          }
        }
        else {
          *(undefined8 *)(puVar8 + 0x18) = *(undefined8 *)pcVar33;
          *(undefined8 *)((long)puVar8 + uVar27 + 0x58) = *(undefined8 *)(pcVar33 + (uVar27 - 8));
          lVar23 = (long)puVar8 + (0x60 - (long)((ulong)(puVar8 + 0x1a) & 0xfffffffffffffff8));
          pcVar33 = pcVar33 + -lVar23;
          puVar31 = (undefined8 *)((ulong)(puVar8 + 0x1a) & 0xfffffffffffffff8);
          for (uVar27 = (ulong)(uVar17 + (int)lVar23 >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
            *puVar31 = *(undefined8 *)pcVar33;
            pcVar33 = pcVar33 + ((ulong)bVar43 * -2 + 1) * 8;
            puVar31 = puVar31 + (ulong)bVar43 * -2 + 1;
          }
        }
        _fs_pad_length(pcVar19[1]);
      }
      iVar15 = _fs_convert_lfwi_reply(lVar24,puVar8 + 2,pcVar19,piVar40,piVar37,pcVar39);
      if (iVar15 != 0x55) {
        *puVar8 = 2;
        _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
        piVar30[8] = iVar15;
        goto joined_r0x0012a110;
      }
      puVar8[1] = (uint)(byte)pcVar19[1];
      uVar6 = *(undefined4 *)(pcVar19 + 8);
      *puVar8 = 1;
      puVar8[0x58] = uVar6;
      _fs_unmark_block(lVar24,0x20);
      lVar23 = __fdelt_chk((long)*(int *)(lVar24 + 8));
      bVar43 = (byte)(*(int *)(lVar24 + 8) % 0x40) & 0x3f;
      (&_fs_fd_mask)[lVar23] =
           (&_fs_fd_mask)[lVar23] & (-2L << bVar43 | 0xfffffffffffffffeU >> 0x40 - bVar43);
      _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
      piVar30[8] = 0x55;
      goto LAB_00129c80;
    }
    if (iVar15 != 1) {
      if (iVar15 == 2) {
        iVar15 = FUN_00128640(*(undefined8 *)(param_1 + 0x18),piVar30,*(undefined8 *)(piVar30 + 6));
        piVar30[8] = iVar15;
      }
      else {
LAB_0012a108:
        iVar15 = piVar30[8];
      }
      goto joined_r0x0012a110;
    }
    plVar9 = *(long **)(piVar30 + 6);
    iVar15 = *(int *)(plVar9 + 2);
    if (iVar15 == 2) {
      lVar24 = *plVar9;
      lVar23 = *(long *)(param_1 + 0x18);
      lVar11 = *(long *)(lVar24 + 0xa0);
      plVar29 = *(long **)(lVar24 + 0x98);
      pcVar19 = (char *)FUN_001283e0(lVar23,&local_a8);
      if (pcVar19 == (char *)0x0) {
        if (local_a8 != 0) goto LAB_0012a2ce;
      }
      else {
        if (*pcVar19 != '\x01') {
          iVar15 = *(int *)(pcVar19 + 8);
          if (((*(byte *)(*plVar9 + 0x12) & 2) == 0) || (*(int *)(lVar23 + 0x30) < 2)) {
            pvVar22 = malloc((long)iVar15 * 0x18);
            if (pvVar22 == (void *)0x0) goto LAB_0012acb7;
            bVar12 = false;
            plVar29[1] = (long)pvVar22;
            local_f0 = pvVar22;
          }
          else {
            local_f0 = malloc((long)(iVar15 * 2) * 0x18);
            if (local_f0 == (void *)0x0) {
LAB_0012acb7:
              _fs_done_read(lVar23,*(int *)(pcVar19 + 4) << 2);
              goto LAB_0012accc;
            }
            plVar29[1] = (long)local_f0;
            pvVar22 = (void *)((long)local_f0 + (long)iVar15 * 0x18);
            bVar12 = true;
          }
          plVar29[2] = (long)pvVar22;
          *(undefined8 *)(lVar11 + 0x10) = 0;
          puVar41 = (ulong *)plVar29[2];
          if (iVar15 < 1) {
            _fs_done_read(lVar23,*(int *)(pcVar19 + 4) << 2);
          }
          else {
            puVar31 = (undefined8 *)((long)local_f0 + 0x10);
            lVar1 = (ulong)(iVar15 - 1) * 3 + 3;
            puVar42 = puVar41 + lVar1;
            pcVar39 = pcVar19;
            do {
              local_98 = *(undefined8 *)(pcVar39 + 0xc);
              local_90 = *(undefined4 *)(pcVar39 + 0x14);
              _fs_convert_char_info(&local_98,puVar41);
              if (*(short *)(lVar24 + 0x1e) < *(short *)((long)puVar41 + 6)) {
                ErrorF("fserve: warning: %s %s ascent (%d) > maxascent (%d)\n",
                       *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar11 + 0x20));
                *(short *)((long)puVar41 + 6) = *(short *)(lVar24 + 0x1e);
              }
              if (*(short *)(lVar24 + 0x20) < *(short *)(puVar41 + 1)) {
                ErrorF("fserve: warning: %s %s descent (%d) > maxdescent (%d)\n",
                       *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar11 + 0x20));
                *(short *)(puVar41 + 1) = *(short *)(lVar24 + 0x20);
              }
              if ((((*puVar41 & 0xffff0000ffffffff) == 0) && (*(short *)(puVar41 + 1) == 0)) &&
                 (*(short *)((long)puVar41 + 4) == 0)) {
                *puVar31 = 0;
              }
              else if ((bVar12) ||
                      ((*(short *)puVar41 != *(short *)((long)puVar41 + 2) &&
                       ((int)*(short *)((long)puVar41 + 6) + (int)*(short *)(puVar41 + 1) != 0)))) {
                *puVar31 = &_fs_glyph_undefined;
                *(long *)(lVar11 + 0x10) = *(long *)(lVar11 + 0x10) + 1;
              }
              else {
                *puVar31 = &DAT_0013fcf4;
              }
              puVar41 = puVar41 + 3;
              puVar31 = puVar31 + 3;
              pcVar39 = pcVar39 + 0xc;
            } while (puVar41 != puVar42);
            _fs_done_read(lVar23,*(int *)(pcVar19 + 4) << 2);
            if (bVar12) {
              puVar41 = (ulong *)plVar29[1];
              puVar42 = (ulong *)plVar29[2];
              puVar21 = puVar42 + lVar1;
              do {
                if ((((*puVar42 & 0xffff0000ffffffff) == 0) && (*(short *)(puVar42 + 1) == 0)) &&
                   (*(short *)((long)puVar42 + 4) == 0)) {
                  *puVar41 = *puVar42;
                  *(undefined4 *)(puVar41 + 1) = *(undefined4 *)(puVar42 + 1);
                  sVar13 = *(short *)((long)puVar41 + 6);
                }
                else {
                  uVar14 = 0;
                  if (*(short *)(lVar24 + 0x3c) < 1) {
                    uVar14 = *(undefined2 *)(lVar24 + 0x3c);
                  }
                  *(undefined2 *)puVar41 = uVar14;
                  sVar13 = *(short *)(lVar24 + 0x32);
                  if (*(short *)(lVar24 + 0x32) <= *(short *)(lVar24 + 0x34)) {
                    sVar13 = *(short *)(lVar24 + 0x34);
                  }
                  *(short *)((long)puVar41 + 2) = sVar13;
                  sVar13 = *(short *)(lVar24 + 0x48);
                  if (*(short *)(lVar24 + 0x48) <= *(short *)(lVar24 + 0x36)) {
                    sVar13 = *(short *)(lVar24 + 0x36);
                  }
                  *(short *)((long)puVar41 + 6) = sVar13;
                  sVar28 = *(short *)(lVar24 + 0x4a);
                  if (*(short *)(lVar24 + 0x4a) <= *(short *)(lVar24 + 0x38)) {
                    sVar28 = *(short *)(lVar24 + 0x38);
                  }
                  *(short *)(puVar41 + 1) = sVar28;
                  sVar28 = *(short *)(lVar24 + 0x32);
                  if (*(short *)(lVar24 + 0x32) <= *(short *)(lVar24 + 0x34)) {
                    sVar28 = *(short *)(lVar24 + 0x34);
                  }
                  sVar25 = 0;
                  if (*(short *)(lVar24 + 0x3c) < 1) {
                    sVar25 = *(short *)(lVar24 + 0x3c);
                  }
                  *(short *)((long)puVar41 + 4) = sVar28 - sVar25;
                  *(undefined2 *)((long)puVar41 + 10) = *(undefined2 *)((long)puVar42 + 10);
                }
                if (*(short *)(lVar24 + 0x1e) < sVar13) {
                  ErrorF("fserve: warning: %s %s ascent (%d) > maxascent (%d)\n",
                         *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar11 + 0x20));
                  *(undefined2 *)((long)puVar41 + 6) = *(undefined2 *)(lVar24 + 0x1e);
                }
                if (*(short *)(lVar24 + 0x20) < *(short *)(puVar41 + 1)) {
                  ErrorF("fserve: warning: %s %s descent (%d) > maxdescent (%d)\n",
                         *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar11 + 0x20));
                  *(undefined2 *)(puVar41 + 1) = *(undefined2 *)(lVar24 + 0x20);
                }
                puVar42 = puVar42 + 3;
                puVar41 = puVar41 + 3;
              } while (puVar42 != puVar21);
            }
          }
          lVar24 = *plVar9;
          uVar3 = *(ushort *)(lVar24 + 8);
          uVar4 = *(ushort *)(lVar24 + 10);
          uVar5 = *(ushort *)(lVar24 + 0x10);
          *plVar29 = 0;
          uVar17 = (uVar4 + 1) - (uint)uVar3;
          uVar4 = *(ushort *)(*plVar9 + 0xe);
          if (uVar4 == 0) {
            uVar16 = (uint)uVar5 - (uint)uVar3;
            if (uVar16 < uVar17) {
              *plVar29 = (long)((long)local_f0 + (ulong)uVar16 * 0x18);
            }
          }
          else {
            uVar32 = (uint)(byte)uVar5 - (uint)uVar3;
            uVar35 = (uint)*(ushort *)(*plVar9 + 0xc);
            uVar16 = (uVar5 >> 8) - uVar35;
            if ((uVar16 < (uVar4 - uVar35) + 1) && (uVar32 < uVar17)) {
              *plVar29 = (long)((long)local_f0 + (ulong)(uVar16 * uVar17 + uVar32) * 0x18);
            }
          }
          *(undefined4 *)(plVar9 + 2) = 3;
          if ((*(byte *)((long)plVar9 + 0x14) & 8) == 0) goto LAB_0012a7dd;
          *(undefined2 *)(piVar30 + 4) = *(undefined2 *)(plVar9 + 4);
          iVar15 = GetTimeInMillis();
          *(int *)(lVar23 + 0x9c) = iVar15 + 30000;
          piVar30[8] = 0x51;
          goto LAB_00129ca8;
        }
        if (local_a8 != 0) {
          _fs_done_read(lVar23,*(int *)(pcVar19 + 4) << 2);
          goto LAB_0012a2ce;
        }
      }
      goto LAB_0012a290;
    }
    if (2 < iVar15) {
      if ((iVar15 != 3) || ((*(byte *)((long)plVar9 + 0x14) & 8) == 0)) goto LAB_0012a0c8;
      iVar15 = FUN_00128640(*(undefined8 *)(param_1 + 0x18),piVar30,plVar9);
      if (iVar15 != 0x51) goto LAB_0012a22a;
      goto LAB_0012a290;
    }
    if (iVar15 == 0) {
      lVar24 = *(long *)(param_1 + 0x18);
      pcVar19 = (char *)FUN_001283e0(lVar24,&local_98);
      if (pcVar19 == (char *)0x0) {
        if ((int)local_98 == 0) goto LAB_0012a290;
      }
      else {
        if (*pcVar19 != '\x01') {
          if ((*(int *)(pcVar19 + 8) == 0) || ((*(byte *)((long)plVar9 + 0x14) & 0x20) != 0)) {
            *(byte *)(*plVar9 + 0x13) =
                 *(byte *)(*plVar9 + 0x13) & 0xfd | (pcVar19[0xc] != '\0') * '\x02';
            *(undefined4 *)(plVar9 + 2) = 1;
            *(undefined2 *)(piVar30 + 4) = *(undefined2 *)((long)plVar9 + 0x1c);
            iVar15 = GetTimeInMillis();
            *(int *)(lVar24 + 0x9c) = iVar15 + 30000;
            local_98 = CONCAT44(local_98._4_4_,0x51);
            goto LAB_0012a408;
          }
          FUN_00128540(plVar9);
          lVar23 = find_old_font(*(undefined4 *)(pcVar19 + 8));
          *(undefined4 *)(plVar9 + 3) = 0;
          *plVar9 = lVar23;
          uVar17 = *(uint *)(pcVar19 + 8);
          *(undefined4 *)(plVar9 + 2) = 4;
          plVar9[1] = (ulong)uVar17;
          piVar40 = *(int **)(lVar24 + 0xb0);
          goto joined_r0x0012ac55;
        }
        if ((int)local_98 == 0) goto LAB_0012a290;
        _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
      }
      iVar15 = 0x53;
      FUN_00128540(plVar9);
      goto LAB_0012a429;
    }
    if (iVar15 != 1) goto LAB_0012a0c8;
    lVar24 = *(long *)(param_1 + 0x18);
    pcVar19 = (char *)FUN_001283e0(lVar24,&local_ac);
    if (pcVar19 == (char *)0x0) {
      if (local_ac == 0) goto LAB_0012a290;
    }
    else {
      if (*pcVar19 != '\x01') {
        puVar38 = (ushort *)&local_98;
        if ((*(byte *)((long)plVar9 + 0x14) & 0x20) == 0) {
          puVar38 = (ushort *)(*plVar9 + 8);
        }
        *(byte *)(puVar38 + 5) = *(byte *)(puVar38 + 5) & 0xbf | (byte)(((byte)pcVar19[8] & 1) << 6)
        ;
        puVar38[5] = puVar38[5] & 0xfe7f | (ushort)(pcVar19[0x10] != '\0') << 7;
        *(byte *)(puVar38 + 5) =
             (byte)((*(uint *)(pcVar19 + 8) >> 1 & 1) << 4) | *(byte *)(puVar38 + 5) & 0xef;
        puVar38[2] = (ushort)(byte)pcVar19[0xc];
        *puVar38 = (ushort)(byte)pcVar19[0xd];
        puVar38[3] = (ushort)(byte)pcVar19[0xe];
        puVar38[1] = (ushort)(byte)pcVar19[0xf];
        puVar38[4] = (ushort)(byte)pcVar19[0x12] * 0x100 + (ushort)(byte)pcVar19[0x13];
        puVar38[0x21] = *(ushort *)(pcVar19 + 0x2e);
        puVar38[0x20] = *(ushort *)(pcVar19 + 0x2c);
        puVar38[0xe] = *(ushort *)(pcVar19 + 0x14);
        puVar38[0xf] = *(ushort *)(pcVar19 + 0x16);
        puVar38[0x10] = *(ushort *)(pcVar19 + 0x18);
        puVar38[0x11] = *(ushort *)(pcVar19 + 0x1a);
        puVar38[0x12] = *(ushort *)(pcVar19 + 0x1c);
        puVar38[0x13] = *(ushort *)(pcVar19 + 0x1e);
        puVar38[0x1a] = *(ushort *)(pcVar19 + 0x14);
        puVar38[0x1b] = *(ushort *)(pcVar19 + 0x16);
        puVar38[0x1c] = *(ushort *)(pcVar19 + 0x18);
        puVar38[0x1d] = *(ushort *)(pcVar19 + 0x1a);
        puVar38[0x1e] = *(ushort *)(pcVar19 + 0x1c);
        puVar38[0x1f] = *(ushort *)(pcVar19 + 0x1e);
        puVar38[8] = *(ushort *)(pcVar19 + 0x20);
        puVar38[9] = *(ushort *)(pcVar19 + 0x22);
        puVar38[10] = *(ushort *)(pcVar19 + 0x24);
        puVar38[0xb] = *(ushort *)(pcVar19 + 0x26);
        puVar38[0xc] = *(ushort *)(pcVar19 + 0x28);
        puVar38[0xd] = *(ushort *)(pcVar19 + 0x2a);
        puVar38[0x14] = *(ushort *)(pcVar19 + 0x20);
        puVar38[0x15] = *(ushort *)(pcVar19 + 0x22);
        puVar38[0x16] = *(ushort *)(pcVar19 + 0x24);
        puVar38[0x17] = *(ushort *)(pcVar19 + 0x26);
        puVar38[0x18] = *(ushort *)(pcVar19 + 0x28);
        puVar38[0x19] = *(ushort *)(pcVar19 + 0x2a);
        _fs_init_fontinfo(lVar24,puVar38);
        local_ac = _fs_convert_props(pcVar19 + 0x30,pcVar19 + 0x38,
                                     pcVar19 + 0x38 + (uint)(*(int *)(pcVar19 + 0x30) * 0x14),
                                     puVar38);
        _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
        if (local_ac == -1) {
LAB_0012accc:
          iVar15 = 0x50;
          FUN_00128540(plVar9);
          *(undefined4 *)(plVar9 + 2) = 4;
          lVar24 = *(long *)(piVar30 + 10);
          if (lVar24 != 0) goto LAB_0012a0e8;
          piVar30[8] = 0x50;
          goto LAB_00129c80;
        }
        uVar17 = *(uint *)((long)plVar9 + 0x14);
        lVar23 = *plVar9;
        if ((uVar17 & 0x20) == 0) {
          if ((*(byte *)(lVar23 + 0x12) & 2) != 0) {
            *(uint *)((long)plVar9 + 0x24) = *(uint *)((long)plVar9 + 0x24) & 0xfffffff3 | 8;
          }
          if ((glyphCachingMode == 0) ||
             ((glyphCachingMode == 1 && (*(short *)(lVar23 + 0xe) == 0)))) {
            uVar17 = uVar17 | 0xf;
            *(uint *)((long)plVar9 + 0x14) = uVar17;
          }
          if ((uVar17 & 8) != 0) {
            lVar23 = *(long *)(piVar30 + 6);
            lVar11 = *(long *)(param_1 + 0x18);
            local_a4 = (undefined4)*(undefined8 *)(lVar23 + 8);
            local_a0 = *(undefined4 *)(lVar23 + 0x24);
            local_a8 = 0x40114;
            local_9c = 0;
            *(short *)(lVar23 + 0x20) = *(short *)(lVar11 + 0x10) + 1;
            *(int *)(lVar11 + 0x10) = *(int *)(lVar11 + 0x10) + 1;
            _fs_write(lVar11,&local_a8,0x10);
            _fs_flush(lVar24);
          }
          *(undefined4 *)(plVar9 + 2) = 2;
          *(undefined2 *)(piVar30 + 4) = *(undefined2 *)((long)plVar9 + 0x1e);
          iVar15 = GetTimeInMillis();
          *(int *)(lVar24 + 0x9c) = iVar15 + 30000;
          piVar30[8] = 0x51;
          goto LAB_00129ca8;
        }
        if (((((*(long *)puVar38 != *(long *)(lVar23 + 8)) ||
              (puVar38[4] != *(ushort *)(lVar23 + 0x10))) ||
             ((((*(byte *)(puVar38 + 5) ^ *(byte *)(lVar23 + 0x12)) & 0x7f) != 0 ||
              ((((((puVar38[5] ^ *(ushort *)(lVar23 + 0x12)) & 0x180) != 0 ||
                 (((*(byte *)((long)puVar38 + 0xb) ^ *(byte *)(lVar23 + 0x13)) & 6) != 0)) ||
                (puVar38[6] != *(ushort *)(lVar23 + 0x14))) ||
               ((*(long *)(puVar38 + 0x20) != *(long *)(lVar23 + 0x48) ||
                (*(long *)(puVar38 + 8) != *(long *)(lVar23 + 0x18))))))))) ||
            (*(int *)(puVar38 + 0xc) != *(int *)(lVar23 + 0x20))) ||
           (((*(int *)(puVar38 + 0xe) != *(int *)(lVar23 + 0x24) ||
             (*(long *)(puVar38 + 0x10) != *(long *)(lVar23 + 0x28))) ||
            ((*(long *)(puVar38 + 0x14) != *(long *)(lVar23 + 0x30) ||
             (((*(int *)(puVar38 + 0x18) != *(int *)(lVar23 + 0x38) ||
               (*(int *)(puVar38 + 0x1a) != *(int *)(lVar23 + 0x3c))) ||
              (*(long *)(puVar38 + 0x1c) != *(long *)(lVar23 + 0x40))))))))) goto LAB_0012a0a8;
        lVar24 = 0;
        goto LAB_0012ae13;
      }
      if (local_ac == 0) goto LAB_0012a290;
      _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
    }
LAB_0012a2ce:
    FUN_00128540(plVar9);
    goto LAB_0012a0c8;
  }
LAB_0012a1e0:
  if (*psVar18 == 2) {
    uVar3 = (ushort)local_98;
    local_98._4_4_ = SUB84(uVar10,4);
    local_98._0_4_ = CONCAT22(1,uVar3 & 0xff00);
    *(int *)(lVar7 + 0x10) = *(int *)(lVar7 + 0x10) + 1;
    _fs_write(lVar7,&local_98,4);
  }
  _fs_done_read(lVar7,*(int *)(psVar18 + 2) << 2);
  goto LAB_00129ca8;
LAB_00129c20:
  piVar30 = *(int **)(piVar30 + 0xc);
  if (piVar30 == (int *)0x0) goto LAB_0012a1e0;
  goto LAB_00129c2d;
LAB_0012a19a:
  bVar43 = *pbVar20;
  iVar15 = AddFontNamesName(*puVar31,pbVar20 + 1);
  if (iVar15 == 0x55) goto LAB_0012a188;
  _fs_done_read(uVar10,*(int *)(pcVar19 + 4) << 2);
  piVar30[8] = iVar15;
joined_r0x0012a110:
  if (iVar15 != 0x51) goto LAB_00129c80;
  goto LAB_00129ca8;
LAB_0012a188:
  pbVar20 = pbVar20 + 1 + bVar43;
  uVar17 = uVar17 + 1;
  if (*(uint *)(pcVar19 + 0xc) <= uVar17) goto LAB_0012a2f4;
  goto LAB_0012a19a;
LAB_0012a2f4:
  iVar15 = 0x55;
  _fs_done_read(uVar10,*(int *)(pcVar19 + 4) << 2);
  piVar30[8] = 0x55;
  goto LAB_00129c80;
joined_r0x0012ac55:
  if (piVar40 == (int *)0x0) goto LAB_0012ac9b;
  if (((piVar40 != piVar30) && (*piVar40 == 1)) &&
     (plVar29 = *(long **)(piVar40 + 6), plVar29[1] == (ulong)*(uint *)(pcVar19 + 8))) {
    *(undefined8 *)(piVar30 + 10) = *(undefined8 *)(piVar40 + 10);
    *(int **)(piVar40 + 10) = piVar30;
    *(undefined4 *)(plVar9 + 2) = 5;
    *plVar9 = *plVar29;
    goto LAB_0012ac9b;
  }
  piVar40 = *(int **)(piVar40 + 0xc);
  goto joined_r0x0012ac55;
LAB_0012ac9b:
  local_98 = CONCAT44(local_98._4_4_,(-(uint)(*plVar9 == 0) & 0xfffffc53) + 0x400);
LAB_0012a408:
  _fs_done_read(lVar24,*(int *)(pcVar19 + 4) << 2);
  iVar15 = (int)local_98;
  if ((int)local_98 != 0x51) {
LAB_0012a429:
    if (*(int *)(plVar9 + 2) == 4) {
LAB_0012a7e5:
      lVar24 = *(long *)(piVar30 + 10);
      iVar15 = 0x55;
      if (lVar24 != 0) goto LAB_0012a0e8;
      piVar30[8] = 0x55;
      goto LAB_00129c80;
    }
    if (*(int *)(plVar9 + 2) != 5) {
LAB_0012a22a:
      *(undefined4 *)(plVar9 + 2) = 4;
      lVar24 = *(long *)(piVar30 + 10);
      goto joined_r0x0012a239;
    }
  }
LAB_0012a290:
  piVar30[8] = 0x51;
  goto LAB_00129ca8;
LAB_0012ae13:
  if (*(int *)(puVar38 + 0x22) <= (int)lVar24) {
    *(undefined4 *)(plVar9 + 2) = 4;
    FUN_0010a1b0(puVar38);
LAB_0012a7dd:
    *(undefined4 *)(plVar9 + 2) = 4;
    goto LAB_0012a7e5;
  }
  if (*(char *)(*(long *)(puVar38 + 0x28) + lVar24) != *(char *)(*(long *)(lVar23 + 0x58) + lVar24))
  goto LAB_0012a0a8;
  plVar34 = (long *)(*(long *)(puVar38 + 0x24) + lVar24 * 0x10);
  plVar29 = (long *)(lVar24 * 0x10 + *(long *)(lVar23 + 0x50));
  if ((*plVar34 != *plVar29) || (lVar24 = lVar24 + 1, plVar34[1] != plVar29[1])) goto LAB_0012a0a8;
  goto LAB_0012ae13;
LAB_0012a0a8:
  FUN_00128540(plVar9);
  FUN_0010a1b0(puVar38);
LAB_0012a0c8:
  *(undefined4 *)(plVar9 + 2) = 4;
  lVar24 = *(long *)(piVar30 + 10);
  iVar15 = 0x53;
  if (lVar24 == 0) {
    piVar30[8] = 0x53;
  }
  else {
LAB_0012a0e8:
    do {
      *(undefined4 *)(*(long *)(lVar24 + 0x18) + 0x10) = 4;
      lVar24 = *(long *)(lVar24 + 0x28);
joined_r0x0012a239:
    } while (lVar24 != 0);
    piVar30[8] = iVar15;
  }
LAB_00129c80:
  do {
    piVar30[8] = iVar15;
    if (*(long *)(piVar30 + 2) != param_2) {
      ClientSignal();
    }
    piVar30 = *(int **)(piVar30 + 10);
  } while (piVar30 != (int *)0x0);
  _fs_unmark_block(lVar7,8);
LAB_00129ca8:
  iVar15 = FUN_00128360(lVar7);
  if (iVar15 == 0) {
    _fs_unmark_block(lVar7,0x20);
  }
  else {
    _fs_mark_block();
  }
LAB_00129cc5:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0012af20(long param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = FUN_001290a0();
  if (iVar2 == -1) {
    iVar2 = GetTimeInMillis();
    *(int *)(param_1 + 0xa8) = iVar2 + 1000;
    return;
  }
  if (iVar2 != 1) {
    return;
  }
  _fs_unmark_block(param_1,0x50);
  _fs_unmark_block(param_1,0x10);
  do {
    lVar1 = *(long *)(param_1 + 0xb0);
    do {
      if (lVar1 == 0) {
        return;
      }
    } while (*(int *)(lVar1 + 0x20) != 0x51);
    ClientSignal(*(undefined8 *)(lVar1 + 8));
    FUN_001296c0(param_1,lVar1);
  } while( true );
}



undefined8 FUN_0012afb0(long param_1)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  void *pvVar3;
  void *__ptr;
  undefined8 *puVar4;
  
  puVar1 = *(undefined8 **)(param_1 + 0x18);
  if (DAT_0013fd00 != (undefined8 *)0x0) {
    puVar2 = DAT_0013fd00;
    if (puVar1 == DAT_0013fd00) {
      puVar4 = &DAT_0013fd00;
    }
    else {
      do {
        puVar4 = puVar2;
        puVar2 = (undefined8 *)*puVar4;
        if (puVar2 == (undefined8 *)0x0) goto LAB_0012afec;
      } while (puVar1 != puVar2);
    }
    *puVar4 = *puVar1;
  }
LAB_0012afec:
  _fs_unmark_block(puVar1,*(undefined4 *)(puVar1 + 0x13));
  FUN_00129020(puVar1);
  __ptr = (void *)puVar1[8];
  while (__ptr != (void *)0x0) {
    pvVar3 = *(void **)((long)__ptr + 8);
    free(__ptr);
    __ptr = pvVar3;
  }
  puVar1[8] = 0;
  remove_fs_handlers(param_1,FUN_00127dc0,DAT_0013fd00 == (undefined8 *)0x0);
  FUN_001295b0(puVar1);
  *(undefined8 *)(param_1 + 0x18) = 0;
  return 0x55;
}



undefined4 FUN_0012b080(long param_1)

{
  undefined8 *puVar1;
  int iVar2;
  size_t sVar3;
  undefined8 *__ptr;
  undefined4 uVar4;
  char *__s;
  
  __s = *(char **)(param_1 + 8) + (**(char **)(param_1 + 8) == ':');
  sVar3 = strlen(__s);
  __ptr = (undefined8 *)calloc(1,sVar3 + 0xc1);
  if (__ptr == (undefined8 *)0x0) {
    uVar4 = 0x50;
  }
  else {
    iVar2 = _fs_io_init(__ptr);
    if (iVar2 == 0) {
      free(__ptr);
      return 0x50;
    }
    __ptr[3] = __ptr + 0x18;
    __ptr[1] = 0xffffffff;
    strcpy((char *)(__ptr + 0x18),__s);
    iVar2 = init_fs_handlers(param_1,FUN_00127dc0);
    if (iVar2 == 0x55) {
      *(undefined8 **)(param_1 + 0x18) = __ptr;
      puVar1 = __ptr;
      *__ptr = DAT_0013fd00;
      DAT_0013fd00 = puVar1;
      do {
        iVar2 = FUN_001290a0(__ptr);
        if (iVar2 != 0) {
          if (iVar2 == 1) {
            return 0x55;
          }
          break;
        }
        if (*(int *)((long)__ptr + 0xc) < 2) {
          iVar2 = _fs_poll_connect(__ptr[0x17],1000);
        }
        else {
          iVar2 = _fs_wait_for_readable(__ptr,1000);
        }
      } while (iVar2 != -1);
      uVar4 = 0x56;
      FUN_0012afb0(param_1);
    }
    else {
      uVar4 = 0x50;
      FUN_001295b0(__ptr);
    }
  }
  return uVar4;
}



void _fs_connection_died(long param_1)

{
  void *pvVar1;
  void *__ptr;
  undefined4 uVar2;
  
  if ((*(byte *)(param_1 + 0x98) & 4) != 0) {
    return;
  }
  FUN_00129020();
  __ptr = *(void **)(param_1 + 0x40);
  while (__ptr != (void *)0x0) {
    pvVar1 = *(void **)((long)__ptr + 8);
    free(__ptr);
    __ptr = pvVar1;
  }
  *(undefined8 *)(param_1 + 0x40) = 0;
  uVar2 = GetTimeInMillis();
  *(undefined4 *)(param_1 + 0xa8) = uVar2;
  _fs_mark_block(param_1,4);
  _fs_unmark_block(param_1,0x43);
  return;
}



int FUN_0012b250(undefined8 param_1)

{
  int iVar1;
  long lVar2;
  long in_FS_OFFSET;
  int local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  do {
    lVar2 = FUN_001283e0(param_1,&local_24);
    if (lVar2 != 0) {
      local_24 = 1;
      goto LAB_0012b29f;
    }
    if (local_24 != 0) goto LAB_0012b29f;
    iVar1 = _fs_wait_for_readable(param_1,30000);
  } while (iVar1 == 1);
  _fs_connection_died(param_1);
  local_24 = -1;
LAB_0012b29f:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_24;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FUN_0012b2e0(undefined8 param_1,long param_2,uint param_3,char *param_4,int param_5,
                undefined4 param_6,undefined4 param_7,long *param_8)

{
  undefined4 uVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  size_t sVar6;
  long *plVar7;
  ulong uVar8;
  long *plVar9;
  long in_FS_OFFSET;
  bool bVar10;
  undefined2 local_46c;
  undefined2 local_46a;
  undefined4 local_468;
  undefined2 local_464;
  undefined2 local_462;
  undefined4 local_460;
  undefined4 local_45c;
  undefined2 local_458;
  undefined2 local_456;
  undefined4 local_454;
  undefined4 local_450;
  undefined4 local_44c;
  undefined local_448;
  undefined local_447 [1031];
  long local_40;
  
  lVar2 = *(long *)(param_2 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = 0x53;
  if (((*(byte *)(lVar2 + 0x98) & 0x10) != 0) || (0x3fe < param_5 - 1U)) goto LAB_0012b549;
  if ((param_3 & 0x20) == 0) {
    lVar4 = fs_create_font(param_2,param_4,param_5,param_6,param_7);
    if (lVar4 != 0) {
      plVar9 = *(long **)(lVar4 + 0xa0);
      lVar5 = FUN_001285b0(*(undefined8 *)(*(long *)(lVar4 + 0x88) + 0x18),param_1,1);
      if (lVar5 != 0) goto LAB_0012b3cf;
      (**(code **)(lVar4 + 0x78))(lVar4);
    }
  }
  else {
    lVar4 = *param_8;
    plVar9 = *(long **)(lVar4 + 0xa0);
    lVar5 = MakeAtom("FONT",4,0);
    if ((lVar5 != 0) && (0 < *(int *)(lVar4 + 0x4c))) {
      plVar7 = *(long **)(lVar4 + 0x50);
      uVar8 = 0;
      do {
        if ((*plVar7 == lVar5) && (*(char *)(*(long *)(lVar4 + 0x58) + uVar8) != '\0')) {
          if ((plVar7[1] != 0) && (param_4 = (char *)NameForAtom(), param_4 != (char *)0x0)) {
            sVar6 = strlen(param_4);
            param_5 = (int)sVar6;
            goto LAB_0012b670;
          }
          break;
        }
        plVar7 = plVar7 + 2;
        bVar10 = *(int *)(lVar4 + 0x4c) - 1 != uVar8;
        uVar8 = uVar8 + 1;
      } while (bVar10);
    }
    param_4 = (char *)plVar9[4];
    param_5 = *(int *)(plVar9 + 3);
LAB_0012b670:
    lVar5 = FUN_001285b0(*(undefined8 *)(*(long *)(lVar4 + 0x88) + 0x18),param_1,1);
    if (lVar5 != 0) {
LAB_0012b3cf:
      if ((*(uint *)(lVar2 + 0x98) & 0x44) == 0) {
        *(undefined4 *)(plVar9 + 1) = *(undefined4 *)(lVar2 + 0x24);
        plVar7 = *(long **)(lVar5 + 0x18);
        plVar7[1] = *plVar9;
        *plVar7 = lVar4;
        *(undefined4 *)(plVar7 + 2) = 0;
        *(uint *)((long)plVar7 + 0x14) = param_3;
        uVar1 = *(undefined4 *)(plVar9 + 5);
        plVar7[5] = 0;
        *(undefined4 *)((long)plVar7 + 0x24) = uVar1;
        *(uint *)(plVar7 + 3) = (uint)((param_3 & 0x20) == 0);
        FUN_001289d0(lVar2,param_1);
        FUN_00127fb0(lVar2);
        local_448 = (undefined)param_5;
        __memcpy_chk(local_447,param_4,(long)param_5,0x3ff);
        local_458 = 0xf;
        local_454 = (undefined4)*plVar9;
        local_44c = *(undefined4 *)(plVar9 + 5);
        local_450 = *(undefined4 *)((long)plVar9 + 0x2c);
        *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
        local_456 = (undefined2)(param_5 + 0x14 >> 2);
        _fs_write(lVar2,&local_458,0x10);
        _fs_write_pad(lVar2,&local_448,(long)(param_5 + 1));
        local_46c = 0x10;
        *(short *)(lVar5 + 0x10) = (short)*(undefined4 *)(lVar2 + 0x10);
        local_46a = 2;
        local_468 = (undefined4)*plVar9;
        *(short *)((long)plVar7 + 0x1c) = *(short *)(lVar2 + 0x10) + 1;
        *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
        _fs_write(lVar2,&local_46c,8);
        if ((*(byte *)((long)plVar7 + 0x14) & 0x20) == 0) {
          local_464 = 0x112;
          local_462 = 3;
          local_460 = (undefined4)*plVar9;
          local_45c = 0;
          *(short *)((long)plVar7 + 0x1e) = *(short *)(lVar2 + 0x10) + 1;
          *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
          _fs_write(lVar2,&local_464,0xc);
        }
        FUN_00128c00(lVar2);
        iVar3 = *(int *)(lVar5 + 0x20);
        if ((*(byte *)((long)plVar7 + 0x14) & 0x10) != 0) {
          while (iVar3 == 0x51) {
            if (((*(byte *)(lVar2 + 0x98) & 0x20) == 0) && (iVar3 = FUN_0012b250(lVar2), iVar3 != 1)
               ) {
              *(undefined4 *)(lVar5 + 0x20) = 0x53;
              FUN_00128540(plVar7);
              *(undefined4 *)(plVar7 + 3) = 0;
              FUN_001295e0(lVar2,lVar5);
              iVar3 = 0x53;
              goto LAB_0012b549;
            }
            FUN_00129bc0(*(undefined8 *)(lVar4 + 0x88),param_1);
            iVar3 = *(int *)(lVar5 + 0x20);
          }
          if (iVar3 == 0x55) {
            *param_8 = *plVar7;
          }
          else {
            FUN_00128540(plVar7);
          }
          *(undefined4 *)(plVar7 + 3) = 0;
          FUN_001295e0(lVar2,lVar5);
          goto LAB_0012b549;
        }
        if (iVar3 != 0x51) goto LAB_0012b549;
      }
      else if ((*(uint *)(lVar2 + 0x98) & 8) == 0) {
        FUN_00128be0(lVar2);
        iVar3 = 0x54;
        goto LAB_0012b549;
      }
      iVar3 = 0x54;
      goto LAB_0012b549;
    }
  }
  iVar3 = 0x50;
LAB_0012b549:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar3;
}



ulong FUN_0012b780(long param_1,long param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined8 param_6)

{
  uint uVar1;
  long lVar2;
  int *piVar3;
  ulong uVar4;
  long *plVar5;
  long *plVar6;
  long in_FS_OFFSET;
  long local_50 [2];
  int local_3c;
  void *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_3c = 0;
  local_38 = (void *)0x0;
  lVar2 = *(long *)(*(long *)(param_2 + 0x88) + 0x18);
  for (piVar3 = *(int **)(lVar2 + 0xb0); local_50[0] = param_2, piVar3 != (int *)0x0;
      piVar3 = *(int **)(piVar3 + 0xc)) {
    if (*piVar3 == 2) {
      if (param_2 == **(long **)(piVar3 + 6)) {
        plVar6 = *(long **)(piVar3 + 6) + 3;
        if (*(long *)(piVar3 + 2) == param_1) {
          uVar1 = piVar3[8];
          if (uVar1 == 0x51) goto LAB_0012b875;
          FUN_00127d80(plVar6);
          FUN_001295e0(lVar2,piVar3);
          uVar4 = (ulong)uVar1;
          goto LAB_0012b880;
        }
LAB_0012b81d:
        uVar4 = fs_build_range(param_2,param_3,param_4,param_5,param_6,&local_3c,&local_38);
        if ((int)uVar4 != 0x55) goto LAB_0012b941;
        if (local_3c != 0) {
          _fs_clean_aborted_loadglyphs(local_50[0],local_3c,local_38);
          free(local_38);
        }
        plVar5 = (long *)*plVar6;
        if ((long *)*plVar6 != (long *)0x0) goto LAB_0012b870;
        goto LAB_0012b9e5;
      }
    }
    else if ((*piVar3 == 1) && (plVar6 = *(long **)(piVar3 + 6), param_2 == *plVar6)) {
      uVar1 = piVar3[8];
      if (*(long *)(piVar3 + 2) == param_1) {
        if (uVar1 == 0x51) goto LAB_0012b875;
        FUN_00127d80(plVar6 + 5);
        FUN_001295e0(lVar2,piVar3);
        uVar4 = (ulong)uVar1;
        if (uVar1 != 0x55) goto LAB_0012b880;
        break;
      }
      if (uVar1 == 0x51) {
        plVar6 = plVar6 + 5;
        goto LAB_0012b81d;
      }
    }
  }
  uVar4 = fs_build_range(local_50[0],param_3,param_4,param_5,param_6,&local_3c,&local_38);
  if ((int)uVar4 == 0x55) {
    if (*(int *)(*(long *)(local_50[0] + 0xa0) + 8) == *(int *)(lVar2 + 0x24)) {
      uVar4 = FUN_00128c30(param_1,local_50[0],local_3c,local_38);
    }
    else {
      _fs_clean_aborted_loadglyphs();
      free(local_38);
      uVar4 = FUN_0012b2e0(param_1,*(undefined8 *)(local_50[0] + 0x88),0x20,0,0,0,0,local_50);
    }
  }
  else {
LAB_0012b941:
    if ((int)uVar4 == 0x400) {
      uVar4 = 0x55;
    }
  }
  goto LAB_0012b880;
  while (plVar5 = (long *)plVar6[1], (long *)plVar6[1] != (long *)0x0) {
LAB_0012b870:
    plVar6 = plVar5;
    if (param_1 == *plVar6) goto LAB_0012b875;
  }
  plVar6 = plVar6 + 1;
LAB_0012b9e5:
  plVar5 = (long *)malloc(0x10);
  if (plVar5 == (long *)0x0) {
    uVar4 = 0xb;
  }
  else {
    *plVar5 = param_1;
    plVar5[1] = 0;
    *plVar6 = (long)plVar5;
LAB_0012b875:
    uVar4 = 0x54;
  }
LAB_0012b880:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_0012ba50(long param_1,long param_2)

{
  long lVar1;
  int *piVar2;
  ulong uVar3;
  uint uVar4;
  undefined8 *param_9;
  undefined8 *param_10;
  
  lVar1 = *(long *)(param_2 + 0x18);
  *param_10 = 0;
  piVar2 = *(int **)(lVar1 + 0xb0);
  while( true ) {
    if (piVar2 == (int *)0x0) {
      uVar3 = FUN_0012b2e0();
      return uVar3;
    }
    if ((*piVar2 == 1) && (*(long *)(piVar2 + 2) == param_1)) break;
    piVar2 = *(int **)(piVar2 + 0xc);
  }
  uVar4 = piVar2[8];
  if (uVar4 == 0x51) {
    uVar4 = 0x54;
  }
  else {
    if (uVar4 == 0x55) {
      *param_9 = **(undefined8 **)(piVar2 + 6);
    }
    else {
      FUN_00128540();
    }
    FUN_001295e0(lVar1,piVar2);
  }
  return (ulong)uVar4;
}



undefined8 FUN_0012bb00(long param_1,long param_2)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  
  lVar2 = *(long *)(param_1 + 0x18);
  uVar1 = *(uint *)(lVar2 + 0x98);
  if ((uVar1 & 0x40) != 0) {
    FUN_0012af20(lVar2);
    uVar1 = *(uint *)(lVar2 + 0x98);
    goto joined_r0x0012bb80;
  }
  if ((uVar1 & 0x20) == 0) {
    if (*(int *)(lVar2 + 8) == -1) goto joined_r0x0012bb80;
    lVar4 = __fdelt_chk();
    if ((*(ulong *)(param_2 + lVar4 * 8) & 1L << ((byte)(*(int *)(lVar2 + 8) % 0x40) & 0x3f)) != 0)
    goto LAB_0012bb51;
  }
  else {
LAB_0012bb51:
    FUN_00129bc0(param_1,0);
  }
  uVar1 = *(uint *)(lVar2 + 0x98);
joined_r0x0012bb80:
  if ((uVar1 & 0xe) != 0) {
    iVar3 = GetTimeInMillis();
    uVar1 = *(uint *)(lVar2 + 0x98);
    if (((uVar1 & 8) == 0) || (0 < *(int *)(lVar2 + 0x9c) - iVar3)) {
      if ((uVar1 & 4) == 0) {
        if (((uVar1 & 2) != 0) && (*(int *)(lVar2 + 0xa0) - iVar3 < 1)) {
          _fs_flush(lVar2);
        }
      }
      else if ((*(int *)(lVar2 + 0xa8) - iVar3 < 1) && ((uVar1 & 0x40) == 0)) {
        *(undefined4 *)(lVar2 + 0x2c) = 0;
        _fs_mark_block(lVar2,0x40);
        _fs_unmark_block(lVar2,4);
        FUN_0012af20(lVar2);
      }
    }
    else if ((uVar1 & 0x10) == 0) {
      _fs_mark_block(lVar2,0x10);
      do {
        lVar4 = *(long *)(lVar2 + 0xb0);
        do {
          if (lVar4 == 0) {
            if (*(int *)(lVar2 + 8) < 0) {
              return 0;
            }
            _fs_connection_died(lVar2);
            return 0;
          }
        } while (*(int *)(lVar4 + 0x20) != 0x51);
        ClientSignal(*(undefined8 *)(lVar4 + 8));
        FUN_001296c0(lVar2,lVar4);
      } while( true );
    }
  }
  return 0;
}



undefined8 fs_load_all_glyphs(long param_1)

{
  long lVar1;
  int iVar2;
  undefined8 uVar3;
  
  lVar1 = *(long *)(*(long *)(param_1 + 0x88) + 0x18);
  do {
    uVar3 = FUN_0012b780(serverClient,param_1,1,0,0,0);
    if ((int)uVar3 != 0x54) {
      return uVar3;
    }
    if ((*(byte *)(lVar1 + 0x98) & 0x20) == 0) {
      iVar2 = FUN_0012b250(lVar1);
      if (iVar2 != 1) {
        FUN_001297b0(serverClient,*(undefined8 *)(param_1 + 0x88));
        return 0x57;
      }
    }
    FUN_00129bc0(*(undefined8 *)(param_1 + 0x88),serverClient);
  } while( true );
}



void fs_register_fpe_functions(void)

{
  RegisterFPEFunctions
            (FUN_00128050,FUN_0012b080,FUN_0012afb0,FUN_00128340,FUN_0012ba50,FUN_00128500,
             FUN_00129a10,FUN_00128e60,FUN_001298a0,FUN_0012bb00,FUN_001297b0,FUN_0012b780,0,0,0);
  return;
}



undefined8 FUN_0012bd70(undefined8 *param_1,long param_2)

{
  long lVar1;
  void *pvVar2;
  size_t __n;
  ulong uVar3;
  undefined8 uVar4;
  
  lVar1 = param_1[3];
  if (lVar1 != 0) {
    __n = param_1[2] - lVar1;
    if (lVar1 != param_1[2]) {
      memmove((void *)*param_1,(void *)(lVar1 + (long)*param_1),__n);
      __n = param_1[2] - param_1[3];
    }
    param_1[2] = __n;
    param_1[3] = 0;
  }
  uVar4 = 1;
  if ((long)param_1[1] < param_2) {
    uVar3 = param_2 + 0x400U;
    if ((long)(param_2 + 0x400U) < 0) {
      uVar3 = param_2 + 0x7ff;
    }
    pvVar2 = realloc((void *)*param_1,uVar3 & 0xfffffffffffffc00);
    if (pvVar2 != (void *)0x0) {
      *param_1 = pvVar2;
      param_1[1] = uVar3 & 0xfffffffffffffc00;
      return 1;
    }
    uVar4 = 0xffffffff;
  }
  return uVar4;
}



ulong _fs_poll_connect(undefined8 param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  ulong uVar5;
  long lVar6;
  __fd_mask *p_Var7;
  long in_FS_OFFSET;
  timeval local_d8;
  ulong local_c8 [17];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = _FontTransGetConnectionNumber();
  bVar1 = (byte)(iVar2 >> 0x1f);
  while( true ) {
    local_d8.tv_usec = 0;
    p_Var7 = (__fd_mask *)local_c8;
    for (lVar6 = 0x10; lVar6 != 0; lVar6 = lVar6 + -1) {
      *p_Var7 = 0;
      p_Var7 = p_Var7 + 1;
    }
    local_d8.tv_sec = (long)param_2;
    lVar6 = __fdelt_chk((long)iVar2);
    local_c8[lVar6] =
         local_c8[lVar6] | 1L << (((char)iVar2 + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f);
    iVar3 = select(iVar2 + 1,(fd_set *)0x0,(fd_set *)local_c8,(fd_set *)0x0,&local_d8);
    if (-1 < iVar3) break;
    piVar4 = __errno_location();
    if (*piVar4 != 4) {
      uVar5 = 0xffffffff;
LAB_0012bebe:
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        return uVar5;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
  }
  uVar5 = (ulong)(iVar3 != 0);
  goto LAB_0012bebe;
}



long _fs_connect(undefined8 param_1,undefined4 *param_2)

{
  int iVar1;
  undefined4 uVar2;
  long lVar3;
  int iVar4;
  
  lVar3 = _FontTransOpenCOTSClient();
  if (lVar3 == 0) {
    *param_2 = 0xffffffff;
    return 0;
  }
  iVar4 = 6;
  _FontTransSetOption(lVar3,1,1);
  do {
    iVar1 = _FontTransConnect(lVar3,param_1);
    if (iVar1 != -2) {
      if (-1 < iVar1) {
        uVar2 = 1;
        goto LAB_0012bf69;
      }
      if (iVar1 == -3) {
        uVar2 = 0;
        goto LAB_0012bf69;
      }
      break;
    }
    iVar4 = iVar4 + -1;
  } while (iVar4 != 0);
  _FontTransClose(lVar3);
  uVar2 = 0xffffffff;
  lVar3 = 0;
LAB_0012bf69:
  *param_2 = uVar2;
  return lVar3;
}



void _fs_done_read(long param_1,long param_2)

{
  long lVar1;
  void *pvVar2;
  
  if (*(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88) < param_2) {
    return;
  }
  lVar1 = *(long *)(param_1 + 0x88) + param_2;
  *(long *)(param_1 + 0x90) = *(long *)(param_1 + 0x90) - param_2;
  *(long *)(param_1 + 0x88) = lVar1;
  if (*(long *)(param_1 + 0x80) == lVar1) {
    *(undefined8 *)(param_1 + 0x88) = 0;
    *(undefined8 *)(param_1 + 0x80) = 0;
    if (0x8000 < *(long *)(param_1 + 0x78)) {
      pvVar2 = realloc(*(void **)(param_1 + 0x70),0x8000);
      *(undefined8 *)(param_1 + 0x78) = 0x8000;
      *(void **)(param_1 + 0x70) = pvVar2;
      return;
    }
  }
  return;
}



long _fs_pad_length(long param_1)

{
  return *(int *)(&DAT_00136280 + (ulong)((uint)param_1 & 3) * 4) + param_1;
}



undefined8 _fs_flush(long param_1)

{
  long lVar1;
  int iVar2;
  int *piVar3;
  void *pvVar4;
  long lVar5;
  long lVar6;
  
  if (*(int *)(param_1 + 8) < 0) {
    return 0xffffffff;
  }
  lVar1 = *(long *)(param_1 + 0x60);
  lVar6 = *(long *)(param_1 + 0x68);
  lVar5 = lVar1 - lVar6;
joined_r0x0012c07a:
  do {
    if (lVar5 < 1) {
      if (lVar6 != lVar1) {
        return 1;
      }
LAB_0012c12c:
      _fs_unmark_block(param_1,3);
      if (0x400 < *(long *)(param_1 + 0x58)) {
        pvVar4 = realloc(*(void **)(param_1 + 0x50),0x400);
        *(void **)(param_1 + 0x50) = pvVar4;
      }
      *(undefined8 *)(param_1 + 0x60) = 0;
      *(undefined8 *)(param_1 + 0x68) = 0;
      return 1;
    }
    iVar2 = _FontTransWrite(*(undefined8 *)(param_1 + 0xb8),lVar6 + *(long *)(param_1 + 0x50));
    lVar6 = (long)iVar2;
    if (lVar6 < 1) {
      if (lVar6 != 0) {
        piVar3 = __errno_location();
        if (*piVar3 != 0xb) {
          if (*piVar3 != 4) {
            _fs_connection_died(param_1);
            return 0xffffffff;
          }
          lVar1 = *(long *)(param_1 + 0x60);
          lVar6 = *(long *)(param_1 + 0x68);
          lVar5 = lVar1 - lVar6;
          goto joined_r0x0012c07a;
        }
      }
      iVar2 = GetTimeInMillis();
      *(int *)(param_1 + 0xa0) = iVar2 + 1000;
      _fs_mark_block(param_1,2);
      if (*(long *)(param_1 + 0x68) != *(long *)(param_1 + 0x60)) {
        return 1;
      }
      goto LAB_0012c12c;
    }
    lVar1 = *(long *)(param_1 + 0x60);
    lVar6 = lVar6 + *(long *)(param_1 + 0x68);
    *(long *)(param_1 + 0x68) = lVar6;
    lVar5 = lVar1 - lVar6;
  } while( true );
}



undefined8 FUN_0012c190(long param_1,void *param_2,size_t param_3,long param_4)

{
  int iVar1;
  
  while( true ) {
    if (param_4 + *(long *)(param_1 + 0x60) <= *(long *)(param_1 + 0x58)) {
      memcpy((void *)(*(long *)(param_1 + 0x60) + *(long *)(param_1 + 0x50)),param_2,param_3);
      memset((void *)(*(long *)(param_1 + 0x60) + param_3 + *(long *)(param_1 + 0x50)),0,
             param_4 - param_3);
      *(long *)(param_1 + 0x60) = *(long *)(param_1 + 0x60) + param_4;
      _fs_mark_block(param_1,1);
      return 1;
    }
    iVar1 = _fs_flush(param_1);
    if (iVar1 < 0) break;
    iVar1 = FUN_0012bd70(param_1 + 0x50,param_4);
    if (iVar1 < 0) {
      _fs_connection_died(param_1);
      return 0xffffffff;
    }
  }
  return 0xffffffff;
}



void _fs_io_reinit(long param_1)

{
  void *pvVar1;
  
  *(undefined8 *)(param_1 + 0x68) = 0;
  *(undefined8 *)(param_1 + 0x60) = 0;
  if (0x400 < *(long *)(param_1 + 0x58)) {
    pvVar1 = realloc(*(void **)(param_1 + 0x50),0x400);
    *(undefined8 *)(param_1 + 0x58) = 0x400;
    *(void **)(param_1 + 0x50) = pvVar1;
  }
  *(undefined8 *)(param_1 + 0x88) = 0;
  *(undefined8 *)(param_1 + 0x80) = 0;
  if (*(long *)(param_1 + 0x78) < 0x8001) {
    return;
  }
  pvVar1 = realloc(*(void **)(param_1 + 0x70),0x8000);
  *(undefined8 *)(param_1 + 0x78) = 0x8000;
  *(void **)(param_1 + 0x70) = pvVar1;
  return;
}



undefined8 _fs_io_init(long param_1)

{
  void *__ptr;
  void *pvVar1;
  undefined8 uVar2;
  
  *(undefined8 *)(param_1 + 0x68) = 0;
  *(undefined8 *)(param_1 + 0x60) = 0;
  __ptr = malloc(0x400);
  *(void **)(param_1 + 0x50) = __ptr;
  if (__ptr == (void *)0x0) {
    uVar2 = 0;
  }
  else {
    *(undefined8 *)(param_1 + 0x58) = 0x400;
    *(undefined8 *)(param_1 + 0x88) = 0;
    *(undefined8 *)(param_1 + 0x80) = 0;
    pvVar1 = malloc(0x400);
    *(void **)(param_1 + 0x70) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      free(__ptr);
      *(undefined8 *)(param_1 + 0x50) = 0;
      uVar2 = 0;
    }
    else {
      *(undefined8 *)(param_1 + 0x78) = 0x400;
      uVar2 = 1;
    }
  }
  return uVar2;
}



void _fs_io_fini(long param_1)

{
  if (*(void **)(param_1 + 0x50) != (void *)0x0) {
    free(*(void **)(param_1 + 0x50));
  }
  if (*(void **)(param_1 + 0x70) != (void *)0x0) {
    free(*(void **)(param_1 + 0x70));
    return;
  }
  return;
}



ulong _fs_write(long param_1,undefined8 param_2,long param_3)

{
  ulong uVar1;
  
  if (param_3 == 0) {
    uVar1 = 1;
  }
  else {
    uVar1 = (ulong)*(uint *)(param_1 + 8);
    if (*(uint *)(param_1 + 8) != 0xffffffff) {
      uVar1 = FUN_0012c190();
      return uVar1;
    }
  }
  return uVar1;
}



ulong _fs_write_pad(long param_1,undefined8 param_2,long param_3)

{
  ulong uVar1;
  
  if (*(int *)(&DAT_00136280 + (ulong)((uint)param_3 & 3) * 4) + param_3 == 0) {
    uVar1 = 1;
  }
  else {
    uVar1 = (ulong)*(uint *)(param_1 + 8);
    if (*(uint *)(param_1 + 8) != 0xffffffff) {
      uVar1 = FUN_0012c190();
      return uVar1;
    }
  }
  return uVar1;
}



int _fs_wait_for_readable(long param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  int *piVar3;
  long lVar4;
  __fd_mask *p_Var5;
  long in_FS_OFFSET;
  timeval local_158;
  ulong local_148 [16];
  ulong local_c8 [17];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  do {
    if (*(int *)(param_1 + 8) < 0) break;
    p_Var5 = (__fd_mask *)local_148;
    for (lVar4 = 0x10; lVar4 != 0; lVar4 = lVar4 + -1) {
      *p_Var5 = 0;
      p_Var5 = p_Var5 + 1;
    }
    p_Var5 = (__fd_mask *)local_c8;
    for (lVar4 = 0x10; lVar4 != 0; lVar4 = lVar4 + -1) {
      *p_Var5 = 0;
      p_Var5 = p_Var5 + 1;
    }
    local_158.tv_sec = (long)(param_2 / 1000);
    local_158.tv_usec = (long)((param_2 % 1000) * 1000);
    lVar4 = __fdelt_chk((long)*(int *)(param_1 + 8));
    local_148[lVar4] = local_148[lVar4] | 1L << ((byte)(*(int *)(param_1 + 8) % 0x40) & 0x3f);
    lVar4 = __fdelt_chk();
    iVar2 = *(int *)(param_1 + 8);
    bVar1 = (byte)(iVar2 >> 0x1f);
    local_c8[lVar4] =
         local_c8[lVar4] | 1L << (((char)iVar2 + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f);
    iVar2 = select(iVar2 + 1,(fd_set *)local_148,(fd_set *)0x0,(fd_set *)local_c8,&local_158);
    if (-1 < iVar2) {
      if (iVar2 == 0) goto LAB_0012c540;
      lVar4 = __fdelt_chk((long)*(int *)(param_1 + 8));
      bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x1f);
      if ((local_148[lVar4] &
          1L << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f))
          != 0) {
        iVar2 = 1;
        goto LAB_0012c540;
      }
      break;
    }
    piVar3 = __errno_location();
  } while ((*piVar3 == 4) || (*piVar3 == 0xb));
  iVar2 = -1;
LAB_0012c540:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 _fs_start_read(long param_1,long param_2,long *param_3)

{
  bool bVar1;
  int iVar2;
  int *piVar3;
  long lVar4;
  long lVar5;
  
  *(long *)(param_1 + 0x90) = param_2;
  if (*(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88) < param_2) {
    iVar2 = FUN_0012bd70(param_1 + 0x70);
    if (iVar2 != 1) {
LAB_0012c6dd:
      _fs_connection_died(param_1);
      return 0xffffffff;
    }
    iVar2 = _fs_flush(param_1);
    if (iVar2 < 0) {
      return 0xffffffff;
    }
    lVar5 = *(long *)(param_1 + 0x80);
    lVar4 = lVar5 - *(long *)(param_1 + 0x88);
    if (0 < *(long *)(param_1 + 0x90) - lVar4) {
      piVar3 = __errno_location();
      bVar1 = false;
      do {
        lVar4 = *(long *)(param_1 + 0x78);
        *piVar3 = 0;
        iVar2 = _FontTransRead(*(undefined8 *)(param_1 + 0xb8),
                               *(long *)(param_1 + 0x80) + *(long *)(param_1 + 0x70),lVar4 - lVar5);
        lVar5 = (long)iVar2;
        if (lVar5 < 1) {
          if (lVar5 == 0) {
            if (!bVar1) goto LAB_0012c710;
            iVar2 = *piVar3;
          }
          else {
            iVar2 = *piVar3;
            if (iVar2 == 0xb) {
              if (!bVar1) {
LAB_0012c710:
                iVar2 = _fs_wait_for_readable(param_1,0);
                if (iVar2 == 0) {
                  return 0;
                }
                lVar5 = *(long *)(param_1 + 0x80);
                bVar1 = true;
                goto LAB_0012c671;
              }
              goto LAB_0012c6dd;
            }
          }
          if (iVar2 != 4) goto LAB_0012c6dd;
          lVar5 = *(long *)(param_1 + 0x80);
        }
        else {
          lVar5 = lVar5 + *(long *)(param_1 + 0x80);
          bVar1 = false;
          *(long *)(param_1 + 0x80) = lVar5;
        }
LAB_0012c671:
        lVar4 = lVar5 - *(long *)(param_1 + 0x88);
      } while (0 < *(long *)(param_1 + 0x90) - lVar4);
    }
    if (lVar4 < param_2) {
      return 0;
    }
  }
  if (param_3 != (long *)0x0) {
    *param_3 = *(long *)(param_1 + 0x88) + *(long *)(param_1 + 0x70);
  }
  return 1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_0012c740(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                 undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
                 undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined8 local_28;
  undefined8 local_18;
  
  if (in_AL != '\0') {
    local_88 = param_1;
    local_78 = param_2;
    local_68 = param_3;
    local_58 = param_4;
    local_48 = param_5;
    local_38 = param_6;
    local_28 = param_7;
    local_18 = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &stack0x00000008;
  local_d8 = 8;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_b0 = param_10;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  __vfprintf_chk(_stderr,1,"%s",&local_d8);
  fflush(_stderr);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_0012c820(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                 undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
                 int param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  char in_AL;
  int *piVar2;
  long in_FS_OFFSET;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [16];
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  
  if (in_AL != '\0') {
    local_a8 = param_1;
    local_98 = param_2;
    local_88 = param_3;
    local_78 = param_4;
    local_68 = param_5;
    local_58 = param_6;
    local_48 = param_7;
    local_38 = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &stack0x00000008;
  local_f8 = 0x10;
  local_e8 = local_d8;
  local_f4 = 0x30;
  local_c8 = param_11;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  if (param_9 == 1) {
    piVar2 = __errno_location();
    iVar1 = *piVar2;
    FUN_0012c740("%s","_FontTrans");
    __vfprintf_chk(_stderr,1,param_10,&local_f8);
    fflush(_stderr);
    *piVar2 = iVar1;
  }
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0012c930(long param_1)

{
  FUN_0012c820(2,"SocketINETClose(%p,%d)\n",param_1,*(undefined4 *)(param_1 + 0x1c));
  close(*(int *)(param_1 + 0x1c));
  return;
}



void FUN_0012c960(long param_1,void *param_2,int param_3)

{
  FUN_0012c820(2,"SocketRead(%d,%p,%d)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  read(*(int *)(param_1 + 0x1c),param_2,(long)param_3);
  return;
}



undefined8 FUN_0012c9b0(long param_1,undefined4 param_2,undefined4 param_3)

{
  FUN_0012c820(2,"SocketSetOption(%d,%d,%d)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  return 0xffffffff;
}



void FUN_0012c9e0(long param_1)

{
  FUN_0012c820(2,"SocketUNIXCloseForCloning(%p,%d)\n",param_1,*(undefined4 *)(param_1 + 0x1c));
  close(*(int *)(param_1 + 0x1c));
  return;
}



void FUN_0012ca10(long param_1)

{
  FUN_0012c820(2,"SocketDisconnect(%p,%d)\n",param_1,*(undefined4 *)(param_1 + 0x1c));
  shutdown(*(int *)(param_1 + 0x1c),2);
  return;
}



void FUN_0012ca40(long param_1,iovec *param_2,int param_3)

{
  FUN_0012c820(2,"SocketWritev(%d,%p,%d)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  writev(*(int *)(param_1 + 0x1c),param_2,param_3);
  return;
}



void FUN_0012ca80(long param_1,iovec *param_2,int param_3)

{
  FUN_0012c820(2,"SocketReadv(%d,%p,%d)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  readv(*(int *)(param_1 + 0x1c),param_2,param_3);
  return;
}



void FUN_0012cac0(long param_1,void *param_2,int param_3)

{
  FUN_0012c820(2,"SocketWrite(%d,%p,%d)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  write(*(int *)(param_1 + 0x1c),param_2,(long)param_3);
  return;
}



void FUN_0012cb10(long param_1,undefined8 param_2)

{
  FUN_0012c820(2,"SocketBytesReadable(%p,%d,%p)\n",param_1,*(undefined4 *)(param_1 + 0x1c),param_2);
  ioctl(*(int *)(param_1 + 0x1c),0x541b,param_2);
  return;
}



void * FUN_0012cb60(char *param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                   uint param_5)

{
  uint __domain;
  char *__s2;
  int iVar1;
  void *__ptr;
  long lVar2;
  uint uVar3;
  undefined **ppuVar4;
  long in_FS_OFFSET;
  socklen_t local_48;
  int local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012c820(2,"SocketOpenCOTSClient(%s,%s,%s)\n",param_2,param_3,param_4);
LAB_0012cba5:
  do {
    uVar3 = param_5 + 1;
    FUN_0012c820(3,"SocketSelectFamily(%s)\n",param_1);
    if (5 < uVar3) {
LAB_0012ccd8:
      if (param_5 == 0xffffffff) {
        __ptr = (void *)0x0;
        FUN_0012c820(1,"SocketOpenCOTSClient: Unable to determine socket type for %s\n",param_1);
      }
      else {
        __ptr = (void *)0x0;
        FUN_0012c820(1,"SocketOpenCOTSClient: Unable to open socket for %s\n",param_1);
      }
LAB_0012ccab:
      if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return __ptr;
    }
    ppuVar4 = &PTR_DAT_0013db40 + (long)(int)param_5 * 3;
    while( true ) {
      __s2 = ppuVar4[3];
      iVar1 = strcmp(param_1,__s2);
      if (iVar1 == 0) break;
      uVar3 = uVar3 + 1;
      ppuVar4 = ppuVar4 + 3;
      if (uVar3 == 6) goto LAB_0012ccd8;
    }
    lVar2 = (long)(int)uVar3 * 0x18;
    iVar1 = *(int *)(&DAT_0013db4c + lVar2);
    FUN_0012c820(3,"SocketOpen(%d,%d)\n",uVar3,iVar1);
    __ptr = calloc(1,0x60);
    param_5 = uVar3;
    if (__ptr != (void *)0x0) {
      __domain = *(uint *)(&DAT_0013db48 + lVar2);
      iVar1 = socket(__domain,iVar1,*(int *)(&DAT_0013db54 + lVar2));
      *(int *)((long)__ptr + 0x1c) = iVar1;
      if ((-1 < iVar1) && (lVar2 = sysconf(4), iVar1 < lVar2)) {
        if ((__domain & 0xfffffff7) == 2) {
          local_44 = 1;
          setsockopt(*(int *)((long)__ptr + 0x1c),6,1,&local_44,4);
        }
        else if (__domain == 1) {
          local_48 = 4;
          iVar1 = getsockopt(*(int *)((long)__ptr + 0x1c),1,7,&local_44,&local_48);
          if ((iVar1 == 0) && (local_44 < 0x10000)) {
            local_44 = 0x10000;
            setsockopt(*(int *)((long)__ptr + 0x1c),1,7,&local_44,4);
          }
        }
        *(uint *)((long)__ptr + 8) = uVar3;
        goto LAB_0012ccab;
      }
      FUN_0012c820(2,"SocketOpen: socket() failed for %s\n",__s2);
      free(__ptr);
      goto LAB_0012cba5;
    }
    FUN_0012c820(1,"SocketOpen: malloc failed\n");
  } while( true );
}



void FUN_0012ce10(undefined8 *param_1)

{
  FUN_0012cb60(*param_1);
  return;
}



int FUN_0012ce30(long *param_1)

{
  short *psVar1;
  int iVar2;
  
  psVar1 = (short *)param_1[6];
  FUN_0012c820(2,"SocketUNIXClose(%p,%d)\n",param_1,*(undefined4 *)((long)param_1 + 0x1c));
  iVar2 = close(*(int *)((long)param_1 + 0x1c));
  if ((((*(uint *)(param_1 + 3) != 0) && (psVar1 != (short *)0x0)) && (*psVar1 == 1)) &&
     (((*(char *)(psVar1 + 1) != '\0' && ((*(uint *)(param_1 + 3) & 0x10) == 0)) &&
      ((*(byte *)(*param_1 + 8) & 0x20) == 0)))) {
    unlink((char *)(psVar1 + 1));
  }
  return iVar2;
}



void _FontTransFreeConnInfo(void *param_1)

{
  FUN_0012c820(3,"FreeConnInfo(%p)\n",param_1);
  if (*(void **)((long)param_1 + 0x30) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x30));
  }
  if (*(void **)((long)param_1 + 0x40) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x40));
  }
  if (*(void **)((long)param_1 + 0x20) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x20));
  }
  free(param_1);
  return;
}



uint _FontTransSetOption(long param_1,int param_2,int param_3)

{
  int __fd;
  uint uVar1;
  ulong uVar2;
  int __cmd;
  
  __fd = *(int *)(param_1 + 0x1c);
  FUN_0012c820(2,"SetOption(%d,%d,%d)\n",__fd,param_2,param_3);
  if (param_2 == 1) {
    uVar1 = 0;
    if (param_3 == 1) {
      uVar1 = fcntl(__fd,3,0);
      if (uVar1 != 0xffffffff) {
        __cmd = 4;
        uVar2 = (ulong)(uVar1 | 0x800);
        goto LAB_0012cf41;
      }
    }
  }
  else {
    uVar1 = 0;
    if (param_2 == 2) {
      uVar2 = 1;
      __cmd = 2;
LAB_0012cf41:
      uVar1 = fcntl(__fd,__cmd,uVar2);
      return uVar1;
    }
  }
  return uVar1;
}



void _FontTransBytesReadable(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cf87. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x28))();
  return;
}



void _FontTransRead(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cf97. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x30))();
  return;
}



void _FontTransWrite(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cfa7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x38))();
  return;
}



void _FontTransReadv(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cfb7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x40))();
  return;
}



void _FontTransWritev(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cfc7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x48))();
  return;
}



void _FontTransDisconnect(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012cfd7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x50))();
  return;
}



undefined4 _FontTransClose(long *param_1)

{
  undefined4 uVar1;
  
  FUN_0012c820(2,"Close(%d)\n",*(undefined4 *)((long)param_1 + 0x1c));
  uVar1 = (**(code **)(*param_1 + 0x58))(param_1);
  _FontTransFreeConnInfo(param_1);
  return uVar1;
}



undefined4 _FontTransCloseForCloning(long *param_1)

{
  undefined4 uVar1;
  
  FUN_0012c820(2,"CloseForCloning(%d)\n",*(undefined4 *)((long)param_1 + 0x1c));
  uVar1 = (**(code **)(*param_1 + 0x60))(param_1);
  _FontTransFreeConnInfo(param_1);
  return uVar1;
}



bool _FontTransIsLocal(long param_1)

{
  return *(int *)(param_1 + 0x28) == 1;
}



undefined8 _FontTransGetPeerAddr(long param_1,undefined4 *param_2,int *param_3,undefined8 *param_4)

{
  int iVar1;
  void *__dest;
  undefined8 uVar2;
  
  FUN_0012c820(2,"GetPeerAddr(%d)\n",*(undefined4 *)(param_1 + 0x1c));
  *param_2 = *(undefined4 *)(param_1 + 0x28);
  iVar1 = *(int *)(param_1 + 0x48);
  *param_3 = iVar1;
  __dest = malloc((long)iVar1);
  *param_4 = __dest;
  if (__dest == (void *)0x0) {
    FUN_0012c820(1,"GetPeerAddr: malloc failed\n");
    uVar2 = 0xffffffff;
  }
  else {
    memcpy(__dest,*(void **)(param_1 + 0x40),(long)*(int *)(param_1 + 0x48));
    uVar2 = 0;
  }
  return uVar2;
}



undefined4 _FontTransGetConnectionNumber(long param_1)

{
  return *(undefined4 *)(param_1 + 0x1c);
}



int _FontTransGetHostname(char *param_1,int param_2)

{
  size_t sVar1;
  int iVar2;
  long in_FS_OFFSET;
  utsname uStack_1b8;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uname(&uStack_1b8);
  sVar1 = strlen(uStack_1b8.nodename);
  iVar2 = param_2 + -1;
  if ((int)sVar1 < param_2) {
    iVar2 = (int)sVar1;
  }
  strncpy(param_1,uStack_1b8.nodename,(long)iVar2);
  param_1[iVar2] = '\0';
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0012d1c0(long param_1,char *param_2,char *param_3)

{
  addrinfo *__ai;
  bool bVar1;
  int iVar2;
  char *pcVar3;
  int *piVar4;
  void *pvVar5;
  long *plVar6;
  long lVar7;
  ulong uVar8;
  sockaddr *psVar9;
  byte *pbVar10;
  byte *pbVar11;
  sockaddr *psVar12;
  undefined8 uVar13;
  socklen_t sVar14;
  long *plVar15;
  long *__s2;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  bool bVar18;
  byte bVar19;
  void *local_250;
  socklen_t local_23c;
  undefined local_238 [16];
  undefined local_228 [16];
  undefined local_218 [16];
  sockaddr local_208;
  sockaddr local_1f8 [8];
  char local_178 [48];
  char local_148 [264];
  long local_40;
  
  bVar19 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012c820(2,"SocketINETConnect(%d,%s,%s)\n",*(undefined4 *)(param_1 + 0x1c),param_2,param_3);
  if (param_2 == (char *)0x0) {
    param_2 = local_148;
    local_148[0] = '\0';
    _FontTransGetHostname(param_2,0x100);
    if (DAT_0013fd08 == (long *)0x0) goto LAB_0012d840;
LAB_0012d225:
    plVar6 = DAT_0013fd08;
    plVar15 = DAT_0013fd08 + 6;
    iVar2 = strcmp(param_2,(char *)plVar15);
    __ai = (addrinfo *)plVar6[1];
    __s2 = plVar6 + 2;
    if ((iVar2 != 0) || (iVar2 = strcmp(param_3,(char *)__s2), iVar2 != 0)) {
      if (__ai != (addrinfo *)0x0) {
        freeaddrinfo(__ai);
      }
      plVar6[1] = 0;
      goto LAB_0012d3f7;
    }
    if (__ai == (addrinfo *)0x0) goto LAB_0012d3f7;
    lVar7 = *plVar6;
  }
  else {
    if (DAT_0013fd08 != (long *)0x0) goto LAB_0012d225;
LAB_0012d840:
    plVar6 = (long *)malloc(0x70);
    plVar15 = plVar6 + 6;
    __s2 = plVar6 + 2;
    DAT_0013fd08 = plVar6;
    plVar6[1] = 0;
LAB_0012d3f7:
    strncpy((char *)__s2,param_3,0x20);
    *(undefined *)((long)plVar6 + 0x2f) = 0;
    strncpy((char *)plVar15,param_2,0x40);
    *(undefined *)((long)plVar6 + 0x6f) = 0;
    local_228 = (undefined  [16])0x0;
    local_218 = (undefined  [16])0x0;
    local_238 = ZEXT416(*(uint *)(&DAT_0013db4c + (long)*(int *)(param_1 + 8) * 0x18)) << 0x40;
    iVar2 = getaddrinfo(param_2,param_3,(addrinfo *)local_238,(addrinfo **)(plVar6 + 1));
    plVar15 = DAT_0013fd08;
    if (iVar2 != 0) {
      pcVar3 = gai_strerror(iVar2);
      FUN_0012c820(1,"SocketINETConnect() can\'t get address for %s:%s: %s\n",param_2,param_3,pcVar3
                  );
      piVar4 = __errno_location();
      uVar13 = 0xffffffff;
      *piVar4 = 0x16;
      goto LAB_0012d7a6;
    }
    lVar7 = DAT_0013fd08[1];
    *DAT_0013fd08 = lVar7;
    iVar2 = 0;
    while (lVar7 != 0) {
      lVar7 = *(long *)(lVar7 + 0x28);
      iVar2 = iVar2 + 1;
      *plVar15 = lVar7;
    }
    FUN_0012c820(4,"Got New Address list with %d addresses\n",iVar2);
    plVar6 = DAT_0013fd08;
    lVar7 = 0;
    *DAT_0013fd08 = 0;
  }
  bVar17 = false;
  bVar1 = false;
  if (lVar7 == 0) goto LAB_0012d2ad;
LAB_0012d288:
  iVar2 = *(int *)(lVar7 + 4);
  psVar9 = *(sockaddr **)(lVar7 + 0x18);
  sVar14 = *(socklen_t *)(lVar7 + 0x10);
  bVar1 = bVar17;
  if (iVar2 == 2) goto LAB_0012d2d1;
LAB_0012d298:
  if (iVar2 != 10) goto LAB_0012d2a1;
  pcVar3 = inet_ntop(10,psVar9->sa_data + 6,local_178,0x2e);
  FUN_0012c820(4,"SocketINETConnect() sockname.sin6_addr = %s\n",pcVar3);
  FUN_0012c820(4,"SocketINETConnect() sockname.sin6_port = %d\n",
               *(ushort *)psVar9->sa_data << 8 | *(ushort *)psVar9->sa_data >> 8);
  bVar17 = *(uint *)(&DAT_0013db48 + (long)*(int *)(param_1 + 8) * 0x18) < 2;
  bVar16 = *(uint *)(&DAT_0013db48 + (long)*(int *)(param_1 + 8) * 0x18) == 2;
  if (bVar16) {
    lVar7 = 4;
    pbVar10 = (&PTR_DAT_0013db40)[(long)*(int *)(param_1 + 8) * 3];
    pbVar11 = &DAT_0013641d;
    do {
      if (lVar7 == 0) break;
      lVar7 = lVar7 + -1;
      bVar17 = *pbVar10 < *pbVar11;
      bVar16 = *pbVar10 == *pbVar11;
      pbVar10 = pbVar10 + (ulong)bVar19 * -2 + 1;
      pbVar11 = pbVar11 + (ulong)bVar19 * -2 + 1;
    } while (bVar16);
    if ((!bVar17 && !bVar16) != bVar17) {
      pcVar3 = "SocketINETConnect() Skipping IPv6 address\n";
      goto LAB_0012d66f;
    }
    FUN_0012c930(param_1);
    local_250 = (void *)FUN_0012cb60(&DAT_0013641d,&DAT_0013641d,param_2,param_3,0xffffffff);
    if (local_250 == (void *)0x0) {
      FUN_0012c820(4,"SocketINETConnect() Cannot get IPv6 socket for IPv6 address\n");
      goto LAB_0012d5c7;
    }
    *(undefined4 *)(param_1 + 0x1c) = *(undefined4 *)((long)local_250 + 0x1c);
    if (*(int *)(&DAT_0013db48 + (long)*(int *)((long)local_250 + 8) * 0x18) != 10) {
      pcVar3 = "SocketINETConnect() Cannot get IPv6 socket for IPv6 address\n";
      do {
        FUN_0012c820(4,pcVar3);
        free(local_250);
LAB_0012d5c7:
        lVar7 = *DAT_0013fd08;
        plVar6 = DAT_0013fd08;
LAB_0012d2a1:
        lVar7 = *(long *)(lVar7 + 0x28);
        *plVar6 = lVar7;
        bVar17 = bVar1;
        if (lVar7 != 0) goto LAB_0012d288;
LAB_0012d2ad:
        if (bVar1) {
          FUN_0012c820(1,"SocketINETConnect() no usable address for %s:%s\n",param_2,param_3);
          uVar13 = 0xffffffff;
          goto LAB_0012d7a6;
        }
        lVar7 = plVar6[1];
        bVar17 = true;
        *plVar6 = lVar7;
        iVar2 = *(int *)(lVar7 + 4);
        psVar9 = *(sockaddr **)(lVar7 + 0x18);
        sVar14 = *(socklen_t *)(lVar7 + 0x10);
        bVar1 = bVar17;
        if (iVar2 != 2) goto LAB_0012d298;
LAB_0012d2d1:
        pcVar3 = inet_ntop(2,psVar9->sa_data + 2,local_178,0x2e);
        FUN_0012c820(4,"SocketINETConnect() sockname.sin_addr = %s\n",pcVar3);
        FUN_0012c820(4,"SocketINETConnect() sockname.sin_port = %d\n",
                     *(ushort *)psVar9->sa_data << 8 | *(ushort *)psVar9->sa_data >> 8);
        bVar16 = *(uint *)(&DAT_0013db48 + (long)*(int *)(param_1 + 8) * 0x18) < 10;
        bVar18 = *(uint *)(&DAT_0013db48 + (long)*(int *)(param_1 + 8) * 0x18) == 10;
        if (!bVar18) goto LAB_0012d339;
        lVar7 = 4;
        pbVar10 = (&PTR_DAT_0013db40)[(long)*(int *)(param_1 + 8) * 3];
        pbVar11 = &DAT_0013641d;
        do {
          if (lVar7 == 0) break;
          lVar7 = lVar7 + -1;
          bVar16 = *pbVar10 < *pbVar11;
          bVar18 = *pbVar10 == *pbVar11;
          pbVar10 = pbVar10 + (ulong)bVar19 * -2 + 1;
          pbVar11 = pbVar11 + (ulong)bVar19 * -2 + 1;
        } while (bVar18);
        bVar1 = bVar17;
        if ((!bVar16 && !bVar18) != bVar16) {
          pcVar3 = "SocketINETConnect Skipping IPv4 address\n";
LAB_0012d66f:
          FUN_0012c820(4,pcVar3);
          goto LAB_0012d5c7;
        }
        FUN_0012c930(param_1);
        local_250 = (void *)FUN_0012cb60(&DAT_0013641d,&DAT_0013641d,param_2,param_3,
                                         *(undefined4 *)(param_1 + 8));
        if (local_250 == (void *)0x0) {
          FUN_0012c820(4,"SocketINETConnect() Cannot get IPv4  socketfor IPv4 address\n");
          goto LAB_0012d5c7;
        }
        *(undefined4 *)(param_1 + 0x1c) = *(undefined4 *)((long)local_250 + 0x1c);
        if (*(int *)(&DAT_0013db48 + (long)*(int *)((long)local_250 + 8) * 0x18) == 2) break;
        pcVar3 = "SocketINETConnect() Cannot get IPv4  socketfor IPv4 address\n";
      } while( true );
    }
    free(local_250);
  }
LAB_0012d339:
  local_23c = 1;
  setsockopt(*(int *)(param_1 + 0x1c),1,9,&local_23c,4);
  iVar2 = connect(*(int *)(param_1 + 0x1c),psVar9,sVar14);
  if (iVar2 < 0) {
    piVar4 = __errno_location();
    iVar2 = *piVar4;
    lVar7 = *(long *)(*DAT_0013fd08 + 0x28);
    if ((iVar2 == 0x6f) || (iVar2 == 4)) {
LAB_0012d79d:
      uVar13 = 0xfffffffe;
    }
    else {
      if (((lVar7 == 0) && (DAT_0013fd08[1] == *DAT_0013fd08)) || (0xf < iVar2 - 0x61U)) {
        if ((iVar2 == 0xb) || (iVar2 == 0x73)) {
          uVar13 = 0xfffffffd;
          goto LAB_0012d7a3;
        }
      }
      else if ((0xa015UL >> ((ulong)(iVar2 - 0x61U) & 0x3f) & 1) != 0) goto LAB_0012d79d;
      FUN_0012c820(2,"SocketINETConnect: Can\'t connect: errno = %d\n",iVar2);
      uVar13 = 0xffffffff;
      lVar7 = *(long *)(*DAT_0013fd08 + 0x28);
    }
  }
  else {
    psVar9 = local_1f8;
    FUN_0012c820(3,"SocketINETGetAddr(%p)\n",param_1);
    psVar12 = psVar9;
    for (lVar7 = 0x10; lVar7 != 0; lVar7 = lVar7 + -1) {
      psVar12->sa_family = 0;
      psVar12->sa_data[0] = '\0';
      psVar12->sa_data[1] = '\0';
      psVar12->sa_data[2] = '\0';
      psVar12->sa_data[3] = '\0';
      psVar12->sa_data[4] = '\0';
      psVar12->sa_data[5] = '\0';
      psVar12 = (sockaddr *)(psVar12[-(ulong)bVar19].sa_data + 6);
    }
    local_23c = 0x80;
    iVar2 = getsockname(*(int *)(param_1 + 0x1c),psVar9,&local_23c);
    sVar14 = local_23c;
    if (iVar2 < 0) {
      piVar4 = __errno_location();
      FUN_0012c820(1,"SocketINETGetAddr: getsockname() failed: %d\n",*piVar4);
LAB_0012d96f:
      pcVar3 = "SocketINETConnect: ...SocketINETGetAddr() failed:\n";
    }
    else {
      pvVar5 = malloc((ulong)local_23c);
      *(void **)(param_1 + 0x30) = pvVar5;
      if (pvVar5 == (void *)0x0) {
        FUN_0012c820(1,"SocketINETGetAddr: Can\'t allocate space for the addr\n");
        goto LAB_0012d96f;
      }
      *(socklen_t *)(param_1 + 0x38) = sVar14;
      *(uint *)(param_1 + 0x28) = (uint)local_1f8[0].sa_family;
      memcpy(pvVar5,psVar9,(long)(int)sVar14);
      if (local_1f8[0].sa_family == 10) {
        uVar8 = 0x80;
        local_23c = 0x80;
      }
      else {
        uVar8 = 0x10;
        local_23c = 0x10;
        psVar9 = &local_208;
      }
      psVar12 = psVar9;
      for (uVar8 = uVar8 >> 3; uVar8 != 0; uVar8 = uVar8 - 1) {
        psVar12->sa_family = 0;
        psVar12->sa_data[0] = '\0';
        psVar12->sa_data[1] = '\0';
        psVar12->sa_data[2] = '\0';
        psVar12->sa_data[3] = '\0';
        psVar12->sa_data[4] = '\0';
        psVar12->sa_data[5] = '\0';
        psVar12 = (sockaddr *)(psVar12[-(ulong)bVar19].sa_data + 6);
      }
      FUN_0012c820(3,"SocketINETGetPeerAddr(%p)\n",param_1);
      iVar2 = getpeername(*(int *)(param_1 + 0x1c),psVar9,&local_23c);
      sVar14 = local_23c;
      if (iVar2 < 0) {
        piVar4 = __errno_location();
        FUN_0012c820(1,"SocketINETGetPeerAddr: getpeername() failed: %d\n",*piVar4);
      }
      else {
        pvVar5 = malloc((ulong)local_23c);
        *(void **)(param_1 + 0x40) = pvVar5;
        if (pvVar5 != (void *)0x0) {
          *(socklen_t *)(param_1 + 0x48) = sVar14;
          memcpy(pvVar5,psVar9,(long)(int)sVar14);
          uVar13 = 0;
          goto LAB_0012d7a6;
        }
        FUN_0012c820(1,"SocketINETGetPeerAddr: Can\'t allocate space for the addr\n");
      }
      pcVar3 = "SocketINETConnect: ...SocketINETGetPeerAddr() failed:\n";
    }
    FUN_0012c820(1,pcVar3);
    uVar13 = 0xffffffff;
    lVar7 = *(long *)(*DAT_0013fd08 + 0x28);
  }
LAB_0012d7a3:
  *DAT_0013fd08 = lVar7;
LAB_0012d7a6:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar13;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0012d9b0(long *param_1,byte *param_2,char *param_3)

{
  byte bVar1;
  char cVar2;
  sockaddr *psVar3;
  long lVar4;
  bool bVar5;
  int iVar6;
  int iVar7;
  size_t sVar8;
  int *piVar9;
  undefined8 uVar10;
  undefined8 *puVar11;
  undefined8 *puVar12;
  addrinfo *paVar13;
  ulong uVar14;
  ulong uVar15;
  bool bVar16;
  uint __len;
  byte *pbVar17;
  sockaddr *psVar18;
  addrinfo *paVar19;
  byte *pbVar20;
  long lVar21;
  uint uVar22;
  char *pcVar23;
  char *pcVar24;
  long in_FS_OFFSET;
  bool bVar25;
  bool bVar26;
  bool bVar27;
  byte bVar28;
  addrinfo *local_1c8;
  undefined8 local_1c0;
  sockaddr local_1b8 [7];
  char local_148 [264];
  long local_40;
  
  bVar28 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar22 = *(uint *)(*param_1 + 8) & 0x20;
  FUN_0012c820(2,"SocketUNIXConnect(%d,%s,%s)\n",*(undefined4 *)((long)param_1 + 0x1c),param_2,
               param_3);
  if (param_2 != (byte *)0x0) {
    bVar1 = *param_2;
    bVar25 = false;
    bVar16 = bVar1 != 0x2f && bVar1 != 0;
    bVar5 = bVar1 == 0x2f;
    bVar27 = bVar1 == 0;
    bVar26 = bVar5 || bVar27;
    if (!bVar5 && !bVar27) {
      lVar21 = 5;
      pbVar17 = param_2;
      pbVar20 = &DAT_00136485;
      do {
        if (lVar21 == 0) break;
        lVar21 = lVar21 + -1;
        bVar25 = *pbVar17 < *pbVar20;
        bVar26 = *pbVar17 == *pbVar20;
        pbVar17 = pbVar17 + (ulong)bVar28 * -2 + 1;
        pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
      } while (bVar26);
      if ((!bVar25 && !bVar26) != bVar25) {
        _FontTransGetHostname(local_148,0x100);
        iVar7 = strcmp(local_148,(char *)param_2);
        if (iVar7 != 0) {
          iVar7 = getaddrinfo(local_148,(char *)0x0,(addrinfo *)0x0,&local_1c8);
          if (iVar7 == 0) {
            iVar7 = getaddrinfo((char *)param_2,(char *)0x0,(addrinfo *)0x0,(addrinfo **)&local_1c0)
            ;
            if (iVar7 == 0) {
              paVar19 = local_1c8;
              if (local_1c8 == (addrinfo *)0x0) {
                freeaddrinfo((addrinfo *)0x0);
                freeaddrinfo(local_1c0);
              }
              else {
                do {
                  if (local_1c0 == (addrinfo *)0x0) {
                    bVar27 = false;
                    bVar5 = bVar16;
                  }
                  else {
                    iVar7 = paVar19->ai_family;
                    paVar13 = local_1c0;
                    do {
                      bVar27 = false;
                      bVar5 = bVar16;
                      if (iVar7 == paVar13->ai_family) {
                        if (iVar7 == 2) {
                          bVar27 = *(int *)(paVar13->ai_addr->sa_data + 2) ==
                                   *(int *)(paVar19->ai_addr->sa_data + 2);
                          bVar5 = !bVar27;
                        }
                        else if (iVar7 == 10) {
                          psVar18 = paVar19->ai_addr;
                          psVar3 = paVar13->ai_addr;
                          lVar21._0_2_ = psVar18[1].sa_family;
                          lVar21._2_1_ = psVar18[1].sa_data[0];
                          lVar21._3_1_ = psVar18[1].sa_data[1];
                          lVar21._4_1_ = psVar18[1].sa_data[2];
                          lVar21._5_1_ = psVar18[1].sa_data[3];
                          lVar21._6_1_ = psVar18[1].sa_data[4];
                          lVar21._7_1_ = psVar18[1].sa_data[5];
                          lVar4._0_2_ = psVar3[1].sa_family;
                          lVar4._2_1_ = psVar3[1].sa_data[0];
                          lVar4._3_1_ = psVar3[1].sa_data[1];
                          lVar4._4_1_ = psVar3[1].sa_data[2];
                          lVar4._5_1_ = psVar3[1].sa_data[3];
                          lVar4._6_1_ = psVar3[1].sa_data[4];
                          lVar4._7_1_ = psVar3[1].sa_data[5];
                          bVar5 = *(long *)(psVar18->sa_data + 6) == *(long *)(psVar3->sa_data + 6);
                          bVar27 = lVar21 == lVar4 && bVar5;
                          bVar5 = lVar21 != lVar4 || !bVar5;
                        }
                      }
                      paVar13 = paVar13->ai_next;
                    } while ((paVar13 != (addrinfo *)0x0) && (bVar5));
                  }
                } while ((paVar19->ai_next != (addrinfo *)0x0) &&
                        (paVar19 = paVar19->ai_next, bVar5));
                freeaddrinfo(local_1c8);
                freeaddrinfo(local_1c0);
                if (bVar27) goto LAB_0012da27;
              }
            }
            else {
              freeaddrinfo(local_1c8);
            }
          }
          FUN_0012c820(1,"SocketUNIXConnect: Cannot connect to non-local host %s\n",param_2);
          uVar10 = 0xffffffff;
          goto LAB_0012db28;
        }
      }
    }
  }
LAB_0012da27:
  if ((param_3 == (char *)0x0) || (cVar2 = *param_3, cVar2 == '\0')) {
    FUN_0012c820(1,"SocketUNIXConnect: Missing port specification\n");
    uVar10 = 0xffffffff;
    goto LAB_0012db28;
  }
  local_1b8[0].sa_family = 1;
  if (cVar2 == '@') {
    pcVar23 = "";
    lVar21 = 0;
    pcVar24 = pcVar23;
  }
  else {
    lVar21 = 0x12;
    pcVar24 = "@";
    pcVar23 = "/tmp/.font-unix/fs";
    if (uVar22 == 0) {
      pcVar24 = "";
    }
    if (cVar2 == '/') {
      lVar21 = 0;
      pcVar23 = "";
    }
  }
  sVar8 = strlen(param_3);
  if (0x6b < sVar8 + lVar21) {
    FUN_0012c820(1,"SocketUNIXConnect: path too long\n");
    uVar10 = 0xffffffff;
    goto LAB_0012db28;
  }
  __snprintf_chk(local_1b8[0].sa_data,0x6c,1,0x6c,"%s%s%s",pcVar24,pcVar23,param_3);
  sVar8 = strlen(local_1b8[0].sa_data);
  iVar7 = (int)sVar8;
  __len = iVar7 + 2;
  if (uVar22 != 0) {
    local_1b8[0].sa_data[0] = '\0';
  }
  iVar6 = connect(*(int *)((long)param_1 + 0x1c),local_1b8,__len);
  if (iVar6 < 0) {
    piVar9 = __errno_location();
    iVar7 = *piVar9;
    if ((iVar7 == 0xb) || (iVar7 == 0x73)) {
      uVar10 = 0xfffffffd;
    }
    else if (iVar7 == 4) {
      uVar10 = 0xfffffffe;
    }
    else if ((iVar7 == 2) || (iVar7 == 0x6f)) {
      uVar10 = 0xffffffff;
      if (uVar22 != 0) {
        *(uint *)(*param_1 + 8) = *(uint *)(*param_1 + 8) & 0xffffffdf;
        uVar10 = 0xfffffffe;
      }
    }
    else {
      FUN_0012c820(2,"SocketUNIXConnect: Can\'t connect: errno = %d\n");
      uVar10 = 0xffffffff;
    }
    goto LAB_0012db28;
  }
  uVar15 = (ulong)__len;
  puVar11 = (undefined8 *)malloc(uVar15);
  param_1[6] = (long)puVar11;
  if (puVar11 != (undefined8 *)0x0) {
    puVar12 = (undefined8 *)malloc(uVar15);
    param_1[8] = (long)puVar12;
    if (puVar12 != (undefined8 *)0x0) {
      if (uVar22 != 0) {
        local_1b8[0].sa_data[0] = '@';
      }
      *(undefined4 *)(param_1 + 5) = 1;
      *(uint *)(param_1 + 7) = __len;
      *(uint *)(param_1 + 9) = __len;
      if (__len < 8) {
        if ((__len & 4) != 0) {
          *(undefined4 *)puVar11 = local_1b8[0]._0_4_;
          *(undefined4 *)((long)puVar11 + (uVar15 - 4)) =
               *(undefined4 *)((long)&local_1c0 + uVar15 + 4);
          goto LAB_0012dca9;
        }
        if (__len != 0) {
          *(undefined *)puVar11 = (undefined)local_1b8[0].sa_family;
          if ((__len & 2) != 0) {
            *(undefined2 *)((long)puVar11 + (uVar15 - 2)) =
                 *(undefined2 *)((long)&local_1c0 + uVar15 + 6);
          }
          goto LAB_0012dca9;
        }
      }
      else {
        *(undefined8 *)((long)puVar11 + (uVar15 - 8)) = *(undefined8 *)((long)&local_1c0 + uVar15);
        psVar18 = local_1b8;
        for (uVar14 = (ulong)(iVar7 + 1U >> 3); uVar14 != 0; uVar14 = uVar14 - 1) {
          *puVar11 = *(undefined8 *)psVar18;
          psVar18 = (sockaddr *)(psVar18[-(ulong)bVar28].sa_data + 6);
          puVar11 = puVar11 + (ulong)bVar28 * -2 + 1;
        }
LAB_0012dca9:
        if (7 < __len) {
          *(undefined8 *)((long)puVar12 + (uVar15 - 8)) = *(undefined8 *)((long)&local_1c0 + uVar15)
          ;
          uVar10 = 0;
          psVar18 = local_1b8;
          for (uVar15 = (ulong)(iVar7 + 1U >> 3); uVar15 != 0; uVar15 = uVar15 - 1) {
            *puVar12 = *(undefined8 *)psVar18;
            psVar18 = (sockaddr *)(psVar18[-(ulong)bVar28].sa_data + 6);
            puVar12 = puVar12 + (ulong)bVar28 * -2 + 1;
          }
          goto LAB_0012db28;
        }
      }
      if ((__len & 4) == 0) {
        if ((__len == 0) ||
           (*(undefined *)puVar12 = (undefined)local_1b8[0].sa_family, (__len & 2) == 0)) {
          uVar10 = 0;
        }
        else {
          *(undefined2 *)((long)puVar12 + (uVar15 - 2)) =
               *(undefined2 *)((long)&local_1c0 + uVar15 + 6);
          uVar10 = 0;
        }
      }
      else {
        *(undefined4 *)puVar12 = local_1b8[0]._0_4_;
        *(undefined4 *)((long)puVar12 + (uVar15 - 4)) =
             *(undefined4 *)((long)&local_1c0 + uVar15 + 4);
        uVar10 = 0;
      }
      goto LAB_0012db28;
    }
  }
  FUN_0012c820(1,"SocketUNIXCreateListener: Can\'t allocate space for the addr\n");
  uVar10 = 0xffffffff;
LAB_0012db28:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar10;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0012def0(char *param_1,undefined8 *param_2,undefined8 *param_3,undefined8 *param_4)

{
  uint uVar1;
  int iVar2;
  byte *__s;
  byte *pbVar3;
  char *pcVar4;
  size_t sVar5;
  char *pcVar6;
  char *pcVar7;
  undefined8 uVar8;
  long lVar9;
  byte *pbVar10;
  byte *__s_00;
  long in_FS_OFFSET;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  byte bVar14;
  undefined local_168 [32];
  byte local_148 [264];
  long local_40;
  
  bVar14 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012c820(3,"ParseAddress(%s)\n",param_1);
  __s = (byte *)strdup(param_1);
  pbVar3 = (byte *)strchr((char *)__s,0x2f);
  if ((pbVar3 != (byte *)0x0) || (pbVar3 = (byte *)strrchr((char *)__s,0x3a), pbVar3 != (byte *)0x0)
     ) {
    if (*pbVar3 == 0x3a) {
      pcVar7 = "local";
      __s_00 = __s;
      if (pbVar3 != __s) {
        pcVar7 = &DAT_0013641d;
      }
    }
    else {
      *pbVar3 = 0;
      __s_00 = pbVar3 + 1;
      pcVar7 = (char *)__s;
      if ((*__s == 0) && (pcVar7 = &DAT_0013641d, pbVar3[1] == 0x3a)) {
        pcVar7 = "local";
      }
    }
    pcVar4 = strrchr((char *)__s_00,0x3a);
    if (pcVar4 != (char *)0x0) {
      *pcVar4 = '\0';
      sVar5 = strlen((char *)__s_00);
      uVar1 = (uint)sVar5;
      if (uVar1 == 0) {
        __s_00 = local_148;
        _FontTransGetHostname(__s_00,0x100);
      }
      else {
        bVar11 = uVar1 < 3;
        bVar13 = uVar1 == 3;
        if (3 < (int)uVar1) {
          lVar9 = 4;
          pbVar3 = (byte *)pcVar7;
          pbVar10 = &DAT_0013641d;
          do {
            if (lVar9 == 0) break;
            lVar9 = lVar9 + -1;
            bVar11 = *pbVar3 < *pbVar10;
            bVar13 = *pbVar3 == *pbVar10;
            pbVar3 = pbVar3 + (ulong)bVar14 * -2 + 1;
            pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
          } while (bVar13);
          bVar12 = false;
          bVar11 = (!bVar11 && !bVar13) == bVar11;
          if (!bVar11) {
            lVar9 = 6;
            pbVar3 = (byte *)pcVar7;
            pbVar10 = (byte *)"inet6";
            do {
              if (lVar9 == 0) break;
              lVar9 = lVar9 + -1;
              bVar12 = *pbVar3 < *pbVar10;
              bVar11 = *pbVar3 == *pbVar10;
              pbVar3 = pbVar3 + (ulong)bVar14 * -2 + 1;
              pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
            } while (bVar11);
            if ((!bVar12 && !bVar11) != bVar12) goto LAB_0012dfaa;
          }
          if ((*__s_00 == 0x5b) && (pbVar3 = __s_00 + (long)(int)uVar1 + -1, *pbVar3 == 0x5d)) {
            *pbVar3 = 0;
            iVar2 = inet_pton(10,(char *)(__s_00 + 1),local_168);
            if (iVar2 == 1) {
              pcVar7 = "inet6";
              __s_00 = __s_00 + 1;
            }
            else {
              *pbVar3 = 0x5d;
            }
          }
        }
      }
LAB_0012dfaa:
      pcVar6 = strchr(pcVar4 + 1,0x2f);
      if (pcVar6 != (char *)0x0) {
        *pcVar6 = '\0';
      }
      pcVar7 = strdup(pcVar7);
      *param_2 = pcVar7;
      if (pcVar7 == (char *)0x0) {
        *param_4 = 0;
        *param_3 = 0;
        *param_2 = 0;
        free(__s);
        uVar8 = 0;
      }
      else {
        pcVar7 = strdup((char *)__s_00);
        *param_3 = pcVar7;
        if (pcVar7 == (char *)0x0) {
          *param_4 = 0;
        }
        else {
          pcVar7 = strdup(pcVar4 + 1);
          *param_4 = pcVar7;
          if (pcVar7 != (char *)0x0) {
            free(__s);
            uVar8 = 1;
            goto LAB_0012e00e;
          }
          free((void *)*param_3);
        }
        *param_3 = 0;
        free((void *)*param_2);
        *param_2 = 0;
        free(__s);
        uVar8 = 0;
      }
      goto LAB_0012e00e;
    }
  }
  *param_2 = 0;
  *param_3 = 0;
  *param_4 = 0;
  free(__s);
  uVar8 = 0;
LAB_0012e00e:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar8;
}



undefined4 _FontTransConnect(long *param_1,undefined8 param_2)

{
  int iVar1;
  undefined4 uVar2;
  long in_FS_OFFSET;
  void *local_38;
  char *local_30;
  char *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012c820(2,"Connect(%d,%s)\n",*(undefined4 *)((long)param_1 + 0x1c),param_2);
  iVar1 = FUN_0012def0(param_2,&local_38,&local_30,&local_28);
  if (iVar1 == 0) {
    uVar2 = 0xffffffff;
    FUN_0012c820(1,"Connect: Unable to Parse address %s\n",param_2);
  }
  else {
    if ((local_28 == (char *)0x0) || (*local_28 == '\0')) {
      FUN_0012c820(1,"Connect: Missing port specification in %s\n",param_2);
      if (local_38 != (void *)0x0) {
        free(local_38);
      }
      uVar2 = 0xffffffff;
      local_28 = local_30;
    }
    else {
      uVar2 = (**(code **)(*param_1 + 0x20))(param_1,local_30);
      if (local_38 != (void *)0x0) {
        free(local_38);
      }
      if (local_30 != (char *)0x0) {
        free(local_30);
      }
    }
    if (local_28 != (char *)0x0) {
      free(local_28);
    }
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



undefined8 * _FontTransOpenCOTSClient(undefined8 param_1)

{
  char *__s1;
  int iVar1;
  undefined8 *puVar2;
  undefined **ppuVar3;
  undefined **ppuVar4;
  long in_FS_OFFSET;
  char *local_48;
  void *local_40;
  void *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012c820(2,"OpenCOTSClient(%s)\n",param_1);
  local_48 = (char *)0x0;
  local_40 = (void *)0x0;
  local_38 = (void *)0x0;
  FUN_0012c820(2,"Open(%d,%s)\n",1,param_1);
  iVar1 = FUN_0012def0(param_1,&local_48,&local_40,&local_38);
  __s1 = local_48;
  if (iVar1 == 0) {
    puVar2 = (undefined8 *)0x0;
    FUN_0012c820(1,"Open: Unable to Parse address %s\n",param_1);
  }
  else {
    ppuVar4 = &PTR__FontTransSocketTCPFuncs_0013dc80;
    FUN_0012c820(3,"SelectTransport(%s)\n",local_48);
    ppuVar3 = &_FontTransSocketTCPFuncs;
    iVar1 = strcasecmp(__s1,_FontTransSocketTCPFuncs);
    while (iVar1 != 0) {
      ppuVar4 = (undefined **)((long)ppuVar4 + 0x10);
      if ((Elf64_Dyn *)ppuVar4 == _DYNAMIC) {
        puVar2 = (undefined8 *)0x0;
        FUN_0012c820(1,"Open: Unable to find transport for %s\n",local_48);
        free(local_48);
        free(local_40);
        free(local_38);
        goto LAB_0012e440;
      }
      ppuVar3 = (undefined **)((Elf64_Dyn *)ppuVar4)->d_tag;
      iVar1 = strcasecmp(__s1,*ppuVar3);
    }
    puVar2 = (undefined8 *)(*(code *)ppuVar3[2])(ppuVar3,local_48,local_40,local_38);
    if (puVar2 == (undefined8 *)0x0) {
      if ((*(byte *)(ppuVar3 + 1) & 4) == 0) {
        FUN_0012c820(1,"Open: transport open failed for %s/%s:%s\n",local_48,local_40,local_38);
      }
      free(local_48);
      free(local_40);
      free(local_38);
    }
    else {
      *puVar2 = ppuVar3;
      puVar2[4] = local_38;
      free(local_48);
      free(local_40);
    }
  }
LAB_0012e440:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar2;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

long MakeAtom(char *param_1,uint param_2,int param_3)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  uint uVar4;
  undefined8 *puVar5;
  ulong uVar6;
  void *pvVar7;
  long *plVar8;
  uint uVar9;
  long *plVar10;
  long lVar11;
  char *pcVar12;
  ulong uVar13;
  uint uVar14;
  long *plVar15;
  long *plVar16;
  int iVar17;
  int iVar18;
  size_t __size;
  int iVar19;
  
  plVar10 = DAT_0013fd38;
  uVar13 = (ulong)param_2;
  if (param_2 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = 0;
    pcVar12 = param_1;
    do {
      cVar2 = *pcVar12;
      pcVar12 = pcVar12 + 1;
      uVar4 = uVar4 << 3 ^ (int)cVar2;
    } while (pcVar12 != param_1 + (ulong)(param_2 - 1) + 1);
    uVar4 = (uVar4 ^ (int)uVar4 >> 0x1f) - ((int)uVar4 >> 0x1f);
  }
  if (DAT_0013fd38 == (long *)0x0) {
    uVar14 = 0;
  }
  else {
    uVar14 = DAT_0013fd2c & uVar4;
    plVar8 = (long *)DAT_0013fd38[(int)uVar14];
    if (plVar8 != (long *)0x0) {
      if ((*(uint *)((long)plVar8 + 0xc) == uVar4) && (*(uint *)(plVar8 + 1) == param_2)) {
        uVar6 = 0;
        do {
          if (uVar13 == uVar6) {
            return plVar8[2];
          }
          pcVar12 = (char *)(*plVar8 + uVar6);
          pcVar1 = param_1 + uVar6;
          uVar6 = uVar6 + 1;
        } while (*pcVar12 == *pcVar1);
      }
      while( true ) {
        uVar14 = uVar14 + ((int)uVar4 % DAT_0013fd28 | 1U);
        if (DAT_0013fd34 <= (int)uVar14) {
          uVar14 = uVar14 - DAT_0013fd34;
        }
        plVar8 = (long *)DAT_0013fd38[(int)uVar14];
        if (plVar8 == (long *)0x0) break;
        if ((*(uint *)((long)plVar8 + 0xc) == uVar4) && (*(uint *)(plVar8 + 1) == param_2)) {
          uVar6 = 0;
          do {
            if (uVar13 == uVar6) {
              return plVar8[2];
            }
            pcVar12 = (char *)(*plVar8 + uVar6);
            pcVar1 = param_1 + uVar6;
            uVar6 = uVar6 + 1;
          } while (*pcVar12 == *pcVar1);
        }
      }
    }
  }
  if (param_3 == 0) {
    return 0;
  }
  puVar5 = (undefined8 *)malloc(uVar13 + 0x19);
  if (puVar5 == (undefined8 *)0x0) {
    __fprintf_chk(_stderr,1,"MakeAtom(): Error: Couldn\'t allocate AtomListRec (%ld)\n",
                  uVar13 + 0x19);
    return 0;
  }
  *(uint *)(puVar5 + 1) = param_2;
  *puVar5 = puVar5 + 3;
  strncpy((char *)(puVar5 + 3),param_1,uVar13);
  iVar17 = DAT_0013fd30;
  *(undefined *)((long)puVar5 + uVar13 + 0x18) = 0;
  iVar3 = DAT_0013fd34;
  DAT_0013fd10 = DAT_0013fd10 + 1;
  puVar5[2] = DAT_0013fd10;
  *(uint *)((long)puVar5 + 0xc) = uVar4;
  if (iVar17 < iVar3 / 2) {
    plVar10 = plVar10 + (int)uVar14;
    goto LAB_0012e6d5;
  }
  if (iVar3 == 0) {
    plVar8 = (long *)calloc(0x400,8);
    lVar11 = 0x2000;
    if (plVar8 == (long *)0x0) goto LAB_0012e901;
    iVar18 = 0x3fd;
    uVar14 = 0x3ff;
    iVar19 = 0x400;
LAB_0012e850:
    free(plVar10);
    DAT_0013fd28 = iVar18;
    DAT_0013fd2c = uVar14;
    DAT_0013fd34 = iVar19;
    DAT_0013fd38 = plVar8;
  }
  else {
    iVar19 = iVar3 * 2;
    plVar8 = (long *)calloc((long)iVar19,8);
    if (plVar8 != (long *)0x0) {
      uVar14 = iVar19 - 1;
      iVar18 = iVar19 + -3;
      if (0 < iVar3) {
        plVar16 = plVar10;
        do {
          lVar11 = *plVar16;
          if (lVar11 != 0) {
            uVar9 = uVar14 & *(uint *)(lVar11 + 0xc);
            plVar15 = plVar8 + (int)uVar9;
            if (*plVar15 != 0) {
              do {
                uVar9 = uVar9 + ((int)*(uint *)(lVar11 + 0xc) % iVar18 | 1U);
                if (iVar19 <= (int)uVar9) {
                  uVar9 = uVar9 + iVar3 * -2;
                }
                plVar15 = plVar8 + (int)uVar9;
              } while (*plVar15 != 0);
            }
            *plVar15 = lVar11;
          }
          plVar16 = plVar16 + 1;
        } while (plVar10 + (ulong)(iVar3 - 1) + 1 != plVar16);
      }
      goto LAB_0012e850;
    }
    lVar11 = (long)iVar19 * 8;
LAB_0012e901:
    __fprintf_chk(_stderr,1,"ResizeHashTable(): Error: Couldn\'t allocate newHashTable (%ld)\n",
                  lVar11);
    iVar17 = DAT_0013fd30;
  }
  uVar14 = DAT_0013fd2c & uVar4;
  plVar10 = DAT_0013fd38 + (int)uVar14;
  if (*plVar10 != 0) {
    do {
      uVar14 = uVar14 + ((int)uVar4 % DAT_0013fd28 | 1U);
      if (DAT_0013fd34 <= (int)uVar14) {
        uVar14 = uVar14 - DAT_0013fd34;
      }
      plVar10 = DAT_0013fd38 + (int)uVar14;
    } while (*plVar10 != 0);
  }
LAB_0012e6d5:
  *plVar10 = (long)puVar5;
  DAT_0013fd30 = iVar17 + 1;
  uVar13 = puVar5[2];
  if ((ulong)(long)DAT_0013fd18 <= uVar13) {
    if (DAT_0013fd18 == 0) {
      __size = 8000;
      iVar17 = 1000;
    }
    else {
      iVar17 = DAT_0013fd18 * 2;
      __size = (long)iVar17 << 3;
    }
    pvVar7 = realloc(DAT_0013fd20,__size);
    if (pvVar7 == (void *)0x0) {
      __fprintf_chk(_stderr,1,"ResizeReverseMap(): Error: Couldn\'t reallocate reverseMap (%ld)\n",
                    __size);
      return 0;
    }
    uVar13 = puVar5[2];
    DAT_0013fd18 = iVar17;
    DAT_0013fd20 = pvVar7;
  }
  *(undefined8 **)((long)DAT_0013fd20 + uVar13 * 8) = puVar5;
  return puVar5[2];
}



bool ValidAtom(ulong param_1)

{
  return param_1 != 0 && param_1 <= DAT_0013fd10;
}



undefined8 NameForAtom(ulong param_1)

{
  undefined8 uVar1;
  
  uVar1 = 0;
  if ((param_1 != 0) && (param_1 <= DAT_0013fd10)) {
    uVar1 = **(undefined8 **)(DAT_0013fd20 + param_1 * 8);
  }
  return uVar1;
}



void FontComputeInfoAccelerators(long param_1)

{
  short sVar1;
  short sVar2;
  byte bVar3;
  uint uVar4;
  
  sVar1 = *(short *)(param_1 + 0x22);
  bVar3 = *(byte *)(param_1 + 10) | 1;
  if (*(short *)(param_1 + 0x1c) < *(short *)(param_1 + 0xc)) {
    bVar3 = *(byte *)(param_1 + 10) & 0xfe;
  }
  sVar2 = *(short *)(param_1 + 0x14);
  *(byte *)(param_1 + 10) = bVar3;
  if ((((sVar1 == *(short *)(param_1 + 0x16)) &&
       (*(short *)(param_1 + 0x24) == *(short *)(param_1 + 0x18))) &&
      (*(int *)(param_1 + 0x1c) == *(int *)(param_1 + 0x10))) &&
     ((sVar2 == *(short *)(param_1 + 0x20) &&
      (*(short *)(param_1 + 0x26) == *(short *)(param_1 + 0x1a))))) {
    *(byte *)(param_1 + 10) = bVar3 | 4;
    if (((*(short *)(param_1 + 0x10) == 0) &&
        ((*(short *)(param_1 + 0x12) == sVar2 && (sVar1 == *(short *)(param_1 + 0x40))))) &&
       (*(short *)(param_1 + 0x18) == *(short *)(param_1 + 0x42))) {
      *(byte *)(param_1 + 10) = bVar3 | 6;
    }
    else {
      *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xfd;
    }
  }
  else {
    *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xf9;
  }
  *(byte *)(param_1 + 10) =
       *(byte *)(param_1 + 10) & 0xf7 | (sVar2 == *(short *)(param_1 + 0x20)) * '\b';
  bVar3 = (byte)~(byte)((ushort)*(short *)(param_1 + 0x1c) >> 8) >> 7 &
          *(short *)(param_1 + 0xc) < 1;
  uVar4 = (uint)bVar3;
  if (bVar3 != 0) {
    sVar2 = *(short *)(param_1 + 0x42);
    uVar4 = 0;
    if (((SBORROW4((int)sVar1,-(int)sVar2) == (int)sVar1 + (int)sVar2 < 0) &&
        (*(short *)(param_1 + 0x16) <= *(short *)(param_1 + 0x40))) &&
       (-(int)*(short *)(param_1 + 0x24) <= (int)*(short *)(param_1 + 0x40))) {
      uVar4 = (uint)(*(short *)(param_1 + 0x18) <= sVar2);
    }
  }
  *(byte *)(param_1 + 10) = (byte)(uVar4 << 4) | *(byte *)(param_1 + 10) & 0xef;
  return;
}



bool FontCouldBeTerminal(long param_1)

{
  short sVar1;
  
  if ((((*(short *)(param_1 + 0x1c) < 0) ||
       (sVar1 = *(short *)(param_1 + 0x14), sVar1 < *(short *)(param_1 + 0x12))) ||
      (sVar1 != *(short *)(param_1 + 0x20))) ||
     ((*(short *)(param_1 + 0x40) < *(short *)(param_1 + 0x16) ||
      (*(short *)(param_1 + 0x42) < *(short *)(param_1 + 0x18))))) {
    return false;
  }
  if ((*(short *)(param_1 + 0x10) == 0) &&
     ((sVar1 == *(short *)(param_1 + 0x1e) && (*(int *)(param_1 + 0x40) == *(int *)(param_1 + 0x22))
      ))) {
    return false;
  }
  return *(short *)(param_1 + 0x16) != 0 || *(short *)(param_1 + 0x18) != 0;
}



void FreeFontNames(int *param_1)

{
  long lVar1;
  long lVar2;
  
  if (param_1 != (int *)0x0) {
    if (0 < *param_1) {
      lVar2 = 0;
      do {
        lVar1 = lVar2 * 8;
        lVar2 = lVar2 + 1;
        free(*(void **)(*(long *)(param_1 + 4) + lVar1));
      } while ((int)lVar2 < *param_1);
    }
    free(*(void **)(param_1 + 4));
    free(*(void **)(param_1 + 2));
    free(param_1);
    return;
  }
  return;
}



undefined4 * MakeFontNamesRecord(uint param_1)

{
  undefined4 *__ptr;
  void *__ptr_00;
  void *__ptr_01;
  undefined4 *puVar1;
  
  __ptr = (undefined4 *)malloc(0x18);
  puVar1 = __ptr;
  if (__ptr != (undefined4 *)0x0) {
    *__ptr = 0;
    __ptr[1] = param_1;
    if (param_1 == 0) {
      *(undefined8 *)(__ptr + 2) = 0;
      *(undefined8 *)(__ptr + 4) = 0;
    }
    else {
      __ptr_00 = malloc((ulong)param_1 * 4);
      *(void **)(__ptr + 2) = __ptr_00;
      __ptr_01 = malloc((ulong)param_1 * 8);
      *(void **)(__ptr + 4) = __ptr_01;
      if ((__ptr_00 == (void *)0x0) || (__ptr_01 == (void *)0x0)) {
        free(__ptr_00);
        free(__ptr_01);
        puVar1 = (undefined4 *)0x0;
        free(__ptr);
      }
    }
  }
  return puVar1;
}



undefined8 AddFontNamesName(int *param_1,char *param_2,int param_3)

{
  int iVar1;
  char *__dest;
  void *__ptr;
  void *__ptr_00;
  undefined8 uVar2;
  int iVar3;
  size_t __size;
  size_t __size_00;
  
  iVar1 = *param_1;
  __dest = (char *)malloc((long)(param_3 + 1));
  if (__dest == (char *)0x0) {
    uVar2 = 0x50;
  }
  else {
    __ptr = *(void **)(param_1 + 2);
    if (param_1[1] <= iVar1) {
      iVar3 = param_1[1] * 2;
      if (iVar3 == 0) {
        __size_00 = 0x40;
        __size = 0x20;
        iVar3 = 8;
      }
      else {
        __size = (long)iVar3 * 4;
        __size_00 = (long)iVar3 << 3;
      }
      __ptr = realloc(__ptr,__size);
      __ptr_00 = realloc(*(void **)(param_1 + 4),__size_00);
      if ((__ptr == (void *)0x0) || (__ptr_00 == (void *)0x0)) {
        free(__dest);
        free(__ptr);
        free(__ptr_00);
        return 0x50;
      }
      *(void **)(param_1 + 2) = __ptr;
      *(void **)(param_1 + 4) = __ptr_00;
      param_1[1] = iVar3;
    }
    *(int *)((long)__ptr + (long)iVar1 * 4) = param_3;
    *(char **)(*(long *)(param_1 + 4) + (long)iVar1 * 8) = __dest;
    strncpy(__dest,param_2,(long)param_3);
    *param_1 = *param_1 + 1;
    uVar2 = 0x55;
    __dest[param_3] = '\0';
  }
  return uVar2;
}



void GetGlyphs(long param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012edb4. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_1 + 0x68))();
  return;
}



void QueryGlyphExtents(long param_1,undefined8 *param_2,ulong param_3,uint *param_4)

{
  short sVar1;
  uint uVar2;
  short *psVar3;
  uint uVar4;
  ulong uVar5;
  
  *param_4 = *(ushort *)(param_1 + 0x12) >> 7 & 3;
  param_4[1] = (int)*(short *)(param_1 + 0x48);
  param_4[2] = (int)*(short *)(param_1 + 0x4a);
  if (param_3 == 0) {
    param_4[3] = 0;
    param_4[4] = 0;
    param_4[5] = 0;
    param_4[6] = 0;
    param_4[7] = 0;
    return;
  }
  psVar3 = (short *)*param_2;
  if ((((psVar3[2] != 0) || (psVar3[1] != 0)) || (psVar3[3] != 0 || *psVar3 != 0)) ||
     (psVar3[4] != 0)) {
    param_4[3] = (int)psVar3[3];
    param_4[4] = (int)psVar3[4];
    param_4[6] = (int)*psVar3;
    param_4[7] = (int)psVar3[1];
    param_4[5] = (int)psVar3[2];
  }
  if ((*(byte *)(param_1 + 0x12) & 5) != 5) {
    uVar5 = 1;
    if (param_3 < 2) {
      return;
    }
    do {
      psVar3 = (short *)param_2[uVar5];
      sVar1 = psVar3[3];
      if (((psVar3[2] != 0) || (psVar3[1] != 0)) ||
         ((sVar1 != 0 || *psVar3 != 0 || (psVar3[4] != 0)))) {
        uVar4 = (int)sVar1;
        if ((int)sVar1 <= (int)param_4[3]) {
          uVar4 = param_4[3];
        }
        param_4[3] = uVar4;
        uVar4 = (int)psVar3[4];
        if ((int)psVar3[4] < (int)param_4[4]) {
          uVar4 = param_4[4];
        }
        uVar2 = param_4[5];
        param_4[4] = uVar4;
        uVar4 = (int)*psVar3 + uVar2;
        if ((int)param_4[6] < (int)((int)*psVar3 + uVar2)) {
          uVar4 = param_4[6];
        }
        param_4[6] = uVar4;
        uVar4 = (int)psVar3[1] + uVar2;
        if ((int)((int)psVar3[1] + uVar2) < (int)param_4[7]) {
          uVar4 = param_4[7];
        }
        param_4[7] = uVar4;
        param_4[5] = (int)psVar3[2] + uVar2;
      }
      uVar5 = uVar5 + 1;
    } while (param_3 != uVar5);
    return;
  }
  uVar4 = (int)param_3 * param_4[5];
  param_4[5] = uVar4;
  param_4[7] = param_4[7] + (uVar4 - (int)psVar3[2]);
  return;
}



undefined8 QueryTextExtents(long param_1,long param_2,undefined8 param_3,undefined8 param_4)

{
  byte bVar1;
  short *psVar2;
  void *__ptr;
  ulong uVar3;
  undefined8 uVar4;
  int iVar5;
  ulong uVar6;
  ulong uVar7;
  char cVar8;
  long in_FS_OFFSET;
  ulong local_60;
  undefined local_58 [8];
  short *local_50;
  ushort local_42;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = (short *)0x0;
  __ptr = malloc(param_2 * 8);
  if (__ptr == (void *)0x0) {
    uVar4 = 0;
    goto LAB_0012f0b1;
  }
  cVar8 = (*(short *)(param_1 + 0xe) != 0) + '\x02';
  (**(code **)(param_1 + 0x70))(param_1,param_2,param_3,cVar8,&local_60,__ptr);
  local_42 = *(ushort *)(param_1 + 0x10) << 8 | *(ushort *)(param_1 + 0x10) >> 8;
  iVar5 = (int)local_60;
  uVar7 = local_60 & 0xffffffff;
  (**(code **)(param_1 + 0x70))(param_1,1,&local_42,cVar8,local_58,&local_50);
  if ((local_50 == (short *)0x0) ||
     ((((local_50[3] == 0 && (local_50[4] == 0)) && (*local_50 == 0)) &&
      ((local_50[1] == 0 && (local_50[2] == 0)))))) {
    local_50 = (short *)0x0;
    if (local_60 == 0) goto LAB_0012f147;
LAB_0012f014:
    uVar3 = 0;
    do {
      psVar2 = *(short **)((long)__ptr + uVar3 * 8);
      uVar6 = (ulong)(int)uVar7;
      if ((psVar2 == (short *)0x0) ||
         (((psVar2[3] == 0 && (psVar2[4] == 0)) &&
          ((*psVar2 == 0 && ((psVar2[1] == 0 && (psVar2[2] == 0)))))))) {
        if (local_50 != (short *)0x0) {
          *(short **)((long)__ptr + uVar3 * 8) = local_50;
          goto LAB_0012f058;
        }
      }
      else {
LAB_0012f058:
        if (local_60 == uVar6) {
          uVar7 = uVar3 & 0xffffffff;
          uVar6 = uVar3;
        }
      }
      uVar3 = uVar3 + 1;
    } while (local_60 != uVar3);
  }
  else {
    if (local_60 != 0) goto LAB_0012f014;
LAB_0012f147:
    uVar6 = (ulong)iVar5;
  }
  bVar1 = *(byte *)(param_1 + 0x12);
  *(byte *)(param_1 + 0x12) = bVar1 & 0xfb;
  QueryGlyphExtents(param_1,(void *)((long)__ptr + uVar6 * 8),local_60 - uVar6,param_4);
  *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) & 0xfb | (byte)((bVar1 >> 2 & 1) << 2);
  free(__ptr);
  uVar4 = 1;
LAB_0012f0b1:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



undefined8 ParseGlyphCachingMode(byte *param_1)

{
  long lVar1;
  byte *pbVar2;
  byte *pbVar3;
  undefined in_CF;
  bool bVar4;
  undefined in_ZF;
  bool bVar5;
  
  lVar1 = 5;
  pbVar2 = param_1;
  pbVar3 = &DAT_00136c49;
  do {
    if (lVar1 == 0) break;
    lVar1 = lVar1 + -1;
    in_CF = *pbVar2 < *pbVar3;
    in_ZF = *pbVar2 == *pbVar3;
    pbVar2 = pbVar2 + 1;
    pbVar3 = pbVar3 + 1;
  } while ((bool)in_ZF);
  bVar4 = false;
  bVar5 = (!(bool)in_CF && !(bool)in_ZF) == (bool)in_CF;
  if (bVar5) {
    DAT_0013f6cc = 0;
    return 1;
  }
  lVar1 = 4;
  pbVar2 = param_1;
  pbVar3 = &DAT_00136c4e;
  do {
    if (lVar1 == 0) break;
    lVar1 = lVar1 + -1;
    bVar4 = *pbVar2 < *pbVar3;
    bVar5 = *pbVar2 == *pbVar3;
    pbVar2 = pbVar2 + 1;
    pbVar3 = pbVar3 + 1;
  } while (bVar5);
  if ((!bVar4 && !bVar5) == bVar4) {
    DAT_0013f6cc = 2;
    return 1;
  }
  if (((*param_1 == 0x31) && (param_1[1] == 0x36)) && (param_1[2] == 0)) {
    DAT_0013f6cc = 1;
    return 1;
  }
  return 0;
}



void InitGlyphCaching(void)

{
  glyphCachingMode = DAT_0013f6cc;
  return;
}



void SetGlyphCachingMode(int param_1)

{
  if ((param_1 < glyphCachingMode) && (-1 < param_1)) {
    glyphCachingMode = param_1;
    return;
  }
  return;
}



undefined8 add_range(byte *param_1,uint *param_2,long *param_3,int param_4)

{
  byte bVar1;
  ushort *puVar2;
  ushort uVar3;
  uint uVar4;
  ulong uVar5;
  undefined8 uVar6;
  ulong uVar7;
  void *pvVar8;
  int iVar9;
  ushort *puVar10;
  ushort *puVar11;
  uint uVar12;
  uint uVar13;
  byte bVar14;
  int iVar15;
  ushort *puVar16;
  ushort *__dest;
  int iVar17;
  ushort *puVar18;
  ulong uVar19;
  ulong uVar20;
  ushort uVar21;
  int iVar22;
  long in_FS_OFFSET;
  ulong local_60;
  uint local_54;
  undefined local_44;
  byte local_43;
  undefined local_42;
  byte local_41;
  long local_40;
  
  bVar14 = *param_1;
  uVar4 = (uint)bVar14;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar12 = (uint)param_1[2];
  if (param_4 == 0) {
    if (bVar14 != param_1[2]) {
      if (uVar12 < bVar14) {
        uVar6 = 0;
      }
      else {
        do {
          local_43 = param_1[1];
          local_44 = (undefined)uVar4;
          local_41 = param_1[3];
          local_42 = local_44;
          uVar6 = add_range(&local_44,param_2,param_3,0);
          if ((int)uVar6 != 0x55) break;
          uVar4 = uVar4 + 1;
        } while ((int)uVar4 <= (int)(uint)param_1[2]);
      }
      goto LAB_0012f3cc;
    }
    uVar7 = (long)(int)((uint)bVar14 * 0x100 + (uint)param_1[1]);
    local_60 = (long)(int)(uVar12 * 0x100 + (uint)param_1[3]);
  }
  else {
    local_60 = (ulong)(int)((uint)bVar14 * 0x100 + (uint)param_1[1]);
    uVar19 = (ulong)(int)((uint)param_1[3] + uVar12 * 0x100);
    uVar7 = uVar19;
    if (local_60 <= uVar19) {
      uVar7 = local_60;
      local_60 = uVar19;
    }
  }
  local_54 = *param_2;
  iVar15 = local_54 - 1;
  uVar21 = (ushort)uVar7;
  uVar3 = (ushort)local_60;
  if (iVar15 < 0) {
    uVar19 = 0;
    iVar17 = 0;
  }
  else {
    iVar9 = 0;
    do {
      while( true ) {
        iVar17 = iVar9 + iVar15 >> 1;
        puVar11 = (ushort *)(*param_3 + (long)iVar17 * 4);
        bVar1 = *(byte *)puVar11;
        uVar20 = (ulong)bVar1;
        uVar12 = (uint)*(byte *)((long)puVar11 + 1);
        iVar22 = (uint)bVar1 * 0x100 + uVar12;
        uVar13 = (uint)*(byte *)((long)puVar11 + 3);
        uVar19 = (ulong)iVar22;
        uVar4 = (uint)*(byte *)(puVar11 + 1);
        uVar5 = (ulong)(int)((uint)*(byte *)(puVar11 + 1) * 0x100 + uVar13);
        if ((iVar22 != 0) && (local_60 < uVar19 - 1)) break;
        if (uVar7 <= uVar5 + 1) {
          if ((bVar1 != bVar14) && (param_4 == 0)) {
            iVar15 = iVar9 + -1;
          }
          if (iVar9 <= iVar15) {
            if (uVar7 < uVar19) {
              uVar12 = (uint)(byte)uVar7;
              uVar20 = uVar7 >> 8;
              *puVar11 = uVar21 << 8 | uVar21 >> 8;
              uVar19 = (ulong)(int)((int)(uVar7 >> 8) * 0x100 + ((uint)uVar7 & 0xff));
            }
            if (uVar5 < local_60) {
              uVar13 = (uint)(byte)local_60;
              puVar11[1] = uVar3 << 8 | uVar3 >> 8;
              uVar4 = (uint)(local_60 >> 8);
              uVar5 = (ulong)(int)(uVar4 * 0x100 + ((uint)local_60 & 0xff));
            }
            puVar2 = (ushort *)*param_3;
            puVar10 = puVar2 + (long)(int)*param_2 * 2;
            bVar14 = (byte)uVar20;
            if (puVar11 < puVar2) {
              __dest = puVar11 + 2;
              puVar18 = puVar11;
              goto LAB_0012f55e;
            }
            uVar4 = uVar4 & 0xff;
            puVar16 = puVar11;
            goto LAB_0012f548;
          }
          goto LAB_0012f349;
        }
        iVar9 = iVar17 + 1;
        if (iVar15 < iVar9) goto LAB_0012f349;
      }
      iVar15 = iVar17 + -1;
    } while (iVar9 <= iVar15);
  }
LAB_0012f349:
  if ((local_54 == 0) || (pvVar8 = (void *)*param_3, pvVar8 == (void *)0x0)) {
    pvVar8 = malloc(0x40);
    *param_3 = (long)pvVar8;
    *param_2 = 0;
    pvVar8 = (void *)*param_3;
    if (pvVar8 == (void *)0x0) {
LAB_0012f692:
      *param_2 = 0;
      uVar6 = 0x50;
      goto LAB_0012f3cc;
    }
    local_54 = 0;
    puVar10 = (ushort *)((long)pvVar8 + (long)iVar17 * 4);
    puVar11 = puVar10 + 2;
  }
  else {
    if ((local_54 & 0xf) == 0) {
      pvVar8 = realloc(pvVar8,(long)(int)(local_54 * 4 + 0x40));
      *param_3 = (long)pvVar8;
      if (pvVar8 == (void *)0x0) goto LAB_0012f692;
      local_54 = *param_2;
    }
    puVar10 = (ushort *)((long)pvVar8 + (long)iVar17 * 4);
    puVar2 = puVar10 + 2;
    puVar11 = puVar2;
    if ((uVar19 < uVar7) && (iVar17 < (int)local_54)) {
      puVar11 = puVar10 + 4;
      puVar10 = puVar2;
    }
  }
  memmove(puVar11,puVar10,(long)pvVar8 + ((long)(int)local_54 * 4 - (long)puVar10));
  *puVar10 = uVar21 << 8 | uVar21 >> 8;
  puVar10[1] = uVar3 << 8 | uVar3 >> 8;
  *param_2 = *param_2 + 1;
  uVar6 = 0x55;
LAB_0012f3cc:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
LAB_0012f548:
  if (((ulong)(long)(int)(uVar4 * 0x100 + 1 + uVar13) < uVar19) ||
     ((param_4 == 0 && (bVar14 != *(byte *)puVar16)))) goto LAB_0012f557;
  puVar18 = puVar16 + -2;
  uVar7 = (ulong)(int)((uint)*(byte *)puVar16 * 0x100 + (uint)*(byte *)((long)puVar16 + 1));
  if (uVar7 < uVar19) {
    uVar19 = uVar7;
  }
  __dest = puVar16;
  if (puVar18 < puVar2) goto LAB_0012f55e;
  uVar13 = (uint)*(byte *)((long)puVar16 - 1);
  uVar4 = (uint)*(byte *)(puVar16 + -1);
  puVar16 = puVar18;
  goto LAB_0012f548;
LAB_0012f557:
  __dest = puVar16 + 2;
  puVar18 = puVar16;
LAB_0012f55e:
  if (puVar11 < puVar10) {
    while( true ) {
      if ((((char)uVar12 != '\0' || (byte)uVar20 != 0) &&
          (uVar5 < (ulong)(long)(int)(((uint)uVar20 & 0xff) * 0x100 + -1 + uVar12))) ||
         ((param_4 == 0 && (bVar14 != (byte)uVar20)))) goto LAB_0012f6b0;
      uVar7 = (ulong)(int)((uint)*(byte *)(puVar11 + 1) * 0x100 + (uint)*(byte *)((long)puVar11 + 3)
                          );
      if (uVar5 < uVar7) {
        uVar5 = uVar7;
      }
      if (puVar10 <= puVar11 + 2) break;
      uVar12 = (uint)*(byte *)((long)puVar11 + 5);
      uVar20 = (ulong)*(byte *)(puVar11 + 2);
      puVar11 = puVar11 + 2;
    }
  }
  else {
LAB_0012f6b0:
    puVar11 = puVar11 + -2;
  }
  if (__dest != puVar11) {
    pvVar8 = memmove(__dest,puVar11,(long)puVar10 - (long)puVar11);
    *param_2 = *param_2 - (int)((long)puVar11 - (long)pvVar8 >> 2);
  }
  uVar6 = 0x55;
  puVar18[2] = (ushort)uVar19 << 8 | (ushort)uVar19 >> 8;
  puVar18[3] = (ushort)uVar5 << 8 | (ushort)uVar5 >> 8;
  goto LAB_0012f3cc;
}



char * FUN_0012f700(char *param_1,double *param_2)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  char *pcVar4;
  long in_FS_OFFSET;
  double dVar5;
  char *local_80;
  char local_78 [88];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (DAT_0013fd40 == (lconv *)0x0) {
    DAT_0013fd40 = localeconv();
    pcVar3 = DAT_0013fd40->decimal_point;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0013f6e0 = pcVar3;
    }
    pcVar3 = DAT_0013fd40->positive_sign;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0013f6d8 = pcVar3;
    }
    pcVar3 = DAT_0013fd40->negative_sign;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0013f6d0 = pcVar3;
    }
  }
  cVar2 = *param_1;
  if (cVar2 == '\0') {
    pcVar3 = local_78;
    local_80 = param_1;
  }
  else {
    pcVar1 = param_1 + 1;
    pcVar4 = local_78;
    do {
      local_80 = pcVar1;
      if (cVar2 == '.') {
        *pcVar4 = *PTR_DAT_0013f6e0;
LAB_0012f772:
        cVar2 = *local_80;
      }
      else {
        if (cVar2 != '~') {
          if (cVar2 == '+') {
            *pcVar4 = *PTR_DAT_0013f6d8;
          }
          else {
            *pcVar4 = cVar2;
          }
          goto LAB_0012f772;
        }
        *pcVar4 = *PTR_DAT_0013f6d0;
        cVar2 = *local_80;
      }
      pcVar3 = pcVar4 + 1;
      if (cVar2 == '\0') break;
      pcVar3 = pcVar4 + 1;
      pcVar1 = local_80 + 1;
      pcVar4 = pcVar3;
    } while ((ulong)((long)pcVar3 - (long)local_78) < 0x4f);
  }
  *pcVar3 = '\0';
  dVar5 = strtod(local_78,&local_80);
  *param_2 = dVar5;
  pcVar3 = (char *)0x0;
  if (local_80 != local_78) {
    pcVar3 = param_1 + ((long)local_80 - (long)local_78);
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pcVar3;
}



char * FUN_0012f8a0(char *param_1,uint *param_2,uint param_3)

{
  char cVar1;
  byte bVar2;
  ushort *puVar3;
  ushort **ppuVar4;
  long lVar5;
  char *pcVar6;
  int iVar7;
  ulong uVar8;
  uint uVar9;
  uint *puVar10;
  
  puVar10 = param_2 + 2;
  if ((param_3 == 3) || (puVar10 = param_2 + 10, param_3 == 0xc)) {
    ppuVar4 = __ctype_b_loc();
    while( true ) {
      cVar1 = *param_1;
      uVar8 = (ulong)cVar1;
      if ((*(byte *)((long)*ppuVar4 + uVar8 * 2 + 1) & 0x20) == 0) break;
      param_1 = param_1 + 1;
    }
    if (cVar1 == '[') {
      lVar5 = FUN_0012f700(param_1 + 1,puVar10);
      if ((((lVar5 != 0) && (lVar5 = FUN_0012f700(lVar5,puVar10 + 2), lVar5 != 0)) &&
          (lVar5 = FUN_0012f700(lVar5,puVar10 + 4), lVar5 != 0)) &&
         (pcVar6 = (char *)FUN_0012f700(lVar5,puVar10 + 6), pcVar6 != (char *)0x0)) {
        cVar1 = *pcVar6;
        puVar3 = *ppuVar4;
        bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
        while ((bVar2 & 0x20) != 0) {
          cVar1 = pcVar6[1];
          pcVar6 = pcVar6 + 1;
          bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
        }
        if (cVar1 == ']') {
          cVar1 = pcVar6[1];
          bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
          while (pcVar6 = pcVar6 + 1, (bVar2 & 0x20) != 0) {
            cVar1 = pcVar6[1];
            bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
          }
          if (cVar1 == '-') {
            uVar9 = *param_2 | 8;
            if (param_3 != 0xc) {
              uVar9 = *param_2 | 2;
            }
            *param_2 = uVar9;
            return pcVar6;
          }
        }
      }
    }
    else if (cVar1 == '*') {
      if (param_1[1] == '-') {
        uVar9 = ~param_3 & *param_2 | 0x10;
        if (param_3 == 0xc) {
          uVar9 = ~param_3 & *param_2 | 0x20;
        }
        *param_2 = uVar9;
        return param_1 + 1;
      }
    }
    else {
      iVar7 = 0;
      if ((byte)(cVar1 - 0x30U) < 10) {
        do {
          param_1 = param_1 + 1;
          iVar7 = (int)uVar8 + -0x30 + iVar7 * 10;
          cVar1 = *param_1;
          uVar8 = (ulong)(uint)(int)cVar1;
        } while ((byte)(cVar1 - 0x30U) < 10);
        if (cVar1 == '-') {
          *param_2 = *param_2 & ~param_3;
          if (iVar7 == 0) {
            return param_1;
          }
          *(double *)(puVar10 + 6) = (double)iVar7;
          if (param_3 == 0xc) {
            *(double *)(puVar10 + 6) = (double)iVar7 / 10.0;
            *param_2 = *param_2 | 4;
          }
          else {
            *param_2 = *param_2 | 1;
          }
          puVar10[4] = 0;
          puVar10[5] = 0;
          puVar10[2] = 0;
          puVar10[3] = 0;
          *(undefined8 *)puVar10 = *(undefined8 *)(puVar10 + 6);
          return param_1;
        }
      }
      else if (cVar1 == '-') {
        *param_2 = *param_2 & ~param_3;
        return param_1;
      }
    }
  }
  return (char *)0x0;
}



long FUN_0012fad0(double param_1,byte *param_2,int param_3)

{
  byte bVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte bVar5;
  ushort uVar6;
  int iVar7;
  size_t sVar8;
  long lVar9;
  ushort **ppuVar10;
  char *pcVar11;
  byte *pbVar12;
  byte *pbVar13;
  int iVar14;
  
  if (DAT_0013fd40 == (lconv *)0x0) {
    DAT_0013fd40 = localeconv();
    pcVar11 = DAT_0013fd40->decimal_point;
    if ((pcVar11 != (char *)0x0) && (*pcVar11 != '\0')) {
      PTR_DAT_0013f6e0 = pcVar11;
    }
    pcVar11 = DAT_0013fd40->positive_sign;
    if ((pcVar11 != (char *)0x0) && (*pcVar11 != '\0')) {
      PTR_DAT_0013f6d8 = pcVar11;
    }
    pcVar11 = DAT_0013fd40->negative_sign;
    if ((pcVar11 != (char *)0x0) && (*pcVar11 != '\0')) {
      PTR_DAT_0013f6d0 = pcVar11;
    }
  }
  if (param_3 != 0) {
    *param_2 = 0x20;
    param_2 = param_2 + 1;
  }
  __sprintf_chk(param_1,param_2,1,0xffffffffffffffff,"%.*le");
  sVar8 = strlen((char *)param_2);
  pbVar13 = param_2 + sVar8;
  do {
    pbVar12 = pbVar13;
    pbVar13 = pbVar12 + -1;
  } while ((*pbVar12 & 0xdf) != 0x45);
  lVar9 = strtol((char *)(pbVar12 + 1),(char **)0x0,10);
  pbVar12 = param_2;
  if ((false) || (param_1 != 0.0)) {
    iVar7 = (int)lVar9;
    if (param_2 <= pbVar13) {
LAB_0012fb87:
      ppuVar10 = __ctype_b_loc();
LAB_0012fb90:
      uVar6 = (*ppuVar10)[(char)*pbVar13];
      if (((uVar6 & 0x800) == 0) || (*pbVar13 == 0x30)) goto LAB_0012fba9;
      if (param_2 <= pbVar13) {
        iVar14 = 0;
        while( true ) {
          pbVar13 = pbVar13 + -1;
          iVar14 = (iVar14 + 1) - (uint)((uVar6 & 0x800) == 0);
          if (pbVar13 == param_2 + -1) break;
          uVar6 = (*ppuVar10)[(char)*pbVar13];
        }
        goto LAB_0012fbb8;
      }
    }
LAB_0012fbb2:
    iVar14 = 0;
LAB_0012fbb8:
    if ((iVar7 < 3) && (iVar14 - iVar7 < 5)) {
      iVar14 = iVar14 - (iVar7 + 1);
      if (iVar14 < 0) {
        iVar14 = 0;
      }
      __sprintf_chk(param_1,param_2,1,0xffffffffffffffff,"%.*lf",iVar14);
      if (iVar7 < 0) {
        bVar5 = *param_2;
        if (bVar5 == 0x30) {
          if (false) goto LAB_0012fc4a;
          pbVar13 = param_2 + 1;
        }
        else {
          pbVar4 = param_2;
          if (bVar5 == 0) {
LAB_0012fc4a:
            return (long)param_2 - (long)param_3;
          }
          do {
            pbVar13 = pbVar4;
            bVar1 = pbVar13[1];
            if (bVar1 == 0) break;
            pbVar4 = pbVar13 + 1;
          } while (bVar1 != 0x30);
          pbVar13 = pbVar13 + 2;
          pbVar4 = PTR_DAT_0013f6e0;
          pbVar2 = PTR_DAT_0013f6d8;
          pbVar3 = PTR_DAT_0013f6d0;
          if (bVar1 == 0) {
            do {
              while (*pbVar3 == bVar5) {
                *pbVar12 = 0x7e;
                bVar5 = pbVar12[1];
                pbVar12 = pbVar12 + 1;
                if (bVar5 == 0) goto LAB_0012fc4a;
              }
              if (*pbVar2 == bVar5) {
                *pbVar12 = 0x2b;
              }
              else if (*pbVar4 == bVar5) {
                *pbVar12 = 0x2e;
              }
              bVar5 = pbVar12[1];
              pbVar12 = pbVar12 + 1;
joined_r0x0012fbfe:
            } while (bVar5 != 0);
            goto LAB_0012fc4a;
          }
        }
        do {
          bVar5 = *pbVar13;
          pbVar13[-1] = bVar5;
          pbVar13 = pbVar13 + 1;
        } while (bVar5 != 0);
      }
      goto LAB_0012fbf7;
    }
    iVar14 = iVar14 + -1;
    pcVar11 = "%.*le";
  }
  else {
    iVar7 = 0;
    if (param_2 <= pbVar13) goto LAB_0012fb87;
    iVar14 = 0;
    pcVar11 = "%.*lf";
  }
  __sprintf_chk(param_1,param_2,1,0xffffffffffffffff,pcVar11,iVar14);
LAB_0012fbf7:
  bVar5 = *param_2;
  pbVar3 = PTR_DAT_0013f6d0;
  pbVar2 = PTR_DAT_0013f6d8;
  pbVar4 = PTR_DAT_0013f6e0;
  goto joined_r0x0012fbfe;
LAB_0012fba9:
  pbVar13 = pbVar13 + -1;
  if (pbVar13 < param_2) goto LAB_0012fbb2;
  goto LAB_0012fb90;
}



void xlfd_round_double(void)

{
  long in_FS_OFFSET;
  
  if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FontParseXLFDName(char *param_1,uint *param_2,int param_3)

{
  char cVar1;
  byte bVar2;
  uint uVar3;
  int iVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  long lVar8;
  char *pcVar9;
  undefined8 uVar10;
  char *pcVar11;
  void *pvVar12;
  uint uVar13;
  long lVar14;
  ulong uVar15;
  ulong uVar16;
  undefined8 extraout_RDX;
  size_t __n;
  uint *puVar17;
  char *pcVar18;
  char *pcVar19;
  char cVar20;
  long in_FS_OFFSET;
  byte bVar21;
  double dVar22;
  uint local_518 [2];
  undefined8 local_510;
  undefined8 local_508;
  undefined8 local_500;
  double local_4f8;
  undefined8 local_4f0;
  undefined8 local_4e8;
  undefined8 local_4e0;
  double local_4d8;
  int local_4d0;
  int local_4cc;
  uint local_4c8;
  uint local_4c4;
  uint local_4c0;
  undefined local_498 [79];
  undefined2 uStack_449;
  undefined auStack_48 [8];
  long local_40;
  
  bVar21 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar17 = local_518;
  for (lVar14 = 0xf; lVar14 != 0; lVar14 = lVar14 + -1) {
    puVar17[0] = 0;
    puVar17[1] = 0;
    puVar17 = puVar17 + 2;
  }
  if (param_3 != 3) {
    puVar17 = param_2;
    for (lVar14 = 0xf; lVar14 != 0; lVar14 = lVar14 + -1) {
      puVar17[0] = 0;
      puVar17[1] = 0;
      puVar17 = puVar17 + 2;
    }
  }
  pcVar5 = param_1 + 1;
  if (*param_1 == '-') {
LAB_0012ffda:
    pcVar5 = strchr(pcVar5,0x2d);
    if ((pcVar5 != (char *)0x0) && (pcVar5 = strchr(pcVar5 + 1,0x2d), pcVar5 != (char *)0x0)) {
      pcVar9 = pcVar5 + 1;
      pcVar6 = strchr(pcVar9,0x2d);
      if ((pcVar6 != (char *)0x0) &&
         ((((pcVar6 = strchr(pcVar6 + 1,0x2d), pcVar6 != (char *)0x0 &&
            (pcVar6 = strchr(pcVar6 + 1,0x2d), pcVar6 != (char *)0x0)) &&
           (pcVar6 = strchr(pcVar6 + 1,0x2d), pcVar6 != (char *)0x0)) &&
          ((lVar14 = FUN_0012f8a0(pcVar6 + 1,local_518,3), lVar14 != 0 &&
           (lVar14 = FUN_0012f8a0(lVar14 + 1,local_518,0xc), lVar14 != 0)))))) {
        if (*(char *)(lVar14 + 1) == '*') {
          local_4c8 = 0xffffffff;
          pcVar6 = (char *)(lVar14 + 2);
          cVar20 = *(char *)(lVar14 + 2);
        }
        else {
          local_4c8 = 0;
          pcVar6 = (char *)(lVar14 + 1);
          cVar20 = *(char *)(lVar14 + 1);
          if ((byte)(cVar20 - 0x30U) < 10) {
            local_4c8 = 0;
            do {
              pcVar6 = pcVar6 + 1;
              local_4c8 = cVar20 + -0x30 + local_4c8 * 10;
              cVar20 = *pcVar6;
            } while ((byte)(cVar20 - 0x30U) < 10);
          }
        }
        if (cVar20 == '-') {
          if (pcVar6[1] == '*') {
            local_4c4 = 0xffffffff;
            pcVar18 = pcVar6 + 2;
            cVar20 = pcVar6[2];
          }
          else {
            local_4c4 = 0;
            cVar20 = pcVar6[1];
            pcVar18 = pcVar6 + 1;
            if ((byte)(cVar20 - 0x30U) < 10) {
              local_4c4 = 0;
              do {
                pcVar18 = pcVar18 + 1;
                local_4c4 = cVar20 + -0x30 + local_4c4 * 10;
                cVar20 = *pcVar18;
              } while ((byte)(cVar20 - 0x30U) < 10);
            }
          }
          if ((cVar20 == '-') && (pcVar6 = strchr(pcVar18 + 1,0x2d), pcVar6 != (char *)0x0)) {
            if (pcVar6[1] == '*') {
              local_4c0 = 0xffffffff;
              pcVar19 = pcVar6 + 2;
              cVar20 = pcVar6[2];
            }
            else {
              local_4c0 = 0;
              pcVar19 = pcVar6 + 1;
              cVar20 = pcVar6[1];
              if ((byte)(cVar20 - 0x30U) < 10) {
                local_4c0 = 0;
                do {
                  pcVar19 = pcVar19 + 1;
                  local_4c0 = cVar20 + -0x30 + local_4c0 * 10;
                  cVar20 = *pcVar19;
                } while ((byte)(cVar20 - 0x30U) < 10);
              }
            }
            if (((cVar20 == '-') && (pcVar7 = strchr(pcVar19 + 1,0x2d), pcVar7 != (char *)0x0)) &&
               (pcVar7 = strchr(pcVar7 + 1,0x2d), pcVar7 == (char *)0x0)) {
              if (param_3 != 0) {
                pcVar7 = strrchr(param_1,0x2d);
                pcVar7 = strchr(pcVar7,0x5b);
                if (pcVar7 != (char *)0x0) {
                  local_518[0] = local_518[0] | 0x40;
                  *pcVar7 = '\0';
                }
              }
              if (local_4f8 < 0.0) {
                dVar22 = local_4f8 - 0.5;
              }
              else {
                dVar22 = local_4f8 + 0.5;
              }
              local_4d0 = (int)dVar22;
              if (local_4d8 < 0.0) {
                dVar22 = local_4d8 * 10.0 - 0.5;
              }
              else {
                dVar22 = local_4d8 * 10.0 + 0.5;
              }
              local_4cc = (int)dVar22;
              iVar4 = ((int)pcVar6 - (int)pcVar18) + 1;
              if (param_3 == 2) {
                cVar20 = '0';
LAB_001302a8:
                lVar8 = __strcpy_chk((long)&uStack_449 + 1,lVar14,0x400);
                pcVar5 = strchr(pcVar9,0x2d);
                pcVar5 = strchr(pcVar5 + 1,0x2d);
                pcVar5 = strchr(pcVar5 + 1,0x2d);
                pcVar9 = strchr(pcVar5 + 1,0x2d);
                uVar15 = 0xffffffffffffffff;
                pcVar5 = pcVar19 + (lVar8 - lVar14);
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar1 = *pcVar5;
                  pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                } while (cVar1 != '\0');
                __n = (size_t)iVar4;
                if ((char *)0x3ff < pcVar9 + ~uVar15 + __n + (10 - (long)param_1))
                goto LAB_0012ffa1;
                pcVar9[1] = cVar20;
                pcVar9[2] = '-';
                pcVar9[3] = cVar20;
                pcVar9[4] = '-';
                pcVar9[5] = '*';
                pcVar9[6] = '-';
                pcVar9[7] = '*';
                if (iVar4 < 3) {
                  pcVar9[8] = '-';
                  pcVar9[9] = '*';
                  pcVar5 = pcVar9 + 0xb;
                  pcVar9[10] = '-';
                }
                else {
                  pvVar12 = memcpy(pcVar9 + 8,pcVar18 + (lVar8 - lVar14),__n);
                  pcVar5 = (char *)((long)pvVar12 + __n);
                }
                *pcVar5 = cVar20;
                memcpy(pcVar5 + 1,pcVar19 + (lVar8 - lVar14),~uVar15);
LAB_0013039a:
                puVar17 = local_518;
                for (lVar14 = 0x1e; lVar14 != 0; lVar14 = lVar14 + -1) {
                  *param_2 = *puVar17;
                  puVar17 = puVar17 + (ulong)bVar21 * -2 + 1;
                  param_2 = param_2 + (ulong)bVar21 * -2 + 1;
                }
              }
              else if (param_3 < 3) {
                if (param_3 == 0) goto LAB_0013039a;
                if (param_3 == 1) {
                  cVar20 = '*';
                  goto LAB_001302a8;
                }
              }
              else if (param_3 == 3) {
                uVar13 = *param_2 & 3;
                if (uVar13 != 0) {
                  local_510 = *(undefined8 *)(param_2 + 2);
                  local_508 = *(undefined8 *)(param_2 + 4);
                  local_518[0] = local_518[0] & 0xfffffffc | uVar13;
                  local_500 = *(undefined8 *)(param_2 + 6);
                  local_4f8 = *(double *)(param_2 + 8);
                }
                uVar13 = *param_2 & 0xc;
                if (uVar13 != 0) {
                  local_4f0 = *(undefined8 *)(param_2 + 10);
                  local_4e8 = *(undefined8 *)(param_2 + 0xc);
                  local_518[0] = uVar13 | local_518[0] & 0xfffffff3;
                  local_4e0 = *(undefined8 *)(param_2 + 0xe);
                  local_4d8 = *(double *)(param_2 + 0x10);
                }
                if (-1 < (int)param_2[0x14]) {
                  local_4c8 = param_2[0x14];
                }
                if (-1 < (int)param_2[0x15]) {
                  local_4c4 = param_2[0x15];
                }
                uVar13 = param_2[0x16];
                uVar3 = uVar13;
                if (((int)uVar13 < 0) && (uVar3 = local_4c0, uVar13 != 0xffffffff)) {
                  uVar3 = -uVar13;
                }
                local_4c0 = uVar3;
                pcVar6 = (char *)((long)&uStack_449 + 1);
                pcVar7 = strchr(pcVar9,0x2d);
                uVar15 = (long)pcVar7 - (long)pcVar9;
                pcVar5 = pcVar5 + (long)(int)uVar15 + 2;
                uVar10 = extraout_RDX;
                __sprintf_chk(pcVar6,1,0x400,"%*.*s",uVar15 & 0xffffffff,uVar15 & 0xffffffff,pcVar9,
                              extraout_RDX);
                pcVar7 = strchr(pcVar5,0x2d);
                uVar16 = 0xffffffffffffffff;
                uVar15 = (long)pcVar7 - (long)pcVar5;
                pcVar7 = pcVar6;
                do {
                  if (uVar16 == 0) break;
                  uVar16 = uVar16 - 1;
                  cVar20 = *pcVar7;
                  pcVar7 = pcVar7 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                pcVar7 = pcVar5 + (long)(int)uVar15 + 1;
                __sprintf_chk((long)&uStack_449 + ~uVar16,1,0xffffffffffffffff,&DAT_00136c5e,
                              uVar15 & 0xffffffff,uVar15 & 0xffffffff,pcVar5,uVar10);
                pcVar11 = strchr(pcVar7,0x2d);
                uVar15 = 0xffffffffffffffff;
                pcVar5 = pcVar6;
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar20 = *pcVar5;
                  pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                uVar16 = (long)pcVar11 - (long)pcVar7;
                pcVar5 = pcVar7 + (long)(int)uVar16 + 1;
                __sprintf_chk((long)&uStack_449 + ~uVar15,1,0xffffffffffffffff,&DAT_00136c5e,
                              uVar16 & 0xffffffff,uVar16 & 0xffffffff,pcVar7,uVar10);
                pcVar11 = strchr(pcVar5,0x2d);
                uVar15 = 0xffffffffffffffff;
                pcVar7 = pcVar6;
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar20 = *pcVar7;
                  pcVar7 = pcVar7 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                __sprintf_chk((long)&uStack_449 + ~uVar15,1,0xffffffffffffffff,&DAT_00136c5e,
                              (long)pcVar11 - (long)pcVar5,(long)pcVar11 - (long)pcVar5 & 0xffffffff
                              ,pcVar5);
                uVar15 = 0xffffffffffffffff;
                pcVar5 = pcVar6;
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar20 = *pcVar5;
                  pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                *(undefined2 *)((long)&uStack_449 + ~uVar15) = 0x2d;
                lVar14 = (long)&uStack_449 + ~uVar15 + 1;
                if ((local_518[0] & 3) == 2) {
                  __memcpy_chk(lVar14,&DAT_00136c65,2);
                  uVar10 = FUN_0012fad0(local_510,local_498,0);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_508,local_498,1);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_500,local_498,1);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_4f8,local_498,1);
                  uVar15 = 0xffffffffffffffff;
                  pcVar5 = pcVar6;
                  do {
                    if (uVar15 == 0) break;
                    uVar15 = uVar15 - 1;
                    cVar20 = *pcVar5;
                    pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                  } while (cVar20 != '\0');
                  lVar14 = __stpcpy_chk((long)&uStack_449 + ~uVar15,uVar10,0x400);
                  __memcpy_chk(lVar14,&DAT_00132a5f,2,auStack_48 + -lVar14);
                }
                else {
                  __sprintf_chk(lVar14,1,0xffffffffffffffff,"%d");
                }
                uVar15 = 0xffffffffffffffff;
                pcVar5 = pcVar6;
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar20 = *pcVar5;
                  pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                *(undefined2 *)((long)&uStack_449 + ~uVar15) = 0x2d;
                lVar14 = (long)&uStack_449 + ~uVar15 + 1;
                if ((local_518[0] & 0xc) == 8) {
                  __memcpy_chk(lVar14,&DAT_00136c65,2,auStack_48 + -lVar14);
                  uVar10 = FUN_0012fad0(local_4f0,local_498,0);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_4e8,local_498,1);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_4e0,local_498,1);
                  __strcat_chk(pcVar6,uVar10,0x400);
                  uVar10 = FUN_0012fad0(local_4d8,local_498,1);
                  uVar15 = 0xffffffffffffffff;
                  pcVar5 = pcVar6;
                  do {
                    if (uVar15 == 0) break;
                    uVar15 = uVar15 - 1;
                    cVar20 = *pcVar5;
                    pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                  } while (cVar20 != '\0');
                  uVar10 = __stpcpy_chk((long)&uStack_449 + ~uVar15,uVar10,0x400);
                  __memcpy_chk(uVar10,&DAT_00132a5f,2);
                }
                else {
                  __sprintf_chk(lVar14,1,0xffffffffffffffff,"%d",(int)(local_4d8 * 10.0 + 0.5));
                }
                uVar15 = 0xffffffffffffffff;
                pcVar5 = pcVar6;
                do {
                  if (uVar15 == 0) break;
                  uVar15 = uVar15 - 1;
                  cVar20 = *pcVar5;
                  pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                } while (cVar20 != '\0');
                __sprintf_chk((long)&uStack_449 + ~uVar15,1,0xffffffffffffffff,"-%d-%d%*.*s%d%s",
                              local_4c8,local_4c4,iVar4,iVar4,pcVar18,local_4c0,pcVar19,~uVar15);
                strcpy(pcVar9,pcVar6);
                if ((*(byte *)param_2 & 0x40) == 0) {
                  uVar13 = param_2[0x1a];
                  lVar14 = *(long *)(param_2 + 0x1c);
                  uVar10 = 1;
                  if (uVar13 == 0) goto LAB_0012ffa3;
                }
                else {
                  uVar13 = param_2[0x1a];
                  if (uVar13 == 0) {
                    strcat(param_1,"[]");
                    goto LAB_001303a7;
                  }
                  lVar14 = *(long *)(param_2 + 0x1c);
                }
                strcat(param_1,"[");
                for (lVar8 = 0; (int)lVar8 < (int)uVar13; lVar8 = lVar8 + 1) {
                  uVar15 = 0xffffffffffffffff;
                  pcVar5 = param_1;
                  do {
                    if (uVar15 == 0) break;
                    uVar15 = uVar15 - 1;
                    cVar20 = *pcVar5;
                    pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                  } while (cVar20 != '\0');
                  if (0x3f1 < ~uVar15 - 1) break;
                  if ((int)lVar8 != 0) {
                    (param_1 + (~uVar15 - 1))[0] = ' ';
                    (param_1 + (~uVar15 - 1))[1] = '\0';
                  }
                  uVar15 = 0xffffffffffffffff;
                  pcVar5 = param_1;
                  do {
                    if (uVar15 == 0) break;
                    uVar15 = uVar15 - 1;
                    cVar20 = *pcVar5;
                    pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                  } while (cVar20 != '\0');
                  __sprintf_chk(param_1 + (~uVar15 - 1),1,0xffffffffffffffff,"%d",
                                (uint)*(byte *)(lVar14 + lVar8 * 4) * 0x100 +
                                (uint)*(byte *)(lVar14 + 1 + lVar8 * 4));
                  bVar2 = *(byte *)(lVar14 + 3 + lVar8 * 4);
                  if ((*(byte *)(lVar14 + 1 + lVar8 * 4) != bVar2) ||
                     (*(char *)(lVar14 + lVar8 * 4) != *(char *)(lVar14 + 2 + lVar8 * 4))) {
                    uVar15 = 0xffffffffffffffff;
                    pcVar5 = param_1;
                    do {
                      if (uVar15 == 0) break;
                      uVar15 = uVar15 - 1;
                      cVar20 = *pcVar5;
                      pcVar5 = pcVar5 + (ulong)bVar21 * -2 + 1;
                    } while (cVar20 != '\0');
                    __sprintf_chk(param_1 + (~uVar15 - 1),1,0xffffffffffffffff,&DAT_00136c7a,
                                  (uint)*(byte *)(lVar14 + 2 + lVar8 * 4) * 0x100 + (uint)bVar2);
                  }
                }
                strcat(param_1,"]");
                uVar10 = 1;
                goto LAB_0012ffa3;
              }
LAB_001303a7:
              uVar10 = 1;
              goto LAB_0012ffa3;
            }
          }
        }
      }
    }
  }
  else if ((*param_1 == '*') && (param_1[1] == '-')) {
    pcVar5 = param_1 + 2;
    goto LAB_0012ffda;
  }
LAB_0012ffa1:
  uVar10 = 0;
LAB_0012ffa3:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar10;
}



char * FontParseRanges(char *param_1,undefined4 *param_2)

{
  char cVar1;
  char *pcVar2;
  ulong uVar3;
  int iVar4;
  char *pcVar5;
  long in_FS_OFFSET;
  ushort local_44;
  ushort local_42;
  char *local_40;
  char *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_38 = (char *)0x0;
  pcVar2 = strchr(param_1,0x2d);
  if (pcVar2 == (char *)0x0) {
    *param_2 = 0;
    pcVar2 = (char *)0x0;
  }
  else {
    iVar4 = 1;
    do {
      iVar4 = iVar4 + 1;
      pcVar2 = strchr(pcVar2 + 1,0x2d);
      if (pcVar2 == (char *)0x0) break;
    } while (iVar4 < 0xe);
    *param_2 = 0;
    if ((pcVar2 != (char *)0x0) && (pcVar2 = strchr(pcVar2,0x5b), pcVar2 != (char *)0x0)) {
      pcVar5 = pcVar2 + 1;
      if ((pcVar2[1] == ']') || (pcVar2[1] == '\0')) {
        pcVar2 = (char *)0x0;
      }
      else {
        while ((uVar3 = strtol(pcVar5,&local_40,0), pcVar2 = local_38, uVar3 < 0x10000 &&
               (local_40 != pcVar5))) {
          local_44 = (ushort)uVar3 << 8 | (ushort)uVar3 >> 8;
          cVar1 = *local_40;
          pcVar5 = local_40;
          local_42 = local_44;
          if (cVar1 == ']') {
            if (false) {
LAB_00130c18:
              do {
                pcVar5 = pcVar5 + 1;
              } while (*pcVar5 == ' ');
            }
LAB_00130c21:
            iVar4 = add_range(&local_44,param_2,&local_38,1);
            pcVar2 = local_38;
            if (iVar4 != 0x55) break;
          }
          else {
            if (cVar1 == ' ') goto LAB_00130c18;
            if (((cVar1 != '_') ||
                (pcVar5 = local_40 + 1, uVar3 = strtol(pcVar5,&local_40,0), pcVar2 = local_38,
                local_40 == pcVar5)) || (0xffff < uVar3)) break;
            local_42 = (ushort)uVar3 << 8 | (ushort)uVar3 >> 8;
            pcVar2 = local_40;
            pcVar5 = local_40;
            if (*local_40 == ']') {
              if (true) goto LAB_00130c21;
LAB_00130c70:
              do {
                pcVar5 = pcVar2 + 1;
                if (pcVar2[1] != ' ') break;
                pcVar5 = pcVar2 + 2;
                pcVar2 = pcVar5;
              } while (*pcVar5 == ' ');
              goto LAB_00130c21;
            }
            if (*local_40 == ' ') goto LAB_00130c70;
          }
          pcVar2 = local_38;
          if ((*pcVar5 == '\0') || (*pcVar5 == ']')) break;
        }
      }
    }
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pcVar2;
}



undefined8
CheckFSFormat(uint param_1,ulong param_2,uint *param_3,uint *param_4,uint *param_5,uint *param_6,
             uint *param_7)

{
  uint uVar1;
  
  if ((param_2 & 2) != 0) {
    *param_3 = param_1 >> 1 & 1;
  }
  if ((param_2 & 1) != 0) {
    *param_4 = param_1 & 1;
  }
  if ((param_2 & 0x10) != 0) {
    uVar1 = param_1 & 0x3000;
    if (uVar1 == 0x1000) {
      *param_5 = 2;
    }
    else if (uVar1 == 0x2000) {
      *param_5 = 4;
    }
    else {
      if (uVar1 != 0) {
        *param_5 = uVar1;
        return 0x58;
      }
      *param_5 = 1;
    }
  }
  if ((param_2 & 8) != 0) {
    uVar1 = param_1 & 0x300;
    if (uVar1 == 0x100) {
      *param_6 = 2;
    }
    else if (uVar1 == 0x200) {
      *param_6 = 4;
    }
    else {
      if (uVar1 != 0) {
        *param_6 = uVar1;
        return 0x58;
      }
      *param_6 = 1;
    }
  }
  if ((param_2 & 4) != 0) {
    *param_7 = param_1 & 0xc;
    if (((param_1 & 8) != 0) && ((param_1 & 0xc) != 8)) {
      return 0x58;
    }
  }
  return 0x55;
}



void register_fpe_functions(void)

{
  BuiltinRegisterFpeFunctions();
  FontFileRegisterFpeFunctions();
  fs_register_fpe_functions();
  return;
}



void EmptyFontPatternCache(undefined8 *param_1)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  
  puVar1 = param_1;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 1;
  } while (puVar1 != param_1 + 0x10);
  puVar1 = param_1 + 0x16;
  do {
    puVar1[-6] = puVar1;
    puVar2 = puVar1 + 6;
    puVar1[-5] = 0;
    puVar1[-1] = 0;
    free((void *)puVar1[-3]);
    puVar1[-3] = 0;
    *(undefined2 *)(puVar1 + -4) = 0;
    puVar1 = puVar2;
  } while (puVar2 != param_1 + 0x196);
  param_1[400] = param_1 + 0x10;
  param_1[0x18a] = 0;
  return;
}



void * MakeFontPatternCache(void)

{
  void *pvVar1;
  undefined2 *puVar2;
  undefined2 *puVar3;
  
  pvVar1 = malloc(0xc88);
  if (pvVar1 != (void *)0x0) {
    puVar2 = (undefined2 *)((long)pvVar1 + 0x90);
    do {
      *(undefined8 *)(puVar2 + 4) = 0;
      puVar3 = puVar2 + 0x18;
      *puVar2 = 0;
      *(undefined8 *)(puVar2 + 0xc) = 0;
      puVar2 = puVar3;
    } while (puVar3 != (undefined2 *)((long)pvVar1 + 0xc90));
    EmptyFontPatternCache(pvVar1);
  }
  return pvVar1;
}



void FreeFontPatternCache(void *param_1)

{
  void *__ptr;
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)((long)param_1 + 0x98);
  do {
    __ptr = (void *)*puVar1;
    puVar1 = puVar1 + 6;
    free(__ptr);
  } while (puVar1 != (undefined8 *)((long)param_1 + 0xc98));
  free(param_1);
  return;
}



void CacheFontPattern(long param_1,char *param_2,int param_3,long param_4)

{
  char *pcVar1;
  long *plVar2;
  char cVar3;
  uint uVar4;
  void *__dest;
  ulong uVar5;
  long lVar6;
  long lVar7;
  size_t __size;
  long *plVar8;
  
  __size = (size_t)param_3;
  __dest = malloc(__size);
  if (__dest != (void *)0x0) {
    plVar8 = *(long **)(param_1 + 0xc80);
    if (plVar8 == (long *)0x0) {
      uVar4 = rand();
      uVar5 = (ulong)((uVar4 ^ (int)uVar4 >> 0x1f) - ((int)uVar4 >> 0x1f) & 0x3f);
      lVar7 = uVar5 * 0x30;
      plVar8 = (long *)(param_1 + 0x80 + lVar7);
      lVar7 = lVar7 + param_1;
      lVar6 = *(long *)(lVar7 + 0x80);
      if (lVar6 != 0) {
        *(undefined8 *)(lVar6 + 8) = *(undefined8 *)(lVar7 + 0x88);
        lVar6 = *(long *)(lVar7 + 0x80);
      }
      lVar7 = uVar5 * 0x30 + param_1;
      **(long **)(lVar7 + 0x88) = lVar6;
      free(*(void **)(lVar7 + 0x98));
    }
    else {
      *(long *)(param_1 + 0xc80) = *plVar8;
    }
    memcpy(__dest,param_2,__size);
    plVar8[3] = (long)__dest;
    *(short *)(plVar8 + 2) = (short)param_3;
    if (param_3 == 0) {
      uVar4 = 0;
      lVar6 = param_1;
    }
    else {
      pcVar1 = param_2 + (ulong)(param_3 - 1) + 1;
      uVar4 = 0;
      do {
        cVar3 = *param_2;
        param_2 = param_2 + 1;
        uVar4 = uVar4 * 2 ^ (int)cVar3;
      } while (param_2 != pcVar1);
      uVar4 = (uVar4 ^ (int)uVar4 >> 0x1f) - ((int)uVar4 >> 0x1f);
      __size = (size_t)(uVar4 & 0xf);
      lVar6 = param_1 + __size * 8;
    }
    plVar2 = (long *)(param_1 + __size * 8);
    *(uint *)(plVar8 + 4) = uVar4;
    lVar7 = *plVar2;
    *plVar8 = lVar7;
    if (lVar7 != 0) {
      *(long **)(lVar7 + 8) = plVar8;
    }
    *plVar2 = (long)plVar8;
    plVar8[1] = lVar6;
    plVar8[5] = param_4;
  }
  return;
}



long * FindCachedFontPattern(long param_1,char *param_2,int param_3)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  char *pcVar4;
  uint uVar5;
  long *plVar6;
  
  if (param_3 == 0) {
    uVar5 = 0;
    uVar2 = 0;
  }
  else {
    uVar2 = 0;
    pcVar4 = param_2;
    do {
      cVar1 = *pcVar4;
      pcVar4 = pcVar4 + 1;
      uVar2 = uVar2 * 2 ^ (int)cVar1;
    } while (pcVar4 != param_2 + (ulong)(param_3 - 1) + 1);
    uVar5 = (uVar2 ^ (int)uVar2 >> 0x1f) - ((int)uVar2 >> 0x1f);
    uVar2 = uVar5 & 0xf;
  }
  plVar6 = *(long **)(param_1 + (long)(int)uVar2 * 8);
  if (plVar6 != (long *)0x0) {
    do {
      if (((*(short *)(plVar6 + 2) == param_3) && (*(uint *)(plVar6 + 4) == uVar5)) &&
         (iVar3 = memcmp((void *)plVar6[3],param_2,(long)param_3), iVar3 == 0)) {
        return (long *)plVar6[5];
      }
      plVar6 = (long *)*plVar6;
    } while (plVar6 != (long *)0x0);
  }
  return plVar6;
}



void RemoveCachedFontPattern(long param_1,long param_2)

{
  long lVar1;
  long *plVar2;
  long *plVar3;
  
  plVar2 = (long *)(param_1 + 0x80);
  do {
    while (plVar2[5] != param_2) {
      plVar2 = plVar2 + 6;
      if (plVar2 == (long *)(param_1 + 0xc80)) {
        return;
      }
    }
    lVar1 = *plVar2;
    plVar2[5] = 0;
    if (lVar1 != 0) {
      *(long *)(lVar1 + 8) = plVar2[1];
      lVar1 = *plVar2;
    }
    *(long *)plVar2[1] = lVar1;
    *plVar2 = *(long *)(param_1 + 0xc80);
    *(long **)(param_1 + 0xc80) = plVar2;
    plVar3 = plVar2 + 6;
    free((void *)plVar2[3]);
    plVar2[3] = 0;
    plVar2 = plVar3;
  } while (plVar3 != (long *)(param_1 + 0xc80));
  return;
}



void AllocateFontPrivateIndex(void)

{
  DAT_0013fd48 = DAT_0013fd48 + 1;
  return;
}



void CreateFontRec(void)

{
  int iVar1;
  void *pvVar2;
  
  iVar1 = DAT_0013fd48;
  pvVar2 = calloc((long)(DAT_0013fd48 * 8 + 0xb8),1);
  if ((pvVar2 != (void *)0x0) && (*(int *)((long)pvVar2 + 0xa8) = iVar1 + -1, iVar1 != 0)) {
    *(long *)((long)pvVar2 + 0xb0) = (long)pvVar2 + 0xb8;
  }
  return;
}



void DestroyFontRec(void *param_1)

{
  void *__ptr;
  
  __ptr = *(void **)((long)param_1 + 0xb0);
  if ((__ptr != (void *)0x0) && (__ptr != (void *)((long)param_1 + 0xb8))) {
    free(__ptr);
  }
  free(param_1);
  return;
}



void ResetFontPrivateIndex(void)

{
  DAT_0013fd48 = 0;
  return;
}



undefined8 _FontSetNewPrivate(long param_1,int param_2,undefined8 param_3)

{
  void *__src;
  void *__dest;
  int iVar1;
  size_t __size;
  
  iVar1 = *(int *)(param_1 + 0xa8);
  __src = *(void **)(param_1 + 0xb0);
  if (iVar1 < param_2) {
    __size = (long)(param_2 + 1) << 3;
    if (__src == (void *)0x0) {
      __src = malloc(__size);
      if (__src == (void *)0x0) {
        return 0;
      }
      iVar1 = iVar1 + 1;
    }
    else if (__src == (void *)(param_1 + 0xb8)) {
      __dest = malloc(__size);
      if (__dest == (void *)0x0) {
        return 0;
      }
      iVar1 = iVar1 + 1;
      __src = memcpy(__dest,__src,(long)iVar1 << 3);
    }
    else {
      __src = realloc(__src,__size);
      if (__src == (void *)0x0) {
        return 0;
      }
      iVar1 = *(int *)(param_1 + 0xa8) + 1;
    }
    *(void **)(param_1 + 0xb0) = __src;
    *(int *)(param_1 + 0xa8) = iVar1;
    if (iVar1 < param_2) {
      while( true ) {
        *(undefined8 *)((long)__src + (long)iVar1 * 8) = 0;
        iVar1 = *(int *)(param_1 + 0xa8) + 1;
        *(int *)(param_1 + 0xa8) = iVar1;
        if (param_2 <= iVar1) break;
        __src = *(void **)(param_1 + 0xb0);
      }
      __src = *(void **)(param_1 + 0xb0);
    }
  }
  *(undefined8 *)((long)__src + (long)param_2 * 8) = param_3;
  return 1;
}



void BitOrderInvert(byte *param_1,int param_2)

{
  byte *pbVar1;
  byte *pbVar2;
  
  if (0 < param_2) {
    pbVar1 = param_1;
    do {
      pbVar2 = pbVar1 + 1;
      *pbVar1 = (&DAT_00136c80)[*pbVar1];
      pbVar1 = pbVar2;
    } while (param_1 + (ulong)(param_2 - 1) + 1 != pbVar2);
  }
  return;
}



void TwoByteSwap(undefined *param_1,int param_2)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      uVar1 = *puVar2;
      puVar3 = puVar2 + 2;
      *puVar2 = puVar2[1];
      puVar2[1] = uVar1;
      puVar2 = puVar3;
    } while (puVar3 != param_1 + (ulong)(param_2 - 1U >> 1) * 2 + 2);
  }
  return;
}



void FourByteSwap(undefined *param_1,int param_2)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      uVar1 = *puVar2;
      puVar3 = puVar2 + 4;
      *puVar2 = puVar2[3];
      puVar2[3] = uVar1;
      uVar1 = puVar2[1];
      puVar2[1] = puVar2[2];
      puVar2[2] = uVar1;
      puVar2 = puVar3;
    } while (puVar3 != param_1 + (ulong)(param_2 - 1U >> 2) * 4 + 4);
  }
  return;
}



int RepadBitmap(long param_1,undefined *param_2,uint param_3,uint param_4,int param_5,int param_6)

{
  long lVar1;
  int iVar2;
  int iVar3;
  ulong uVar4;
  undefined *puVar5;
  int iVar7;
  int iVar8;
  int iVar9;
  bool bVar10;
  undefined *puVar6;
  
  if (param_3 == 4) {
    iVar9 = (param_5 + 0x1f >> 5) << 2;
  }
  else if (param_3 < 5) {
    if (param_3 == 1) {
      iVar9 = param_5 + 7 >> 3;
    }
    else {
      if (param_3 != 2) {
        return 0;
      }
      iVar9 = (param_5 + 0xf >> 4) * 2;
    }
  }
  else {
    if (param_3 != 8) {
      return 0;
    }
    iVar9 = (param_5 + 0x3f >> 6) << 3;
  }
  if (param_4 == 4) {
    iVar2 = (param_5 + 0x1f >> 5) << 2;
  }
  else if (param_4 < 5) {
    if (param_4 == 1) {
      iVar2 = param_5 + 7 >> 3;
    }
    else {
      if (param_4 != 2) {
        return 0;
      }
      iVar2 = (param_5 + 0xf >> 4) * 2;
    }
  }
  else {
    if (param_4 != 8) {
      return 0;
    }
    iVar2 = (param_5 + 0x3f >> 6) << 3;
  }
  iVar7 = iVar2;
  if (iVar9 <= iVar2) {
    iVar7 = iVar9;
  }
  if (0 < param_6) {
    iVar8 = 0;
    lVar1 = (ulong)(iVar7 - 1) + 1;
    do {
      while( true ) {
        uVar4 = 0;
        if (iVar7 < 1) {
          iVar3 = 0;
        }
        else {
          do {
            param_2[uVar4] = *(undefined *)(param_1 + uVar4);
            bVar10 = uVar4 != iVar7 - 1;
            uVar4 = uVar4 + 1;
          } while (bVar10);
          param_1 = param_1 + lVar1;
          param_2 = param_2 + lVar1;
          iVar3 = iVar7;
        }
        if (iVar2 <= iVar3) break;
        puVar6 = param_2;
        do {
          puVar5 = puVar6 + 1;
          *puVar6 = 0;
          puVar6 = puVar5;
        } while (puVar5 != param_2 + (ulong)(uint)((iVar2 + -1) - iVar3) + 1);
        iVar8 = iVar8 + 1;
        param_1 = param_1 + (iVar9 - iVar7);
        param_2 = param_2 + (ulong)(uint)((iVar2 + -1) - iVar3) + 1;
        if (param_6 == iVar8) goto LAB_00131529;
      }
      iVar8 = iVar8 + 1;
      param_1 = param_1 + (iVar9 - iVar7);
    } while (param_6 != iVar8);
  }
LAB_00131529:
  return iVar2 * param_6;
}



undefined8 client_auth_generation(void)

{
  return 0;
}



undefined8 ClientSignal(void)

{
  return 0xffffffff;
}



void DeleteFontClientID(void)

{
  return;
}



void ErrorF(void)

{
  return;
}



void FatalError(void)

{
  return;
}



undefined8 find_old_font(void)

{
  return 0;
}



undefined8 GetClientResolutions(void)

{
  return 0;
}



undefined8 GetDefaultPointSize(void)

{
  return 0;
}



undefined8 GetNewFontClientID(void)

{
  return 0;
}



undefined8 GetTimeInMillis(void)

{
  return 0;
}



undefined8 init_fs_handlers(void)

{
  return 0x55;
}



undefined8 RegisterFPEFunctions(void)

{
  return 0;
}



void remove_fs_handlers(void)

{
  return;
}



undefined8 set_font_authorizations(void)

{
  return 0;
}



undefined8 StoreFontClientFont(void)

{
  return 0;
}



void _DT_FINI(void)

{
  return;
}



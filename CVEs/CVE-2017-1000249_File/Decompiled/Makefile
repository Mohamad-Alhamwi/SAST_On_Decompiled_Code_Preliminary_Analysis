CC = gcc
CFLAGS = -w -I ../../../decomp2recomp/include/ -fPIC

SRC = libmagic_stripped_recompilable.c
OBJ = libmagic_stripped_recompilable.o
SO  = libmagic_stripped_recompilable.so
ERRLOG = compile_errors.log

$(SO): $(OBJ)
	$(CC) -shared -o $(SO) $(OBJ) 2>> $(ERRLOG)

$(OBJ): $(SRC)
	$(CC) $(CFLAGS) -c $(SRC) -o $(OBJ) 2>> $(ERRLOG)

clean:
	rm -f $(SO) $(OBJ) $(ERRLOG)
